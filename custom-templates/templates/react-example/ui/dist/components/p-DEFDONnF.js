/*! choices.js v11.1.0 | Â© 2025 Josh Johnson | https://github.com/jshjohnson/Choices#readme */
var t=function(i,e){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e))t[e]=i[e]};return t(i,e)};function i(i,e){if(typeof e!=="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var e=function(){e=Object.assign||function t(i){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))i[r]=e[r]}return i};return e.apply(this,arguments)};function n(t,i,e){for(var n=0,s=i.length,r;n<s;n++){if(r||!(n in i)){if(!r)r=Array.prototype.slice.call(i,0,n);r[n]=i[n]}}return t.concat(r||Array.prototype.slice.call(i))}typeof SuppressedError==="function"?SuppressedError:function(t,i,e){var n=new Error(e);return n.name="SuppressedError",n.error=t,n.suppressed=i,n};var s={ADD_CHOICE:"ADD_CHOICE",REMOVE_CHOICE:"REMOVE_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM"};var r={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"};var u={TAB_KEY:9,SHIFT_KEY:16,BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34};var a=["fuseOptions","classNames"];var h={Text:"text",SelectOne:"select-one",SelectMultiple:"select-multiple"};var o=function(t){return{type:s.ADD_CHOICE,choice:t}};var c=function(t){return{type:s.REMOVE_CHOICE,choice:t}};var f=function(t){return{type:s.FILTER_CHOICES,results:t}};var l=function(t){return{type:s.ACTIVATE_CHOICES,active:t}};var d=function(t){return{type:s.ADD_GROUP,group:t}};var v=function(t){return{type:s.ADD_ITEM,item:t}};var m=function(t){return{type:s.REMOVE_ITEM,item:t}};var p=function(t,i){return{type:s.HIGHLIGHT_ITEM,item:t,highlighted:i}};var g=function(t,i){return Math.floor(Math.random()*(i-t)+t)};var b=function(t){return Array.from({length:t},(function(){return g(0,36).toString(36)})).join("")};var y=function(t,i){var e=t.id||t.name&&"".concat(t.name,"-").concat(b(2))||b(4);e=e.replace(/(:|\.|\[|\]|,)/g,"");e="".concat(i,"-").concat(e);return e};var w=function(t,i,e){if(e===void 0){e=1}var n="".concat(e>0?"next":"previous","ElementSibling");var s=t[n];while(s){if(s.matches(i)){return s}s=s[n]}return null};var x=function(t,i,e){if(e===void 0){e=1}var n;if(e>0){n=i.scrollTop+i.offsetHeight>=t.offsetTop+t.offsetHeight}else{n=t.offsetTop>=i.scrollTop}return n};var M=function(t){if(typeof t!=="string"){if(t===null||t===undefined){return""}if(typeof t==="object"){if("raw"in t){return M(t.raw)}if("trusted"in t){return t.trusted}}return t}return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")};var O=function(){var t=document.createElement("div");return function(i){t.innerHTML=i.trim();var e=t.children[0];while(t.firstChild){t.removeChild(t.firstChild)}return e}}();var C=function(t,i){return typeof t==="function"?t(M(i),i):t};var E=function(t){return typeof t==="function"?t():t};var I=function(t){if(typeof t==="string"){return t}if(typeof t==="object"){if("trusted"in t){return t.trusted}if("raw"in t){return t.raw}}return""};var _=function(t){if(typeof t==="string"){return t}if(typeof t==="object"){if("escaped"in t){return t.escaped}if("trusted"in t){return t.trusted}}return""};var S=function(t,i){return t?_(i):M(i)};var A=function(t,i,e){t.innerHTML=S(i,e)};var L=function(t,i){var e=t.value,n=t.label,s=n===void 0?e:n;var r=i.value,u=i.label,a=u===void 0?r:u;return I(s).localeCompare(I(a),[],{sensitivity:"base",ignorePunctuation:true,numeric:true})};var T=function(t,i){return t.rank-i.rank};var j=function(t,i,e){if(e===void 0){e=null}var n=new CustomEvent(i,{detail:e,bubbles:true,cancelable:true});return t.dispatchEvent(n)};var k=function(t,i){var e=Object.keys(t).sort();var n=Object.keys(i).sort();return e.filter((function(t){return n.indexOf(t)<0}))};var R=function(t){return Array.isArray(t)?t:[t]};var N=function(t){if(t&&Array.isArray(t)){return t.map((function(t){return".".concat(t)})).join("")}return".".concat(t)};var $=function(t,i){var e;(e=t.classList).add.apply(e,R(i))};var P=function(t,i){var e;(e=t.classList).remove.apply(e,R(i))};var F=function(t){if(typeof t!=="undefined"){try{return JSON.parse(t)}catch(i){return t}}return{}};var H=function(t,i,e){var n=t.itemEl;if(n){P(n,e);$(n,i)}};var D=function(){function t(t){var i=t.element,e=t.type,n=t.classNames;this.element=i;this.classNames=n;this.type=e;this.isActive=false}t.prototype.show=function(){$(this.element,this.classNames.activeState);this.element.setAttribute("aria-expanded","true");this.isActive=true;return this};t.prototype.hide=function(){P(this.element,this.classNames.activeState);this.element.setAttribute("aria-expanded","false");this.isActive=false;return this};return t}();var K=function(){function t(t){var i=t.element,e=t.type,n=t.classNames,s=t.position;this.element=i;this.classNames=n;this.type=e;this.position=s;this.isOpen=false;this.isFlipped=false;this.isDisabled=false;this.isLoading=false}t.prototype.shouldFlip=function(t,i){var e=false;if(this.position==="auto"){e=this.element.getBoundingClientRect().top-i>=0&&!window.matchMedia("(min-height: ".concat(t+1,"px)")).matches}else if(this.position==="top"){e=true}return e};t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)};t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")};t.prototype.open=function(t,i){$(this.element,this.classNames.openState);this.element.setAttribute("aria-expanded","true");this.isOpen=true;if(this.shouldFlip(t,i)){$(this.element,this.classNames.flippedState);this.isFlipped=true}};t.prototype.close=function(){P(this.element,this.classNames.openState);this.element.setAttribute("aria-expanded","false");this.removeActiveDescendant();this.isOpen=false;if(this.isFlipped){P(this.element,this.classNames.flippedState);this.isFlipped=false}};t.prototype.addFocusState=function(){$(this.element,this.classNames.focusState)};t.prototype.removeFocusState=function(){P(this.element,this.classNames.focusState)};t.prototype.enable=function(){P(this.element,this.classNames.disabledState);this.element.removeAttribute("aria-disabled");if(this.type===h.SelectOne){this.element.setAttribute("tabindex","0")}this.isDisabled=false};t.prototype.disable=function(){$(this.element,this.classNames.disabledState);this.element.setAttribute("aria-disabled","true");if(this.type===h.SelectOne){this.element.setAttribute("tabindex","-1")}this.isDisabled=true};t.prototype.wrap=function(t){var i=this.element;var e=t.parentNode;if(e){if(t.nextSibling){e.insertBefore(i,t.nextSibling)}else{e.appendChild(i)}}i.appendChild(t)};t.prototype.unwrap=function(t){var i=this.element;var e=i.parentNode;if(e){e.insertBefore(t,i);e.removeChild(i)}};t.prototype.addLoadingState=function(){$(this.element,this.classNames.loadingState);this.element.setAttribute("aria-busy","true");this.isLoading=true};t.prototype.removeLoadingState=function(){P(this.element,this.classNames.loadingState);this.element.removeAttribute("aria-busy");this.isLoading=false};return t}();var V=function(){function t(t){var i=t.element,e=t.type,n=t.classNames,s=t.preventPaste;this.element=i;this.type=e;this.classNames=n;this.preventPaste=s;this.isFocussed=this.element.isEqualNode(document.activeElement);this.isDisabled=i.disabled;this._onPaste=this._onPaste.bind(this);this._onInput=this._onInput.bind(this);this._onFocus=this._onFocus.bind(this);this._onBlur=this._onBlur.bind(this)}Object.defineProperty(t.prototype,"placeholder",{set:function(t){this.element.placeholder=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.value=t},enumerable:false,configurable:true});t.prototype.addEventListeners=function(){var t=this.element;t.addEventListener("paste",this._onPaste);t.addEventListener("input",this._onInput,{passive:true});t.addEventListener("focus",this._onFocus,{passive:true});t.addEventListener("blur",this._onBlur,{passive:true})};t.prototype.removeEventListeners=function(){var t=this.element;t.removeEventListener("input",this._onInput);t.removeEventListener("paste",this._onPaste);t.removeEventListener("focus",this._onFocus);t.removeEventListener("blur",this._onBlur)};t.prototype.enable=function(){var t=this.element;t.removeAttribute("disabled");this.isDisabled=false};t.prototype.disable=function(){var t=this.element;t.setAttribute("disabled","");this.isDisabled=true};t.prototype.focus=function(){if(!this.isFocussed){this.element.focus()}};t.prototype.blur=function(){if(this.isFocussed){this.element.blur()}};t.prototype.clear=function(t){if(t===void 0){t=true}this.element.value="";if(t){this.setWidth()}return this};t.prototype.setWidth=function(){var t=this.element;t.style.minWidth="".concat(t.placeholder.length+1,"ch");t.style.width="".concat(t.value.length+1,"ch")};t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)};t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")};t.prototype._onInput=function(){if(this.type!==h.SelectOne){this.setWidth()}};t.prototype._onPaste=function(t){if(this.preventPaste){t.preventDefault()}};t.prototype._onFocus=function(){this.isFocussed=true};t.prototype._onBlur=function(){this.isFocussed=false};return t}();var G=4;var U=function(){function t(t){var i=t.element;this.element=i;this.scrollPos=this.element.scrollTop;this.height=this.element.offsetHeight}t.prototype.prepend=function(t){var i=this.element.firstElementChild;if(i){this.element.insertBefore(t,i)}else{this.element.append(t)}};t.prototype.scrollToTop=function(){this.element.scrollTop=0};t.prototype.scrollToChildElement=function(t,i){var e=this;if(!t){return}var n=this.element.offsetHeight;var s=this.element.scrollTop+n;var r=t.offsetHeight;var u=t.offsetTop+r;var a=i>0?this.element.scrollTop+u-s:t.offsetTop;requestAnimationFrame((function(){e._animateScroll(a,i)}))};t.prototype._scrollDown=function(t,i,e){var n=(e-t)/i;var s=n>1?n:1;this.element.scrollTop=t+s};t.prototype._scrollUp=function(t,i,e){var n=(t-e)/i;var s=n>1?n:1;this.element.scrollTop=t-s};t.prototype._animateScroll=function(t,i){var e=this;var n=G;var s=this.element.scrollTop;var r=false;if(i>0){this._scrollDown(s,n,t);if(s<t){r=true}}else{this._scrollUp(s,n,t);if(s>t){r=true}}if(r){requestAnimationFrame((function(){e._animateScroll(t,i)}))}};return t}();var W=function(){function t(t){var i=t.element,e=t.classNames;this.element=i;this.classNames=e;this.isDisabled=false}Object.defineProperty(t.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dir",{get:function(){return this.element.dir},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.setAttribute("value",t);this.element.value=t},enumerable:false,configurable:true});t.prototype.conceal=function(){var t=this.element;$(t,this.classNames.input);t.hidden=true;t.tabIndex=-1;var i=t.getAttribute("style");if(i){t.setAttribute("data-choice-orig-style",i)}t.setAttribute("data-choice","active")};t.prototype.reveal=function(){var t=this.element;P(t,this.classNames.input);t.hidden=false;t.removeAttribute("tabindex");var i=t.getAttribute("data-choice-orig-style");if(i){t.removeAttribute("data-choice-orig-style");t.setAttribute("style",i)}else{t.removeAttribute("style")}t.removeAttribute("data-choice")};t.prototype.enable=function(){this.element.removeAttribute("disabled");this.element.disabled=false;this.isDisabled=false};t.prototype.disable=function(){this.element.setAttribute("disabled","");this.element.disabled=true;this.isDisabled=true};t.prototype.triggerEvent=function(t,i){j(this.element,t,i||{})};return t}();var Y=function(t){i(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(W);var q=function(t,i){if(i===void 0){i=true}return typeof t==="undefined"?i:!!t};var B=function(t){if(typeof t==="string"){t=t.split(" ").filter((function(t){return t.length}))}if(Array.isArray(t)&&t.length){return t}return undefined};var J=function(t,i,e){if(e===void 0){e=true}if(typeof t==="string"){var n=M(t);var s=e||n===t?t:{escaped:n,raw:t};var r=J({value:t,label:s,selected:true},false);return r}var u=t;if("choices"in u){if(!i){throw new TypeError("optGroup is not allowed")}var a=u;var h=a.choices.map((function(t){return J(t,false)}));var o={id:0,label:I(a.label)||a.value,active:!!h.length,disabled:!!a.disabled,choices:h};return o}var c=u;var f={id:0,group:null,score:0,rank:0,value:c.value,label:c.label||c.value,active:q(c.active),selected:q(c.selected,false),disabled:q(c.disabled,false),placeholder:q(c.placeholder,false),highlighted:false,labelClass:B(c.labelClass),labelDescription:c.labelDescription,customProperties:c.customProperties};return f};var z=function(t){return t.tagName==="INPUT"};var X=function(t){return t.tagName==="SELECT"};var Q=function(t){return t.tagName==="OPTION"};var Z=function(t){return t.tagName==="OPTGROUP"};var tt=function(t){i(e,t);function e(i){var e=i.element,n=i.classNames,s=i.template,r=i.extractPlaceholder;var u=t.call(this,{element:e,classNames:n})||this;u.template=s;u.extractPlaceholder=r;return u}Object.defineProperty(e.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:false,configurable:true});e.prototype.addOptions=function(t){var i=this;var e=document.createDocumentFragment();t.forEach((function(t){var n=t;if(n.element){return}var s=i.template(n);e.appendChild(s);n.element=s}));this.element.appendChild(e)};e.prototype.optionsAsChoices=function(){var t=this;var i=[];this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach((function(e){if(Q(e)){i.push(t._optionToChoice(e))}else if(Z(e)){i.push(t._optgroupToChoice(e))}}));return i};e.prototype._optionToChoice=function(t){if(!t.hasAttribute("value")&&t.hasAttribute("placeholder")){t.setAttribute("value","");t.value=""}return{id:0,group:null,score:0,rank:0,value:t.value,label:t.label,element:t,active:true,selected:this.extractPlaceholder?t.selected:t.hasAttribute("selected"),disabled:t.disabled,highlighted:false,placeholder:this.extractPlaceholder&&(!t.value||t.hasAttribute("placeholder")),labelClass:typeof t.dataset.labelClass!=="undefined"?B(t.dataset.labelClass):undefined,labelDescription:typeof t.dataset.labelDescription!=="undefined"?t.dataset.labelDescription:undefined,customProperties:F(t.dataset.customProperties)}};e.prototype._optgroupToChoice=function(t){var i=this;var e=t.querySelectorAll("option");var n=Array.from(e).map((function(t){return i._optionToChoice(t)}));return{id:0,label:t.label||"",element:t,active:!!n.length,disabled:t.disabled,choices:n}};return e}(W);var it={containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]};var et={items:[],choices:[],silent:false,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:false,addChoices:false,addItems:true,addItemFilter:function(t){return!!t&&t!==""},removeItems:true,removeItemButton:false,removeItemButtonAlignLeft:false,editItems:false,allowHTML:false,allowHtmlUserInput:false,duplicateItemsAllowed:true,delimiter:",",paste:true,searchEnabled:true,searchChoices:true,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:true,shouldSort:true,shouldSortItems:false,sorter:L,shadowRoot:null,placeholder:true,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(t){return'Press Enter to add <b>"'.concat(t,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(t){return"Remove item: ".concat(t)},maxItemText:function(t){return"Only ".concat(t," values can be added")},valueComparer:function(t,i){return t===i},fuseOptions:{includeScore:true},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:it,appendGroupInSearch:false};var nt=function(t){var i=t.itemEl;if(i){i.remove();t.itemEl=undefined}};function st(t,i,e){var n=t;var r=true;switch(i.type){case s.ADD_ITEM:{i.item.selected=true;var u=i.item.element;if(u){u.selected=true;u.setAttribute("selected","")}n.push(i.item);break}case s.REMOVE_ITEM:{i.item.selected=false;var u=i.item.element;if(u){u.selected=false;u.removeAttribute("selected");var a=u.parentElement;if(a&&X(a)&&a.type===h.SelectOne){a.value=""}}nt(i.item);n=n.filter((function(t){return t.id!==i.item.id}));break}case s.REMOVE_CHOICE:{nt(i.choice);n=n.filter((function(t){return t.id!==i.choice.id}));break}case s.HIGHLIGHT_ITEM:{var o=i.highlighted;var c=n.find((function(t){return t.id===i.item.id}));if(c&&c.highlighted!==o){c.highlighted=o;if(e){H(c,o?e.classNames.highlightedState:e.classNames.selectedState,o?e.classNames.selectedState:e.classNames.highlightedState)}}break}default:{r=false;break}}return{state:n,update:r}}function rt(t,i){var e=t;var n=true;switch(i.type){case s.ADD_GROUP:{e.push(i.group);break}case s.CLEAR_CHOICES:{e=[];break}default:{n=false;break}}return{state:e,update:n}}function ut(t,i,e){var n=t;var r=true;switch(i.type){case s.ADD_CHOICE:{n.push(i.choice);break}case s.REMOVE_CHOICE:{i.choice.choiceEl=undefined;if(i.choice.group){i.choice.group.choices=i.choice.group.choices.filter((function(t){return t.id!==i.choice.id}))}n=n.filter((function(t){return t.id!==i.choice.id}));break}case s.ADD_ITEM:case s.REMOVE_ITEM:{i.item.choiceEl=undefined;break}case s.FILTER_CHOICES:{var u=[];i.results.forEach((function(t){u[t.item.id]=t}));n.forEach((function(t){var i=u[t.id];if(i!==undefined){t.score=i.score;t.rank=i.rank;t.active=true}else{t.score=0;t.rank=0;t.active=false}if(e&&e.appendGroupInSearch){t.choiceEl=undefined}}));break}case s.ACTIVATE_CHOICES:{n.forEach((function(t){t.active=i.active;if(e&&e.appendGroupInSearch){t.choiceEl=undefined}}));break}case s.CLEAR_CHOICES:{n=[];break}default:{r=false;break}}return{state:n,update:r}}var at={groups:rt,items:st,choices:ut};var ht=function(){function t(t){this._state=this.defaultState;this._listeners=[];this._txn=0;this._context=t}Object.defineProperty(t.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:false,configurable:true});t.prototype.changeSet=function(t){return{groups:t,items:t,choices:t}};t.prototype.reset=function(){this._state=this.defaultState;var t=this.changeSet(true);if(this._txn){this._changeSet=t}else{this._listeners.forEach((function(i){return i(t)}))}};t.prototype.subscribe=function(t){this._listeners.push(t);return this};t.prototype.dispatch=function(t){var i=this;var e=this._state;var n=false;var s=this._changeSet||this.changeSet(false);Object.keys(at).forEach((function(r){var u=at[r](e[r],t,i._context);if(u.update){n=true;s[r]=true;e[r]=u.state}}));if(n){if(this._txn){this._changeSet=s}else{this._listeners.forEach((function(t){return t(s)}))}}};t.prototype.withTxn=function(t){this._txn++;try{t()}finally{this._txn=Math.max(0,this._txn-1);if(!this._txn){var i=this._changeSet;if(i){this._changeSet=undefined;this._listeners.forEach((function(t){return t(i)}))}}}};Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"items",{get:function(){return this.state.items},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"highlightedActiveItems",{get:function(){return this.items.filter((function(t){return t.active&&t.highlighted}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"choices",{get:function(){return this.state.choices},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"activeChoices",{get:function(){return this.choices.filter((function(t){return t.active}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"searchableChoices",{get:function(){return this.choices.filter((function(t){return!t.disabled&&!t.placeholder}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"groups",{get:function(){return this.state.groups},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"activeGroups",{get:function(){var t=this;return this.state.groups.filter((function(i){var e=i.active&&!i.disabled;var n=t.state.choices.some((function(t){return t.active&&!t.disabled}));return e&&n}),[])},enumerable:false,configurable:true});t.prototype.inTxn=function(){return this._txn>0};t.prototype.getChoiceById=function(t){return this.activeChoices.find((function(i){return i.id===t}))};t.prototype.getGroupById=function(t){return this.groups.find((function(i){return i.id===t}))};return t}();var ot={noChoices:"no-choices",noResults:"no-results",addChoice:"add-choice",generic:""};function ct(t,i,e){return(i=vt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:true,configurable:true,writable:true}):t[i]=e,t}function ft(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function lt(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?ft(Object(e),true).forEach((function(i){ct(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ft(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function dt(t,i){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,i);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function vt(t){var i=dt(t,"string");return"symbol"==typeof i?i:i+""}function mt(t){return!Array.isArray?Et(t)==="[object Array]":Array.isArray(t)}function pt(t){if(typeof t=="string"){return t}let i=t+"";return i=="0"&&1/t==-Infinity?"-0":i}function gt(t){return t==null?"":pt(t)}function bt(t){return typeof t==="string"}function yt(t){return typeof t==="number"}function wt(t){return t===true||t===false||Mt(t)&&Et(t)=="[object Boolean]"}function xt(t){return typeof t==="object"}function Mt(t){return xt(t)&&t!==null}function Ot(t){return t!==undefined&&t!==null}function Ct(t){return!t.trim().length}function Et(t){return t==null?t===undefined?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const It="Incorrect 'index' type";const _t=t=>`Invalid value for key ${t}`;const St=t=>`Pattern length exceeds max of ${t}.`;const At=t=>`Missing ${t} property in key`;const Lt=t=>`Property 'weight' in key '${t}' must be a positive integer`;const Tt=Object.prototype.hasOwnProperty;class jt{constructor(t){this._keys=[];this._keyMap={};let i=0;t.forEach((t=>{let e=kt(t);this._keys.push(e);this._keyMap[e.id]=e;i+=e.weight}));this._keys.forEach((t=>{t.weight/=i}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function kt(t){let i=null;let e=null;let n=null;let s=1;let r=null;if(bt(t)||mt(t)){n=t;i=Rt(t);e=Nt(t)}else{if(!Tt.call(t,"name")){throw new Error(At("name"))}const u=t.name;n=u;if(Tt.call(t,"weight")){s=t.weight;if(s<=0){throw new Error(Lt(u))}}i=Rt(u);e=Nt(u);r=t.getFn}return{path:i,id:e,weight:s,src:n,getFn:r}}function Rt(t){return mt(t)?t:t.split(".")}function Nt(t){return mt(t)?t.join("."):t}function $t(t,i){let e=[];let n=false;const s=(t,i,r)=>{if(!Ot(t)){return}if(!i[r]){e.push(t)}else{let u=i[r];const a=t[u];if(!Ot(a)){return}if(r===i.length-1&&(bt(a)||yt(a)||wt(a))){e.push(gt(a))}else if(mt(a)){n=true;for(let t=0,e=a.length;t<e;t+=1){s(a[t],i,r+1)}}else if(i.length){s(a,i,r+1)}}};s(t,bt(i)?i.split("."):i,0);return n?e:e[0]}const Pt={includeMatches:false,findAllMatches:false,minMatchCharLength:1};const Ft={isCaseSensitive:false,includeScore:false,keys:[],shouldSort:true,sortFn:(t,i)=>t.score===i.score?t.idx<i.idx?-1:1:t.score<i.score?-1:1};const Ht={location:0,threshold:.6,distance:100};const Dt={useExtendedSearch:false,getFn:$t,ignoreLocation:false,ignoreFieldNorm:false,fieldNormWeight:1};var Kt=lt(lt(lt(lt({},Ft),Pt),Ht),Dt);const Vt=/[^ ]+/g;function Gt(t=1,i=3){const e=new Map;const n=Math.pow(10,i);return{get(i){const s=i.match(Vt).length;if(e.has(s)){return e.get(s)}const r=1/Math.pow(s,.5*t);const u=parseFloat(Math.round(r*n)/n);e.set(s,u);return u},clear(){e.clear()}}}class Ut{constructor({getFn:t=Kt.getFn,fieldNormWeight:i=Kt.fieldNormWeight}={}){this.norm=Gt(i,3);this.getFn=t;this.isCreated=false;this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t;this._keysMap={};t.forEach(((t,i)=>{this._keysMap[t.id]=i}))}create(){if(this.isCreated||!this.docs.length){return}this.isCreated=true;if(bt(this.docs[0])){this.docs.forEach(((t,i)=>{this._addString(t,i)}))}else{this.docs.forEach(((t,i)=>{this._addObject(t,i)}))}this.norm.clear()}add(t){const i=this.size();if(bt(t)){this._addString(t,i)}else{this._addObject(t,i)}}removeAt(t){this.records.splice(t,1);for(let i=t,e=this.size();i<e;i+=1){this.records[i].i-=1}}getValueForItemAtKeyId(t,i){return t[this._keysMap[i]]}size(){return this.records.length}_addString(t,i){if(!Ot(t)||Ct(t)){return}let e={v:t,i,n:this.norm.get(t)};this.records.push(e)}_addObject(t,i){let e={i,$:{}};this.keys.forEach(((i,n)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(!Ot(s)){return}if(mt(s)){let t=[];const i=[{nestedArrIndex:-1,value:s}];while(i.length){const{nestedArrIndex:e,value:n}=i.pop();if(!Ot(n)){continue}if(bt(n)&&!Ct(n)){let i={v:n,i:e,n:this.norm.get(n)};t.push(i)}else if(mt(n)){n.forEach(((t,e)=>{i.push({nestedArrIndex:e,value:t})}))}else;}e.$[n]=t}else if(bt(s)&&!Ct(s)){let t={v:s,n:this.norm.get(s)};e.$[n]=t}}));this.records.push(e)}toJSON(){return{keys:this.keys,records:this.records}}}function Wt(t,i,{getFn:e=Kt.getFn,fieldNormWeight:n=Kt.fieldNormWeight}={}){const s=new Ut({getFn:e,fieldNormWeight:n});s.setKeys(t.map(kt));s.setSources(i);s.create();return s}function Yt(t,{getFn:i=Kt.getFn,fieldNormWeight:e=Kt.fieldNormWeight}={}){const{keys:n,records:s}=t;const r=new Ut({getFn:i,fieldNormWeight:e});r.setKeys(n);r.setIndexRecords(s);return r}function qt(t,{errors:i=0,currentLocation:e=0,expectedLocation:n=0,distance:s=Kt.distance,ignoreLocation:r=Kt.ignoreLocation}={}){const u=i/t.length;if(r){return u}const a=Math.abs(n-e);if(!s){return a?1:u}return u+a/s}function Bt(t=[],i=Kt.minMatchCharLength){let e=[];let n=-1;let s=-1;let r=0;for(let u=t.length;r<u;r+=1){let u=t[r];if(u&&n===-1){n=r}else if(!u&&n!==-1){s=r-1;if(s-n+1>=i){e.push([n,s])}n=-1}}if(t[r-1]&&r-n>=i){e.push([n,r-1])}return e}const Jt=32;function zt(t,i,e,{location:n=Kt.location,distance:s=Kt.distance,threshold:r=Kt.threshold,findAllMatches:u=Kt.findAllMatches,minMatchCharLength:a=Kt.minMatchCharLength,includeMatches:h=Kt.includeMatches,ignoreLocation:o=Kt.ignoreLocation}={}){if(i.length>Jt){throw new Error(St(Jt))}const c=i.length;const f=t.length;const l=Math.max(0,Math.min(n,f));let d=r;let v=l;const m=a>1||h;const p=m?Array(f):[];let g;while((g=t.indexOf(i,v))>-1){let t=qt(i,{currentLocation:g,expectedLocation:l,distance:s,ignoreLocation:o});d=Math.min(t,d);v=g+c;if(m){let t=0;while(t<c){p[g+t]=1;t+=1}}}v=-1;let b=[];let y=1;let w=c+f;const x=1<<c-1;for(let n=0;n<c;n+=1){let r=0;let a=w;while(r<a){const t=qt(i,{errors:n,currentLocation:l+a,expectedLocation:l,distance:s,ignoreLocation:o});if(t<=d){r=a}else{w=a}a=Math.floor((w-r)/2+r)}w=a;let h=Math.max(1,l-a+1);let g=u?f:Math.min(l+a,f)+c;let M=Array(g+2);M[g+1]=(1<<n)-1;for(let r=g;r>=h;r-=1){let u=r-1;let a=e[t.charAt(u)];if(m){p[u]=+!!a}M[r]=(M[r+1]<<1|1)&a;if(n){M[r]|=(b[r+1]|b[r])<<1|1|b[r+1]}if(M[r]&x){y=qt(i,{errors:n,currentLocation:u,expectedLocation:l,distance:s,ignoreLocation:o});if(y<=d){d=y;v=u;if(v<=l){break}h=Math.max(1,2*l-v)}}}const O=qt(i,{errors:n+1,currentLocation:l,expectedLocation:l,distance:s,ignoreLocation:o});if(O>d){break}b=M}const M={isMatch:v>=0,score:Math.max(.001,y)};if(m){const t=Bt(p,a);if(!t.length){M.isMatch=false}else if(h){M.indices=t}}return M}function Xt(t){let i={};for(let e=0,n=t.length;e<n;e+=1){const s=t.charAt(e);i[s]=(i[s]||0)|1<<n-e-1}return i}class Qt{constructor(t,{location:i=Kt.location,threshold:e=Kt.threshold,distance:n=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:r=Kt.findAllMatches,minMatchCharLength:u=Kt.minMatchCharLength,isCaseSensitive:a=Kt.isCaseSensitive,ignoreLocation:h=Kt.ignoreLocation}={}){this.options={location:i,threshold:e,distance:n,includeMatches:s,findAllMatches:r,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:h};this.pattern=a?t:t.toLowerCase();this.chunks=[];if(!this.pattern.length){return}const o=(t,i)=>{this.chunks.push({pattern:t,alphabet:Xt(t),startIndex:i})};const c=this.pattern.length;if(c>Jt){let t=0;const i=c%Jt;const e=c-i;while(t<e){o(this.pattern.substr(t,Jt),t);t+=Jt}if(i){const t=c-Jt;o(this.pattern.substr(t),t)}}else{o(this.pattern,0)}}searchIn(t){const{isCaseSensitive:i,includeMatches:e}=this.options;if(!i){t=t.toLowerCase()}if(this.pattern===t){let i={isMatch:true,score:0};if(e){i.indices=[[0,t.length-1]]}return i}const{location:n,distance:s,threshold:r,findAllMatches:u,minMatchCharLength:a,ignoreLocation:h}=this.options;let o=[];let c=0;let f=false;this.chunks.forEach((({pattern:i,alphabet:l,startIndex:d})=>{const{isMatch:v,score:m,indices:p}=zt(t,i,l,{location:n+d,distance:s,threshold:r,findAllMatches:u,minMatchCharLength:a,includeMatches:e,ignoreLocation:h});if(v){f=true}c+=m;if(v&&p){o=[...o,...p]}}));let l={isMatch:f,score:f?c/this.chunks.length:1};if(f&&e){l.indices=o}return l}}class Zt{constructor(t){this.pattern=t}static isMultiMatch(t){return ti(t,this.multiRegex)}static isSingleMatch(t){return ti(t,this.singleRegex)}search(){}}function ti(t,i){const e=t.match(i);return e?e[1]:null}class ii extends Zt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const i=t===this.pattern;return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}class ei extends Zt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern);const e=i===-1;return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class ni extends Zt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const i=t.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}class si extends Zt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const i=!t.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class ri extends Zt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const i=t.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ui extends Zt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const i=!t.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class ai extends Zt{constructor(t,{location:i=Kt.location,threshold:e=Kt.threshold,distance:n=Kt.distance,includeMatches:s=Kt.includeMatches,findAllMatches:r=Kt.findAllMatches,minMatchCharLength:u=Kt.minMatchCharLength,isCaseSensitive:a=Kt.isCaseSensitive,ignoreLocation:h=Kt.ignoreLocation}={}){super(t);this._bitapSearch=new Qt(t,{location:i,threshold:e,distance:n,includeMatches:s,findAllMatches:r,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class hi extends Zt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let i=0;let e;const n=[];const s=this.pattern.length;while((e=t.indexOf(this.pattern,i))>-1){i=e+s;n.push([e,i-1])}const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const oi=[ii,hi,ni,si,ui,ri,ei,ai];const ci=oi.length;const fi=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const li="|";function di(t,i={}){return t.split(li).map((t=>{let e=t.trim().split(fi).filter((t=>t&&!!t.trim()));let n=[];for(let t=0,s=e.length;t<s;t+=1){const s=e[t];let r=false;let u=-1;while(!r&&++u<ci){const t=oi[u];let e=t.isMultiMatch(s);if(e){n.push(new t(e,i));r=true}}if(r){continue}u=-1;while(++u<ci){const t=oi[u];let e=t.isSingleMatch(s);if(e){n.push(new t(e,i));break}}}return n}))}const vi=new Set([ai.type,hi.type]);class mi{constructor(t,{isCaseSensitive:i=Kt.isCaseSensitive,includeMatches:e=Kt.includeMatches,minMatchCharLength:n=Kt.minMatchCharLength,ignoreLocation:s=Kt.ignoreLocation,findAllMatches:r=Kt.findAllMatches,location:u=Kt.location,threshold:a=Kt.threshold,distance:h=Kt.distance}={}){this.query=null;this.options={isCaseSensitive:i,includeMatches:e,minMatchCharLength:n,findAllMatches:r,ignoreLocation:s,location:u,threshold:a,distance:h};this.pattern=i?t:t.toLowerCase();this.query=di(this.pattern,this.options)}static condition(t,i){return i.useExtendedSearch}searchIn(t){const i=this.query;if(!i){return{isMatch:false,score:1}}const{includeMatches:e,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let s=0;let r=[];let u=0;for(let n=0,a=i.length;n<a;n+=1){const a=i[n];r.length=0;s=0;for(let i=0,n=a.length;i<n;i+=1){const n=a[i];const{isMatch:h,indices:o,score:c}=n.search(t);if(h){s+=1;u+=c;if(e){const t=n.constructor.type;if(vi.has(t)){r=[...r,...o]}else{r.push(o)}}}else{u=0;s=0;r.length=0;break}}if(s){let t={isMatch:true,score:u/s};if(e){t.indices=r}return t}}return{isMatch:false,score:1}}}const pi=[];function gi(...t){pi.push(...t)}function bi(t,i){for(let e=0,n=pi.length;e<n;e+=1){let n=pi[e];if(n.condition(t,i)){return new n(t,i)}}return new Qt(t,i)}const yi={AND:"$and",OR:"$or"};const wi={PATH:"$path",PATTERN:"$val"};const xi=t=>!!(t[yi.AND]||t[yi.OR]);const Mi=t=>!!t[wi.PATH];const Oi=t=>!mt(t)&&xt(t)&&!xi(t);const Ci=t=>({[yi.AND]:Object.keys(t).map((i=>({[i]:t[i]})))});function Ei(t,i,{auto:e=true}={}){const n=t=>{let s=Object.keys(t);const r=Mi(t);if(!r&&s.length>1&&!xi(t)){return n(Ci(t))}if(Oi(t)){const n=r?t[wi.PATH]:s[0];const u=r?t[wi.PATTERN]:t[n];if(!bt(u)){throw new Error(_t(n))}const a={keyId:Nt(n),pattern:u};if(e){a.searcher=bi(u,i)}return a}let u={children:[],operator:s[0]};s.forEach((i=>{const e=t[i];if(mt(e)){e.forEach((t=>{u.children.push(n(t))}))}}));return u};if(!xi(t)){t=Ci(t)}return n(t)}function Ii(t,{ignoreFieldNorm:i=Kt.ignoreFieldNorm}){t.forEach((t=>{let e=1;t.matches.forEach((({key:t,norm:n,score:s})=>{const r=t?t.weight:null;e*=Math.pow(s===0&&r?Number.EPSILON:s,(r||1)*(i?1:n))}));t.score=e}))}function _i(t,i){const e=t.matches;i.matches=[];if(!Ot(e)){return}e.forEach((t=>{if(!Ot(t.indices)||!t.indices.length){return}const{indices:e,value:n}=t;let s={indices:e,value:n};if(t.key){s.key=t.key.src}if(t.idx>-1){s.refIndex=t.idx}i.matches.push(s)}))}function Si(t,i){i.score=t.score}function Ai(t,i,{includeMatches:e=Kt.includeMatches,includeScore:n=Kt.includeScore}={}){const s=[];if(e)s.push(_i);if(n)s.push(Si);return t.map((t=>{const{idx:e}=t;const n={item:i[e],refIndex:e};if(s.length){s.forEach((i=>{i(t,n)}))}return n}))}class Li{constructor(t,i={},e){this.options=lt(lt({},Kt),i);this._keyStore=new jt(this.options.keys);this.setCollection(t,e)}setCollection(t,i){this._docs=t;if(i&&!(i instanceof Ut)){throw new Error(It)}this._myIndex=i||Wt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){if(!Ot(t)){return}this._docs.push(t);this._myIndex.add(t)}remove(t=()=>false){const i=[];for(let e=0,n=this._docs.length;e<n;e+=1){const s=this._docs[e];if(t(s,e)){this.removeAt(e);e-=1;n-=1;i.push(s)}}return i}removeAt(t){this._docs.splice(t,1);this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:i=-1}={}){const{includeMatches:e,includeScore:n,shouldSort:s,sortFn:r,ignoreFieldNorm:u}=this.options;let a=bt(t)?bt(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);Ii(a,{ignoreFieldNorm:u});if(s){a.sort(r)}if(yt(i)&&i>-1){a=a.slice(0,i)}return Ai(a,this._docs,{includeMatches:e,includeScore:n})}_searchStringList(t){const i=bi(t,this.options);const{records:e}=this._myIndex;const n=[];e.forEach((({v:t,i:e,n:s})=>{if(!Ot(t)){return}const{isMatch:r,score:u,indices:a}=i.searchIn(t);if(r){n.push({item:t,idx:e,matches:[{score:u,value:t,norm:s,indices:a}]})}}));return n}_searchLogical(t){const i=Ei(t,this.options);const e=(t,i,n)=>{if(!t.children){const{keyId:e,searcher:s}=t;const r=this._findMatches({key:this._keyStore.get(e),value:this._myIndex.getValueForItemAtKeyId(i,e),searcher:s});if(r&&r.length){return[{idx:n,item:i,matches:r}]}return[]}const s=[];for(let r=0,u=t.children.length;r<u;r+=1){const u=t.children[r];const a=e(u,i,n);if(a.length){s.push(...a)}else if(t.operator===yi.AND){return[]}}return s};const n=this._myIndex.records;const s={};const r=[];n.forEach((({$:t,i:n})=>{if(Ot(t)){let u=e(i,t,n);if(u.length){if(!s[n]){s[n]={idx:n,item:t,matches:[]};r.push(s[n])}u.forEach((({matches:t})=>{s[n].matches.push(...t)}))}}}));return r}_searchObjectList(t){const i=bi(t,this.options);const{keys:e,records:n}=this._myIndex;const s=[];n.forEach((({$:t,i:n})=>{if(!Ot(t)){return}let r=[];e.forEach(((e,n)=>{r.push(...this._findMatches({key:e,value:t[n],searcher:i}))}));if(r.length){s.push({idx:n,item:t,matches:r})}}));return s}_findMatches({key:t,value:i,searcher:e}){if(!Ot(i)){return[]}let n=[];if(mt(i)){i.forEach((({v:i,i:s,n:r})=>{if(!Ot(i)){return}const{isMatch:u,score:a,indices:h}=e.searchIn(i);if(u){n.push({score:a,key:t,value:i,idx:s,norm:r,indices:h})}}))}else{const{v:s,n:r}=i;const{isMatch:u,score:a,indices:h}=e.searchIn(s);if(u){n.push({score:a,key:t,value:s,norm:r,indices:h})}}return n}}Li.version="7.0.0";Li.createIndex=Wt;Li.parseIndex=Yt;Li.config=Kt;{Li.parseQuery=Ei}{gi(mi)}var Ti=function(){function t(t){this._haystack=[];this._fuseOptions=e(e({},t.fuseOptions),{keys:n([],t.searchFields),includeMatches:true})}t.prototype.index=function(t){this._haystack=t;if(this._fuse){this._fuse.setCollection(t)}};t.prototype.reset=function(){this._haystack=[];this._fuse=undefined};t.prototype.isEmptyIndex=function(){return!this._haystack.length};t.prototype.search=function(t){if(!this._fuse){{this._fuse=new Li(this._haystack,this._fuseOptions)}}var i=this._fuse.search(t);return i.map((function(t,i){return{item:t.item,score:t.score||0,rank:i+1}}))};return t}();function ji(t){{return new Ti(t)}}var ki=function(t){for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){return false}}return true};var Ri=function(t,i,e){var n=t.dataset;var s=i.customProperties,r=i.labelClass,u=i.labelDescription;if(r){n.labelClass=R(r).join(" ")}if(u){n.labelDescription=u}if(e&&s){if(typeof s==="string"){n.customProperties=s}else if(typeof s==="object"&&!ki(s)){n.customProperties=JSON.stringify(s)}}};var Ni=function(t,i,e){var n=i&&t.querySelector("label[for='".concat(i,"']"));var s=n&&n.innerText;if(s){e.setAttribute("aria-label",s)}};var $i={containerOuter:function(t,i,e,n,s,r,u){var a=t.classNames.containerOuter;var h=document.createElement("div");$(h,a);h.dataset.type=r;if(i){h.dir=i}if(n){h.tabIndex=0}if(e){h.setAttribute("role",s?"combobox":"listbox");if(s){h.setAttribute("aria-autocomplete","list")}else if(!u){Ni(this._docRoot,this.passedElement.element.id,h)}h.setAttribute("aria-haspopup","true");h.setAttribute("aria-expanded","false")}if(u){h.setAttribute("aria-labelledby",u)}return h},containerInner:function(t){var i=t.classNames.containerInner;var e=document.createElement("div");$(e,i);return e},itemList:function(t,i){var e=t.searchEnabled,n=t.classNames,s=n.list,r=n.listSingle,u=n.listItems;var a=document.createElement("div");$(a,s);$(a,i?r:u);if(this._isSelectElement&&e){a.setAttribute("role","listbox")}return a},placeholder:function(t,i){var e=t.allowHTML,n=t.classNames.placeholder;var s=document.createElement("div");$(s,n);A(s,e,i);return s},item:function(t,i,e){var n=t.allowHTML,s=t.removeItemButtonAlignLeft,r=t.removeItemIconText,u=t.removeItemLabelText,a=t.classNames,h=a.item,o=a.button,c=a.highlightedState,f=a.itemSelectable,l=a.placeholder;var d=I(i.value);var v=document.createElement("div");$(v,h);if(i.labelClass){var m=document.createElement("span");A(m,n,i.label);$(m,i.labelClass);v.appendChild(m)}else{A(v,n,i.label)}v.dataset.item="";v.dataset.id=i.id;v.dataset.value=d;Ri(v,i,true);if(i.disabled||this.containerOuter.isDisabled){v.setAttribute("aria-disabled","true")}if(this._isSelectElement){v.setAttribute("aria-selected","true");v.setAttribute("role","option")}if(i.placeholder){$(v,l);v.dataset.placeholder=""}$(v,i.highlighted?c:f);if(e){if(i.disabled){P(v,f)}v.dataset.deletable="";var p=document.createElement("button");p.type="button";$(p,o);A(p,true,C(r,i.value));var g=C(u,i.value);if(g){p.setAttribute("aria-label",g)}p.dataset.button="";if(s){v.insertAdjacentElement("afterbegin",p)}else{v.appendChild(p)}}return v},choiceList:function(t,i){var e=t.classNames.list;var n=document.createElement("div");$(n,e);if(!i){n.setAttribute("aria-multiselectable","true")}n.setAttribute("role","listbox");return n},choiceGroup:function(t,i){var e=t.allowHTML,n=t.classNames,s=n.group,r=n.groupHeading,u=n.itemDisabled;var a=i.id,h=i.label,o=i.disabled;var c=I(h);var f=document.createElement("div");$(f,s);if(o){$(f,u)}f.setAttribute("role","group");f.dataset.group="";f.dataset.id=a;f.dataset.value=c;if(o){f.setAttribute("aria-disabled","true")}var l=document.createElement("div");$(l,r);A(l,e,h||"");f.appendChild(l);return f},choice:function(t,i,e,n){var s=t.allowHTML,r=t.classNames,u=r.item,a=r.itemChoice,h=r.itemSelectable,o=r.selectedState,c=r.itemDisabled,f=r.description,l=r.placeholder;var d=i.label;var v=I(i.value);var m=document.createElement("div");m.id=i.elementId;$(m,u);$(m,a);if(n&&typeof d==="string"){d=S(s,d);d+=" (".concat(n,")");d={trusted:d}}var p=m;if(i.labelClass){var g=document.createElement("span");A(g,s,d);$(g,i.labelClass);p=g;m.appendChild(g)}else{A(m,s,d)}if(i.labelDescription){var b="".concat(i.elementId,"-description");p.setAttribute("aria-describedby",b);var y=document.createElement("span");A(y,s,i.labelDescription);y.id=b;$(y,f);m.appendChild(y)}if(i.selected){$(m,o)}if(i.placeholder){$(m,l)}m.setAttribute("role",i.group?"treeitem":"option");m.dataset.choice="";m.dataset.id=i.id;m.dataset.value=v;if(e){m.dataset.selectText=e}if(i.group){m.dataset.groupId="".concat(i.group.id)}Ri(m,i,false);if(i.disabled){$(m,c);m.dataset.choiceDisabled="";m.setAttribute("aria-disabled","true")}else{$(m,h);m.dataset.choiceSelectable=""}return m},input:function(t,i){var e=t.classNames,n=e.input,s=e.inputCloned,r=t.labelId;var u=document.createElement("input");u.type="search";$(u,n);$(u,s);u.autocomplete="off";u.autocapitalize="off";u.spellcheck=false;u.setAttribute("aria-autocomplete","list");if(i){u.setAttribute("aria-label",i)}else if(!r){Ni(this._docRoot,this.passedElement.element.id,u)}return u},dropdown:function(t){var i=t.classNames,e=i.list,n=i.listDropdown;var s=document.createElement("div");$(s,e);$(s,n);s.setAttribute("aria-expanded","false");return s},notice:function(t,i,e){var n=t.classNames,s=n.item,r=n.itemChoice,u=n.addChoice,a=n.noResults,h=n.noChoices,o=n.notice;if(e===void 0){e=ot.generic}var c=document.createElement("div");A(c,true,i);$(c,s);$(c,r);$(c,o);switch(e){case ot.addChoice:$(c,u);break;case ot.noResults:$(c,a);break;case ot.noChoices:$(c,h);break}if(e===ot.addChoice){c.dataset.choiceSelectable="";c.dataset.choice=""}return c},option:function(t){var i=I(t.label);var e=new Option(i,t.value,false,t.selected);Ri(e,t,true);e.disabled=t.disabled;if(t.selected){e.setAttribute("selected","")}return e}};var Pi="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style;var Fi={};var Hi=function(t){if(!t){return undefined}return t.dataset.id?parseInt(t.dataset.id,10):undefined};var Di="[data-choice-selectable]";var Ki=function(){function t(i,n){if(i===void 0){i="[data-choice]"}if(n===void 0){n={}}var s=this;this.initialisedOK=undefined;this._hasNonChoicePlaceholder=false;this._lastAddedChoiceId=0;this._lastAddedGroupId=0;var r=t.defaults;this.config=e(e(e({},r.allOptions),r.options),n);a.forEach((function(t){s.config[t]=e(e(e({},r.allOptions[t]),r.options[t]),n[t])}));var u=this.config;if(!u.silent){this._validateConfig()}var o=u.shadowRoot||document.documentElement;this._docRoot=o;var c=typeof i==="string"?o.querySelector(i):i;if(!c||typeof c!=="object"||!(z(c)||X(c))){if(!c&&typeof i==="string"){throw TypeError("Selector ".concat(i," failed to find an element"))}throw TypeError("Expected one of the following types text|select-one|select-multiple")}var f=c.type;var l=f===h.Text;if(l||u.maxItemCount!==1){u.singleModeForMultiSelect=false}if(u.singleModeForMultiSelect){f=h.SelectMultiple}var d=f===h.SelectOne;var v=f===h.SelectMultiple;var m=d||v;this._elementType=f;this._isTextElement=l;this._isSelectOneElement=d;this._isSelectMultipleElement=v;this._isSelectElement=d||v;this._canAddUserChoices=l&&u.addItems||m&&u.addChoices;if(typeof u.renderSelectedChoices!=="boolean"){u.renderSelectedChoices=u.renderSelectedChoices==="always"||d}if(u.closeDropdownOnSelect==="auto"){u.closeDropdownOnSelect=l||d||u.singleModeForMultiSelect}else{u.closeDropdownOnSelect=q(u.closeDropdownOnSelect)}if(u.placeholder){if(u.placeholderValue){this._hasNonChoicePlaceholder=true}else if(c.dataset.placeholder){this._hasNonChoicePlaceholder=true;u.placeholderValue=c.dataset.placeholder}}if(n.addItemFilter&&typeof n.addItemFilter!=="function"){var p=n.addItemFilter instanceof RegExp?n.addItemFilter:new RegExp(n.addItemFilter);u.addItemFilter=p.test.bind(p)}if(this._isTextElement){this.passedElement=new Y({element:c,classNames:u.classNames})}else{var g=c;this.passedElement=new tt({element:g,classNames:u.classNames,template:function(t){return s._templates.option(t)},extractPlaceholder:u.placeholder&&!this._hasNonChoicePlaceholder})}this.initialised=false;this._store=new ht(u);this._currentValue="";u.searchEnabled=!l&&u.searchEnabled||v;this._canSearch=u.searchEnabled;this._isScrollingOnIe=false;this._highlightPosition=0;this._wasTap=true;this._placeholderValue=this._generatePlaceholderValue();this._baseId=y(c,"choices-");this._direction=c.dir;if(!this._direction){var b=window.getComputedStyle(c).direction;var w=window.getComputedStyle(document.documentElement).direction;if(b!==w){this._direction=b}}this._idNames={itemChoice:"item-choice"};this._templates=r.templates;this._render=this._render.bind(this);this._onFocus=this._onFocus.bind(this);this._onBlur=this._onBlur.bind(this);this._onKeyUp=this._onKeyUp.bind(this);this._onKeyDown=this._onKeyDown.bind(this);this._onInput=this._onInput.bind(this);this._onClick=this._onClick.bind(this);this._onTouchMove=this._onTouchMove.bind(this);this._onTouchEnd=this._onTouchEnd.bind(this);this._onMouseDown=this._onMouseDown.bind(this);this._onMouseOver=this._onMouseOver.bind(this);this._onFormReset=this._onFormReset.bind(this);this._onSelectKey=this._onSelectKey.bind(this);this._onEnterKey=this._onEnterKey.bind(this);this._onEscapeKey=this._onEscapeKey.bind(this);this._onDirectionKey=this._onDirectionKey.bind(this);this._onDeleteKey=this._onDeleteKey.bind(this);if(this.passedElement.isActive){if(!u.silent){console.warn("Trying to initialise Choices on element already initialised",{element:i})}this.initialised=true;this.initialisedOK=false;return}this.init();this._initialItems=this._store.items.map((function(t){return t.value}))}Object.defineProperty(t,"defaults",{get:function(){return Object.preventExtensions({get options(){return Fi},get allOptions(){return et},get templates(){return $i}})},enumerable:false,configurable:true});t.prototype.init=function(){if(this.initialised||this.initialisedOK!==undefined){return}this._searcher=ji(this.config);this._loadChoices();this._createTemplates();this._createElements();this._createStructure();if(this._isTextElement&&!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||!!this.passedElement.element.closest("fieldset:disabled")){this.disable()}else{this.enable();this._addEventListeners()}this._initStore();this.initialised=true;this.initialisedOK=true;var t=this.config.callbackOnInit;if(typeof t==="function"){t.call(this)}};t.prototype.destroy=function(){if(!this.initialised){return}this._removeEventListeners();this.passedElement.reveal();this.containerOuter.unwrap(this.passedElement.element);this._store._listeners=[];this.clearStore(false);this._stopSearch();this._templates=t.defaults.templates;this.initialised=false;this.initialisedOK=undefined};t.prototype.enable=function(){if(this.passedElement.isDisabled){this.passedElement.enable()}if(this.containerOuter.isDisabled){this._addEventListeners();this.input.enable();this.containerOuter.enable()}return this};t.prototype.disable=function(){if(!this.passedElement.isDisabled){this.passedElement.disable()}if(!this.containerOuter.isDisabled){this._removeEventListeners();this.input.disable();this.containerOuter.disable()}return this};t.prototype.highlightItem=function(t,i){if(i===void 0){i=true}if(!t||!t.id){return this}var e=this._store.items.find((function(i){return i.id===t.id}));if(!e||e.highlighted){return this}this._store.dispatch(p(e,true));if(i){this.passedElement.triggerEvent(r.highlightItem,this._getChoiceForOutput(e))}return this};t.prototype.unhighlightItem=function(t,i){if(i===void 0){i=true}if(!t||!t.id){return this}var e=this._store.items.find((function(i){return i.id===t.id}));if(!e||!e.highlighted){return this}this._store.dispatch(p(e,false));if(i){this.passedElement.triggerEvent(r.unhighlightItem,this._getChoiceForOutput(e))}return this};t.prototype.highlightAll=function(){var t=this;this._store.withTxn((function(){t._store.items.forEach((function(i){if(!i.highlighted){t._store.dispatch(p(i,true));t.passedElement.triggerEvent(r.highlightItem,t._getChoiceForOutput(i))}}))}));return this};t.prototype.unhighlightAll=function(){var t=this;this._store.withTxn((function(){t._store.items.forEach((function(i){if(i.highlighted){t._store.dispatch(p(i,false));t.passedElement.triggerEvent(r.highlightItem,t._getChoiceForOutput(i))}}))}));return this};t.prototype.removeActiveItemsByValue=function(t){var i=this;this._store.withTxn((function(){i._store.items.filter((function(i){return i.value===t})).forEach((function(t){return i._removeItem(t)}))}));return this};t.prototype.removeActiveItems=function(t){var i=this;this._store.withTxn((function(){i._store.items.filter((function(i){var e=i.id;return e!==t})).forEach((function(t){return i._removeItem(t)}))}));return this};t.prototype.removeHighlightedItems=function(t){var i=this;if(t===void 0){t=false}this._store.withTxn((function(){i._store.highlightedActiveItems.forEach((function(e){i._removeItem(e);if(t){i._triggerChange(e.value)}}))}));return this};t.prototype.showDropdown=function(t){var i=this;if(this.dropdown.isActive){return this}if(t===undefined){t=!this._canSearch}requestAnimationFrame((function(){i.dropdown.show();var e=i.dropdown.element.getBoundingClientRect();i.containerOuter.open(e.bottom,e.height);if(!t){i.input.focus()}i.passedElement.triggerEvent(r.showDropdown)}));return this};t.prototype.hideDropdown=function(t){var i=this;if(!this.dropdown.isActive){return this}requestAnimationFrame((function(){i.dropdown.hide();i.containerOuter.close();if(!t&&i._canSearch){i.input.removeActiveDescendant();i.input.blur()}i.passedElement.triggerEvent(r.hideDropdown)}));return this};t.prototype.getValue=function(t){var i=this;var e=this._store.items.map((function(e){return t?e.value:i._getChoiceForOutput(e)}));return this._isSelectOneElement||this.config.singleModeForMultiSelect?e[0]:e};t.prototype.setValue=function(t){var i=this;if(!this.initialisedOK){this._warnChoicesInitFailed("setValue");return this}this._store.withTxn((function(){t.forEach((function(t){if(t){i._addChoice(J(t,false))}}))}));this._searcher.reset();return this};t.prototype.setChoiceByValue=function(t){var i=this;if(!this.initialisedOK){this._warnChoicesInitFailed("setChoiceByValue");return this}if(this._isTextElement){return this}this._store.withTxn((function(){var e=Array.isArray(t)?t:[t];e.forEach((function(t){return i._findAndSelectChoiceByValue(t)}));i.unhighlightAll()}));this._searcher.reset();return this};t.prototype.setChoices=function(t,i,n,s,r,u){var a=this;if(t===void 0){t=[]}if(i===void 0){i="value"}if(n===void 0){n="label"}if(s===void 0){s=false}if(r===void 0){r=true}if(u===void 0){u=false}if(!this.initialisedOK){this._warnChoicesInitFailed("setChoices");return this}if(!this._isSelectElement){throw new TypeError("setChoices can't be used with INPUT based Choices")}if(typeof i!=="string"||!i){throw new TypeError("value parameter must be a name of 'value' field in passed objects")}if(typeof t==="function"){var h=t(this);if(typeof Promise==="function"&&h instanceof Promise){return new Promise((function(t){return requestAnimationFrame(t)})).then((function(){return a._handleLoadingState(true)})).then((function(){return h})).then((function(t){return a.setChoices(t,i,n,s,r,u)})).catch((function(t){if(!a.config.silent){console.error(t)}})).then((function(){return a._handleLoadingState(false)})).then((function(){return a}))}if(!Array.isArray(h)){throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof h))}return this.setChoices(h,i,n,false)}if(!Array.isArray(t)){throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices")}this.containerOuter.removeLoadingState();this._store.withTxn((function(){if(r){a._isSearching=false}if(s){a.clearChoices(true,u)}var h=i==="value";var o=n==="label";t.forEach((function(t){if("choices"in t){var s=t;if(!o){s=e(e({},s),{label:s[n]})}a._addGroup(J(s,true))}else{var r=t;if(!o||!h){r=e(e({},r),{value:r[i],label:r[n]})}var u=J(r,false);a._addChoice(u);if(u.placeholder&&!a._hasNonChoicePlaceholder){a._placeholderValue=_(u.label)}}}));a.unhighlightAll()}));this._searcher.reset();return this};t.prototype.refresh=function(t,i,e){var n=this;if(t===void 0){t=false}if(i===void 0){i=false}if(e===void 0){e=false}if(!this._isSelectElement){if(!this.config.silent){console.warn("refresh method can only be used on choices backed by a <select> element")}return this}this._store.withTxn((function(){var s=n.passedElement.optionsAsChoices();var r={};if(!e){n._store.items.forEach((function(t){if(t.id&&t.active&&t.selected){r[t.value]=true}}))}n.clearStore(false);var u=function(t){if(e){n._store.dispatch(m(t))}else if(r[t.value]){t.selected=true}};s.forEach((function(t){if("choices"in t){t.choices.forEach(u);return}u(t)}));n._addPredefinedChoices(s,i,t);if(n._isSearching){n._searchChoices(n.input.value)}}));return this};t.prototype.removeChoice=function(t){var i=this._store.choices.find((function(i){return i.value===t}));if(!i){return this}this._clearNotice();this._store.dispatch(c(i));this._searcher.reset();if(i.selected){this.passedElement.triggerEvent(r.removeItem,this._getChoiceForOutput(i))}return this};t.prototype.clearChoices=function(t,i){var e=this;if(t===void 0){t=true}if(i===void 0){i=false}if(t){if(i){this.passedElement.element.replaceChildren("")}else{this.passedElement.element.querySelectorAll(":not([selected])").forEach((function(t){t.remove()}))}}this.itemList.element.replaceChildren("");this.choiceList.element.replaceChildren("");this._clearNotice();this._store.withTxn((function(){var t=i?[]:e._store.items;e._store.reset();t.forEach((function(t){e._store.dispatch(o(t));e._store.dispatch(v(t))}))}));this._searcher.reset();return this};t.prototype.clearStore=function(t){if(t===void 0){t=true}this.clearChoices(t,true);this._stopSearch();this._lastAddedChoiceId=0;this._lastAddedGroupId=0;return this};t.prototype.clearInput=function(){var t=!this._isSelectOneElement;this.input.clear(t);this._stopSearch();return this};t.prototype._validateConfig=function(){var t=this.config;var i=k(t,et);if(i.length){console.warn("Unknown config option(s) passed",i.join(", "))}if(t.allowHTML&&t.allowHtmlUserInput){if(t.addItems){console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks")}if(t.addChoices){console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks")}}};t.prototype._render=function(t){if(t===void 0){t={choices:true,groups:true,items:true}}if(this._store.inTxn()){return}if(this._isSelectElement){if(t.choices||t.groups){this._renderChoices()}}if(t.items){this._renderItems()}};t.prototype._renderChoices=function(){var t=this;if(!this._canAddItems()){return}var i=this,e=i.config,n=i._isSearching;var s=this._store,r=s.activeGroups,u=s.activeChoices;var a=0;if(n&&e.searchResultLimit>0){a=e.searchResultLimit}else if(e.renderChoiceLimit>0){a=e.renderChoiceLimit}if(this._isSelectElement){var h=u.filter((function(t){return!t.element}));if(h.length){this.passedElement.addOptions(h)}}var o=document.createDocumentFragment();var c=function(t){return t.filter((function(t){return!t.placeholder&&(n?!!t.rank:e.renderSelectedChoices||!t.selected)}))};var f=false;var l=function(i,s,r){if(n){i.sort(T)}else if(e.shouldSort){i.sort(e.sorter)}var u=i.length;u=!s&&a&&u>a?a:u;u--;i.every((function(i,s){var a=i.choiceEl||t._templates.choice(e,i,e.itemSelectText,r);i.choiceEl=a;o.appendChild(a);if(n||!i.selected){f=true}return s<u}))};if(u.length){if(e.resetScrollPosition){requestAnimationFrame((function(){return t.choiceList.scrollToTop()}))}if(!this._hasNonChoicePlaceholder&&!n&&this._isSelectOneElement){l(u.filter((function(t){return t.placeholder&&!t.group})),false,undefined)}if(r.length&&!n){if(e.shouldSort){r.sort(e.sorter)}l(u.filter((function(t){return!t.placeholder&&!t.group})),false,undefined);r.forEach((function(i){var s=c(i.choices);if(s.length){if(i.label){var r=i.groupEl||t._templates.choiceGroup(t.config,i);i.groupEl=r;r.remove();o.appendChild(r)}l(s,true,e.appendGroupInSearch&&n?i.label:undefined)}}))}else{l(c(u),false,undefined)}}if(!f&&(n||!o.children.length||!e.renderSelectedChoices)){if(!this._notice){this._notice={text:E(n?e.noResultsText:e.noChoicesText),type:n?ot.noResults:ot.noChoices}}o.replaceChildren("")}this._renderNotice(o);this.choiceList.element.replaceChildren(o);if(f){this._highlightChoice()}};t.prototype._renderItems=function(){var t=this;var i=this._store.items||[];var e=this.itemList.element;var n=this.config;var s=document.createDocumentFragment();var r=function(t){return e.querySelector('[data-item][data-id="'.concat(t.id,'"]'))};var u=function(i){var e=i.itemEl;if(e&&e.parentElement){return}e=r(i)||t._templates.item(n,i,n.removeItemButton);i.itemEl=e;s.appendChild(e)};i.forEach(u);var a=!!s.childNodes.length;if(this._isSelectOneElement){var h=e.children.length;if(a||h>1){var o=e.querySelector(N(n.classNames.placeholder));if(o){o.remove()}}else if(!a&&!h&&this._placeholderValue){a=true;u(J({selected:true,value:"",label:this._placeholderValue,placeholder:true},false))}}if(a){e.append(s);if(n.shouldSortItems&&!this._isSelectOneElement){i.sort(n.sorter);i.forEach((function(t){var i=r(t);if(i){i.remove();s.append(i)}}));e.append(s)}}if(this._isTextElement){this.passedElement.value=i.map((function(t){var i=t.value;return i})).join(n.delimiter)}};t.prototype._displayNotice=function(t,i,e){if(e===void 0){e=true}var n=this._notice;if(n&&(n.type===i&&n.text===t||n.type===ot.addChoice&&(i===ot.noResults||i===ot.noChoices))){if(e){this.showDropdown(true)}return}this._clearNotice();this._notice=t?{text:t,type:i}:undefined;this._renderNotice();if(e&&t){this.showDropdown(true)}};t.prototype._clearNotice=function(){if(!this._notice){return}var t=this.choiceList.element.querySelector(N(this.config.classNames.notice));if(t){t.remove()}this._notice=undefined};t.prototype._renderNotice=function(t){var i=this._notice;if(i){var e=this._templates.notice(this.config,i.text,i.type);if(t){t.append(e)}else{this.choiceList.prepend(e)}}};t.prototype._getChoiceForOutput=function(t,i){return{id:t.id,highlighted:t.highlighted,labelClass:t.labelClass,labelDescription:t.labelDescription,customProperties:t.customProperties,disabled:t.disabled,active:t.active,label:t.label,placeholder:t.placeholder,value:t.value,groupValue:t.group?t.group.label:undefined,element:t.element,keyCode:i}};t.prototype._triggerChange=function(t){if(t===undefined||t===null){return}this.passedElement.triggerEvent(r.change,{value:t})};t.prototype._handleButtonAction=function(t){var i=this;var e=this._store.items;if(!e.length||!this.config.removeItems||!this.config.removeItemButton){return}var n=t&&Hi(t.parentElement);var s=n&&e.find((function(t){return t.id===n}));if(!s){return}this._store.withTxn((function(){i._removeItem(s);i._triggerChange(s.value);if(i._isSelectOneElement&&!i._hasNonChoicePlaceholder){var t=(i.config.shouldSort?i._store.choices.reverse():i._store.choices).find((function(t){return t.placeholder}));if(t){i._addItem(t);i.unhighlightAll();if(t.value){i._triggerChange(t.value)}}}}))};t.prototype._handleItemAction=function(t,i){var e=this;if(i===void 0){i=false}var n=this._store.items;if(!n.length||!this.config.removeItems||this._isSelectOneElement){return}var s=Hi(t);if(!s){return}n.forEach((function(t){if(t.id===s&&!t.highlighted){e.highlightItem(t)}else if(!i&&t.highlighted){e.unhighlightItem(t)}}));this.input.focus()};t.prototype._handleChoiceAction=function(t){var i=this;var e=Hi(t);var n=e&&this._store.getChoiceById(e);if(!n||n.disabled){return false}var s=this.dropdown.isActive;if(!n.selected){if(!this._canAddItems()){return true}this._store.withTxn((function(){i._addItem(n,true,true);i.clearInput();i.unhighlightAll()}));this._triggerChange(n.value)}if(s&&this.config.closeDropdownOnSelect){this.hideDropdown(true);this.containerOuter.element.focus()}return true};t.prototype._handleBackspace=function(t){var i=this.config;if(!i.removeItems||!t.length){return}var e=t[t.length-1];var n=t.some((function(t){return t.highlighted}));if(i.editItems&&!n&&e){this.input.value=e.value;this.input.setWidth();this._removeItem(e);this._triggerChange(e.value)}else{if(!n){this.highlightItem(e,false)}this.removeHighlightedItems(true)}};t.prototype._loadChoices=function(){var t;var i=this;var e=this.config;if(this._isTextElement){this._presetChoices=e.items.map((function(t){return J(t,false)}));if(this.passedElement.value){var n=this.passedElement.value.split(e.delimiter).map((function(t){return J(t,false,i.config.allowHtmlUserInput)}));this._presetChoices=this._presetChoices.concat(n)}this._presetChoices.forEach((function(t){t.selected=true}))}else if(this._isSelectElement){this._presetChoices=e.choices.map((function(t){return J(t,true)}));var s=this.passedElement.optionsAsChoices();if(s){(t=this._presetChoices).push.apply(t,s)}}};t.prototype._handleLoadingState=function(t){if(t===void 0){t=true}var i=this.itemList.element;if(t){this.disable();this.containerOuter.addLoadingState();if(this._isSelectOneElement){i.replaceChildren(this._templates.placeholder(this.config,this.config.loadingText))}else{this.input.placeholder=this.config.loadingText}}else{this.enable();this.containerOuter.removeLoadingState();if(this._isSelectOneElement){i.replaceChildren("");this._render()}else{this.input.placeholder=this._placeholderValue||""}}};t.prototype._handleSearch=function(t){if(!this.input.isFocussed){return}if(t!==null&&typeof t!=="undefined"&&t.length>=this.config.searchFloor){var i=this.config.searchChoices?this._searchChoices(t):0;if(i!==null){this.passedElement.triggerEvent(r.search,{value:t,resultCount:i})}}else if(this._store.choices.some((function(t){return!t.active}))){this._stopSearch()}};t.prototype._canAddItems=function(){var t=this.config;var i=t.maxItemCount,e=t.maxItemText;if(!t.singleModeForMultiSelect&&i>0&&i<=this._store.items.length){this.choiceList.element.replaceChildren("");this._notice=undefined;this._displayNotice(typeof e==="function"?e(i):e,ot.addChoice);return false}if(this._notice&&this._notice.type===ot.addChoice){this._clearNotice()}return true};t.prototype._canCreateItem=function(t){var i=this.config;var e=true;var n="";if(e&&typeof i.addItemFilter==="function"&&!i.addItemFilter(t)){e=false;n=C(i.customAddItemText,t)}if(e){var s=this._store.choices.find((function(e){return i.valueComparer(e.value,t)}));if(s){if(this._isSelectElement){this._displayNotice("",ot.addChoice);return false}if(!i.duplicateItemsAllowed){e=false;n=C(i.uniqueItemText,t)}}}if(e){n=C(i.addItemText,t)}if(n){this._displayNotice(n,ot.addChoice)}return e};t.prototype._searchChoices=function(t){var i=t.trim().replace(/\s{2,}/," ");if(!i.length||i===this._currentValue){return null}var e=this._searcher;if(e.isEmptyIndex()){e.index(this._store.searchableChoices)}var n=e.search(i);this._currentValue=i;this._highlightPosition=0;this._isSearching=true;var s=this._notice;var r=s&&s.type;if(r!==ot.addChoice){if(!n.length){this._displayNotice(E(this.config.noResultsText),ot.noResults)}else{this._clearNotice()}}this._store.dispatch(f(n));return n.length};t.prototype._stopSearch=function(){if(this._isSearching){this._currentValue="";this._isSearching=false;this._clearNotice();this._store.dispatch(l(true));this.passedElement.triggerEvent(r.search,{value:"",resultCount:0})}};t.prototype._addEventListeners=function(){var t=this._docRoot;var i=this.containerOuter.element;var e=this.input.element;t.addEventListener("touchend",this._onTouchEnd,true);i.addEventListener("keydown",this._onKeyDown,true);i.addEventListener("mousedown",this._onMouseDown,true);t.addEventListener("click",this._onClick,{passive:true});t.addEventListener("touchmove",this._onTouchMove,{passive:true});this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:true});if(this._isSelectOneElement){i.addEventListener("focus",this._onFocus,{passive:true});i.addEventListener("blur",this._onBlur,{passive:true})}e.addEventListener("keyup",this._onKeyUp,{passive:true});e.addEventListener("input",this._onInput,{passive:true});e.addEventListener("focus",this._onFocus,{passive:true});e.addEventListener("blur",this._onBlur,{passive:true});if(e.form){e.form.addEventListener("reset",this._onFormReset,{passive:true})}this.input.addEventListeners()};t.prototype._removeEventListeners=function(){var t=this._docRoot;var i=this.containerOuter.element;var e=this.input.element;t.removeEventListener("touchend",this._onTouchEnd,true);i.removeEventListener("keydown",this._onKeyDown,true);i.removeEventListener("mousedown",this._onMouseDown,true);t.removeEventListener("click",this._onClick);t.removeEventListener("touchmove",this._onTouchMove);this.dropdown.element.removeEventListener("mouseover",this._onMouseOver);if(this._isSelectOneElement){i.removeEventListener("focus",this._onFocus);i.removeEventListener("blur",this._onBlur)}e.removeEventListener("keyup",this._onKeyUp);e.removeEventListener("input",this._onInput);e.removeEventListener("focus",this._onFocus);e.removeEventListener("blur",this._onBlur);if(e.form){e.form.removeEventListener("reset",this._onFormReset)}this.input.removeEventListeners()};t.prototype._onKeyDown=function(t){var i=t.keyCode;var e=this.dropdown.isActive;var n=t.key.length===1||t.key.length===2&&t.key.charCodeAt(0)>=55296||t.key==="Unidentified";if(!this._isTextElement&&!e&&i!==u.ESC_KEY&&i!==u.TAB_KEY&&i!==u.SHIFT_KEY){this.showDropdown();if(!this.input.isFocussed&&n){this.input.value+=t.key;if(t.key===" "){t.preventDefault()}}}switch(i){case u.A_KEY:return this._onSelectKey(t,this.itemList.element.hasChildNodes());case u.ENTER_KEY:return this._onEnterKey(t,e);case u.ESC_KEY:return this._onEscapeKey(t,e);case u.UP_KEY:case u.PAGE_UP_KEY:case u.DOWN_KEY:case u.PAGE_DOWN_KEY:return this._onDirectionKey(t,e);case u.DELETE_KEY:case u.BACK_KEY:return this._onDeleteKey(t,this._store.items,this.input.isFocussed)}};t.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled};t.prototype._onInput=function(){var t=this.input.value;if(!t){if(this._isTextElement){this.hideDropdown(true)}else{this._stopSearch()}return}if(!this._canAddItems()){return}if(this._canSearch){this._handleSearch(t)}if(!this._canAddUserChoices){return}this._canCreateItem(t);if(this._isSelectElement){this._highlightPosition=0;this._highlightChoice()}};t.prototype._onSelectKey=function(t,i){if((t.ctrlKey||t.metaKey)&&i){this._canSearch=false;var e=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;if(e){this.highlightAll()}}};t.prototype._onEnterKey=function(t,i){var e=this;var n=this.input.value;var s=t.target;t.preventDefault();if(s&&s.hasAttribute("data-button")){this._handleButtonAction(s);return}if(!i){if(this._isSelectElement||this._notice){this.showDropdown()}return}var r=this.dropdown.element.querySelector(N(this.config.classNames.highlightedState));if(r&&this._handleChoiceAction(r)){return}if(!s||!n){this.hideDropdown(true);return}if(!this._canAddItems()){return}var u=false;this._store.withTxn((function(){u=e._findAndSelectChoiceByValue(n,true);if(!u){if(!e._canAddUserChoices){return}if(!e._canCreateItem(n)){return}e._addChoice(J(n,false,e.config.allowHtmlUserInput),true,true);u=true}e.clearInput();e.unhighlightAll()}));if(!u){return}this._triggerChange(n);if(this.config.closeDropdownOnSelect){this.hideDropdown(true)}};t.prototype._onEscapeKey=function(t,i){if(i){t.stopPropagation();this.hideDropdown(true);this._stopSearch();this.containerOuter.element.focus()}};t.prototype._onDirectionKey=function(t,i){var e=t.keyCode;if(i||this._isSelectOneElement){this.showDropdown();this._canSearch=false;var n=e===u.DOWN_KEY||e===u.PAGE_DOWN_KEY?1:-1;var s=t.metaKey||e===u.PAGE_DOWN_KEY||e===u.PAGE_UP_KEY;var r=void 0;if(s){if(n>0){r=this.dropdown.element.querySelector("".concat(Di,":last-of-type"))}else{r=this.dropdown.element.querySelector(Di)}}else{var a=this.dropdown.element.querySelector(N(this.config.classNames.highlightedState));if(a){r=w(a,Di,n)}else{r=this.dropdown.element.querySelector(Di)}}if(r){if(!x(r,this.choiceList.element,n)){this.choiceList.scrollToChildElement(r,n)}this._highlightChoice(r)}t.preventDefault()}};t.prototype._onDeleteKey=function(t,i,e){if(!this._isSelectOneElement&&!t.target.value&&e){this._handleBackspace(i);t.preventDefault()}};t.prototype._onTouchMove=function(){if(this._wasTap){this._wasTap=false}};t.prototype._onTouchEnd=function(t){var i=(t||t.touches[0]).target;var e=this._wasTap&&this.containerOuter.element.contains(i);if(e){var n=i===this.containerOuter.element||i===this.containerInner.element;if(n){if(this._isTextElement){this.input.focus()}else if(this._isSelectMultipleElement){this.showDropdown()}}t.stopPropagation()}this._wasTap=true};t.prototype._onMouseDown=function(t){var i=t.target;if(!(i instanceof HTMLElement)){return}if(Pi&&this.choiceList.element.contains(i)){var e=this.choiceList.element.firstElementChild;this._isScrollingOnIe=this._direction==="ltr"?t.offsetX>=e.offsetWidth:t.offsetX<e.offsetLeft}if(i===this.input.element){return}var n=i.closest("[data-button],[data-item],[data-choice]");if(n instanceof HTMLElement){if("button"in n.dataset){this._handleButtonAction(n)}else if("item"in n.dataset){this._handleItemAction(n,t.shiftKey)}else if("choice"in n.dataset){this._handleChoiceAction(n)}}t.preventDefault()};t.prototype._onMouseOver=function(t){var i=t.target;if(i instanceof HTMLElement&&"choice"in i.dataset){this._highlightChoice(i)}};t.prototype._onClick=function(t){var i=t.target;var e=this.containerOuter;var n=e.element.contains(i);if(n){if(!this.dropdown.isActive&&!e.isDisabled){if(this._isTextElement){if(document.activeElement!==this.input.element){this.input.focus()}}else{this.showDropdown();e.element.focus()}}else if(this._isSelectOneElement&&i!==this.input.element&&!this.dropdown.element.contains(i)){this.hideDropdown()}}else{e.removeFocusState();this.hideDropdown(true);this.unhighlightAll()}};t.prototype._onFocus=function(t){var i=t.target;var e=this.containerOuter;var n=i&&e.element.contains(i);if(!n){return}var s=i===this.input.element;if(this._isTextElement){if(s){e.addFocusState()}}else if(this._isSelectMultipleElement){if(s){this.showDropdown(true);e.addFocusState()}}else{e.addFocusState();if(s){this.showDropdown(true)}}};t.prototype._onBlur=function(t){var i=t.target;var e=this.containerOuter;var n=i&&e.element.contains(i);if(n&&!this._isScrollingOnIe){if(i===this.input.element){e.removeFocusState();this.hideDropdown(true);if(this._isTextElement||this._isSelectMultipleElement){this.unhighlightAll()}}else if(i===this.containerOuter.element){e.removeFocusState();if(!this._canSearch){this.hideDropdown(true)}}}else{this._isScrollingOnIe=false;this.input.element.focus()}};t.prototype._onFormReset=function(){var t=this;this._store.withTxn((function(){t.clearInput();t.hideDropdown();t.refresh(false,false,true);if(t._initialItems.length){t.setChoiceByValue(t._initialItems)}}))};t.prototype._highlightChoice=function(t){if(t===void 0){t=null}var i=Array.from(this.dropdown.element.querySelectorAll(Di));if(!i.length){return}var e=t;var n=this.config.classNames.highlightedState;var s=Array.from(this.dropdown.element.querySelectorAll(N(n)));s.forEach((function(t){P(t,n);t.setAttribute("aria-selected","false")}));if(e){this._highlightPosition=i.indexOf(e)}else{if(i.length>this._highlightPosition){e=i[this._highlightPosition]}else{e=i[i.length-1]}if(!e){e=i[0]}}$(e,n);e.setAttribute("aria-selected","true");this.passedElement.triggerEvent(r.highlightChoice,{el:e});if(this.dropdown.isActive){this.input.setActiveDescendant(e.id);this.containerOuter.setActiveDescendant(e.id)}};t.prototype._addItem=function(t,i,e){if(i===void 0){i=true}if(e===void 0){e=false}if(!t.id){throw new TypeError("item.id must be set before _addItem is called for a choice/item")}if(this.config.singleModeForMultiSelect||this._isSelectOneElement){this.removeActiveItems(t.id)}this._store.dispatch(v(t));if(i){this.passedElement.triggerEvent(r.addItem,this._getChoiceForOutput(t));if(e){this.passedElement.triggerEvent(r.choice,this._getChoiceForOutput(t))}}};t.prototype._removeItem=function(t){if(!t.id){return}this._store.dispatch(m(t));var i=this._notice;if(i&&i.type===ot.noChoices){this._clearNotice()}this.passedElement.triggerEvent(r.removeItem,this._getChoiceForOutput(t))};t.prototype._addChoice=function(t,i,e){if(i===void 0){i=true}if(e===void 0){e=false}if(t.id){throw new TypeError("Can not re-add a choice which has already been added")}var n=this.config;if(!n.duplicateItemsAllowed&&this._store.choices.find((function(i){return n.valueComparer(i.value,t.value)}))){return}this._lastAddedChoiceId++;t.id=this._lastAddedChoiceId;t.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(t.id);var s=n.prependValue,r=n.appendValue;if(s){t.value=s+t.value}if(r){t.value+=r.toString()}if((s||r)&&t.element){t.element.value=t.value}this._clearNotice();this._store.dispatch(o(t));if(t.selected){this._addItem(t,i,e)}};t.prototype._addGroup=function(t,i){var e=this;if(i===void 0){i=true}if(t.id){throw new TypeError("Can not re-add a group which has already been added")}this._store.dispatch(d(t));if(!t.choices){return}this._lastAddedGroupId++;t.id=this._lastAddedGroupId;t.choices.forEach((function(n){n.group=t;if(t.disabled){n.disabled=true}e._addChoice(n,i)}))};t.prototype._createTemplates=function(){var t=this;var i=this.config.callbackOnCreateTemplates;var e={};if(typeof i==="function"){e=i.call(this,O,S,R)}var n={};Object.keys(this._templates).forEach((function(i){if(i in e){n[i]=e[i].bind(t)}else{n[i]=t._templates[i].bind(t)}}));this._templates=n};t.prototype._createElements=function(){var t=this._templates;var i=this,e=i.config,n=i._isSelectOneElement;var s=e.position,r=e.classNames;var u=this._elementType;this.containerOuter=new K({element:t.containerOuter(e,this._direction,this._isSelectElement,n,e.searchEnabled,u,e.labelId),classNames:r,type:u,position:s});this.containerInner=new K({element:t.containerInner(e),classNames:r,type:u,position:s});this.input=new V({element:t.input(e,this._placeholderValue),classNames:r,type:u,preventPaste:!e.paste});this.choiceList=new U({element:t.choiceList(e,n)});this.itemList=new U({element:t.itemList(e,n)});this.dropdown=new D({element:t.dropdown(e),classNames:r,type:u})};t.prototype._createStructure=function(){var t=this,i=t.containerInner,e=t.containerOuter,n=t.passedElement;var s=this.dropdown.element;n.conceal();i.wrap(n.element);e.wrap(i.element);if(this._isSelectOneElement){this.input.placeholder=this.config.searchPlaceholderValue||""}else{if(this._placeholderValue){this.input.placeholder=this._placeholderValue}this.input.setWidth()}e.element.appendChild(i.element);e.element.appendChild(s);i.element.appendChild(this.itemList.element);s.appendChild(this.choiceList.element);if(!this._isSelectOneElement){i.element.appendChild(this.input.element)}else if(this.config.searchEnabled){s.insertBefore(this.input.element,s.firstChild)}this._highlightPosition=0;this._isSearching=false};t.prototype._initStore=function(){var t=this;this._store.subscribe(this._render).withTxn((function(){t._addPredefinedChoices(t._presetChoices,t._isSelectOneElement&&!t._hasNonChoicePlaceholder,false)}));if(!this._store.choices.length||this._isSelectOneElement&&this._hasNonChoicePlaceholder){this._render()}};t.prototype._addPredefinedChoices=function(t,i,e){var n=this;if(i===void 0){i=false}if(e===void 0){e=true}if(i){var s=t.findIndex((function(t){return t.selected}))===-1;if(s){t.some((function(t){if(t.disabled||"choices"in t){return false}t.selected=true;return true}))}}t.forEach((function(t){if("choices"in t){if(n._isSelectElement){n._addGroup(t,e)}}else{n._addChoice(t,e)}}))};t.prototype._findAndSelectChoiceByValue=function(t,i){var e=this;if(i===void 0){i=false}var n=this._store.choices.find((function(i){return e.config.valueComparer(i.value,t)}));if(n&&!n.disabled&&!n.selected){this._addItem(n,true,i);return true}return false};t.prototype._generatePlaceholderValue=function(){var t=this.config;if(!t.placeholder){return null}if(this._hasNonChoicePlaceholder){return t.placeholderValue}if(this._isSelectElement){var i=this.passedElement.placeholderOption;return i?i.text:null}return null};t.prototype._warnChoicesInitFailed=function(t){if(this.config.silent){return}if(!this.initialised){throw new TypeError("".concat(t," called on a non-initialised instance of Choices"))}else if(!this.initialisedOK){throw new TypeError("".concat(t," called for an element which has multiple instances of Choices initialised on it"))}};t.version="11.1.0";return t}();export{Ki as default};
//# sourceMappingURL=p-DEFDONnF.js.map