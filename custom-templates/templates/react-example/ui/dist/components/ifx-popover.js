import{p as t,H as e,c as i,h as o,t as s}from"./p-mxJ7F0UG.js";import{i as r,d as n,t as a}from"./p-94ZtGp9D.js";import{d as p}from"./p-SWAxgzaX.js";const l=()=>`:host{display:inline-block;position:relative}.popover__container{position:relative;display:inline-block;font-family:var(--ifx-font-family)}.popover{position:absolute;z-index:1000;display:none;background:#FFFFFF;box-shadow:0 0 16px 0 rgba(29, 29, 29, 0.1);width:var(--ifx-popover-width, 240px);min-width:var(--ifx-popover-width, 240px);max-width:320px;pointer-events:auto;box-sizing:border-box}.popover.visible{display:flex;flex-direction:column}.popover--disabled{opacity:0.5;pointer-events:none}.popover-close{all:unset;cursor:pointer;position:absolute;top:12px;right:12px;z-index:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:background-color 0.2s ease}.popover-close:hover{background-color:#F7F7F7}.popover-close:focus{outline:2px solid #0A8276;outline-offset:1px}.popover-content{display:flex;flex-direction:column;padding:12px;gap:4px;text-align:left}.popover-title{font-size:1rem;font-weight:600;color:#1D1D1D;margin:0;padding-right:24px;text-align:left}.popover-text{font-size:0.875rem;font-weight:400;line-height:1.25rem;color:#575352;margin:0;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;text-align:left}.popover-arrow-svg{position:absolute;width:12px;height:8px;color:#FFFFFF;pointer-events:none;z-index:1001}.popover-arrow-svg path{fill:currentColor}`;const c=t(class t extends e{constructor(t){super();if(t!==false){this.__registerHost()}this.__attachShadow();this.ifxOpen=i(this,"ifxOpen",7);this.ifxClose=i(this,"ifxClose",7)}get el(){return this}popoverVisible=false;computedArrowPosition={};popoverTitle="";text="";position="auto";disabled=false;open=false;ariaLabel=null;ifxOpen;ifxClose;static GAP=12;popoverEl;triggerEl;lastOpenTrigger=null;openChanged(t){this.popoverVisible=t;if(!this.popoverEl)return;if(t){this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible"}else{this.popoverEl.style.display="none";this.popoverEl.style.visibility=""}}async componentDidLoad(){if(!r(this.el)){const t=n();a("ifx-popover",await t)}this.popoverEl=this.el.shadowRoot.querySelector(".popover");this.setupTriggerElement();this.popoverVisible=this.open;if(this.open){this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible";this.ifxOpen.emit({trigger:this.lastOpenTrigger})}}setupTriggerElement(){this.cleanupTriggerListeners();const t=Array.from(this.el.children);this.triggerEl=t[0]||this.el;this.triggerEl.addEventListener("click",this.onClick)}disconnectedCallback(){this.cleanupTriggerListeners()}cleanupTriggerListeners(){if(!this.triggerEl)return;this.triggerEl.removeEventListener("click",this.onClick)}getViewportSpace(t){return{above:t.top,below:window.innerHeight-t.bottom,left:t.left,right:window.innerWidth-t.right}}resetPositioningStyles(){if(!this.popoverEl)return;this.popoverEl.style.top="";this.popoverEl.style.bottom="";this.popoverEl.style.left="";this.popoverEl.style.right="";this.popoverEl.style.transform="";this.popoverEl.style.visibility=""}positionPopover(){if(!this.popoverEl||!this.triggerEl)return;const t=this.triggerEl.getBoundingClientRect();const e=this.popoverEl.getBoundingClientRect();const i=this.getViewportSpace(t);let o=this.position;if(o==="auto"){o=this.getBestPosition(e,i)}else{o=this.validateAndAdjustPosition(o,e,i)}this.resetPositioningStyles();const{popoverStyle:s,arrowStyle:r}=this.calculatePosition(t,e,o);Object.assign(this.popoverEl.style,s);this.computedArrowPosition=r;this.popoverEl.setAttribute("data-placement",o)}getBestPosition(e,i){const o=t.GAP;if(i.above>=e.height+o){return"top"}else if(i.below>=e.height+o){return"bottom"}else if(i.right>=e.width+o){return"right"}else if(i.left>=e.width+o){return"left"}return"bottom"}validateAndAdjustPosition(e,i,o){const s=t.GAP;switch(e){case"top":case"top-start":case"top-end":if(o.above>=i.height+s)return e;if(o.below>=i.height+s)return"bottom";if(o.left>=i.width+s)return"left";if(o.right>=i.width+s)return"right";return"bottom";case"bottom":case"bottom-start":case"bottom-end":if(o.below>=i.height+s)return e;if(o.above>=i.height+s)return"top";if(o.left>=i.width+s)return"left";if(o.right>=i.width+s)return"right";return"top";case"left":if(o.left>=i.width+s)return"left";if(o.right>=i.width+s)return"right";if(o.below>=i.height+s)return"bottom";if(o.above>=i.height+s)return"top";return"right";case"right":if(o.right>=i.width+s)return"right";if(o.left>=i.width+s)return"left";if(o.below>=i.height+s)return"bottom";if(o.above>=i.height+s)return"top";return"left";default:return"bottom"}}calculatePosition(e,i,o){const s=t.GAP;let r={position:"absolute",zIndex:"1000"};let n={};switch(o){case"top-start":r.left=`0px`;r.bottom=`${e.height+s}px`;n={top:`100%`,left:"12px"};break;case"top-end":r.right=`0px`;r.bottom=`${e.height+s}px`;n={top:`100%`,right:"12px"};break;case"top":r.left=`${e.width/2-i.width/2}px`;r.bottom=`${e.height+s}px`;n={top:`100%`,left:"50%",transform:"translateX(-50%)"};break;case"bottom-start":r.left=`0px`;r.top=`${e.height+s}px`;n={bottom:`100%`,left:"12px",transform:"rotate(180deg)"};break;case"bottom-end":r.right=`0px`;r.top=`${e.height+s}px`;n={bottom:`100%`,right:"12px",transform:"rotate(180deg)"};break;case"bottom":r.left=`${e.width/2-i.width/2}px`;r.top=`${e.height+s}px`;n={bottom:`100%`,left:"50%",transform:"translateX(-50%) rotate(180deg)"};break;case"left":r.right=`${e.width+s}px`;r.top=`${e.height/2-i.height/2}px`;n={top:"50%",right:"-10px",transform:"translateY(-50%) rotate(-90deg)"};break;case"right":r.left=`${e.width+s}px`;r.top=`${e.height/2-i.height/2}px`;n={top:"50%",left:"-10px",transform:"translateY(-50%) rotate(90deg)"};break}return{popoverStyle:r,arrowStyle:n}}positionChanged(){if(this.popoverVisible){setTimeout((()=>this.positionPopover()),0)}}async show(){if(this.disabled)return;this.open=true;this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible";this.popoverVisible=true;this.lastOpenTrigger=this.triggerEl||null;this.ifxOpen.emit({trigger:this.lastOpenTrigger})}async hide(){this.open=false;this.popoverVisible=false;if(this.popoverEl){this.popoverEl.style.display="none";this.popoverEl.style.visibility=""}this.ifxClose.emit()}async toggle(){if(this.popoverVisible){this.hide()}else{this.show()}}onClick=t=>{t.stopPropagation();this.lastOpenTrigger=this.triggerEl||t.currentTarget||null;this.toggle()};onCloseClick=t=>{t.stopPropagation();this.hide()};render(){const t={popover:true,visible:this.popoverVisible,"popover--disabled":this.disabled};const e={position:"absolute",...this.computedArrowPosition};return o("div",{key:"1099e84c972aa386ccecb006f2b7c584ea9b2150",class:"popover__container","aria-label":this.ariaLabel},o("slot",{key:"17fbf7bd6096c3978479bfb9671507e23c939c27"}),o("div",{key:"75e0a84d2e8a4aa0714c7101be0c3d7670f18d3a",class:t,role:"dialog","aria-modal":"false"},o("button",{key:"d3511c1624466c65350214998bb0a853c2acad56","aria-label":"Close Popover",class:"popover-close",onClick:this.onCloseClick},o("ifx-icon",{key:"e068bd7d599ca59b36ea32941455d3bf6b508330",icon:"cross16"})),o("div",{key:"fab40f54e162be44db69fc74104cbf7e6313f64f",class:"popover-content"},this.popoverTitle&&o("div",{key:"eb762ff5ab6f1103e4702c2b7f7b718761bbfbee",class:"popover-title"},this.popoverTitle),this.text&&o("div",{key:"c5c6ca0bdbd47cce3c1cae942a1e81c0a8eaf4a5",class:"popover-text"},this.text),o("slot",{key:"533789c1b492b0b019fb2896225dee6e961dfe7c",name:"content"})),o("svg",{key:"06a4580f9e6362ff8e5fa911d352466138d5c98a",class:"popover-arrow-svg",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:e},o("path",{key:"704caa4a4c7874b04018c278ec5c2e0bcaf9e6b8",d:"M6 8L0 0L12 0L6 8Z",fill:"currentColor"}))))}static get watchers(){return{open:[{openChanged:0}],position:[{positionChanged:0}]}}static get style(){return l()}},[769,"ifx-popover",{popoverTitle:[1,"popover-title"],text:[1],position:[1],disabled:[4],open:[1540],ariaLabel:[1,"aria-label"],popoverVisible:[32],computedArrowPosition:[32],show:[64],hide:[64],toggle:[64]},undefined,{open:[{openChanged:0}],position:[{positionChanged:0}]}]);function h(){if(typeof customElements==="undefined"){return}const t=["ifx-popover","ifx-icon"];t.forEach((t=>{switch(t){case"ifx-popover":if(!customElements.get(s(t))){customElements.define(s(t),c)}break;case"ifx-icon":if(!customElements.get(s(t))){p()}break}}))}const f=c;const d=h;export{f as IfxPopover,d as defineCustomElement};
//# sourceMappingURL=ifx-popover.js.map