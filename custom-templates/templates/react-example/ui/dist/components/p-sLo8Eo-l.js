import{p as e,H as t,h as i,d as s,t as n}from"./p-mxJ7F0UG.js";import{d as o}from"./p-Bh6WuM4S.js";import{d as r}from"./p-SWAxgzaX.js";const a=()=>`:host{display:block;width:100%}.option{display:flex;flex-direction:column;position:relative;cursor:pointer;list-style:none}.option.option--expanded{position:relative}.option.option--has-children{position:relative}.option.option--has-children .option-item>.chevron-wrapper{display:flex}.option--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.option.search-hidden{display:none !important}.option.search-match .option-item .option-label .search-highlight{font-weight:bold}.option-item{display:flex;flex-direction:row;align-items:center;white-space:nowrap;min-height:20px;padding:4px 16px;background-color:#FFFFFF;transition:background-color 0.2s ease-in-out}.option-item:hover{background-color:#F7F7F7}.option--disabled .option-item:hover{background-color:transparent}.option-children{display:block}.chevron-wrapper{display:none;align-items:center;justify-content:center;margin-right:8px;width:20px;height:20px;flex-shrink:0}.chevron-wrapper:focus{outline:none}.chevron-wrapper:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--has-children .chevron-wrapper{display:flex}.chevron-wrapper .chevron{transition:transform 0.2s ease-in-out;color:#3C3A39}.chevron-wrapper .chevron.chevron--expanded{transform:rotate(90deg)}.chevron-wrapper .chevron.chevron--collapsed{transform:rotate(0deg)}.checkbox-wrapper{display:flex;align-items:center;margin-right:8px;flex-shrink:0}.option-label{flex-grow:1;display:flex;align-items:center;cursor:pointer;padding:2px 0;font-size:0.875rem}.option-label:focus{outline:none}.option-label:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--disabled .option-label{cursor:not-allowed;color:#BFBBBB}`;const h=e(class e extends t{constructor(e){super();if(e!==false){this.__registerHost()}this.__attachShadow()}get el(){return this}value;selected=false;disabled=false;indeterminate=false;isExpanded=false;hasChildren=false;depth=0;searchTerm="";isSearchActive=false;isSearchDisabled=false;componentWillLoad(){this.hasChildren=this.el.children.length>0;this.depth=this.calculateDepth();this.el.setAttribute("data-level",this.depth.toString());if(this.hasChildren){const e=this.hasAnySelectedChildren();if(e){this.isExpanded=true}}}componentDidLoad(){this.el["__stencil_instance"]=this;this.notifyMultiselect();this.el.addEventListener("ifx-search-filter",this.handleSearchFilter)}disconnectedCallback(){this.el.removeEventListener("ifx-search-filter",this.handleSearchFilter)}handleSearchFilter=e=>{const{searchTerm:t,isActive:i}=e.detail;this.searchTerm=t.toLowerCase();this.isSearchActive=i;requestAnimationFrame((()=>{this.updateSearchClasses()}))};updateSearchClasses(){const e=this.el.shadowRoot?.querySelector(".option");if(!e)return;if(!this.isSearchActive){e.classList.remove("search-hidden","search-parent","search-match");this.removeHighlighting();this.isSearchDisabled=false;return}const t=this.getTextContent().toLowerCase();const i=t.includes(this.searchTerm);const s=this.hasMatchingParent();requestAnimationFrame((()=>{const t=this.hasMatchingChildren();e.classList.remove("search-hidden","search-parent","search-match");this.isSearchDisabled=false;if(i&&!this.hasChildren){e.classList.add("search-match");this.highlightSearchTerm()}else if(i&&this.hasChildren){e.classList.add("search-match");this.highlightSearchTerm();this.isExpanded=true}else if(!i&&this.hasChildren&&t){e.classList.add("search-parent");this.removeHighlighting();this.isExpanded=true;this.isSearchDisabled=true}else if(s){e.classList.add("search-match");this.removeHighlighting()}else{e.classList.add("search-hidden");this.removeHighlighting()}}))}highlightSearchTerm(){if(!this.searchTerm)return;const e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;const t=e.querySelector("slot");if(!t)return;this.removeHighlighting();const i=this.getTextContent();const s=this.searchTerm.toLowerCase();const n=i.toLowerCase();if(!n.includes(s))return;const o=n.indexOf(s);if(o===-1)return;const r=i.substring(0,o);const a=i.substring(o,o+s.length);const h=i.substring(o+s.length);const c=document.createElement("span");c.className="highlighted-text";if(r){c.appendChild(document.createTextNode(r))}const l=document.createElement("strong");l.className="search-highlight";l.textContent=a;c.appendChild(l);if(h){c.appendChild(document.createTextNode(h))}e.setAttribute("data-original-content","true");t.style.display="none";e.appendChild(c)}removeHighlighting(){const e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;const t=e.querySelector("slot");const i=e.querySelector(".highlighted-text");if(i){e.removeChild(i)}if(t){t.style.display=""}e.removeAttribute("data-original-content")}getTextContent(){let e="";Array.from(this.el.childNodes).forEach((t=>{if(t.nodeType===Node.TEXT_NODE){e+=t.textContent?.trim()||""}}));return e||this.value||""}hasMatchingChildren(){if(!this.hasChildren)return false;const e=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return e.some((e=>{const t=e["__stencil_instance"];if(!t)return false;const i=t.getTextContent().toLowerCase();const s=i.includes(this.searchTerm);const n=t.hasMatchingChildren();return s||n}))}hasMatchingParent(){let e=this.el.parentElement;while(e&&e.tagName==="IFX-MULTISELECT-OPTION"){const t=e["__stencil_instance"];if(t){const e=t.getTextContent().toLowerCase();if(e.includes(this.searchTerm)){return true}}e=e.parentElement}return false}calculateDepth(){let e=0;let t=this.el.parentElement;while(t&&t.tagName!=="IFX-MULTISELECT"){if(t.tagName==="IFX-MULTISELECT-OPTION"){e++}t=t.parentElement}return e}handleClick(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;e.stopPropagation();if(e.type==="click"&&e.target.closest(".chevron-wrapper")){this.toggleExpansion();return}let t;if(this.indeterminate){t=true}else{t=!this.selected}this.selected=t;this.indeterminate=false;if(this.hasChildren){this.isExpanded=t;requestAnimationFrame((()=>{this.selectAllChildren(t);this.expandAllChildren(t)}))}this.updateParentStates();this.notifyMultiselect()}handleKeyDown(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;const t=e.target;if(t.closest(".chevron-wrapper")||t.closest(".checkbox-wrapper")){return}if(e.key!=="ArrowUp"&&e.key!=="ArrowDown"){e.stopPropagation()}if(e.key==="ArrowRight"&&this.hasChildren){this.isExpanded=true}if(e.key==="ArrowLeft"&&this.hasChildren){this.isExpanded=false}}notifyMultiselect(){const e=new CustomEvent("ifx-option-changed",{bubbles:true,detail:{value:this.value,selected:this.selected,indeterminate:this.indeterminate}});this.el.dispatchEvent(e)}selectAllChildren(e){const t=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));t.forEach((t=>{const i=t["__stencil_instance"];if(i){i.selected=e;i.indeterminate=false;if(i.hasChildren){i.isExpanded=e;i.selectAllChildren(e)}i.notifyMultiselect?.()}}))}expandAllChildren(e){const t=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));t.forEach((t=>{const i=t["__stencil_instance"];if(i&&i.hasChildren){i.isExpanded=e;i.expandAllChildren(e)}}))}updateParentStates(){let e=this.el.parentElement;while(e&&e.tagName==="IFX-MULTISELECT-OPTION"){const t=e["__stencil_instance"];if(!t){e=e.parentElement;continue}const i=Array.from(e.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION")).map((e=>e["__stencil_instance"])).filter((e=>e!==null));const s=i.filter((e=>e.selected)).length;const n=i.filter((e=>e.indeterminate)).length;const o=i.length;if(s===o&&n===0){t.selected=true;t.indeterminate=false}else if(s===0&&n===0){t.selected=false;t.indeterminate=false}else{t.selected=false;t.indeterminate=true}t.notifyMultiselect?.();e=e.parentElement}}toggleExpansion(){this.isExpanded=!this.isExpanded}handleCheckboxClick=e=>{if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;e.stopPropagation();let t;if(this.indeterminate){t=true}else{t=!this.selected}this.selected=t;this.indeterminate=false;if(this.hasChildren){this.isExpanded=t;requestAnimationFrame((()=>{this.selectAllChildren(t);this.expandAllChildren(t)}))}this.updateParentStates();this.notifyMultiselect()};handleHeaderClick=e=>{e.stopPropagation();if(!this.disabled&&!(this.isSearchActive&&this.isSearchDisabled)){this.handleClick(e)}};hasAnySelectedChildren(){const e=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return e.some((e=>{const t=e.hasAttribute("selected");const i=this.checkForSelectedDescendants(e);return t||i}))}checkForSelectedDescendants(e){const t=Array.from(e.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return t.some((e=>{const t=e.hasAttribute("selected");const i=this.checkForSelectedDescendants(e);return t||i}))}render(){let e=false;const t=this.el.closest("ifx-multiselect");if(t){const i=Array.from(t.querySelectorAll("ifx-multiselect-option"));e=i.every((e=>e.children.length===0))}const n=this.depth*28+16;const o=this.hasChildren?0:28;const r=n+o;const a=e?undefined:{paddingLeft:`${r}px`};return i(s,{key:"02456f3eb7c3cb9a43bbed255d0c4f8f7773e637"},i("div",{key:"4496cbfb613844d6643ad8796777b55d4ac06dbd",class:{option:true,"option--has-children":this.hasChildren,"option--expanded":this.isExpanded,"option--disabled":this.disabled,"option--selected":this.selected},role:"option","aria-expanded":this.hasChildren?this.isExpanded?"true":"false":undefined,"aria-selected":this.selected?"true":"false","aria-disabled":this.disabled?"true":"false","data-level":this.depth,"data-value":this.value},i("div",{key:"355abb8b4e86fb26b5cf8a878e6c15a70d97b9ae",class:"option-item",style:a},i("div",{key:"f9623e8ee76f8cee3679b6aaecf130d988e20c9d",class:"chevron-wrapper",tabIndex:this.hasChildren?0:-1,role:this.hasChildren?"button":undefined,"aria-label":this.hasChildren?this.isExpanded?"Collapse":"Expand":undefined,onClick:e=>{e.stopPropagation();this.toggleExpansion()},onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.toggleExpansion()}}},this.hasChildren&&i("ifx-icon",{key:"d7bb92cbc69bd4ac5f2ce0062070f7b62cf0f0c0",class:`chevron ${this.isExpanded?"chevron--expanded":"chevron--collapsed"}`,icon:"chevron-right-16"})),i("div",{key:"b2abd3d5eb547cd544606b5885e6e93445d5c7ae",class:"checkbox-wrapper",onClick:e=>e.stopPropagation()},i("ifx-checkbox",{key:"ea0c810dc4813cebdb993e413b9d9516e0c79618",size:"s",checked:this.isSearchActive&&this.isSearchDisabled?false:this.indeterminate?false:this.selected,indeterminate:this.isSearchActive&&this.isSearchDisabled?false:this.indeterminate,onClick:this.handleCheckboxClick,disabled:this.disabled||this.isSearchActive&&this.isSearchDisabled,onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.handleCheckboxClick(e)}}})),i("div",{key:"95d76f425080089e93fec232bc984b12dd7a1273",class:"option-label",onClick:this.handleHeaderClick,tabIndex:-1},i("slot",{key:"d4b55c67d8f31bd8b6dfc4756c1eaa7367b183fd"}))),this.isExpanded&&i("div",{key:"4765b74ea8288daf72b6b0f0ce1ecf986f2a0a65",class:"option-children"},i("slot",{key:"75ca13e8068d2f6d2642d44e2f9220a2431b1d41",name:"children"}))))}static get style(){return a()}},[769,"ifx-multiselect-option",{value:[1],selected:[1540],disabled:[1540],indeterminate:[1540],isExpanded:[32],hasChildren:[32],depth:[32],searchTerm:[32],isSearchActive:[32],isSearchDisabled:[32]},[[0,"click","handleClick"],[0,"keydown","handleKeyDown"]]]);function c(){if(typeof customElements==="undefined"){return}const e=["ifx-multiselect-option","ifx-checkbox","ifx-icon"];e.forEach((e=>{switch(e){case"ifx-multiselect-option":if(!customElements.get(n(e))){customElements.define(n(e),h)}break;case"ifx-checkbox":if(!customElements.get(n(e))){o()}break;case"ifx-icon":if(!customElements.get(n(e))){r()}break}}))}export{h as M,c as d};
//# sourceMappingURL=p-sLo8Eo-l.js.map