{"version":3,"names":["isNestedInIfxComponent","el","parent","parentNode","ShadowRoot","host","HTMLElement","tagName","toLowerCase","startsWith","waitForDOMReady","Promise","resolve","document","readyState","onReady","removeEventListener","addEventListener","frameworkCache","detectFramework","async","window","win","doc","process","env","isStorybook","location","search","includes","href","__STORYBOOK_ENV__","isLocalhost","hostname","React","ReactDOM","ng","getAllAngularRootElements","Vue","__VUE__","reactRoot","querySelector","rootContainers","Array","from","querySelectorAll","hasReactRoot","some","container","keys","Object","key","e","initializeTracking","t","r","_kk","n","pp","btntConfig","domain","withCookies","maxBatchSize","z","btntQueue","push","createElement","getElementsByTagName","src","insertBefore","trackComponent","componentName","environment","skipEnvironments","INFINEON_TRACKED_COMPONENTS","Set","has","add","btnt","event_name","component_name"],"sources":["src/shared/utils/dom-utils.ts","src/shared/utils/dom-ready.ts","src/shared/utils/framework-detection.ts","src/shared/utils/tracking.ts"],"sourcesContent":["export const isNestedInIfxComponent = (el: HTMLElement): boolean => {\n\tlet parent: Node | ShadowRoot | null = el.parentNode;\n\n\twhile (parent) {\n\t\tif (parent instanceof ShadowRoot) {\n\t\t\tparent = parent.host;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (\n\t\t\tparent instanceof HTMLElement &&\n\t\t\tparent.tagName.toLowerCase().startsWith(\"ifx\")\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\tparent = parent.parentNode;\n\t}\n\n\treturn false;\n};\n","export const waitForDOMReady = (): Promise<void> => {\n\treturn new Promise((resolve) => {\n\t\tif (\n\t\t\tdocument.readyState === \"complete\" ||\n\t\t\tdocument.readyState === \"interactive\"\n\t\t) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tconst onReady = () => {\n\t\t\t\tresolve();\n\t\t\t\tdocument.removeEventListener(\"DOMContentLoaded\", onReady);\n\t\t\t};\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", onReady);\n\t\t}\n\t});\n};\n","let frameworkCache: string | null = null;\n\nimport { waitForDOMReady } from \"./dom-ready\";\n\nexport const detectFramework = async (): Promise<string> => {\n\tif (frameworkCache) return frameworkCache;\n\n\tif (typeof window === \"undefined\" || typeof document === \"undefined\") {\n\t\tframeworkCache = \"non-browser\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst win = window as any;\n\tconst doc = document;\n\n\tconst isJest =\n\t\ttypeof process !== \"undefined\" &&\n\t\tprocess.env &&\n\t\tprocess.env.NODE_ENV === \"test\";\n\tif (isJest) {\n\t\tframeworkCache = \"jest\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst isStorybook =\n\t\twin.location.search.includes(\"viewMode\") ||\n\t\twin.location.href.includes(\"viewMode\") ||\n\t\twin.__STORYBOOK_ENV__;\n\n\tif (isStorybook) {\n\t\tframeworkCache = \"Storybook\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst isLocalhost = [\"localhost\", \"127.0.0.1\"].includes(\n\t\twin.location.hostname,\n\t);\n\tif (isLocalhost) {\n\t\tframeworkCache = \"localhost\";\n\t\treturn frameworkCache;\n\t}\n\n\ttry {\n\t\tif (win.React || win.ReactDOM) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (win.ng || win.getAllAngularRootElements) {\n\t\t\tframeworkCache = \"Angular\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (win.Vue || win.__VUE__) {\n\t\t\tframeworkCache = \"Vue\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tawait waitForDOMReady();\n\n\t\tconst reactRoot = doc.querySelector(\"[data-reactroot], [data-reactid]\");\n\t\tif (reactRoot) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tconst rootContainers = Array.from(doc.querySelectorAll(\"body > div\"));\n\t\tconst hasReactRoot = rootContainers.some((container) => {\n\t\t\tconst keys = Object.keys(container);\n\t\t\treturn keys.some((key) => key.startsWith(\"__reactContainer\"));\n\t\t});\n\n\t\tif (hasReactRoot) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (doc.querySelector(\"[ng-version], [ng-app]\")) {\n\t\t\tframeworkCache = \"Angular\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (doc.querySelector(\"[data-v-app]\")) {\n\t\t\tframeworkCache = \"Vue\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tframeworkCache = \"Vanilla\";\n\t\treturn frameworkCache;\n\t} catch (e) {\n\t\tframeworkCache = \"error\";\n\t\treturn frameworkCache;\n\t}\n};\n","declare global {\n\tinterface Window {\n\t\tbtntConfig?: any;\n\t\tbtntQueue?: any[];\n\t\tbtnt?: (data: object) => void;\n\t\tINFINEON_TRACKED_COMPONENTS?: Set<string>;\n\t}\n}\n\nconst isTestEnvironment =\n\ttypeof process !== \"undefined\" &&\n\tprocess.env &&\n\tprocess.env.NODE_ENV === \"test\";\n\nfunction initializeTracking() {\n\tif (isTestEnvironment) {\n\t\tif (!window.btnt) {\n\t\t\twindow.btnt = () => {};\n\t\t}\n\t\treturn;\n\t}\n\n\t((t, r, _kk, n, pp) => {\n\t\tif (typeof window.btntConfig !== \"object\") {\n\t\t\twindow.btntConfig = {\n\t\t\t\tdomain: \"https://ssgtm.infineon.com\",\n\t\t\t\twithCookies: true,\n\t\t\t\tmaxBatchSize: 10,\n\t\t\t};\n\t\t}\n\n\t\tif (window[\"btnt\"]) return;\n\n\t\twindow[\"btnt\"] = (z) => {\n\t\t\tif (typeof z !== \"object\") {\n\t\t\t\tz = {};\n\t\t\t}\n\t\t\tif (typeof window.btntQueue !== \"object\") {\n\t\t\t\twindow.btntQueue = [];\n\t\t\t}\n\t\t\twindow.btntQueue.push(z);\n\t\t};\n\n\t\tn = t.createElement(r);\n\n\t\t// Add safety check for test environments\n\t\tpp = t.getElementsByTagName(r)[0];\n\t\tif (pp && pp.parentNode) {\n\t\t\tn.async = 1;\n\t\t\tn.src = window.btntConfig.domain + \"/btnt.js\";\n\t\t\tpp.parentNode.insertBefore(n, pp);\n\t\t}\n\t})(document, \"script\");\n}\n\nexport function trackComponent(componentName: string, environment: string) {\n\tconst skipEnvironments = [\"jest\", \"localhost\", \"error\"];\n\tif (skipEnvironments.includes(environment)) {\n\t\treturn;\n\t}\n\n\tif (!window.INFINEON_TRACKED_COMPONENTS) {\n\t\twindow.INFINEON_TRACKED_COMPONENTS = new Set();\n\t}\n\n\tif (window.INFINEON_TRACKED_COMPONENTS.has(componentName)) {\n\t\treturn;\n\t}\n\n\twindow.INFINEON_TRACKED_COMPONENTS.add(componentName);\n\n\tif (!window.btnt) initializeTracking();\n\n\twindow.btnt({\n\t\tevent_name: \"component_initialized\",\n\t\tcomponent_name: componentName,\n\t\tenvironment: environment,\n\t});\n}\n\nexport default trackComponent;\n"],"mappings":"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","ignoreList":[]}