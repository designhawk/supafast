{"version":3,"names":["filterBarCss","FilterBar","__stencil_proxyCustomElement","HTMLElement","selectedOptions","ifxTopbarFilterChange","showAllFilters","maxShownFilters","visibleSlots","showMoreFiltersButton","connectedCallback","this","el","addEventListener","handleTopbarFilterChange","handleSearchChange","window","handleResetEvent","componentWillUnload","removeEventListener","componentWillLoad","updateVisibleSlots","Number","MAX_SAFE_INTEGER","handleMoreFiltersClick","filterSearchSlot","shadowRoot","querySelector","HTMLSlotElement","filterSearchSlottedElements","assignedElements","flatten","forEach","filterSearchWrapper","filterSearch","searchField","querySelectorAll","length","searchFieldElement","value","emit","event","handleFilterSelect","newSelectedOptions","type","filterName","filterValue","detail","existingOptionIndex","findIndex","option","filterValues","push","render","safeVisibleSlots","Math","max","actualNumberOfComponents","slotsToShow","min","slots","Array","from","_","i","h","class","name","Host","key","onClick","disabled","variant","size","target","theme","icon"],"sources":["src/components/table-advanced-version/filter-bar/filter-bar.scss?tag=ifx-filter-bar&encapsulation=shadow","src/components/table-advanced-version/filter-bar/filter-bar.tsx"],"sourcesContent":["/* filter-bar.scss */\n@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n.search-container {\n  display: flex;\n  width: calc(100% - 48px); /* Adjust width to account for padding */\n  padding-left: 24px;\n  padding-right: 24px;  flex-direction: row;\n  align-items: flex-start;\n  margin-bottom: tokens.$ifxSpace200;\n}\n\n.components-container {\n  display: flex;\n  width: calc(100% - 48px); /* Adjust width to account for padding */\n  padding-left: 24px;\n  padding-right: 24px;  flex-direction: row;\n  align-items: flex-end;\n  align-content:flex-end;\n  flex-wrap: wrap;\n  gap: tokens.$ifxSpace200;\n}\n\n.filter-slot-wrapper {\n    flex-grow: 1;\n    flex-basis: 100%; \n    max-width: 100%; \n  }\n\n@media (max-width: 1024px) { /* Adjust based on your breakpoints for mid/small screens */\n    .more-filters-wrapper {\n        order: 3; /* Keeps the button at the end/new row */\n        width: 100%; /* Takes full width to allow centering */\n        display: flex; /* Enables flexbox properties */\n        justify-content: center; /* Centers the button horizontally */\n        padding-top: tokens.$ifxSpace200; /* Adds space above the button, adjust as needed */\n      }\n  }\n\n\n  @media (min-width: 720px) and (max-width: 1024px) {\n    .filter-slot-wrapper {\n        flex-basis: calc((100% - tokens.$ifxSpace200) / 2);\n        max-width: calc((100% - tokens.$ifxSpace200) / 2);\n      }\n    \n\n}\n\n  @media (min-width: 1025px) {\n    .filter-slot-wrapper {\n        flex-basis: auto; \n        max-width: 200px; \n      }\n\n    ::slotted([slot=\"filter-search\"]) {\n        max-width: 828px;\n      }\n  }\n  \n  ::slotted([slot=\"filter-search\"]) {\n    flex-grow: 1;\n    flex-basis: 100%;\n    width: 100%; \n  }","// FilterBar.tsx\nimport {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tProp,\n\tState,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-filter-bar\",\n\tstyleUrl: \"filter-bar.scss\",\n\tshadow: true,\n})\nexport class FilterBar {\n\t@Element() el: HTMLElement;\n\t@State() selectedOptions: Array<{\n\t\tfilterName: string;\n\t\tfilterValues: [string];\n\t\ttype: string;\n\t}> = [];\n\t@Event() ifxTopbarFilterChange: EventEmitter;\n\t@State() showAllFilters: boolean = false;\n\t@Prop() maxShownFilters: number = 4; // Default to 4, can be overridden by parent component\n\t@State() visibleSlots: number;\n\t@Prop() showMoreFiltersButton: boolean = true;\n\n\t/* If the component is ever removed and then reattached to the DOM, \nconnectedCallback ensures that the event listeners are properly set up again */\n\tconnectedCallback() {\n\t\tthis.el.addEventListener(\"ifxFilterSelect\", this.handleTopbarFilterChange);\n\t\tthis.el.addEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n\t\twindow.addEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\tcomponentWillUnload() {\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSelect\",\n\t\t\tthis.handleTopbarFilterChange,\n\t\t);\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSearchChange\",\n\t\t\tthis.handleSearchChange,\n\t\t);\n\t\twindow.removeEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.updateVisibleSlots();\n\t}\n\n\t// Modify updateVisibleSlots to use showAllFilters to determine the number of slots\n\tupdateVisibleSlots() {\n\t\tthis.visibleSlots = this.showAllFilters\n\t\t\t? Number.MAX_SAFE_INTEGER\n\t\t\t: this.maxShownFilters;\n\t}\n\n\thandleMoreFiltersClick = () => {\n\t\tthis.showAllFilters = true;\n\t\tthis.updateVisibleSlots(); // Recalculate visible slots based on the new state\n\t};\n\n\thandleResetEvent = () => {\n\t\tconst filterSearchSlot = this.el.shadowRoot?.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tif (filterSearchSlot instanceof HTMLSlotElement) {\n\t\t\t// Ensure it's treated as HTMLSlotElement\n\t\t\tconst filterSearchSlottedElements = filterSearchSlot.assignedElements({\n\t\t\t\tflatten: true,\n\t\t\t});\n\n\t\t\tfilterSearchSlottedElements.forEach(\n\t\t\t\t(filterSearchWrapper: HTMLElement) => {\n\t\t\t\t\tconst filterSearch =\n\t\t\t\t\t\tfilterSearchWrapper.querySelector(\"ifx-filter-search\");\n\n\t\t\t\t\tconst searchField =\n\t\t\t\t\t\tfilterSearch.shadowRoot.querySelectorAll(\"ifx-search-field\");\n\n\t\t\t\t\tif (searchField.length > 0) {\n\t\t\t\t\t\tsearchField.forEach((searchFieldElement: any) => {\n\t\t\t\t\t\t\tsearchFieldElement.value = \"\";\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.selectedOptions = [];\n\n\t\t// Emit the change to inform any parent components that the filters have been reset\n\t\tthis.ifxTopbarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleSearchChange = (event: CustomEvent) => {\n\t\tthis.handleTopbarFilterChange(event);\n\t};\n\n\thandleFilterSelect = (event: CustomEvent) => {\n\t\tthis.handleTopbarFilterChange(event);\n\t};\n\n\thandleTopbarFilterChange = (event: CustomEvent) => {\n\t\tconst newSelectedOptions = [...this.selectedOptions];\n\n\t\tif (event.type === \"ifxFilterSearchChange\") {\n\t\t\tconst { filterName, filterValue } = event.detail;\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter is found, update its value\n\t\t\t\tnewSelectedOptions[existingOptionIndex].filterValues = [filterValue];\n\t\t\t} else {\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterName: filterName,\n\t\t\t\t\tfilterValues: [filterValue],\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (event.type === \"ifxFilterSelect\") {\n\t\t\tconst { filterName, filterValues, type } = event.detail;\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\tnewSelectedOptions[existingOptionIndex].filterValues = filterValues;\n\t\t\t\tnewSelectedOptions[existingOptionIndex].type = type; // Update type based on the number of selected items\n\t\t\t} else {\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterName: filterName,\n\t\t\t\t\tfilterValues: filterValues,\n\t\t\t\t\ttype: type,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.selectedOptions = newSelectedOptions;\n\t\tthis.ifxTopbarFilterChange.emit(this.selectedOptions);\n\t};\n\n\trender() {\n\t\tconst safeVisibleSlots = Math.max(0, this.visibleSlots);\n\n\t\tconst actualNumberOfComponents =\n\t\t\tthis.el.querySelectorAll(\"ifx-set-filter\").length;\n\t\t// Calculate slotsToShow safely\n\t\tconst slotsToShow = Math.min(\n\t\t\tsafeVisibleSlots,\n\t\t\tactualNumberOfComponents,\n\t\t\tNumber.MAX_SAFE_INTEGER,\n\t\t);\n\n\t\tconst slots = Array.from({ length: slotsToShow }, (_, i) => (\n\t\t\t<div class=\"filter-slot-wrapper\">\n\t\t\t\t<slot name={`filter-component-${i + 1}`}></slot>\n\t\t\t</div>\n\t\t));\n\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"search-container\">\n\t\t\t\t\t<slot name=\"filter-search\"></slot>{\" \"}\n\t\t\t\t\t{/* Directly place the search slot here */}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"components-container\">\n\t\t\t\t\t{slots.length > 0 ? slots : <slot name=\"filter-component\"></slot>}\n\t\t\t\t\t{this.showMoreFiltersButton && !this.showAllFilters && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"more-filters-wrapper\"\n\t\t\t\t\t\t\tonClick={this.handleMoreFiltersClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ifx-button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\t\tsize=\"m\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\ttheme=\"default\"\n\t\t\t\t\t\t\t\tfull-width=\"false\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ifx-icon icon=\"filter-16\"></ifx-icon>More filters\n\t\t\t\t\t\t\t</ifx-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}