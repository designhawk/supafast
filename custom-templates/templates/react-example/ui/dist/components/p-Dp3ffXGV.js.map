{"version":3,"names":["searchFieldCss","SearchField","__stencil_proxyCustomElement","HTMLElement","inputElement","dropdownElement","value","suggestions","showSuggestions","maxSuggestions","maxHistoryItems","enableHistory","historyKey","historyHeaderText","ariaLabel","ariaLabelledBy","ariaDescribedBy","deleteIconAriaLabel","historyDeleteAriaLabel","dropdownAriaLabel","suggestionAriaLabel","historyItemAriaLabel","ifxInput","ifxSuggestionRequested","ifxSuggestionSelected","ifxFocus","ifxBlur","showDropdown","filteredSuggestions","selectedSuggestionIndex","searchHistory","showDeleteIcon","showDeleteIconInternalState","disabled","size","isFocused","placeholder","autocomplete","maxlength","focusEmitted","handleOutsideClick","event","path","composedPath","includes","this","hideDropdown","handleKeyDown","key","preventDefault","navigateSuggestions","selectSuggestion","handleSearch","valueWatcher","newValue","updateSuggestions","suggestionsWatcher","handleInput","query","emit","requestSuggestions","handleDelete","trim","length","addToHistory","focusInput","showHistoryDropdown","blurInput","setTimeout","loadSearchHistory","localStorage","stored","getItem","JSON","parse","clearSearchHistory","removeItem","term","history","existingIndex","indexOf","splice","unshift","slice","setItem","stringify","removeFromHistory","index","handleHistoryDelete","stopPropagation","toLowerCase","filteredExternal","filter","s","text","filteredHistory","map","id","type","sort","a","b","aText","bText","aStartsWith","startsWith","bStartsWith","localeCompare","historySuggestions","uniqueSuggestions","reduce","unique","current","findIndex","item","scope","push","direction","maxIndex","suggestion","isShowingOnlyHistory","every","renderHighlightedText","lowerText","lowerQuery","before","substring","match","after","h","componentWillLoad","componentDidLoad","isNestedInIfxComponent","el","framework","detectFramework","trackComponent","componentWillUpdate","render","class","getWrapperClassNames","tabindex","onClick","icon","ref","onInput","onFocus","onBlur","role","undefined","onKeyDown","getSuggestionClassNames","resultCount","onMouseEnter","getSizeClass","classNames"],"sources":["src/components/search-field/search-field.scss?tag=ifx-search-field&encapsulation=shadow","src/components/search-field/search-field.tsx"],"sourcesContent":["@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n:host {\n  display: flex;\n}\n\n.search-field {\n  box-sizing: border-box;\n  background-color: tokens.$ifxColorBaseWhite;\n  width: 100%;\n  font-family: var(--ifx-font-family);\n  position: relative; // Wichtig für absolute positioning des Dropdowns\n\n  .search-field__wrapper {\n    box-sizing: border-box;\n    height: tokens.$ifxSize500;\n    display: flex;\n    align-items: center;\n    border: 1px solid #8d8786;\n    border-radius: tokens.$ifxBorderRadius12;\n    padding: tokens.$ifxSpace100 tokens.$ifxSpace200;\n    gap: tokens.$ifxSpace150;\n    flex: none;\n    order: 0;\n    align-self: stretch;\n    flex-grow: 0;\n    position: relative;\n    width: 100%;\n    outline: none;\n\n    &:focus-visible:not(.disabled) {\n      outline: 2px solid tokens.$ifxColorOcean500;\n      outline-offset: 2px;\n    }\n\n    &.search-field__wrapper-s {\n      height: 36px;\n    }\n\n    &:hover:not(.focused, :focus) {\n      border: 1px solid #3c3a39;\n    }\n\n    & .delete-icon {\n      outline: 1px solid transparent;\n      right: 12px;\n      cursor: pointer;\n      &:focus-visible {\n        outline: 2px solid tokens.$ifxColorOcean500;\n        outline-offset: 1px;\n      }\n    }\n\n    input[type='text'] {\n      font-style: normal;\n      font-weight: 400;\n      font-size: 16px;\n      //line-height: 24px;\n      color: #8d8786;\n      border: none;\n      width: 100%;\n      outline: none;\n      //height: 100%;\n      height: 16px;\n\n      &:focus {\n        outline: none;\n        color: #1d1d1d;\n      }\n\n      &:disabled {\n        background: tokens.$ifxColorEngineering300;\n        color: tokens.$ifxColorBaseWhite;\n\n        &::placeholder {\n          color: tokens.$ifxColorBaseWhite;\n        }\n      }\n    }\n\n    &.disabled {\n      background: tokens.$ifxColorEngineering300;\n      border: none;\n      color: tokens.$ifxColorBaseWhite;\n\n      &:hover {\n        border: none;\n        outline: none;\n      }\n\n      & .delete-icon { \n        cursor: default;\n        &:focus-visible { \n          outline: 1px solid transparent;\n        }\n      }\n    }\n  }\n\n  // Suggestions Dropdown Styles\n  .suggestions-dropdown {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    right: 0;\n    background: tokens.$ifxColorBaseWhite;\n    margin-top: tokens.$ifxSpace50;\n    border: 1px solid tokens.$ifxColorEngineering200;\n    box-shadow: 0px 6px 9px 0px rgba(29, 29, 29, 0.1);\n    z-index: 1000;\n    max-height: 300px;\n    overflow-y: auto;\n    container-type: inline-size; // Enable container queries\n\n    .suggestions-header {\n      // font: tokens.$ifxEyebrowEyebrow02; TODO\n      font-family: Source Sans 3;\n      font-size: 0.8125rem;\n      font-weight: 600;\n      line-height: 1.25rem;\n\n      letter-spacing: 0.25em;\n      text-transform: uppercase;\n      color: tokens.$ifxColorEngineering500;\n      border-bottom: 1px solid tokens.$ifxColorEngineering200;\n      padding: tokens.$ifxSpace150 tokens.$ifxSpace200;\n    }\n\n    .suggestion-item {\n      padding: tokens.$ifxSpace150 tokens.$ifxSpace200;\n      cursor: pointer;\n      transition: background-color 0.2s ease;\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      &:hover,\n      &--selected {\n        background-color: tokens.$ifxColorEngineering200;\n      }\n\n      .suggestion-content {\n        display: flex;\n        align-items: center;\n        gap: tokens.$ifxSpace150;\n\n        .suggestion-icon {\n          color: tokens.$ifxColorEngineering500;\n          flex-shrink: 0;\n\n          &--history {\n            color: tokens.$ifxColorEngineering500;\n          }\n        }\n\n        .suggestion-text {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          min-width: 0; // Important for flexbox truncation\n\n          .suggestion-main-text {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            flex-shrink: 1;\n            min-width: 0;\n          }\n\n          .suggestion-scope {\n            color: tokens.$ifxColorEngineering400;\n            flex-shrink: 0; // Never truncate the scope\n            white-space: nowrap;\n            margin-left: tokens.$ifxSpace25; // Add space before the scope\n            font-weight: tokens.$ifxFontWeightSemibold;\n            font-size: tokens.$ifxFontSizeXs;\n          }\n\n          // When container is narrow, stack scope below main text\n          @container (max-width: 320px) {\n            flex-direction: column;\n            align-items: flex-start;\n\n            .suggestion-main-text {\n              width: 100%;\n              max-width: 100%;\n            }\n\n            .suggestion-scope {\n              margin-left: 0;\n              margin-top: 0;\n              width: 100%;\n              max-width: 100%;\n              overflow: hidden;\n              text-overflow: ellipsis;\n              flex-shrink: 1; // Allow truncation when narrow\n            }\n          }\n        }\n\n        .suggestion-count {\n          color: tokens.$ifxColorEngineering400;\n          margin-left: auto;\n          flex-shrink: 0;\n        }\n\n        .suggestion-delete-icon {\n          opacity: 0;\n          visibility: hidden;\n          transition: opacity 0.2s ease, visibility 0.2s ease;\n          cursor: pointer;\n          margin-left: auto;\n          flex-shrink: 0;\n          color: tokens.$ifxColorEngineering500;\n\n          &:hover {\n            color: tokens.$ifxColorEngineering600;\n          }\n        }\n      }\n\n      &:hover {\n        .suggestion-delete-icon {\n          opacity: 1;\n          visibility: visible;\n        }\n      }\n    }\n  }\n\n  // Wrapper modifications when dropdown is open\n  .search-field__wrapper.dropdown-open {\n    border-radius: tokens.$ifxBorderRadius12 tokens.$ifxBorderRadius12 0 0;\n    border-color: tokens.$ifxColorOcean500;\n  }\n}\n","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tListen,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\nimport classNames from \"classnames\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\n\nexport interface SuggestionItem {\n\tid: string;\n\ttext: string;\n\ttype?: \"suggestion\" | \"history\";\n\tscope?: string;\n\tresultCount?: number;\n\tmetadata?: any;\n}\n\n@Component({\n\ttag: \"ifx-search-field\",\n\tstyleUrl: \"search-field.scss\",\n\tshadow: true,\n})\nexport class SearchField {\n\t@Element() el;\n\tprivate inputElement: HTMLInputElement;\n\tprivate dropdownElement: HTMLDivElement;\n\n\t@Prop({ mutable: true }) value: string = \"\";\n\t@Prop() suggestions: SuggestionItem[] = [];\n\t@Prop() showSuggestions: boolean = false;\n\t@Prop() maxSuggestions: number = 10;\n\t@Prop() maxHistoryItems: number = 5;\n\t@Prop() enableHistory: boolean = true;\n\t@Prop() historyKey: string = \"ifx-search-history\";\n\t@Prop() historyHeaderText: string = \"Recent Searches\";\n\n\t// ARIA Labels and Accessibility Props\n\t@Prop() ariaLabel: string | null = \"Search Field\";\n\t@Prop() ariaLabelledBy?: string | null;\n\t@Prop() ariaDescribedBy?: string | null;\n\t@Prop() deleteIconAriaLabel: string = \"Clear search\";\n\t@Prop() historyDeleteAriaLabel: string = \"Remove from history\";\n\t@Prop() dropdownAriaLabel: string = \"Search suggestions and history\";\n\t@Prop() suggestionAriaLabel: string = \"Search suggestion\";\n\t@Prop() historyItemAriaLabel: string = \"Search history item\";\n\n\t@Event() ifxInput: EventEmitter<string>;\n\t@Event() ifxSuggestionRequested: EventEmitter<string>;\n\t@Event() ifxSuggestionSelected: EventEmitter<SuggestionItem>;\n\t@Event() ifxFocus: EventEmitter<void>;\n\t@Event() ifxBlur: EventEmitter<void>;\n\n\t@State() showDropdown: boolean = false;\n\t@State() filteredSuggestions: SuggestionItem[] = [];\n\t@State() selectedSuggestionIndex: number = -1;\n\t@State() searchHistory: string[] = [];\n\n\t@Prop() showDeleteIcon: boolean = false;\n\t@State() showDeleteIconInternalState: boolean = false;\n\t@Prop() disabled: boolean = false;\n\t@Prop() size: string = \"l\";\n\t@State() isFocused: boolean = false;\n\t@Prop() placeholder: string = \"Search...\";\n\t@Prop() autocomplete: string = \"off\";\n\t@Prop() maxlength?: number = null;\n\n\tprivate focusEmitted: boolean = false;\n\n\t@Listen(\"mousedown\", { target: \"document\" })\n\thandleOutsideClick(event: MouseEvent) {\n\t\tconst path = event.composedPath();\n\t\tif (\n\t\t\t!path.includes(this.inputElement) &&\n\t\t\t!path.includes(this.dropdownElement)\n\t\t) {\n\t\t\tthis.hideDropdown();\n\t\t}\n\t}\n\n\t@Listen(\"keydown\")\n\thandleKeyDown(event: KeyboardEvent) {\n\t\tif (!this.showDropdown) return;\n\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateSuggestions(1);\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateSuggestions(-1);\n\t\t\t\tbreak;\n\t\t\tcase \"Enter\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (this.selectedSuggestionIndex >= 0) {\n\t\t\t\t\tthis.selectSuggestion(\n\t\t\t\t\t\tthis.filteredSuggestions[this.selectedSuggestionIndex],\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.handleSearch();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Escape\":\n\t\t\t\tthis.hideDropdown();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Watch(\"value\")\n\tvalueWatcher(newValue: string) {\n\t\tif (this.inputElement && newValue !== this.inputElement.value) {\n\t\t\tthis.inputElement.value = newValue;\n\t\t}\n\t\tthis.updateSuggestions();\n\t}\n\n\t@Watch(\"suggestions\")\n\tsuggestionsWatcher() {\n\t\tthis.updateSuggestions();\n\t}\n\n\thandleInput = () => {\n\t\tconst query = this.inputElement.value;\n\t\tthis.value = query;\n\t\tthis.ifxInput.emit(this.value);\n\n\t\tif (this.showSuggestions) {\n\t\t\tthis.showDropdown = true;\n\t\t\tthis.selectedSuggestionIndex = -1;\n\t\t\tthis.requestSuggestions(query);\n\t\t}\n\t};\n\n\thandleDelete = () => {\n\t\tif (!this.disabled) {\n\t\t\tthis.inputElement.value = \"\";\n\t\t\tthis.value = \"\";\n\t\t\tthis.ifxInput.emit(this.value);\n\t\t\tthis.hideDropdown();\n\t\t}\n\t};\n\n\thandleSearch = () => {\n\t\tif (this.value.trim() && this.enableHistory) {\n\t\t\t// Only add to history if there are actual results\n\t\t\tif (this.filteredSuggestions.length > 0) {\n\t\t\t\tthis.addToHistory(this.value);\n\t\t\t}\n\t\t}\n\t\tthis.hideDropdown();\n\t};\n\n\tfocusInput() {\n\t\t// Only emit focus event if it hasn't been emitted already\n\t\tif (!this.focusEmitted) {\n\t\t\tthis.focusEmitted = true;\n\t\t\tthis.isFocused = true;\n\t\t\tthis.ifxFocus.emit();\n\t\t}\n\n\t\tif (this.showSuggestions) {\n\t\t\t// On focus without input: Show only history\n\t\t\tif (this.value.length === 0) {\n\t\t\t\tthis.showHistoryDropdown();\n\t\t\t\t// Only show dropdown if history is actually present\n\t\t\t\tthis.showDropdown = this.enableHistory && this.searchHistory.length > 0;\n\t\t\t} else {\n\t\t\t\t// With existing input: Normal suggestion logic\n\t\t\t\tthis.updateSuggestions();\n\t\t\t\tthis.showDropdown = this.filteredSuggestions.length > 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tblurInput() {\n\t\tsetTimeout(() => {\n\t\t\tthis.isFocused = false;\n\t\t\tthis.focusEmitted = false; // Reset focus flag when blur occurs\n\t\t\tthis.ifxBlur.emit();\n\t\t}, 150);\n\t}\n\n\t// Public method to update history from external sources\n\tpublic loadSearchHistory() {\n\t\tif (this.enableHistory && typeof localStorage !== \"undefined\") {\n\t\t\tconst stored = localStorage.getItem(this.historyKey);\n\t\t\tthis.searchHistory = stored ? JSON.parse(stored) : [];\n\n\t\t\t// Update suggestions when history is loaded\n\t\t\tthis.updateSuggestions();\n\n\t\t\t// If no input and no history left, close dropdown\n\t\t\tif (this.value.length === 0 && this.searchHistory.length === 0) {\n\t\t\t\tthis.showDropdown = false;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Public method to completely clear history\n\tpublic clearSearchHistory() {\n\t\tif (this.enableHistory && typeof localStorage !== \"undefined\") {\n\t\t\t// Clear from localStorage\n\t\t\tlocalStorage.removeItem(this.historyKey);\n\n\t\t\t// Clear internal history\n\t\t\tthis.searchHistory = [];\n\n\t\t\t// Reset all dropdown-relevant states\n\t\t\tthis.filteredSuggestions = [];\n\t\t\tthis.selectedSuggestionIndex = -1;\n\t\t\tthis.showDropdown = false;\n\n\t\t\t// Update suggestions after reset\n\t\t\tthis.updateSuggestions();\n\t\t}\n\t}\n\n\t// Suggestion Management Methods\n\tprivate addToHistory(term: string) {\n\t\tif (!this.enableHistory || !term.trim()) return;\n\n\t\tconst history = [...this.searchHistory];\n\t\tconst existingIndex = history.indexOf(term);\n\n\t\tif (existingIndex > -1) {\n\t\t\thistory.splice(existingIndex, 1);\n\t\t}\n\n\t\thistory.unshift(term);\n\t\t// Limit history to maxHistoryItems (default 5)\n\t\tthis.searchHistory = history.slice(0, this.maxHistoryItems);\n\n\t\tif (typeof localStorage !== \"undefined\") {\n\t\t\tlocalStorage.setItem(this.historyKey, JSON.stringify(this.searchHistory));\n\t\t}\n\t}\n\n\t// Remove individual history entry\n\tprivate removeFromHistory(term: string) {\n\t\tif (!this.enableHistory) return;\n\n\t\tconst history = [...this.searchHistory];\n\t\tconst index = history.indexOf(term);\n\n\t\tif (index > -1) {\n\t\t\thistory.splice(index, 1);\n\t\t\tthis.searchHistory = history;\n\n\t\t\t// Update localStorage\n\t\t\tif (typeof localStorage !== \"undefined\") {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\tthis.historyKey,\n\t\t\t\t\tJSON.stringify(this.searchHistory),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Update suggestions after removal\n\t\t\tthis.updateSuggestions();\n\n\t\t\t// Close dropdown if no history remains\n\t\t\tif (this.searchHistory.length === 0 && this.value.length === 0) {\n\t\t\t\tthis.showDropdown = false;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Handle click on history delete button\n\tprivate handleHistoryDelete = (event: Event, term: string) => {\n\t\tevent.stopPropagation(); // Prevent selection of the entry\n\t\tthis.removeFromHistory(term);\n\t};\n\n\tprivate requestSuggestions(query: string) {\n\t\tthis.ifxSuggestionRequested.emit(query);\n\t\tthis.updateSuggestions();\n\t}\n\n\tprivate updateSuggestions() {\n\t\tconst query = this.value.toLowerCase();\n\t\tlet suggestions: SuggestionItem[] = [];\n\n\t\tif (query.length > 0) {\n\t\t\t// For text input: Mix external suggestions and relevant history\n\n\t\t\t// 1. Filter external suggestions\n\t\t\tif (this.suggestions && this.suggestions.length > 0) {\n\t\t\t\tconst filteredExternal = this.suggestions.filter((s) =>\n\t\t\t\t\ts.text.toLowerCase().includes(query),\n\t\t\t\t);\n\t\t\t\tsuggestions = [...suggestions, ...filteredExternal];\n\t\t\t}\n\n\t\t\t// 2. Filter relevant history entries\n\t\t\tif (this.enableHistory && this.searchHistory.length > 0) {\n\t\t\t\tconst filteredHistory = this.searchHistory\n\t\t\t\t\t.filter((term) => term.toLowerCase().includes(query))\n\t\t\t\t\t.map((term, index) => ({\n\t\t\t\t\t\tid: `history-${index}`,\n\t\t\t\t\t\ttext: term,\n\t\t\t\t\t\ttype: \"history\" as const,\n\t\t\t\t\t}));\n\t\t\t\tsuggestions = [...suggestions, ...filteredHistory];\n\t\t\t}\n\n\t\t\t// 3. Sort by relevance (exact matches first, then prefix matches)\n\t\t\tsuggestions.sort((a, b) => {\n\t\t\t\tconst aText = a.text.toLowerCase();\n\t\t\t\tconst bText = b.text.toLowerCase();\n\n\t\t\t\t// Exact match has highest priority\n\t\t\t\tif (aText === query && bText !== query) return -1;\n\t\t\t\tif (bText === query && aText !== query) return 1;\n\n\t\t\t\t// Prefix match has second highest priority\n\t\t\t\tconst aStartsWith = aText.startsWith(query);\n\t\t\t\tconst bStartsWith = bText.startsWith(query);\n\n\t\t\t\tif (aStartsWith && !bStartsWith) return -1;\n\t\t\t\tif (bStartsWith && !aStartsWith) return 1;\n\n\t\t\t\t// With equal relevance: external suggestions before history\n\t\t\t\tif (a.type === \"suggestion\" && b.type === \"history\") return -1;\n\t\t\t\tif (a.type === \"history\" && b.type === \"suggestion\") return 1;\n\n\t\t\t\t// Alphabetical sorting as last criterion\n\t\t\t\treturn aText.localeCompare(bText);\n\t\t\t});\n\t\t} else {\n\t\t\t// For empty query: Show only history (no external suggestions)\n\t\t\tif (this.enableHistory && this.searchHistory.length > 0) {\n\t\t\t\tconst historySuggestions = this.searchHistory.map((term, index) => ({\n\t\t\t\t\tid: `history-${index}`,\n\t\t\t\t\ttext: term,\n\t\t\t\t\ttype: \"history\" as const,\n\t\t\t\t}));\n\n\t\t\t\tsuggestions = historySuggestions;\n\t\t\t}\n\t\t\t// For empty query DO NOT show external suggestions\n\t\t}\n\n\t\t// Remove duplicates based on text and scope combination (history takes precedence over external)\n\t\tconst uniqueSuggestions = suggestions.reduce(\n\t\t\t(unique: SuggestionItem[], current) => {\n\t\t\t\tconst existingIndex = unique.findIndex(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\titem.text.toLowerCase() === current.text.toLowerCase() &&\n\t\t\t\t\t\titem.scope === current.scope,\n\t\t\t\t);\n\t\t\t\tif (existingIndex === -1) {\n\t\t\t\t\tunique.push(current);\n\t\t\t\t} else {\n\t\t\t\t\t// If already exists, prefer history over external suggestions\n\t\t\t\t\tif (\n\t\t\t\t\t\tcurrent.type === \"history\" &&\n\t\t\t\t\t\tunique[existingIndex].type !== \"history\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tunique[existingIndex] = current;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn unique;\n\t\t\t},\n\t\t\t[],\n\t\t);\n\n\t\tthis.filteredSuggestions = uniqueSuggestions.slice(0, this.maxSuggestions);\n\t\tthis.selectedSuggestionIndex = -1;\n\t}\n\n\tprivate navigateSuggestions(direction: number) {\n\t\tconst maxIndex = this.filteredSuggestions.length - 1;\n\n\t\tif (direction > 0) {\n\t\t\tthis.selectedSuggestionIndex =\n\t\t\t\tthis.selectedSuggestionIndex < maxIndex\n\t\t\t\t\t? this.selectedSuggestionIndex + 1\n\t\t\t\t\t: 0;\n\t\t} else {\n\t\t\tthis.selectedSuggestionIndex =\n\t\t\t\tthis.selectedSuggestionIndex > 0\n\t\t\t\t\t? this.selectedSuggestionIndex - 1\n\t\t\t\t\t: maxIndex;\n\t\t}\n\t}\n\n\tprivate selectSuggestion(suggestion: SuggestionItem) {\n\t\tthis.value = suggestion.text;\n\t\tthis.inputElement.value = suggestion.text;\n\t\tthis.ifxSuggestionSelected.emit(suggestion);\n\t\tthis.ifxInput.emit(this.value);\n\n\t\tif (this.enableHistory) {\n\t\t\t// Always add selected suggestions to history since they are valid results\n\t\t\tthis.addToHistory(suggestion.text);\n\t\t}\n\n\t\tthis.hideDropdown();\n\t}\n\n\tprivate hideDropdown() {\n\t\tthis.showDropdown = false;\n\t\tthis.selectedSuggestionIndex = -1;\n\t\tthis.isFocused = false;\n\t}\n\n\t// Show only history in dropdown (e.g. on focus without input)\n\tprivate showHistoryDropdown() {\n\t\tif (this.enableHistory && this.searchHistory.length > 0) {\n\t\t\t// Show only history entries\n\t\t\tconst historySuggestions = this.searchHistory.map((term, index) => ({\n\t\t\t\tid: `history-${index}`,\n\t\t\t\ttext: term,\n\t\t\t\ttype: \"history\" as const,\n\t\t\t}));\n\n\t\t\tthis.filteredSuggestions = historySuggestions.slice(\n\t\t\t\t0,\n\t\t\t\tthis.maxSuggestions,\n\t\t\t);\n\t\t\tthis.selectedSuggestionIndex = -1;\n\t\t} else {\n\t\t\tthis.filteredSuggestions = [];\n\t\t}\n\t}\n\n\t// Check if only history entries are displayed (without text input)\n\tprivate isShowingOnlyHistory(): boolean {\n\t\treturn (\n\t\t\tthis.value.length === 0 &&\n\t\t\tthis.filteredSuggestions.length > 0 &&\n\t\t\tthis.filteredSuggestions.every((s) => s.type === \"history\")\n\t\t);\n\t}\n\n\t// Render text with highlighted matches\n\tprivate renderHighlightedText(text: string, query: string) {\n\t\tif (!query || query.length === 0) {\n\t\t\treturn text;\n\t\t}\n\n\t\tconst lowerText = text.toLowerCase();\n\t\tconst lowerQuery = query.toLowerCase();\n\t\tconst index = lowerText.indexOf(lowerQuery);\n\n\t\tif (index === -1) {\n\t\t\treturn text;\n\t\t}\n\n\t\tconst before = text.substring(0, index);\n\t\tconst match = text.substring(index, index + query.length);\n\t\tconst after = text.substring(index + query.length);\n\n\t\treturn [before, <strong>{match}</strong>, after];\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.loadSearchHistory();\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-search-field\", await framework);\n\t\t}\n\t}\n\n\tcomponentWillUpdate() {\n\t\tif (this.value !== \"\") {\n\t\t\tthis.showDeleteIconInternalState = true;\n\t\t} else this.showDeleteIconInternalState = false;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\taria-disabled={this.disabled}\n\t\t\t\taria-value={this.value}\n\t\t\t\tclass=\"search-field\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass={this.getWrapperClassNames()}\n\t\t\t\t\ttabindex={1}\n\t\t\t\t\tonClick={() => this.focusInput()}\n\t\t\t\t>\n\t\t\t\t\t<ifx-icon icon=\"search-16\" class=\"search-icon\"></ifx-icon>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={(el) => (this.inputElement = el)}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete={this.autocomplete}\n\t\t\t\t\t\tonInput={() => this.handleInput()}\n\t\t\t\t\t\tonFocus={() => this.focusInput()}\n\t\t\t\t\t\tonBlur={() => this.blurInput()}\n\t\t\t\t\t\tplaceholder={this.placeholder}\n\t\t\t\t\t\tdisabled={this.disabled}\n\t\t\t\t\t\tmaxlength={this.maxlength}\n\t\t\t\t\t\tvalue={this.value}\n\t\t\t\t\t\trole=\"combobox\"\n\t\t\t\t\t\taria-controls={\n\t\t\t\t\t\t\tthis.showDropdown ? \"suggestions-dropdown\" : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-expanded={this.showDropdown}\n\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\taria-haspopup=\"listbox\"\n\t\t\t\t\t\taria-label={this.ariaLabel}\n\t\t\t\t\t\taria-labelledby={this.ariaLabelledBy}\n\t\t\t\t\t\taria-describedby={this.ariaDescribedBy}\n\t\t\t\t\t\taria-owns={this.showDropdown ? \"suggestions-dropdown\" : undefined}\n\t\t\t\t\t\taria-activedescendant={\n\t\t\t\t\t\t\tthis.selectedSuggestionIndex >= 0\n\t\t\t\t\t\t\t\t? `suggestion-${this.selectedSuggestionIndex}`\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.showDeleteIcon && this.showDeleteIconInternalState ? (\n\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\ticon=\"cRemove16\"\n\t\t\t\t\t\t\tclass=\"delete-icon\"\n\t\t\t\t\t\t\tonClick={this.handleDelete}\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\taria-label={this.deleteIconAriaLabel}\n\t\t\t\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\t\t\t\tif (event.key === \"Enter\" || event.key === \" \") {\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\tthis.handleDelete();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></ifx-icon>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Suggestions Dropdown */}\n\t\t\t\t{this.showDropdown && this.filteredSuggestions.length > 0 && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={(el) => (this.dropdownElement = el)}\n\t\t\t\t\t\tid=\"suggestions-dropdown\"\n\t\t\t\t\t\tclass=\"suggestions-dropdown\"\n\t\t\t\t\t\trole=\"listbox\"\n\t\t\t\t\t\taria-label={this.dropdownAriaLabel}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* History Header - only show when exclusively showing history entries */}\n\t\t\t\t\t\t{this.isShowingOnlyHistory() && (\n\t\t\t\t\t\t\t<div class=\"suggestions-header\">{this.historyHeaderText}</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{this.filteredSuggestions.map((suggestion, index) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={suggestion.id}\n\t\t\t\t\t\t\t\tid={`suggestion-${index}`}\n\t\t\t\t\t\t\t\tclass={this.getSuggestionClassNames(index)}\n\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\taria-selected={index === this.selectedSuggestionIndex}\n\t\t\t\t\t\t\t\taria-label={`${suggestion.type === \"history\" ? this.historyItemAriaLabel : this.suggestionAriaLabel}: ${suggestion.text}${suggestion.scope ? `, ${suggestion.scope}` : \"\"}${suggestion.resultCount ? `, ${suggestion.resultCount} results` : \"\"}`}\n\t\t\t\t\t\t\t\tonClick={() => this.selectSuggestion(suggestion)}\n\t\t\t\t\t\t\t\tonMouseEnter={() => (this.selectedSuggestionIndex = index)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"suggestion-content\">\n\t\t\t\t\t\t\t\t\t{suggestion.type === \"history\" && (\n\t\t\t\t\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\t\t\t\t\ticon=\"history-16\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"suggestion-icon suggestion-icon--history\"\n\t\t\t\t\t\t\t\t\t\t></ifx-icon>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{suggestion.type === \"suggestion\" && (\n\t\t\t\t\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\t\t\t\t\ticon=\"search-16\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"suggestion-icon suggestion-icon--suggestion\"\n\t\t\t\t\t\t\t\t\t\t></ifx-icon>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<span class=\"suggestion-text\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"suggestion-main-text\">\n\t\t\t\t\t\t\t\t\t\t\t{this.renderHighlightedText(suggestion.text, this.value)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{suggestion.scope && (\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"suggestion-scope\">– {suggestion.scope}</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t{suggestion.resultCount !== undefined && suggestion.scope && (\n\t\t\t\t\t\t\t\t\t\t<span class=\"suggestion-count\">\n\t\t\t\t\t\t\t\t\t\t\t{suggestion.resultCount}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{/* Delete Button only for history entries */}\n\t\t\t\t\t\t\t\t\t{suggestion.type === \"history\" && (\n\t\t\t\t\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\t\t\t\t\ticon=\"cross16\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"suggestion-delete-icon\"\n\t\t\t\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\t\t\t\t\taria-label={`${this.historyDeleteAriaLabel}: ${suggestion.text}`}\n\t\t\t\t\t\t\t\t\t\t\tonClick={(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\tthis.handleHistoryDelete(event, suggestion.text)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (event.key === \"Enter\" || event.key === \" \") {\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleHistoryDelete(event, suggestion.text);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></ifx-icon>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetSizeClass() {\n\t\treturn `${this.size}` === \"s\" ? \"search-field__wrapper-s\" : \"\";\n\t}\n\n\tgetWrapperClassNames() {\n\t\treturn classNames(\n\t\t\t`search-field__wrapper`,\n\t\t\t`search-field__wrapper ${this.getSizeClass()}`,\n\t\t\t`${this.isFocused ? \"focused\" : \"\"}`,\n\t\t\t`${this.showDropdown ? \"dropdown-open\" : \"\"}`,\n\t\t\t`${this.disabled ? \"disabled\" : \"\"}`,\n\t\t);\n\t}\n\n\tgetSuggestionClassNames(index: number) {\n\t\treturn classNames(\"suggestion-item\", {\n\t\t\t\"suggestion-item--selected\": index === this.selectedSuggestionIndex,\n\t\t\t\"suggestion-item--history\":\n\t\t\t\tthis.filteredSuggestions[index]?.type === \"history\",\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]}