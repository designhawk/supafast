{"version":3,"names":["filterObject","obj","fn","Object","keys","reduce","accum","property","value","isDefined","isJSONParseable","str","JSON","parse","e","selectCss","ChoicesJs","Choices","__stencil_proxyCustomElement","HTMLElement","name","items","choices","undefined","renderChoiceLimit","maxItemCount","addItems","removeItems","removeItemButton","editItems","duplicateItemsAllowed","delimiter","paste","showSearch","searchChoices","searchFields","searchFloor","searchResultLimit","position","resetScrollPosition","shouldSort","shouldSortItems","sorter","placeholder","searchPlaceholderValue","prependValue","appendValue","renderSelectedChoices","loadingText","noResultsText","noChoicesText","itemSelectText","addItemText","maxItemText","uniqueItemText","classNames","fuseOptions","addItemFilter","customAddItemText","callbackOnInit","callbackOnCreateTemplates","valueComparer","error","label","caption","disabled","required","placeholderValue","ifxSelect","ifxInput","options","size","selectedOption","optionIsSelected","showClearButton","resizeObserver","previousOptions","choice","element","watchDisabled","newValue","this","disable","enable","clearSelection","clearInput","clearSelectField","setPreSelected","closeDropdown","emit","handleChange","getValue","highlightItem","item","runEvent","unhighlightItem","highlightAll","unhighlightAll","removeActiveItemsByValue","removeActiveItems","excludedId","removeHighlightedItems","showDropdown","focusInput","hideDropdown","blurInput","valueOnly","setValue","args","setChoiceByValue","setChoices","replaceChoices","listOfChoices","replace","err","console","Array","isArray","clearChoices","clearStore","ajax","handleDeleteIcon","width","root","offsetWidth","deleteIconWrapper","querySelector","classList","add","remove","ensureChoicesLoaded","window","document","mod","import","default","handleCloseButton","optionsToArray","find","option","selected","componentWillLoad","componentWillUpdate","optionsAreEqual","isEqual","a","b","stringify","addResizeObserver","ResizeObserver","componentWrapper","observe","componentDidLoad","init","isNestedInIfxComponent","framework","detectFramework","trackComponent","addEventListenersToHandleCustomFocusAndActiveState","componentDidUpdate","disconnectedCallback","destroy","disconnect","handleWrapperClick","event","target","isSearchInput","contains","closest","isDropdownItem","toggleDropdown","render","attributes","choicesWrapperClass","getSizeClass","h","key","class","onClick","onKeyDown","handleKeyDown","onChange","createSelectOptions","icon","div","dropdown","isActive","choicesElement","wrapper","focus","handleOutsideClick","path","composedPath","ifxChoicesContainer","includes","isClearButton","code","preventDefault","ok","props","allowHTML","searchEnabled","settings","HTMLInputElement","HTMLSelectElement","self","assign","template","data","removeButtonHTML","id","highlighted","highlightedState","itemSelectable","input","inputCloned","itemChoice","getPreSelected","itemDisabled","groupId","config","addSearchEventListener","tabIndex","addEventListener","choiceElement","passedElement","detail","optionsArray","map","ifxOptions","optionValueBasedOnAvailableOptions"],"sources":["src/components/select/single-select/utils.ts","src/components/select/single-select/select.scss?tag=ifx-select","src/components/select/single-select/select.tsx"],"sourcesContent":["export type FilterObjectFn = (\n\tvalue: any,\n\tkey: string | number,\n\tobj: object,\n) => boolean;\n\n/**\n * Filter out entries from an object.\n *\n * @param obj - object to filter.\n * @param fn - filter function.\n * @returns a new object without the entries satisfying the filter function.\n */\nexport function filterObject(obj: object, fn: FilterObjectFn): object {\n\treturn Object.keys(obj).reduce((accum, property) => {\n\t\tconst value = obj[property];\n\n\t\tif (fn(value, property, obj)) {\n\t\t\taccum[property] = value;\n\t\t}\n\n\t\treturn accum;\n\t}, {});\n}\n\n/**\n * Check if given parameter is not undefined.\n *\n * @param value - value to check.\n * @returns whether the value is defined.\n */\nexport function isDefined(value: any): boolean {\n\treturn typeof value !== \"undefined\";\n}\n\n/**\n * Returns the list of values.\n *\n * @param value - Value or list of values.\n * @returns List of values.\n */\nexport function getValues(value: string | Array<string>): Array<string> {\n\treturn typeof value !== \"undefined\"\n\t\t? [].concat(typeof value === \"string\" ? value.split(\",\") : value)\n\t\t: [];\n}\n\n/**\n * Determines whether a string is valid JSON and can be parsed.\n *\n * @param str - The input string.\n * @returns - Whether the string can be parsed.\n */\nexport function isJSONParseable(str: string): boolean {\n\ttry {\n\t\tJSON.parse(str);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n","// @import '~choices.js/public/assets/styles/choices.css';\n@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n/*===============================\n=            Choices            =\n===============================*/\n\n.ifx-select-container {\n  box-sizing: border-box;\n  font-family: var(--ifx-font-family); // tokens.$ifxFontFamilyBody;\n\n  &.small-select {\n    height: 36px;\n  }\n\n  &.medium-select {\n    height: 40px;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  .ifx-label-wrapper {\n    font-size: tokens.$ifxFontSizeM;\n    line-height: tokens.$ifxLineHeightM;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    overflow-wrap: anywhere;\n    max-width: 100%;\n    overflow: hidden;\n\n    &.disabled { \n      color: tokens.$ifxColorEngineering300;\n    }\n\n    & .required {\n      margin-left: 4px;\n\n      &.error {\n        color: tokens.$ifxColorRed500;\n      }\n    }\n  }\n\n  .single__select-caption {\n    font-style: normal;\n    font-weight: tokens.$ifxFontWeightRegular;\n    font-size: tokens.$ifxFontSizeXs;\n    line-height: tokens.$ifxLineHeightXs;\n    color: tokens.$ifxColorBaseBlack;\n    flex: none;\n    order: 1;\n    align-self: stretch;\n    flex-grow: 0;\n\n    &.error {\n      color: tokens.$ifxColorRed500;\n    }\n\n    &.disabled {\n      color: tokens.$ifxColorEngineering300;\n    }\n  }\n\n  .ifx-choices__wrapper {\n    background-color: tokens.$ifxColorBaseWhite;\n    box-sizing: border-box;\n    position: relative;\n    display: flex;\n    align-items: center;\n    border: 1px solid tokens.$ifxColorEngineering400;\n    border-radius: tokens.$ifxBorderRadius12;\n    font-weight: 400;\n    font-style: normal;\n    width: 100%;\n\n    & .choices {\n      flex-grow: 1;\n      overflow: hidden;\n    }\n\n    & .single__select-icon-container {\n      display: flex;\n      align-items: center;\n      margin-left: auto;\n    }\n\n    &.small-select {\n      height: 36px;\n      line-height: 20px;\n      padding: 8px 12px;\n      font-size: tokens.$ifxFontSizeS;\n      line-height: tokens.$ifxLineHeightS;\n    }\n\n    &.medium-select {\n      height: 40px;\n      line-height: 24px;\n      padding: 8px 16px;\n      font-size: tokens.$ifxFontSizeM;\n      line-height: tokens.$ifxLineHeightM;\n    }\n\n    &.disabled {\n      background: tokens.$ifxColorEngineering300;\n      color: tokens.$ifxColorBaseWhite;\n      border-color: tokens.$ifxColorEngineering300;\n      cursor: default;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n\n      & .choices { \n        & .choices__inner { \n          & .choices__list { \n            & .choices__item { \n              color: tokens.$ifxColorBaseWhite;\n            }\n          }\n        }\n      }\n\n      .ifx-choices__icon-wrapper-down {\n        color: tokens.$ifxColorBaseWhite;\n        &:hover {\n          cursor: default;\n        }\n      }\n    }\n\n    &.error {\n      border-color: tokens.$ifxColorRed500;\n    }\n\n    &:not(.disabled):hover:not(.focus, :focus) {\n      border-color: tokens.$ifxColorEngineering500;\n    }\n\n    &.active {\n      border-color: tokens.$ifxColorOcean500 !important; // Active border color\n\n      & .ifx-choices__icon-wrapper-up {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-left: tokens.$ifxSpace100;\n      }\n\n      & .ifx-choices__icon-wrapper-down {\n        display: none;\n      }\n    }\n\n    &:focus-visible:not(.active):not(:active) {\n      outline: none;\n\n      &::before {\n        content: '';\n        position: absolute;\n        width: calc(100% + 4px);\n        height: calc(100% + 4px);\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        border: 2px solid tokens.$ifxColorOcean500;\n        border-radius: 2px;\n      }\n    }\n\n    &:focus:not(.active, :active) {\n      &:not(.disabled)::before {\n        content: '';\n        position: absolute;\n        width: calc(100% + 4px);\n        height: calc(100% + 4px);\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      }\n    }\n\n    & .ifx-choices__icon-wrapper-up {\n      display: none;\n\n      &:hover {\n        cursor: pointer;\n      }\n    }\n\n    & .ifx-choices__icon-wrapper-down {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding-left: tokens.$ifxSpace100;\n\n      &:hover {\n        cursor: pointer;\n      }\n    }\n\n    & .ifx-choices__icon-wrapper-delete {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      &.hide {\n        display: none;\n      }\n\n      &:focus{\n        outline: none;\n        border: 2px solid tokens.$ifxColorOcean600;\n        border-radius: 50%;\n        box-sizing: border-box;\n      }\n    }\n  }\n\n  /*\nSTART Select options: item alignment\n*/\n  // .choice-container {\n  //   display: flex;\n  //   justify-content: space-between;\n  //   align-items: center;\n  // }\n\n  // .choice-label {\n  //   /* Additional styles for label if necessary */\n  // }\n\n  // .choice-icon {\n  //   /* Additional styles for icon if necessary */\n  // }\n\n  /*\nEND Select options: item alignment\n*/\n\n  .choices {\n    width: 100%;\n  }\n\n  .choices:focus {\n    outline: none;\n  }\n\n  .choices &.is-focused {\n    outline: none;\n  }\n\n  .choices:last-child {\n    margin-bottom: 0;\n  }\n\n  .choices.is-disabled .choices__inner,\n  .choices.is-disabled .choices__input {\n    cursor: default;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .choices.is-disabled .choices__item {\n    cursor: default;\n    color: tokens.$ifxColorEngineering300;\n  }\n\n  .choices [hidden] {\n    display: none !important;\n  }\n\n  .choices[data-type*='select-one'] {\n    cursor: pointer;\n  }\n\n  .choices[data-type*='select-one'] .choices__input {\n    display: block;\n    width: 100%;\n    padding: 8px 16px;\n    border-bottom: 1px solid tokens.$ifxColorEngineering400;\n    background-color: tokens.$ifxColorBaseWhite;\n    margin: 0;\n    font-style: normal;\n    font-weight: 400;\n\n    &.small-select {\n      font-size: tokens.$ifxFontSizeS;\n      line-height: tokens.$ifxLineHeightS;\n    }\n\n    &.medium-select {\n      font-size: tokens.$ifxFontSizeM;\n      line-height: tokens.$ifxLineHeightM;\n    }\n  }\n\n  .choices[data-type*='select-one'] .choices__single-button {\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yLjU5Mi4wNDRsMTguMzY0IDE4LjM2NC0yLjU0OCAyLjU0OEwuMDQ0IDIuNTkyeiIvPjxwYXRoIGQ9Ik0wIDE4LjM2NEwxOC4zNjQgMGwyLjU0OCAyLjU0OEwyLjU0OCAyMC45MTJ6Ii8+PC9nPjwvc3ZnPg==);\n    padding: 0;\n    background-size: 8px;\n    position: absolute;\n    top: 50%;\n    right: 0;\n    margin-top: -10px;\n    margin-right: 25px;\n    height: 20px;\n    width: 20px;\n    border-radius: 10em;\n    opacity: 0.5;\n  }\n\n  .choices[data-type*='select-one'] .choices__single-button:hover,\n  .choices[data-type*='select-one'] .choices__single-button:focus {\n    opacity: 1;\n  }\n\n  .choices[data-type*='select-one'] .choices__single-button:focus {\n    box-shadow: 0px 0px 0px 2px tokens.$ifxColorOcean500;\n  }\n\n  .choices[data-type*='select-one'] .choices__item[data-value=''] .choices__single-button {\n    display: none;\n  }\n\n  .choices[data-type*='select-one'].is-open:after {\n    // border-color: transparent transparent #333333 transparent;\n    margin-top: -7.5px;\n  }\n\n  .choices[data-type*='select-one'][dir='rtl']:after {\n    left: 11.5px;\n    right: auto;\n  }\n\n  .choices[data-type*='select-one'][dir='rtl'] .choices__single-button {\n    right: auto;\n    left: 0;\n    margin-left: 25px;\n    margin-right: 0;\n  }\n\n  .choices[data-type*='select-multiple'] {\n    cursor: pointer;\n  }\n\n  .choices[data-type*='select-multiple'] .choices__input {\n    display: block;\n    width: 100%;\n    margin: 0;\n  }\n\n  .choices[data-type*='select-multiple'] .choices__inner,\n  .choices[data-type*='text'] .choices__inner {\n    cursor: text;\n  }\n\n  .choices[data-type*='select-multiple'] .choices__button,\n  .choices[data-type*='text'] .choices__button {\n    position: relative;\n    display: inline-block;\n    margin-top: 0;\n    margin-right: -4px;\n    margin-bottom: 0;\n    margin-left: 8px;\n    padding-left: 16px;\n    border-left: 1px solid tokens.$ifxColorOcean500;\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yLjU5Mi4wNDRsMTguMzY0IDE4LjM2NC0yLjU0OCAyLjU0OEwuMDQ0IDIuNTkyeiIvPjxwYXRoIGQ9Ik0wIDE4LjM2NEwxOC4zNjQgMGwyLjU0OCAyLjU0OEwyLjU0OCAyMC45MTJ6Ii8+PC9nPjwvc3ZnPg==);\n    background-size: 8px;\n    width: 8px;\n    line-height: 1;\n    opacity: 0.75;\n    border-radius: 0;\n  }\n\n  .choices[data-type*='select-multiple'] .choices__button:hover,\n  .choices[data-type*='select-multiple'] .choices__button:focus,\n  .choices[data-type*='text'] .choices__button:hover,\n  .choices[data-type*='text'] .choices__button:focus {\n    opacity: 1;\n  }\n\n  .choices__inner {\n    overflow: hidden;\n\n    & .choices__list {\n      & .choices__item {\n        & span {\n          flex-grow: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n  }\n\n  .is-focused .choices__inner,\n  .is-open .choices__inner {\n    border-color: #b7b7b7;\n  }\n\n  .is-open .choices__inner {\n    border-radius: 2.5px 2.5px 0 0;\n  }\n\n  .is-flipped.is-open .choices__inner {\n    border-radius: 0 0 2.5px 2.5px;\n  }\n\n  .choices__list {\n    margin: 0;\n    padding-left: 0;\n    list-style: none;\n  }\n\n  .choices__list--single .choices__item {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .disabled > .choices__list--single .choices__item[data-value=''] {\n    color: #8d8786;\n    /* Placeholder font color */\n  }\n\n  .choices__list--multiple .choices__item {\n    display: inline-block;\n    vertical-align: middle;\n    border-radius: 20px;\n    padding: 4px 10px;\n    font-size: tokens.$ifxFontSizeM;\n    line-height: tokens.$ifxLineHeightM;\n    font-weight: 500;\n    margin-right: 3.75px;\n    margin-bottom: 3.75px;\n    background-color: tokens.$ifxColorOcean500;\n    border: 1px solid tokens.$ifxColorOcean500;\n    color: tokens.$ifxColorBaseWhite;\n    word-break: break-all;\n    box-sizing: border-box;\n  }\n\n  .choices__list--multiple .choices__item[data-deletable] {\n    padding-right: 5px;\n  }\n\n  [dir='rtl'] .choices__list--multiple .choices__item {\n    margin-right: 0;\n    margin-left: 3.75px;\n  }\n\n  .choices__list--multiple .choices__item.is-highlighted {\n    background-color: tokens.$ifxColorEngineering200;\n    border: 1px solid tokens.$ifxColorOcean500;\n  }\n\n  .choices__list--dropdown {\n    display: none;\n    visibility: hidden;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    background-color: tokens.$ifxColorBaseWhite;\n    top: 100%;\n\n    overflow: hidden;\n    word-break: break-all;\n    will-change: visibility;\n    box-shadow: 0px 0px 16px rgba(29, 29, 29, 0.12);\n    border-radius: 1px;\n    margin-top: 8px;\n    z-index: 1000;\n    left: 0;\n    padding-bottom: 8px;\n  }\n\n  .choices__list--dropdown.is-active {\n    display: block;\n    visibility: visible;\n  }\n\n  .is-open .choices__list--dropdown {\n    border-color: #b7b7b7;\n  }\n\n  .is-flipped .choices__list--dropdown {\n    top: auto;\n    bottom: 100%;\n    margin-top: 0;\n    margin-bottom: -1px;\n    border-radius: 0.25rem 0.25rem 0 0;\n  }\n\n  .choices__list--dropdown .choices__list {\n    position: relative;\n    max-height: 300px;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    will-change: scroll-position;\n  }\n\n  .choices__list--dropdown .choices__item {\n    position: relative;\n    padding: 8px 16px;\n    gap: 8px;\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    font-style: normal;\n    font-weight: 400;\n\n    &.small-select {\n      font-size: tokens.$ifxFontSizeS;\n      line-height: tokens.$ifxLineHeightS;\n    }\n\n    &.medium-select {\n      font-size: tokens.$ifxFontSizeM;\n      line-height: tokens.$ifxLineHeightM;\n    }\n\n    &.selected {\n      color: tokens.$ifxColorOcean500;\n    }\n  }\n\n  [dir='rtl'] .choices__list--dropdown .choices__item {\n    text-align: right;\n  }\n\n  @media (min-width: 640px) {\n    .choices__list--dropdown .choices__item--selectable:after {\n      // content: attr(data-select-text); #press to select text next to select option\n      font-size: tokens.$ifxFontSizeXs;\n      line-height: tokens.$ifxLineHeightXs;\n      opacity: 0;\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    [dir='rtl'] .choices__list--dropdown .choices__item--selectable {\n      text-align: right;\n      padding-left: 100px;\n      padding-right: 10px;\n    }\n\n    [dir='rtl'] .choices__list--dropdown .choices__item--selectable:after {\n      right: auto;\n      left: 10px;\n    }\n  }\n\n  .choices__list--dropdown .choices__item--selectable.is-highlighted {\n    background-color: #eeeded;\n\n    &.selected {\n      color: tokens.$ifxColorOcean500;\n    }\n  }\n\n  .choices__list--dropdown .choices__item--selectable:hover {\n    background-color: tokens.$ifxColorEngineering200;\n\n    &.selected {\n      color: tokens.$ifxColorOcean500;\n    }\n  }\n\n  .choices__list--dropdown .choices__item--selectable.is-highlighted:after {\n    opacity: 0.5;\n  }\n\n  .choices__item {\n    cursor: default;\n  }\n\n  .choices__item--selectable {\n    cursor: pointer;\n  }\n\n  .choices__item--disabled {\n    cursor: default;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    opacity: 0.5;\n  }\n\n  .choices__heading {\n    font-weight: 600;\n    font-size: tokens.$ifxFontSizeXs;\n    line-height: tokens.$ifxLineHeightXs;\n    padding: 10px;\n    border-bottom: 1px solid #f7f7f7;\n    color: tokens.$ifxColorBaseBlack;\n  }\n\n  .choices__button {\n    //default button for removing items\n    text-indent: -9999px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    border: 0;\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-position: center;\n    cursor: pointer;\n    // visibility: hidden; //hide remove button on select menu\n  }\n\n  .choices__button:focus {\n    outline: none;\n  }\n\n  .choices__single-button {\n    text-indent: -9999px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    border: 0;\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-position: center;\n    cursor: pointer;\n    visibility: hidden; //hide remove button on select menu\n  }\n\n  .choices__single-button:focus {\n    outline: none;\n  }\n\n  .choices__input {\n    display: inline-block;\n    vertical-align: baseline;\n    background-color: #f9f9f9;\n    font-size: tokens.$ifxFontSizeS;\n    line-height: tokens.$ifxLineHeightS;\n    margin: 12px -16px 4px;\n    border: 0;\n    border-radius: 0;\n    max-width: 100%;\n  }\n\n  .choices__input--cloned {\n    background-color: transparent;\n  }\n\n  /* clears the 'X' for the input type=search from Internet Explorer */\n  .choices__input::-ms-clear {\n    display: none;\n    width: 0;\n    height: 0;\n  }\n\n  .choices__input::-ms-reveal {\n    display: none;\n    width: 0;\n    height: 0;\n  }\n\n  /* clears the 'X' for the input type=search from Chrome */\n  .choices__input::-webkit-search-decoration,\n  .choices__input::-webkit-search-cancel-button,\n  .choices__input::-webkit-search-results-button,\n  .choices__input::-webkit-search-results-decoration {\n    display: none;\n  }\n\n  .choices__input:focus {\n    outline: 0;\n  }\n\n  [dir='rtl'] .choices__input {\n    padding-right: 2px;\n    padding-left: 0;\n  }\n\n  .ifx-choices__wrapper:not(.disabled) .choices__placeholder {\n    opacity: 0.5;\n  }\n\n  /*=====  End of Choices  ======*/\n}\n","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tMethod,\n\tProp,\n\tState,\n} from \"@stencil/core\";\nimport { type HTMLStencilElement, Listen, Watch } from \"@stencil/core/internal\";\nimport { isNestedInIfxComponent } from \"../../../shared/utils/dom-utils\";\nimport { detectFramework } from \"../../../shared/utils/framework-detection\";\nimport { trackComponent } from \"../../../shared/utils/tracking\";\n\nlet ChoicesJs: any;\n\nimport type ChoicesType from \"choices.js\";\n\nimport type {\n\tAddItemTextFn,\n\tAjaxFn,\n\tClassNames,\n\tCustomAddItemText,\n\tFuseOptions,\n\tIChoicesMethods,\n\tIChoicesProps,\n\tItemFilterFn,\n\tMaxItemTextFn,\n\tNoChoicesTextFn,\n\tNoResultsTextFn,\n\tOnCreateTemplates,\n\tOnInit,\n\tSortFn,\n\tUniqueItemText,\n\tValueCompareFunction,\n} from \"./interfaces\";\n\nimport { filterObject, isDefined, isJSONParseable } from \"./utils\";\n\n@Component({\n\ttag: \"ifx-select\",\n\tstyleUrl: \"select.scss\",\n\t// shadow: true, //with shadow dom enabled, styles to the external choicesJs library cant be applied.\n})\nexport class Choices implements IChoicesProps, IChoicesMethods {\n\t@Prop() public value: string;\n\t@Prop() public name: string;\n\t@Prop() public items: Array<any>;\n\t@Prop() public choices: Array<any> | string = undefined;\n\t@Prop() public renderChoiceLimit: number;\n\t@Prop() public maxItemCount: number;\n\t@Prop() public addItems: boolean;\n\t@Prop() public removeItems: boolean;\n\t@Prop() public removeItemButton: boolean;\n\t@Prop() public editItems: boolean;\n\t@Prop() public duplicateItemsAllowed: boolean;\n\t@Prop() public delimiter: string;\n\t@Prop() public paste: boolean;\n\t@Prop() public showSearch: boolean;\n\t@Prop() public searchChoices: boolean;\n\t@Prop() public searchFields: Array<string> | string;\n\t@Prop() public searchFloor: number;\n\t@Prop() public searchResultLimit: number;\n\t@Prop() public position: \"auto\" | \"top\" | \"bottom\";\n\t@Prop() public resetScrollPosition: boolean;\n\t@Prop() public shouldSort: boolean;\n\t@Prop() public shouldSortItems: boolean;\n\t@Prop() public sorter: SortFn;\n\t@Prop() public placeholder: boolean | string;\n\t@Prop() public searchPlaceholderValue: string;\n\t@Prop() public prependValue: string;\n\t@Prop() public appendValue: string;\n\t@Prop() public renderSelectedChoices: \"always\" | \"auto\";\n\t@Prop() public loadingText: string;\n\t@Prop() public noResultsText: string | NoResultsTextFn;\n\t@Prop() public noChoicesText: string | NoChoicesTextFn;\n\t@Prop() public itemSelectText: \"\";\n\t@Prop() public addItemText: string | AddItemTextFn;\n\t@Prop() public maxItemText: string | MaxItemTextFn;\n\t@Prop() public uniqueItemText: UniqueItemText;\n\t@Prop() public classNames: ClassNames;\n\t@Prop() public fuseOptions: FuseOptions;\n\t@Prop() public addItemFilter: string | RegExp | ItemFilterFn;\n\t@Prop() public customAddItemText: CustomAddItemText;\n\t@Prop() public callbackOnInit: OnInit;\n\t@Prop() public callbackOnCreateTemplates: OnCreateTemplates;\n\t@Prop() public valueComparer: ValueCompareFunction;\n\t//custom ifx props\n\t@Prop() error: boolean = false;\n\t@Prop() label: string = \"\";\n\t@Prop() caption: string = \"\";\n\t@Prop() disabled: boolean = false;\n\t@Prop() required: boolean = false;\n\t@Prop() placeholderValue: string = \"Placeholder\";\n\t@Event() ifxSelect: EventEmitter<CustomEvent>;\n\t@Event() ifxInput: EventEmitter<CustomEvent>;\n\t@Prop({ mutable: true }) options: any[] | string;\n\t@Prop() size: string = \"medium (40px)\";\n\t@State() selectedOption: any | null = null;\n\t@State() optionIsSelected: boolean = false;\n\t@Prop() showClearButton: boolean = true;\n\n\tprivate resizeObserver: ResizeObserver;\n\tprivate previousOptions: any[] = [];\n\n\t@Element() private readonly root: HTMLElement;\n\tprivate choice;\n\tprivate element;\n\n\t@Watch(\"disabled\")\n\twatchDisabled(newValue: boolean) {\n\t\tif (newValue && !this.error) {\n\t\t\tthis.choice.disable();\n\t\t} else {\n\t\t\tthis.choice.enable();\n\t\t}\n\t}\n\n\t@Method()\n\tasync clearSelection() {\n\t\tif (!this.disabled) {\n\t\t\tthis.clearInput();\n\t\t\tthis.clearSelectField();\n\t\t\tthis.setPreSelected(null);\n\t\t\tthis.closeDropdown();\n\t\t\tthis.optionIsSelected = false;\n\t\t}\n\t}\n\n\tclearSelectField() {\n\t\tthis.selectedOption = null;\n\t\tthis.ifxSelect.emit(null);\n\t}\n\n\t@Method()\n\tasync handleChange() {\n\t\tthis.ifxSelect.emit(this.choice.getValue());\n\t\tthis.selectedOption = this.choice.getValue(); //store the selected option to reflect it in the template function\n\t\tthis.setPreSelected(this.selectedOption.value); //set previously selected items from the input array to false and the new selection to true\n\t\tthis.closeDropdown();\n\t}\n\n\t@Method()\n\tpublic async highlightItem(item: HTMLElement, runEvent?: boolean) {\n\t\tthis.choice.highlightItem(item, runEvent);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async unhighlightItem(item: HTMLElement) {\n\t\tthis.choice.unhighlightItem(item);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async highlightAll() {\n\t\tthis.choice.highlightAll();\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async unhighlightAll() {\n\t\tthis.choice.unhighlightAll();\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async removeActiveItemsByValue(value: string) {\n\t\tthis.choice.removeActiveItemsByValue(value);\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async removeActiveItems(excludedId?: number) {\n\t\tthis.choice.removeActiveItems(excludedId);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async removeHighlightedItems(runEvent?: boolean) {\n\t\tthis.choice.removeHighlightedItems(runEvent);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async showDropdown(focusInput?: boolean) {\n\t\tthis.choice.showDropdown(focusInput);\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async hideDropdown(blurInput?: boolean) {\n\t\tthis.choice.hideDropdown(blurInput);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async getValue(valueOnly?: boolean): Promise<string | Array<string>> {\n\t\treturn this.choice.getValue(valueOnly);\n\t}\n\n\t@Method()\n\tpublic async setValue(args: Array<any>) {\n\t\tthis.choice.setValue(args);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async setChoiceByValue(value: string | Array<string>) {\n\t\tthis.choice.setChoiceByValue(value);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async setChoices(\n\t\tchoices: any[] | string,\n\t\tvalue: string,\n\t\tlabel: string,\n\t\treplaceChoices?: boolean,\n\t) {\n\t\tlet listOfChoices;\n\t\tif (typeof choices === \"string\") {\n\t\t\ttry {\n\t\t\t\tif (!isJSONParseable(choices)) {\n\t\t\t\t\t//meaning the input string comes from storybook as a non valid json string to be displayed in a beautified version on storybook\n\t\t\t\t\tchoices = choices\n\t\t\t\t\t\t.replace(/'/g, '\"')\n\t\t\t\t\t\t.replace(/\"false\"/g, \"false\")\n\t\t\t\t\t\t.replace(/\"true\"/g, \"true\");\n\t\t\t\t}\n\t\t\t\tlistOfChoices = [...JSON.parse(choices)];\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"Failed to parse choices:\", err);\n\t\t\t}\n\t\t} else if (Array.isArray(choices) || typeof choices === \"object\") {\n\t\t\tlistOfChoices = [...choices];\n\t\t} else {\n\t\t\tconsole.error(\"Unexpected value for choices:\", this.options);\n\t\t}\n\n\t\tthis.choice.setChoices(listOfChoices, value, label, replaceChoices);\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async clearChoices() {\n\t\tthis.choice.clearChoices();\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async clearStore() {\n\t\tthis.choice.clearStore();\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async clearInput() {\n\t\tthis.choice.clearInput();\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tpublic async ajax(fn: AjaxFn) {\n\t\tthis.choice.ajax(fn);\n\n\t\treturn this;\n\t}\n\n\t@Method()\n\tasync handleDeleteIcon() {\n\t\tconst width = this.root.offsetWidth;\n\t\tconst deleteIconWrapper = this.root.querySelector(\n\t\t\t\".ifx-choices__icon-wrapper-delete\",\n\t\t);\n\t\tif (deleteIconWrapper) {\n\t\t\tif (width <= 180) {\n\t\t\t\tdeleteIconWrapper.classList.add(\"hide\");\n\t\t\t} else if (this.showClearButton) {\n\t\t\t\tdeleteIconWrapper.classList.remove(\"hide\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async ensureChoicesLoaded(): Promise<boolean> {\n\t\tif (typeof window === \"undefined\" || typeof document === \"undefined\") {\n\t\t\treturn false;\n\t\t}\n\t\tif (!ChoicesJs) {\n\t\t\tconst mod = await import(\"choices.js\");\n\t\t\tChoicesJs = (mod as any).default ?? (mod as any);\n\t\t}\n\t\treturn true;\n\t}\n\n\thandleCloseButton() {\n\t\tif (typeof this.options === \"string\") {\n\t\t\tconst optionsToArray = JSON.parse(this.options);\n\t\t\tconst optionIsSelected = optionsToArray.find(\n\t\t\t\t(option) => option.selected === true,\n\t\t\t);\n\t\t\tif (optionIsSelected) {\n\t\t\t\tthis.optionIsSelected = true;\n\t\t\t} else {\n\t\t\t\tthis.optionIsSelected = false;\n\t\t\t}\n\t\t} else if (this.options && Array.isArray(this.options)) {\n\t\t\tconst optionIsSelected = this.options.find(\n\t\t\t\t(option) => option.selected === true,\n\t\t\t);\n\t\t\tif (optionIsSelected) {\n\t\t\t\tthis.optionIsSelected = true;\n\t\t\t} else {\n\t\t\t\tthis.optionIsSelected = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected componentWillLoad() {\n\t\tthis.handleCloseButton();\n\t}\n\n\tprotected componentWillUpdate() {\n\t\tthis.handleCloseButton();\n\t\tthis.previousOptions = [...this.options];\n\t\tconst optionsAreEqual = this.isEqual(this.options, this.previousOptions);\n\t\tif (this.options && !optionsAreEqual) {\n\t\t\tthis.clearSelectField();\n\t\t}\n\t}\n\n\tisEqual(a: any, b: any[]) {\n\t\treturn JSON.stringify(a) === JSON.stringify(b);\n\t}\n\n\taddResizeObserver() {\n\t\tthis.resizeObserver = new ResizeObserver(() => {\n\t\t\tthis.handleDeleteIcon();\n\t\t});\n\n\t\tconst componentWrapper = this.root.querySelector(\".ifx-choices__wrapper\");\n\t\tthis.resizeObserver.observe(componentWrapper);\n\t}\n\n\tprotected async componentDidLoad() {\n\t\tthis.init();\n\t\tif (!isNestedInIfxComponent(this.root)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-select\", await framework);\n\t\t}\n\t\tthis.addEventListenersToHandleCustomFocusAndActiveState();\n\t\tthis.handleDeleteIcon();\n\t\tthis.addResizeObserver();\n\t}\n\n\tprotected componentDidUpdate() {\n\t\tthis.init();\n\t\tthis.handleDeleteIcon();\n\t}\n\n\tprotected disconnectedCallback() {\n\t\tthis.destroy();\n\n\t\tif (this.resizeObserver) {\n\t\t\tthis.resizeObserver.disconnect();\n\t\t\tthis.resizeObserver = null;\n\t\t}\n\t}\n\n\tprivate handleWrapperClick(event: MouseEvent) {\n\t\tconst target = event.target as HTMLElement;\n\t\tconst isSearchInput =\n\t\t\ttarget.classList.contains(\"choices__input\") ||\n\t\t\ttarget.closest(\".choices__input\");\n\t\tconst isDropdownItem = target.closest(\n\t\t\t\".choices__list--dropdown .choices__item\",\n\t\t);\n\n\t\t// Only toggle dropdown if clicking on wrapper itself\n\t\tif (!isSearchInput && !isDropdownItem) {\n\t\t\tthis.toggleDropdown();\n\t\t}\n\t}\n\n\tprotected render(): any {\n\t\tconst attributes = {\n\t\t\t\"data-selector\": \"root\",\n\t\t\tname: this.name || null,\n\t\t\t// 'remove-item-button': false,\n\t\t};\n\t\tconst choicesWrapperClass = `ifx-choices__wrapper ${this.getSizeClass()}`;\n\n\t\t// destroy choices element to restore previous dom structure\n\t\t// so vdom can replace the element correctly\n\t\tthis.destroy();\n\n\t\treturn (\n\t\t\t<div class={`ifx-select-container`}>\n\t\t\t\t{this.label ? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`ifx-label-wrapper ${this.disabled && !this.error ? \"disabled\" : \"\"}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{this.label}</span>\n\t\t\t\t\t\t{this.required && (\n\t\t\t\t\t\t\t<span class={`required ${this.error ? \"error\" : \"\"}`}>*</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t<div\n\t\t\t\t\tclass={`${choicesWrapperClass} \n            ${this.disabled && !this.error ? \"disabled\" : \"\"} \n            ${this.error ? \"error\" : \"\"}`}\n\t\t\t\t\tonClick={\n\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t: (e) => this.handleWrapperClick(e)\n\t\t\t\t\t}\n\t\t\t\t\tonKeyDown={(event) => this.handleKeyDown(event)}\n\t\t\t\t>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclass=\"single__select-input-field\"\n\t\t\t\t\t\tdisabled={this.disabled && !this.error}\n\t\t\t\t\t\t{...attributes}\n\t\t\t\t\t\tdata-trigger\n\t\t\t\t\t\tonChange={() => this.handleChange()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.createSelectOptions(this.options)}\n\t\t\t\t\t</select>\n\n\t\t\t\t\t<div class=\"single__select-icon-container\">\n\t\t\t\t\t\t{this.optionIsSelected && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass={`ifx-choices__icon-wrapper-delete ${!this.showClearButton ? \"hide\" : \"\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\t\t\ticon=\"cRemove16\"\n\t\t\t\t\t\t\t\t\tonClick={() => this.clearSelection()}\n\t\t\t\t\t\t\t\t></ifx-icon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div class=\"ifx-choices__icon-wrapper-up\">\n\t\t\t\t\t\t\t<ifx-icon key=\"icon-up\" icon=\"chevron-up-16\"></ifx-icon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ifx-choices__icon-wrapper-down\">\n\t\t\t\t\t\t\t<ifx-icon key=\"icon-down\" icon=\"chevron-down-16\"></ifx-icon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{this.caption && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`single__select-caption ${this.error ? \"error\" : \"\"} ${this.disabled && !this.error ? \"disabled\" : \"\"}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.caption}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleDropdown() {\n\t\tconst div = this.root.querySelector(\n\t\t\t\".ifx-choices__wrapper\",\n\t\t) as HTMLDivElement;\n\t\tif (div.classList.contains(\"active\") || this.choice.dropdown.isActive) {\n\t\t\tthis.closeDropdown();\n\t\t} else {\n\t\t\tthis.choice.showDropdown();\n\t\t\tdiv.classList.add(\"active\");\n\t\t}\n\t\tconst choicesElement = this.root.querySelector(\".choices\");\n\t\tchoicesElement.classList.add(\"is-focused\"); // Add the 'is-focused' class, cause a click on the wrapper (and not the embedded select element) doesnt add this automatically to the choices instance\n\t}\n\n\tcloseDropdown() {\n\t\tthis.hideDropdown();\n\t\tconst wrapper = this.root.querySelector(\n\t\t\t\".ifx-choices__wrapper\",\n\t\t) as HTMLDivElement;\n\t\twrapper.focus();\n\t\twrapper.classList.remove(\"active\");\n\t}\n\n\t@Listen(\"mousedown\", { target: \"document\" })\n\thandleOutsideClick(event: MouseEvent) {\n\t\tconst path = event.composedPath();\n\t\tconst ifxChoicesContainer = this.root.querySelector(\n\t\t\t\".ifx-choices__wrapper\",\n\t\t) as HTMLDivElement;\n\n\t\tif (!path.includes(this.root)) {\n\t\t\tifxChoicesContainer.classList.remove(\"active\");\n\t\t}\n\t}\n\n\thandleKeyDown(event: KeyboardEvent) {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isSearchInput = (event.target as HTMLElement).classList.contains(\n\t\t\t\"choices__input\",\n\t\t);\n\t\tconst isClearButton = (event.target as HTMLElement).classList.contains(\n\t\t\t\"ifx-choices__icon-wrapper-delete\",\n\t\t);\n\n\t\tswitch (event.code) {\n\t\t\tcase \"Enter\": {\n\t\t\t\tif (isClearButton) {\n\t\t\t\t\tthis.clearSelection();\n\t\t\t\t} else {\n\t\t\t\t\tthis.toggleDropdown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"Space\": {\n\t\t\t\tif (!isSearchInput) {\n\t\t\t\t\tthis.toggleDropdown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"Tab\": {\n\t\t\t\tif (isSearchInput) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.closeDropdown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSizeClass() {\n\t\treturn `${this.size}` === \"s\" ? \"small-select\" : \"medium-select\";\n\t}\n\n\tprivate async init() {\n\t\tconst ok = await this.ensureChoicesLoaded();\n\t\tif (!ok) return;\n\n\t\tconst props = {\n\t\t\tallowHTML: true,\n\t\t\titems: this.items,\n\t\t\tchoices: this.choices,\n\t\t\trenderChoiceLimit: this.renderChoiceLimit,\n\t\t\tmaxItemCount: this.maxItemCount,\n\t\t\taddItems: this.addItems,\n\t\t\tremoveItems: this.removeItems,\n\t\t\tremoveItemButton: this.removeItemButton,\n\t\t\teditItems: this.editItems,\n\t\t\tduplicateItemsAllowed: this.duplicateItemsAllowed,\n\t\t\tdelimiter: this.delimiter,\n\t\t\tpaste: this.paste,\n\t\t\tsearchEnabled: this.showSearch,\n\t\t\tsearchChoices: this.searchChoices,\n\t\t\tsearchFields: this.searchFields,\n\t\t\tsearchFloor: this.searchFloor,\n\t\t\tsearchResultLimit: this.searchResultLimit,\n\t\t\tposition: this.position,\n\t\t\tresetScrollPosition: this.resetScrollPosition,\n\t\t\tshouldSort: false, // choices/groups will appear in the order they were given.\n\t\t\tshouldSortItems: this.shouldSortItems,\n\t\t\tsorter: this.sorter,\n\t\t\tplaceholder: this.placeholder,\n\t\t\tsearchPlaceholderValue: this.searchPlaceholderValue,\n\t\t\tprependValue: this.prependValue,\n\t\t\tappendValue: this.appendValue,\n\t\t\trenderSelectedChoices: this.renderSelectedChoices,\n\t\t\tloadingText: this.loadingText,\n\t\t\tnoResultsText: this.noResultsText,\n\t\t\tnoChoicesText: this.noChoicesText,\n\t\t\titemSelectText: this.itemSelectText,\n\t\t\taddItemText: this.addItemText,\n\t\t\tmaxItemText: this.maxItemText,\n\t\t\tuniqueItemText: this.uniqueItemText,\n\t\t\tclassNames: this.classNames,\n\t\t\tfuseOptions: this.fuseOptions,\n\t\t\tcallbackOnInit: this.callbackOnInit,\n\t\t\tcallbackOnCreateTemplates: this.callbackOnCreateTemplates,\n\t\t\tvalueComparer: this.valueComparer,\n\t\t\taddItemFilter: this.addItemFilter,\n\t\t\tcustomAddItemText: this.customAddItemText,\n\t\t};\n\n\t\tconst settings = filterObject(props, isDefined);\n\n\t\t//type check\n\t\tconst element = this.root.querySelector('[data-selector=\"root\"]');\n\t\tif (\n\t\t\telement instanceof HTMLInputElement ||\n\t\t\telement instanceof HTMLSelectElement\n\t\t) {\n\t\t\t// this.choice = new ChoicesJs(element, settings); //standard, without using custom templates\n\t\t\tconst self = this; // save the context of this in a variable outside of the function to access it in the following\n\n\t\t\tthis.choice = new ChoicesJs(\n\t\t\t\telement,\n\t\t\t\tObject.assign({}, settings, {\n\t\t\t\t\tcallbackOnCreateTemplates: function (template) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t//modifying the selected item template\n\t\t\t\t\t\t\titem: ({ classNames }, data) => {\n\t\t\t\t\t\t\t\tconst removeButtonHTML = \"\";\n\n\t\t\t\t\t\t\t\tif (data.placeholder && !self.selectedOption?.value) {\n\t\t\t\t\t\t\t\t\t// For placeholders, use data-id=\"placeholder\"\n\t\t\t\t\t\t\t\t\treturn template(`\n                  <div class=\"choices__placeholder\" data-item data-id=\"${data.id}\" data-value=\"${data.value}\" ${data.disabled && !this.error ? 'aria-disabled=\"true\"' : \"\"}>\n                    ${data.label === undefined ? this.placeholderValue : data.label}\n                    ${removeButtonHTML}\n                  </div>\n                `);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// For non-placeholder items, use the actual data ID\n\t\t\t\t\t\t\t\t\treturn template(`\n                <div class=\"${classNames.item} ${data.highlighted ? classNames.highlightedState : classNames.itemSelectable}\" \n                      data-item \n                      data-id=\"${self.selectedOption?.id !== undefined ? self.selectedOption?.id : self.choice.getValue().id}\" \n                      data-value=\"${self.selectedOption?.value !== undefined ? self.selectedOption?.value : self.choice.getValue().value}\" \n                      ${data.disabled && !this.error ? 'aria-disabled=\"true\"' : \"\"}>\n                  <span>${self.selectedOption?.label !== undefined ? self.selectedOption?.label : self.choice.getValue().label}</span>\n                  <!-- Add your remove button here if needed -->\n                </div>\n              `);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinput: ({ classNames }) => {\n\t\t\t\t\t\t\t\treturn template(`\n                  <input \n                    type=\"search\"\n                    class=\"${classNames.input} ${classNames.inputCloned} ${self.getSizeClass()}\"\n                    autocomplete=\"off\"\n                    autocapitalize=\"off\"\n                    spellcheck=\"false\"\n                    role=\"textbox\"\n                    aria-autocomplete=\"list\"\n                    aria-label=\"${this.showSearch ? this.searchPlaceholderValue : \"\"}\">`);\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t//modifying the template of each item in the options list\n\t\t\t\t\t\t\tchoice: ({ classNames }, data) => {\n\t\t\t\t\t\t\t\treturn template(`\n              <div class=\"${classNames.item} ${classNames.itemChoice} ${self.getSizeClass()} \n              ${data.selected || self.selectedOption?.value === data.value || self.getPreSelected(self)?.value === data.value ? \"selected\" : \"\"} \n              ${data.placeholder ? classNames.placeholder : \"\"} \n              ${data.disabled && !this.error ? classNames.itemDisabled : classNames.itemSelectable} \n                    role=\"${data.groupId && data.groupId > 0 ? \"treeitem\" : \"option\"}\"\n                    data-choice ${data.disabled && !this.error ? 'data-choice-disabled aria-disabled=\"true\"' : \"data-choice-selectable\"}                     data-id=\"${data.id}\"\n                    data-value=\"${data.value}\"\n                    data-select-text=\"${this.config.itemSelectText}\">\n                <span>${data.label}</span>\n                ${data.selected || self.selectedOption?.value === data.value || self.getPreSelected(self)?.value === data.value ? '<ifx-icon icon=\"check16\"></ifx-icon>' : \"\"}\n              </div>\n            `);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\t//set select options\n\t\t\tthis.setChoices(this.options, \"value\", \"label\", true);\n\t\t\t//set custom event listener to listen for search input\n\t\t\tself.addSearchEventListener(self, this.choice);\n\t\t} else {\n\t\t\t// handle the case when the element is neither an HTMLInputElement nor an HTMLSelectElement\n\t\t}\n\t}\n\n\tprivate addEventListenersToHandleCustomFocusAndActiveState() {\n\t\tconst div = this.root.querySelector(\n\t\t\t\".ifx-choices__wrapper\",\n\t\t) as HTMLDivElement;\n\n\t\tif (!div) {\n\t\t\tconsole.error(\".ifx-choices__wrapper not found\");\n\t\t\treturn;\n\t\t}\n\n\t\tdiv.tabIndex = 0;\n\n\t\tdiv.addEventListener(\"focus\", function () {\n\t\t\tif (!this.classList.contains(\"disabled\")) {\n\t\t\t\tthis.classList.add(\"focus\");\n\t\t\t}\n\t\t});\n\n\t\tdiv.addEventListener(\"blur\", function () {\n\t\t\tthis.classList.remove(\"focus\");\n\t\t});\n\t}\n\n\tprivate addSearchEventListener(self, choiceElement: ChoicesType) {\n\t\tchoiceElement.passedElement.element.addEventListener(\n\t\t\t\"search\",\n\t\t\t(event: CustomEvent) => {\n\t\t\t\tself.ifxInput.emit(event.detail.value);\n\t\t\t},\n\t\t\tfalse,\n\t\t);\n\t\treturn choiceElement;\n\t}\n\n\tprivate destroy() {\n\t\tif (this.element) {\n\t\t\tthis.element = null;\n\t\t}\n\n\t\tif (this.choice) {\n\t\t\tthis.choice.destroy();\n\t\t\tthis.choice = null;\n\t\t}\n\t}\n\n\t//get selected values from input array\n\tprivate getPreSelected(self) {\n\t\tconst optionsArray: any[] = Array.isArray(self.options)\n\t\t\t? self.options\n\t\t\t: JSON.parse(self.options);\n\t\treturn optionsArray.find((option) => option.selected === true) || null;\n\t}\n\n\t//set previously marked as selected items in the input array to unselected and select new ones\n\tprivate setPreSelected(newValue) {\n\t\tconst optionsArray: any[] = Array.isArray(this.options)\n\t\t\t? this.options\n\t\t\t: JSON.parse(this.options);\n\n\t\tthis.options = optionsArray.map((obj) => {\n\t\t\treturn {\n\t\t\t\t...obj,\n\t\t\t\tselected: obj.value === newValue,\n\t\t\t};\n\t\t});\n\t}\n\n\t//setting the value that gets displayed in the select at component start (either the value prop or a placeholder)\n\tprivate createSelectOptions(ifxOptions): Array<HTMLStencilElement> {\n\t\tif (this.value !== \"undefined\" || this.selectedOption?.value !== \"\") {\n\t\t\tlet options;\n\t\t\tif (isJSONParseable(ifxOptions)) {\n\t\t\t\toptions = [...JSON.parse(ifxOptions)];\n\t\t\t} else if (Array.isArray(ifxOptions) || typeof ifxOptions === \"object\") {\n\t\t\t\toptions = [...ifxOptions];\n\t\t\t}\n\t\t\tconst optionValueBasedOnAvailableOptions = options?.find(\n\t\t\t\t(option) => option.value === this.value || this.selectedOption?.value,\n\t\t\t);\n\n\t\t\tif (optionValueBasedOnAvailableOptions) {\n\t\t\t\treturn [\n\t\t\t\t\t<option value={optionValueBasedOnAvailableOptions.value}>\n\t\t\t\t\t\t{optionValueBasedOnAvailableOptions.label}\n\t\t\t\t\t</option>,\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\t// Assign a unique id for the placeholder\n\t\treturn this.placeholder !== \"false\"\n\t\t\t? [<option value=\"\">{this.placeholderValue}</option>]\n\t\t\t: [<option value=\"\"></option>];\n\t}\n}\n"],"mappings":"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","ignoreList":[]}