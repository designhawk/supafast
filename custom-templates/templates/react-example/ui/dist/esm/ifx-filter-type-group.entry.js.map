{"version":3,"file":"ifx-filter-type-group.entry.js","sources":["src/components/table-advanced-version/filter-type-group/filter-type-group.scss?tag=ifx-filter-type-group&encapsulation=shadow","src/components/table-advanced-version/filter-type-group/filter-type-group.tsx"],"sourcesContent":["@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n\n:host {\n  display: flex;\n}\n\n.filter-type-group {\n  width: 260px;\n  align-items: flex-start;\n  gap: tokens.$ifxSpace100;\n}\n\n.filter-type-group > ::slotted(*) {\n  margin-bottom: 8px;\n}\n\n","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tState,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-filter-type-group\",\n\tstyleUrl: \"filter-type-group.scss\",\n\tshadow: true,\n})\nexport class IfxFilterTypeGroup {\n\t@Element() el: HTMLElement;\n\t@State() selectedOptions: Array<{\n\t\tfilterGroupName: string;\n\t\tselectedItems?: Array<{ filterName: string; value: boolean | string }>;\n\t\tvalue?: string;\n\t}> = [];\n\t@Event() ifxSidebarFilterChange: EventEmitter;\n\n\t/* If the component is ever removed and then reattached to the DOM, \n  connectedCallback ensures that the event listeners are properly set up again */\n\tconnectedCallback() {\n\t\tthis.el.addEventListener(\n\t\t\t\"ifxFilterAccordionChange\",\n\t\t\tthis.handleAccordionChange,\n\t\t);\n\t\tthis.el.addEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n\t\twindow.addEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t\twindow.addEventListener(\n\t\t\t\"ifxUpdateSidebarFilter\",\n\t\t\tthis.handleUpdateSidebarFilter,\n\t\t);\n\t}\n\n\tcomponentWillUnload() {\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterAccordionChange\",\n\t\t\tthis.handleAccordionChange,\n\t\t);\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSearchChange\",\n\t\t\tthis.handleSearchChange,\n\t\t);\n\t\twindow.removeEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\thandleResetEvent = () => {\n\t\tconst accordionSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-accordion\"]',\n\t\t);\n\t\tconst filterAccordionSlottedElements = (\n\t\t\taccordionSlot as HTMLSlotElement\n\t\t).assignedElements({ flatten: true });\n\n\t\tfilterAccordionSlottedElements.forEach((accordionElement) => {\n\t\t\tconst ifxLists = accordionElement.querySelectorAll(\"ifx-list\");\n\n\t\t\tifxLists.forEach((ifxListElement: HTMLIfxListElement) => {\n\t\t\t\tifxListElement.resetTrigger = !ifxListElement.resetTrigger;\n\t\t\t});\n\t\t});\n\n\t\tconst filterSearchSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tconst filterSearchSlottedElements = (\n\t\t\tfilterSearchSlot as HTMLSlotElement\n\t\t).assignedElements({ flatten: true });\n\n\t\tfilterSearchSlottedElements.forEach((filterSearchWrapper: HTMLElement) => {\n\t\t\tconst filterSearch =\n\t\t\t\tfilterSearchWrapper.querySelector(\"ifx-filter-search\");\n\n\t\t\tconst searchField =\n\t\t\t\tfilterSearch.shadowRoot.querySelectorAll(\"ifx-search-field\");\n\n\t\t\tif (searchField.length > 0) {\n\t\t\t\tsearchField.forEach((searchFieldElement: any) => {\n\t\t\t\t\tsearchFieldElement.value = \"\";\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.selectedOptions = [];\n\n\t\t// Emit the change to inform any parent components that the filters have been reset\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleUpdateSidebarFilter = (event: CustomEvent) => {\n\t\tconst { filterName } = event.detail;\n\n\t\tconst accordionSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-accordion\"]',\n\t\t);\n\t\tconst filterAccordionSlottedElements = accordionSlot\n\t\t\t? (accordionSlot as HTMLSlotElement).assignedElements({ flatten: true })\n\t\t\t: [];\n\n\t\tfilterAccordionSlottedElements.forEach((accordionElement) => {\n\t\t\tconst ifxLists = accordionElement.querySelectorAll(\"ifx-list\");\n\n\t\t\tifxLists.forEach((ifxListElement: HTMLIfxListElement) => {\n\t\t\t\tif (ifxListElement.getAttribute(\"name\") === filterName) {\n\t\t\t\t\tifxListElement.resetTrigger = !ifxListElement.resetTrigger;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Clear the search bar within the filter-search slot\n\t\tconst searchSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tconst filterSearchSlottedElements = searchSlot\n\t\t\t? (searchSlot as HTMLSlotElement).assignedNodes({ flatten: true })\n\t\t\t: [];\n\n\t\tfilterSearchSlottedElements.forEach((searchElement) => {\n\t\t\tif (searchElement.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t// Identify the ifx-filter-search component within the slot\n\t\t\t\tconst filterSearchComponent = searchElement as HTMLElement;\n\t\t\t\tconst searchField: any = filterSearchComponent.firstElementChild;\n\t\t\t\tif (searchField) {\n\t\t\t\t\tsearchField.setAttribute(\"value\", \"\");\n\t\t\t\t\tsearchField.dispatchEvent(\n\t\t\t\t\t\tnew CustomEvent(\"ifxInput\", {\n\t\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\t\tcomposed: true,\n\t\t\t\t\t\t\tdetail: \"\",\n\t\t\t\t\t\t}),\n\t\t\t\t\t); // Trigger ifxInput event to reset\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst newSelectedOptions = this.selectedOptions.map((option) => {\n\t\t\tif (option.filterGroupName === filterName) {\n\t\t\t\treturn { ...option, selectedItems: [], value: \"\" };\n\t\t\t}\n\t\t\treturn option;\n\t\t});\n\n\t\tthis.selectedOptions = newSelectedOptions;\n\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleAccordionChange = (event: CustomEvent) => {\n\t\tthis.handleFilterChange(event);\n\t};\n\n\thandleSearchChange = (event: CustomEvent) => {\n\t\t// Call handleFilterChange with the created CustomEvent object\n\t\tthis.handleFilterChange(event);\n\t};\n\n\thandleFilterChange = (event: CustomEvent) => {\n\t\t// Create a new array to hold the new state\n\t\tconst newSelectedOptions = [...this.selectedOptions];\n\n\t\t// Check the type of the event\n\t\tif (event.type === \"ifxFilterSearchChange\") {\n\t\t\t// Handle the ifxFilterSearchChange event\n\t\t\tconst { filterName, filterValue } = event.detail;\n\n\t\t\t// Find the existing filter with the same filterName\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) =>\n\t\t\t\t\ttypeof option !== \"string\" && option.filterGroupName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter is found, update its value\n\t\t\t\tnewSelectedOptions[existingOptionIndex].value = filterValue;\n\t\t\t} else {\n\t\t\t\t// If no existing filter is found, append the new filter\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterGroupName: filterName,\n\t\t\t\t\tvalue: filterValue,\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (event.type === \"ifxFilterAccordionChange\") {\n\t\t\tconst { filterGroupName, selectedItems } = event.detail;\n\n\t\t\t// Find the existing filter group with the same filterGroupName\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterGroupName === filterGroupName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter group is found, update its selectedItems\n\t\t\t\tnewSelectedOptions[existingOptionIndex] = {\n\t\t\t\t\tfilterGroupName,\n\t\t\t\t\tselectedItems,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// If no existing filter group is found, append the new filter group\n\t\t\t\tnewSelectedOptions.push({ filterGroupName, selectedItems });\n\t\t\t}\n\t\t}\n\n\t\t// Update the state with the new selected options\n\t\tthis.selectedOptions = newSelectedOptions;\n\n\t\t// Emit the entire selectedOptions array\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"filter-type-group\">\n\t\t\t\t\t<slot name=\"filter-search\" />\n\t\t\t\t\t<slot name=\"filter-accordion\" />\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"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"}