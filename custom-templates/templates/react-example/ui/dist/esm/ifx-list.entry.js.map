{"version":3,"file":"ifx-list.entry.js","sources":["src/components/table-advanced-version/list/list.scss?tag=ifx-list&encapsulation=shadow","src/components/table-advanced-version/list/list.tsx"],"sourcesContent":["@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n.link-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: tokens.$ifxSpace100;\n  margin-top: tokens.$ifxSpace100;\n}","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-list\",\n\tstyleUrl: \"list.scss\",\n\tshadow: true,\n})\nexport class List {\n\t@Element() private el: HTMLElement;\n\t@State() expanded: boolean = false;\n\t@State() showMore = false;\n\t@State() selectedCount: number = 0;\n\t@State() totalItems = 0;\n\t@Prop() name = \"\";\n\t@Prop() maxVisibleItems = 6;\n\t@Prop() type: string = \"checkbox\"; //default value\n\t@Prop({ mutable: true }) resetTrigger: boolean;\n\t@State() internalResetTrigger: boolean = false;\n\n\t@Event() ifxListUpdate: EventEmitter;\n\n\tobserver: MutationObserver;\n\n\t@Watch(\"type\")\n\thandleTypeChange(newType: string) {\n\t\tthis.updateListEntriesType(newType);\n\t}\n\n\t@Watch(\"resetTrigger\")\n\tresetTriggerChanged(newValue: boolean) {\n\t\tif (newValue) {\n\t\t\tthis.reset();\n\t\t\tthis.resetTrigger = false; // Resetting the trigger after the action is performed\n\t\t}\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.setupListenersAndObservers();\n\t\tthis.initializeList();\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.cleanupListenersAndObservers();\n\t}\n\n\treset() {\n\t\tthis.resetListEntries();\n\t\tthis.expanded = false;\n\t\tthis.showMore = false;\n\t\tthis.selectedCount = 0;\n\t\tthis.ifxListUpdate.emit({ name: this.name, selectedItems: [] });\n\t}\n\n\trender() {\n\t\treturn this.renderList();\n\t}\n\n\t// Refactored methods for clarity and maintainability\n\tprivate setupListenersAndObservers() {\n\t\tthis.el.addEventListener(\"ifxListEntryChange\", this.handleCheckedChange);\n\t\tthis.observer = new MutationObserver(this.handleMutation);\n\t\tthis.observer.observe(this.el, { childList: true });\n\t}\n\n\tprivate cleanupListenersAndObservers() {\n\t\tthis.el.removeEventListener(\"ifxListEntryChange\", this.handleCheckedChange);\n\t\tthis.observer.disconnect();\n\t}\n\n\tprivate initializeList() {\n\t\tthis.selectedCount = this.getSelectedItems(this.el).length;\n\t\tthis.totalItems = this.getTotalItems();\n\t\tthis.updateListEntriesType(this.type);\n\t\tthis.checkRadioButtonConstraint();\n\t}\n\n\tprivate updateListEntriesType(newType: string) {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tlistEntries.forEach((entry) => entry.setAttribute(\"type\", newType));\n\t}\n\n\tprivate resetListEntries() {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tlistEntries.forEach((entry) => {\n\t\t\tentry.value = false;\n\t\t\tentry.setAttribute(\"value\", \"false\");\n\t\t});\n\t}\n\n\tprivate handleMutation = () => {\n\t\tconst newTotalItems = this.getTotalItems();\n\t\tif (newTotalItems !== this.totalItems) {\n\t\t\tthis.totalItems = newTotalItems;\n\t\t\tthis.handleCheckedChange();\n\t\t}\n\t\tthis.updateListEntriesType(this.type);\n\t};\n\n\tprivate checkRadioButtonConstraint() {\n\t\tif (this.type === \"radio-button\" && this.selectedCount > 1) {\n\t\t\tthis.resetListEntries(); // Reset all and let the user select again\n\t\t\tthis.selectedCount = 0;\n\t\t}\n\t}\n\n\tgetTotalItems() {\n\t\treturn this.el.querySelectorAll(\"ifx-list-entry\").length;\n\t}\n\n\ttoggleList = (event: MouseEvent) => {\n\t\tevent.stopPropagation();\n\t\tthis.expanded = !this.expanded;\n\t};\n\n\ttoggleShowMore = (event: MouseEvent) => {\n\t\tevent.stopPropagation();\n\t\tthis.showMore = !this.showMore;\n\t};\n\n\tgetSelectedItems(el: HTMLElement) {\n\t\treturn Array.from(el.querySelectorAll(\"ifx-list-entry\"))\n\t\t\t.filter((entry) => entry.getAttribute(\"value\") === \"true\")\n\t\t\t.map((entry) => ({\n\t\t\t\tlabel: entry.getAttribute(\"label\"),\n\t\t\t\tvalue: entry.getAttribute(\"value\"),\n\t\t\t\ttype: entry.getAttribute(\"type\"),\n\t\t\t\telement: entry,\n\t\t\t}));\n\t}\n\n\thandleCheckedChange = (event?: CustomEvent) => {\n\t\t// If the type of the changed entry is 'radio-button' and its value is true, deselect all other radio buttons\n\t\tif (event && event.detail.type === \"radio-button\" && event.detail.value) {\n\t\t\tconst otherRadioButtons = Array.from(\n\t\t\t\tthis.el.querySelectorAll(\"ifx-list-entry\"),\n\t\t\t).filter(\n\t\t\t\t(entry) =>\n\t\t\t\t\tentry.getAttribute(\"type\") === \"radio-button\" &&\n\t\t\t\t\tentry !== event.target,\n\t\t\t);\n\t\t\totherRadioButtons.forEach((radioButton) =>\n\t\t\t\tradioButton.setAttribute(\"value\", \"false\"),\n\t\t\t);\n\t\t}\n\n\t\tconst selectedItems = this.getSelectedItems(this.el);\n\t\tthis.selectedCount = selectedItems.length;\n\n\t\tthis.ifxListUpdate.emit({ name: this.name, selectedItems });\n\t};\n\n\tprivate renderList() {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tconst visibleItems = this.showMore\n\t\t\t? listEntries\n\t\t\t: listEntries.slice(0, this.maxVisibleItems);\n\t\tconst remainingItems = listEntries.length - visibleItems.length;\n\n\t\treturn (\n\t\t\t<div class=\"list-wrapper\">\n\t\t\t\t{visibleItems.map((entry) => (\n\t\t\t\t\t<slot name={entry.getAttribute(\"slot\")}></slot>\n\t\t\t\t))}\n\t\t\t\t{(remainingItems > 0 || this.showMore) && (\n\t\t\t\t\t<div class=\"link-wrapper\" onClick={this.toggleShowMore}>\n\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\tkey={this.showMore.toString()}\n\t\t\t\t\t\t\ticon={this.showMore ? \"chevron-up-16\" : \"chevron-down-16\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ifx-link\n\t\t\t\t\t\t\tsize=\"s\"\n\t\t\t\t\t\t\thref=\"\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\tvariant=\"underlined\"\n\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.showMore ? \"Show less\" : `Show ${remainingItems} more`}\n\t\t\t\t\t\t</ifx-link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"],"names":[],"mappings":";;AAAA,MAAM,OAAO,GAAG,MAAM,CAAC,2FAA2F,CAAC;;MCgBtG,IAAI,GAAA,MAAA;;;;;;IAEP,QAAQ,GAAY,KAAK;IACzB,QAAQ,GAAG,KAAK;IAChB,aAAa,GAAW,CAAC;IACzB,UAAU,GAAG,CAAC;IACf,IAAI,GAAG,EAAE;IACT,eAAe,GAAG,CAAC;AACnB,IAAA,IAAI,GAAW,UAAU,CAAC;AACT,IAAA,YAAY;IAC5B,oBAAoB,GAAY,KAAK;AAErC,IAAA,aAAa;AAEtB,IAAA,QAAQ;AAGR,IAAA,gBAAgB,CAAC,OAAe,EAAA;AAC/B,QAAA,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC;;AAIpC,IAAA,mBAAmB,CAAC,QAAiB,EAAA;QACpC,IAAI,QAAQ,EAAE;YACb,IAAI,CAAC,KAAK,EAAE;AACZ,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;;;IAI5B,iBAAiB,GAAA;QAChB,IAAI,CAAC,0BAA0B,EAAE;QACjC,IAAI,CAAC,cAAc,EAAE;;IAGtB,oBAAoB,GAAA;QACnB,IAAI,CAAC,4BAA4B,EAAE;;IAGpC,KAAK,GAAA;QACJ,IAAI,CAAC,gBAAgB,EAAE;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK;AACrB,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK;AACrB,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC;AACtB,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,CAAC;;IAGhE,MAAM,GAAA;AACL,QAAA,OAAO,IAAI,CAAC,UAAU,EAAE;;;IAIjB,0BAA0B,GAAA;QACjC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,IAAI,CAAC,mBAAmB,CAAC;QACxE,IAAI,CAAC,QAAQ,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC;AACzD,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;;IAG5C,4BAA4B,GAAA;QACnC,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,IAAI,CAAC,mBAAmB,CAAC;AAC3E,QAAA,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;;IAGnB,cAAc,GAAA;AACrB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM;AAC1D,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE;AACtC,QAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC;QACrC,IAAI,CAAC,0BAA0B,EAAE;;AAG1B,IAAA,qBAAqB,CAAC,OAAe,EAAA;AAC5C,QAAA,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;AAC1E,QAAA,WAAW,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;;IAG5D,gBAAgB,GAAA;AACvB,QAAA,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;AAC1E,QAAA,WAAW,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;AAC7B,YAAA,KAAK,CAAC,KAAK,GAAG,KAAK;AACnB,YAAA,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC;AACrC,SAAC,CAAC;;IAGK,cAAc,GAAG,MAAK;AAC7B,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE;AAC1C,QAAA,IAAI,aAAa,KAAK,IAAI,CAAC,UAAU,EAAE;AACtC,YAAA,IAAI,CAAC,UAAU,GAAG,aAAa;YAC/B,IAAI,CAAC,mBAAmB,EAAE;;AAE3B,QAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC;AACtC,KAAC;IAEO,0BAA0B,GAAA;AACjC,QAAA,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;AAC3D,YAAA,IAAI,CAAC,gBAAgB,EAAE,CAAC;AACxB,YAAA,IAAI,CAAC,aAAa,GAAG,CAAC;;;IAIxB,aAAa,GAAA;QACZ,OAAO,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,MAAM;;AAGzD,IAAA,UAAU,GAAG,CAAC,KAAiB,KAAI;QAClC,KAAK,CAAC,eAAe,EAAE;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ;AAC/B,KAAC;AAED,IAAA,cAAc,GAAG,CAAC,KAAiB,KAAI;QACtC,KAAK,CAAC,eAAe,EAAE;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ;AAC/B,KAAC;AAED,IAAA,gBAAgB,CAAC,EAAe,EAAA;QAC/B,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;AACrD,aAAA,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,MAAM;AACxD,aAAA,GAAG,CAAC,CAAC,KAAK,MAAM;AAChB,YAAA,KAAK,EAAE,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC;AAClC,YAAA,KAAK,EAAE,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC;AAClC,YAAA,IAAI,EAAE,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC;AAChC,YAAA,OAAO,EAAE,KAAK;AACd,SAAA,CAAC,CAAC;;AAGL,IAAA,mBAAmB,GAAG,CAAC,KAAmB,KAAI;;AAE7C,QAAA,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,KAAK,cAAc,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE;AACxE,YAAA,MAAM,iBAAiB,GAAG,KAAK,CAAC,IAAI,CACnC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAC1C,CAAC,MAAM,CACP,CAAC,KAAK,KACL,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,cAAc;AAC7C,gBAAA,KAAK,KAAK,KAAK,CAAC,MAAM,CACvB;AACD,YAAA,iBAAiB,CAAC,OAAO,CAAC,CAAC,WAAW,KACrC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAC1C;;QAGF,MAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC;AACpD,QAAA,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,MAAM;AAEzC,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,aAAa,EAAE,CAAC;AAC5D,KAAC;IAEO,UAAU,GAAA;AACjB,QAAA,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;AAC1E,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC;AACzB,cAAE;cACA,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC;QAC7C,MAAM,cAAc,GAAG,WAAW,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM;AAE/D,QAAA,QACC,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,cAAc,EAAA,EACvB,YAAY,CAAC,GAAG,CAAC,CAAC,KAAK,MACvB,CAAA,CAAA,MAAA,EAAA,EAAM,IAAI,EAAE,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,EAAA,CAAS,CAC/C,CAAC,EACD,CAAC,cAAc,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,MACpC,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,cAAc,EAAC,OAAO,EAAE,IAAI,CAAC,cAAc,EAAA,EACrD,CACC,CAAA,UAAA,EAAA,EAAA,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAC7B,IAAI,EAAE,IAAI,CAAC,QAAQ,GAAG,eAAe,GAAG,iBAAiB,EACxD,CAAA,EACF,CAAA,CAAA,UAAA,EAAA,EACC,IAAI,EAAC,GAAG,EACR,IAAI,EAAC,EAAE,EACP,MAAM,EAAC,QAAQ,EACf,OAAO,EAAC,YAAY,EACpB,QAAQ,EAAE,KAAK,EAEd,EAAA,IAAI,CAAC,QAAQ,GAAG,WAAW,GAAG,CAAA,KAAA,EAAQ,cAAc,CAAA,KAAA,CAAO,CAClD,CACN,CACN,CACI;;;;;;;;;;;;;;;"}