{"version":3,"file":"ifx-filter-bar.entry.js","sources":["src/components/table-advanced-version/filter-bar/filter-bar.scss?tag=ifx-filter-bar&encapsulation=shadow","src/components/table-advanced-version/filter-bar/filter-bar.tsx"],"sourcesContent":["/* filter-bar.scss */\n@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n.search-container {\n  display: flex;\n  width: calc(100% - 48px); /* Adjust width to account for padding */\n  padding-left: 24px;\n  padding-right: 24px;  flex-direction: row;\n  align-items: flex-start;\n  margin-bottom: tokens.$ifxSpace200;\n}\n\n.components-container {\n  display: flex;\n  width: calc(100% - 48px); /* Adjust width to account for padding */\n  padding-left: 24px;\n  padding-right: 24px;  flex-direction: row;\n  align-items: flex-end;\n  align-content:flex-end;\n  flex-wrap: wrap;\n  gap: tokens.$ifxSpace200;\n}\n\n.filter-slot-wrapper {\n    flex-grow: 1;\n    flex-basis: 100%; \n    max-width: 100%; \n  }\n\n@media (max-width: 1024px) { /* Adjust based on your breakpoints for mid/small screens */\n    .more-filters-wrapper {\n        order: 3; /* Keeps the button at the end/new row */\n        width: 100%; /* Takes full width to allow centering */\n        display: flex; /* Enables flexbox properties */\n        justify-content: center; /* Centers the button horizontally */\n        padding-top: tokens.$ifxSpace200; /* Adds space above the button, adjust as needed */\n      }\n  }\n\n\n  @media (min-width: 720px) and (max-width: 1024px) {\n    .filter-slot-wrapper {\n        flex-basis: calc((100% - tokens.$ifxSpace200) / 2);\n        max-width: calc((100% - tokens.$ifxSpace200) / 2);\n      }\n    \n\n}\n\n  @media (min-width: 1025px) {\n    .filter-slot-wrapper {\n        flex-basis: auto; \n        max-width: 200px; \n      }\n\n    ::slotted([slot=\"filter-search\"]) {\n        max-width: 828px;\n      }\n  }\n  \n  ::slotted([slot=\"filter-search\"]) {\n    flex-grow: 1;\n    flex-basis: 100%;\n    width: 100%; \n  }","// FilterBar.tsx\nimport {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tProp,\n\tState,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-filter-bar\",\n\tstyleUrl: \"filter-bar.scss\",\n\tshadow: true,\n})\nexport class FilterBar {\n\t@Element() el: HTMLElement;\n\t@State() selectedOptions: Array<{\n\t\tfilterName: string;\n\t\tfilterValues: [string];\n\t\ttype: string;\n\t}> = [];\n\t@Event() ifxTopbarFilterChange: EventEmitter;\n\t@State() showAllFilters: boolean = false;\n\t@Prop() maxShownFilters: number = 4; // Default to 4, can be overridden by parent component\n\t@State() visibleSlots: number;\n\t@Prop() showMoreFiltersButton: boolean = true;\n\n\t/* If the component is ever removed and then reattached to the DOM, \nconnectedCallback ensures that the event listeners are properly set up again */\n\tconnectedCallback() {\n\t\tthis.el.addEventListener(\"ifxFilterSelect\", this.handleTopbarFilterChange);\n\t\tthis.el.addEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n\t\twindow.addEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\tcomponentWillUnload() {\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSelect\",\n\t\t\tthis.handleTopbarFilterChange,\n\t\t);\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSearchChange\",\n\t\t\tthis.handleSearchChange,\n\t\t);\n\t\twindow.removeEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.updateVisibleSlots();\n\t}\n\n\t// Modify updateVisibleSlots to use showAllFilters to determine the number of slots\n\tupdateVisibleSlots() {\n\t\tthis.visibleSlots = this.showAllFilters\n\t\t\t? Number.MAX_SAFE_INTEGER\n\t\t\t: this.maxShownFilters;\n\t}\n\n\thandleMoreFiltersClick = () => {\n\t\tthis.showAllFilters = true;\n\t\tthis.updateVisibleSlots(); // Recalculate visible slots based on the new state\n\t};\n\n\thandleResetEvent = () => {\n\t\tconst filterSearchSlot = this.el.shadowRoot?.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tif (filterSearchSlot instanceof HTMLSlotElement) {\n\t\t\t// Ensure it's treated as HTMLSlotElement\n\t\t\tconst filterSearchSlottedElements = filterSearchSlot.assignedElements({\n\t\t\t\tflatten: true,\n\t\t\t});\n\n\t\t\tfilterSearchSlottedElements.forEach(\n\t\t\t\t(filterSearchWrapper: HTMLElement) => {\n\t\t\t\t\tconst filterSearch =\n\t\t\t\t\t\tfilterSearchWrapper.querySelector(\"ifx-filter-search\");\n\n\t\t\t\t\tconst searchField =\n\t\t\t\t\t\tfilterSearch.shadowRoot.querySelectorAll(\"ifx-search-field\");\n\n\t\t\t\t\tif (searchField.length > 0) {\n\t\t\t\t\t\tsearchField.forEach((searchFieldElement: any) => {\n\t\t\t\t\t\t\tsearchFieldElement.value = \"\";\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.selectedOptions = [];\n\n\t\t// Emit the change to inform any parent components that the filters have been reset\n\t\tthis.ifxTopbarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleSearchChange = (event: CustomEvent) => {\n\t\tthis.handleTopbarFilterChange(event);\n\t};\n\n\thandleFilterSelect = (event: CustomEvent) => {\n\t\tthis.handleTopbarFilterChange(event);\n\t};\n\n\thandleTopbarFilterChange = (event: CustomEvent) => {\n\t\tconst newSelectedOptions = [...this.selectedOptions];\n\n\t\tif (event.type === \"ifxFilterSearchChange\") {\n\t\t\tconst { filterName, filterValue } = event.detail;\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter is found, update its value\n\t\t\t\tnewSelectedOptions[existingOptionIndex].filterValues = [filterValue];\n\t\t\t} else {\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterName: filterName,\n\t\t\t\t\tfilterValues: [filterValue],\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (event.type === \"ifxFilterSelect\") {\n\t\t\tconst { filterName, filterValues, type } = event.detail;\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\tnewSelectedOptions[existingOptionIndex].filterValues = filterValues;\n\t\t\t\tnewSelectedOptions[existingOptionIndex].type = type; // Update type based on the number of selected items\n\t\t\t} else {\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterName: filterName,\n\t\t\t\t\tfilterValues: filterValues,\n\t\t\t\t\ttype: type,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.selectedOptions = newSelectedOptions;\n\t\tthis.ifxTopbarFilterChange.emit(this.selectedOptions);\n\t};\n\n\trender() {\n\t\tconst safeVisibleSlots = Math.max(0, this.visibleSlots);\n\n\t\tconst actualNumberOfComponents =\n\t\t\tthis.el.querySelectorAll(\"ifx-set-filter\").length;\n\t\t// Calculate slotsToShow safely\n\t\tconst slotsToShow = Math.min(\n\t\t\tsafeVisibleSlots,\n\t\t\tactualNumberOfComponents,\n\t\t\tNumber.MAX_SAFE_INTEGER,\n\t\t);\n\n\t\tconst slots = Array.from({ length: slotsToShow }, (_, i) => (\n\t\t\t<div class=\"filter-slot-wrapper\">\n\t\t\t\t<slot name={`filter-component-${i + 1}`}></slot>\n\t\t\t</div>\n\t\t));\n\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"search-container\">\n\t\t\t\t\t<slot name=\"filter-search\"></slot>{\" \"}\n\t\t\t\t\t{/* Directly place the search slot here */}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"components-container\">\n\t\t\t\t\t{slots.length > 0 ? slots : <slot name=\"filter-component\"></slot>}\n\t\t\t\t\t{this.showMoreFiltersButton && !this.showAllFilters && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"more-filters-wrapper\"\n\t\t\t\t\t\t\tonClick={this.handleMoreFiltersClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ifx-button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\t\tsize=\"m\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\ttheme=\"default\"\n\t\t\t\t\t\t\t\tfull-width=\"false\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ifx-icon icon=\"filter-16\"></ifx-icon>More filters\n\t\t\t\t\t\t\t</ifx-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"],"names":[],"mappings":";;AAAA,MAAM,YAAY,GAAG,MAAM,CAAC,+3BAA+3B,CAAC;;MCiB/4B,SAAS,GAAA,MAAA;;;;;;IAEZ,eAAe,GAInB,EAAE;AACE,IAAA,qBAAqB;IACrB,cAAc,GAAY,KAAK;AAChC,IAAA,eAAe,GAAW,CAAC,CAAC;AAC3B,IAAA,YAAY;IACb,qBAAqB,GAAY,IAAI;AAE7C;AAC8E;IAC9E,iBAAiB,GAAA;QAChB,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,wBAAwB,CAAC;QAC1E,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,uBAAuB,EAAE,IAAI,CAAC,kBAAkB,CAAC;QAC1E,MAAM,CAAC,gBAAgB,CAAC,sBAAsB,EAAE,IAAI,CAAC,gBAAgB,CAAC;;IAGvE,mBAAmB,GAAA;QAClB,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAC1B,iBAAiB,EACjB,IAAI,CAAC,wBAAwB,CAC7B;QACD,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAC1B,uBAAuB,EACvB,IAAI,CAAC,kBAAkB,CACvB;QACD,MAAM,CAAC,mBAAmB,CAAC,sBAAsB,EAAE,IAAI,CAAC,gBAAgB,CAAC;;IAG1E,iBAAiB,GAAA;QAChB,IAAI,CAAC,kBAAkB,EAAE;;;IAI1B,kBAAkB,GAAA;AACjB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;cACtB,MAAM,CAAC;AACT,cAAE,IAAI,CAAC,eAAe;;IAGxB,sBAAsB,GAAG,MAAK;AAC7B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI;AAC1B,QAAA,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC3B,KAAC;IAED,gBAAgB,GAAG,MAAK;AACvB,QAAA,MAAM,gBAAgB,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,aAAa,CACzD,4BAA4B,CAC5B;AACD,QAAA,IAAI,gBAAgB,YAAY,eAAe,EAAE;;AAEhD,YAAA,MAAM,2BAA2B,GAAG,gBAAgB,CAAC,gBAAgB,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;AACb,aAAA,CAAC;AAEF,YAAA,2BAA2B,CAAC,OAAO,CAClC,CAAC,mBAAgC,KAAI;gBACpC,MAAM,YAAY,GACjB,mBAAmB,CAAC,aAAa,CAAC,mBAAmB,CAAC;gBAEvD,MAAM,WAAW,GAChB,YAAY,CAAC,UAAU,CAAC,gBAAgB,CAAC,kBAAkB,CAAC;AAE7D,gBAAA,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAC3B,oBAAA,WAAW,CAAC,OAAO,CAAC,CAAC,kBAAuB,KAAI;AAC/C,wBAAA,kBAAkB,CAAC,KAAK,GAAG,EAAE;AAC9B,qBAAC,CAAC;;AAEJ,aAAC,CACD;;AAGF,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE;;QAGzB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;AACtD,KAAC;AAED,IAAA,kBAAkB,GAAG,CAAC,KAAkB,KAAI;AAC3C,QAAA,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC;AACrC,KAAC;AAED,IAAA,kBAAkB,GAAG,CAAC,KAAkB,KAAI;AAC3C,QAAA,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC;AACrC,KAAC;AAED,IAAA,wBAAwB,GAAG,CAAC,KAAkB,KAAI;QACjD,MAAM,kBAAkB,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;AAEpD,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,uBAAuB,EAAE;YAC3C,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,KAAK,CAAC,MAAM;AAChD,YAAA,MAAM,mBAAmB,GAAG,kBAAkB,CAAC,SAAS,CACvD,CAAC,MAAM,KAAK,MAAM,CAAC,UAAU,KAAK,UAAU,CAC5C;AAED,YAAA,IAAI,mBAAmB,KAAK,EAAE,EAAE;;gBAE/B,kBAAkB,CAAC,mBAAmB,CAAC,CAAC,YAAY,GAAG,CAAC,WAAW,CAAC;;iBAC9D;gBACN,kBAAkB,CAAC,IAAI,CAAC;AACvB,oBAAA,UAAU,EAAE,UAAU;oBACtB,YAAY,EAAE,CAAC,WAAW,CAAC;AAC3B,oBAAA,IAAI,EAAE,MAAM;AACZ,iBAAA,CAAC;;;AAEG,aAAA,IAAI,KAAK,CAAC,IAAI,KAAK,iBAAiB,EAAE;YAC5C,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC,MAAM;AACvD,YAAA,MAAM,mBAAmB,GAAG,kBAAkB,CAAC,SAAS,CACvD,CAAC,MAAM,KAAK,MAAM,CAAC,UAAU,KAAK,UAAU,CAC5C;AAED,YAAA,IAAI,mBAAmB,KAAK,EAAE,EAAE;AAC/B,gBAAA,kBAAkB,CAAC,mBAAmB,CAAC,CAAC,YAAY,GAAG,YAAY;gBACnE,kBAAkB,CAAC,mBAAmB,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;;iBAC9C;gBACN,kBAAkB,CAAC,IAAI,CAAC;AACvB,oBAAA,UAAU,EAAE,UAAU;AACtB,oBAAA,YAAY,EAAE,YAAY;AAC1B,oBAAA,IAAI,EAAE,IAAI;AACV,iBAAA,CAAC;;;AAIJ,QAAA,IAAI,CAAC,eAAe,GAAG,kBAAkB;QACzC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;AACtD,KAAC;IAED,MAAM,GAAA;AACL,QAAA,MAAM,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC;AAEvD,QAAA,MAAM,wBAAwB,GAC7B,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,MAAM;;AAElD,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAC3B,gBAAgB,EAChB,wBAAwB,EACxB,MAAM,CAAC,gBAAgB,CACvB;QAED,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,MACtD,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,qBAAqB,EAAA,EAC/B,CAAM,CAAA,MAAA,EAAA,EAAA,IAAI,EAAE,CAAoB,iBAAA,EAAA,CAAC,GAAG,CAAC,CAAA,CAAE,EAAS,CAAA,CAC3C,CACN,CAAC;AAEF,QAAA,QACC,EAAC,IAAI,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EACJ,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,kBAAkB,EAAA,EAC5B,CAAM,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,IAAI,EAAC,eAAe,EAAQ,CAAA,EAAC,GAAG,CAEjC,EACN,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,sBAAsB,EAAA,EAC/B,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,CAAA,CAAA,MAAA,EAAA,EAAM,IAAI,EAAC,kBAAkB,EAAQ,CAAA,EAChE,IAAI,CAAC,qBAAqB,IAAI,CAAC,IAAI,CAAC,cAAc,KAClD,CACC,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,sBAAsB,EAC5B,OAAO,EAAE,IAAI,CAAC,sBAAsB,EAAA,EAEpC,CACC,CAAA,YAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,IAAI,EAAC,QAAQ,EACb,QAAQ,EAAE,KAAK,EACf,OAAO,EAAC,UAAU,EAClB,IAAI,EAAC,GAAG,EACR,MAAM,EAAC,QAAQ,EACf,KAAK,EAAC,SAAS,EAAA,YAAA,EACJ,OAAO,EAAA,EAElB,CAAU,CAAA,UAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,IAAI,EAAC,WAAW,EAAY,CAAA,EAC1B,cAAA,CAAA,CACR,CACN,CACI,CACA;;;;;;;"}