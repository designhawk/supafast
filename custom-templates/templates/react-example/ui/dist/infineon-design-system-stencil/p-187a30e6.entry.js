import{r as e,c as t,a as i,h as s,F as a}from"./p-CA_siwAQ.js";const n=()=>`.tree-item{position:relative;cursor:pointer;list-style:none}.tree-item.tree-item--expanded{position:relative}.tree-item.tree-item--has-children{position:relative}.tree-item.tree-item--has-children .tree-item__header>.tree-item__chevron-container{display:flex}.tree-item.tree-item--has-children.tree-item--expanded .tree-item__header>.tree-item__chevron-container::after{display:block}.tree-item--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.tree-item__content{display:flex;flex-direction:row}.tree-item__content:hover .tree-item__checkbox-container,.tree-item__content:hover .tree-item__header{background-color:#F7F7F7}.tree-item__checkbox-container{position:sticky;left:0;z-index:10;padding:4px;background-color:#FFFFFF}.tree-item__header{flex-grow:1;display:flex;align-items:center;white-space:nowrap;height:20px;padding-top:4px;padding-right:16px;padding-bottom:4px;padding-left:8px}.tree-item__chevron-container{display:none;align-items:center;margin-right:8px;height:20px}.tree-item__chevron-container::after{--height-line-start:28px;display:none;content:"";position:absolute;z-index:1;top:var(--height-line-start);left:auto;margin-left:8px;width:1px;height:calc(100% - var(--height-line-start));background-color:#EEEDED}.tree-item--disabled .tree-item__chevron-container::after{color:#EEEDED}.tree-item__chevron.chevron-down{transform:rotate(90deg)}.tree-item__chevron.chevron-right{transform:rotate(0)}.tree-item__label-icon-container{display:flex;align-items:center}.tree-item__label-icon-container:focus{outline:none}.tree-item__label-icon-container:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.tree-item__icon-container{position:relative;width:16px;height:16px}.tree-item__icon-container ifx-icon{position:absolute;left:0;top:0;opacity:1;transition:opacity 0.2s ease-in-out}.tree-item__icon-container ifx-icon.icon--hidden{opacity:0}.tree-item__label{padding-left:8px}.tree-item__children{display:none}.tree-item[aria-expanded=true]>.tree-item__children{display:block}`;const r=class{constructor(i){e(this,i);this.ifxTreeViewItemExpandChange=t(this,"ifxTreeViewItemExpandChange",7);this.ifxTreeViewItemCheckChange=t(this,"ifxTreeViewItemCheckChange",7);this.ifxTreeViewItemDisableChange=t(this,"ifxTreeViewItemDisableChange",7)}get host(){return i(this)}expanded=false;initiallyExpanded=false;disableItem=false;ariaLabel;initiallySelected=false;value;ifxTreeViewItemExpandChange;ifxTreeViewItemCheckChange;ifxTreeViewItemDisableChange;hasChildren=false;isChecked=false;partialChecked=false;level=0;disableAllItems=false;expandAllItems=false;suppressExpandEvents=false;get disabled(){return this.disableAllItems||this.disableItem}get isExpanded(){return this.expandAllItems||this.expanded}findChildren=()=>Array.from(this.host.children).filter((e=>e instanceof HTMLElement&&e.tagName==="IFX-TREE-VIEW-ITEM"));calculateNodeLevel=()=>{let e=0,t=this.host.parentElement;while(t){if(t.tagName==="IFX-TREE-VIEW-ITEM")e++;t=t.parentElement}return e};componentWillLoad(){this.expanded=this.initiallyExpanded;this.hasChildren=this.findChildren().length>0;this.level=this.calculateNodeLevel();this.host.setAttribute("data-level",this.level.toString());this.isChecked=this.initiallySelected;this.host.addEventListener("internal-check-state-change",this.handleStateChange)}componentDidLoad(){this.observeParentAttribute("disable-all-items",(e=>this.disableAllItems=e));this.observeParentAttribute("data-expand-all-items",(e=>this.expandAllItems=e),true);if(this.shouldExpandFromParent())this.expandAllDescendants();this.host["__stencil_instance"]=this;if(this.initiallySelected)setTimeout((()=>this.updateParentState()),0)}observeParentAttribute(e,t,i=false){let s=this.host.parentElement;while(s){if(s.tagName==="IFX-TREE-VIEW"||i&&s.hasAttribute(e)){const i=new MutationObserver((()=>t(s.hasAttribute(e))));i.observe(s,{attributes:true});t(s.hasAttribute(e));break}s=s.parentElement}}shouldExpandFromParent(){let e=this.host.parentElement;while(e){if(e.tagName==="IFX-TREE-VIEW"&&(e.hasAttribute("expand-all-items")||e.hasAttribute("data-expand-all-items")))return true;e=e.parentElement}return false}expandAllDescendants(){this.expanded=true;this.findChildren().forEach((e=>{e.expanded=true;e.expandAllDescendants?.()}))}handleStateChange=e=>{if(this.disabled)return;e.stopPropagation();this.updateCheckState(e.detail.checked)};handleCheckboxChange=e=>{if(this.disabled)return;this.updateCheckState(e.detail?.checked??!this.isChecked)};handleHeaderClick=({target:e})=>{if(this.disabled)return;if(!e.closest(".tree-item__checkbox-container, .tree-item__chevron-container")){if(this.hasChildren){const e=!this.isChecked;this.updateCheckState(e);const t=e?this.expandOrCollapseAllDescendants(true):this.expandOrCollapseAllDescendants(false);this.ifxTreeViewItemExpandChange.emit({expanded:e,affectedItems:t,component:this})}else{this.updateCheckState(!this.isChecked)}}};expandOrCollapseAllDescendants(e){this.suppressExpandEvents=true;const t=[];this.expanded=e;if(this.hasChildren)t.push({expanded:e,value:this.value});this.findChildren().forEach((i=>{const s=i["__stencil_instance"];if(s&&s.hasChildren){s.suppressExpandEvents=true;s.expanded=e;t.push({expanded:e,value:s.value});if(s.hasChildren){const i=s.expandOrCollapseAllDescendants(e);t.push(...i)}}}));this.suppressExpandEvents=false;return t}async updateCheckState(e,t=false){if(this.disabled)return;if(!t&&this.hasChildren){const t=this.collectDescendantStates(e);this.setNodeState({isChecked:e,partialChecked:false},false);await this.updateChildrenSilently(e);this.ifxTreeViewItemCheckChange.emit({checked:e,indeterminate:false,value:this.value,affectedChildItems:t,component:this});this.updateParentState()}else if(t){this.setNodeState({isChecked:e,partialChecked:false},false)}else{this.setNodeState({isChecked:e,partialChecked:false});await this.updateChildrenState(e);this.updateParentState()}}async updateChildrenSilently(e){for(const t of this.findChildren()){const i=t["__stencil_instance"];if(i&&!i.disabled){i.setNodeState({isChecked:e,partialChecked:false},false);await i.updateChildrenSilently(e)}}}handleExpandedChange(e){if(!this.suppressExpandEvents){this.ifxTreeViewItemExpandChange.emit({expanded:e,value:this.value,affectedItems:[{expanded:e,value:this.value}],component:this})}}handleDisableItemChange(e){this.ifxTreeViewItemDisableChange.emit({disabled:e,component:this})}setNodeState(e,t=true){this.isChecked=e.isChecked;this.partialChecked=e.partialChecked;if(t){this.ifxTreeViewItemCheckChange.emit({checked:this.isChecked,indeterminate:this.partialChecked,value:this.value,level:this.level,disabled:this.disabled,component:this})}}collectDescendantStates(e){const t=[];const i=(s,a=false)=>{const n=s===this.host?this:s["__stencil_instance"];if(!a&&!n?.disabled){t.push({checked:e,indeterminate:false,value:n?.value})}Array.from(s.children).forEach((e=>{if(e.tagName==="IFX-TREE-VIEW-ITEM")i(e,false)}))};Array.from(this.host.children).forEach((e=>{if(e.tagName==="IFX-TREE-VIEW-ITEM")i(e,false)}));return t}async updateChildrenState(e){for(const t of this.findChildren()){const i=t["__stencil_instance"];if(i&&!i.disabled){await t.componentOnReady();t.dispatchEvent(new CustomEvent("internal-check-state-change",{detail:{checked:e},bubbles:false,composed:true}))}}}findSiblingNodes(e){return Array.from(e.children).filter((e=>e instanceof HTMLElement&&e.tagName==="IFX-TREE-VIEW-ITEM"))}updateParentState(){const e=this.host.parentElement?.closest("ifx-tree-view-item");if(!e)return;setTimeout((()=>{const t=e["__stencil_instance"];if(!t)return;const i=this.findSiblingNodes(e);const{allChecked:s,someChecked:a}=this.calculateSiblingStates(i);t.setNodeState({isChecked:s,partialChecked:!s&&a},false);t.updateParentState()}),0)}calculateSiblingStates(e){const t=e.map((e=>{const t=e["__stencil_instance"];return{checked:t?.isChecked,partial:t?.partialChecked}}));const i=t.filter((e=>e.checked)).length;const s=t.filter((e=>e.partial)).length;return{allChecked:t.length>0&&i===t.length&&s===0,someChecked:i>0||s>0}}toggleExpand=()=>{if(this.disabled||!this.hasChildren)return;this.expanded=!this.expanded};handleKeyDown=e=>{const t=Array.from(this.host.closest("ifx-tree-view")?.querySelectorAll("ifx-tree-view-item")||[]);const i=t.filter((e=>{let t=e.parentElement?.closest("ifx-tree-view-item");while(t){const e=t;if(!(e.expandAllItems||e.expanded))return false;t=t.parentElement?.closest("ifx-tree-view-item")}return true}));const s=i.findIndex((e=>e===this.host));const a=e=>e?.focus();switch(e.key){case"ArrowDown":{e.preventDefault();for(let e=s+1;e<i.length;e++){const t=i[e];if(!t.disabled){a(t.shadowRoot?.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowUp":{e.preventDefault();for(let e=s-1;e>=0;e--){const t=i[e];if(!t.disabled){a(t.shadowRoot?.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowRight":{e.preventDefault();if(!this.isExpanded&&this.hasChildren){this.expanded=true}else if(this.isExpanded&&this.hasChildren){const e=this.host.querySelector("ifx-tree-view-item");if(e&&!e.disabled){a(e.shadowRoot?.querySelector(".tree-item__label-icon-container"))}}break}case"ArrowLeft":{e.preventDefault();if(this.isExpanded&&this.hasChildren){this.expanded=false}else{const e=this.host.parentElement?.closest("ifx-tree-view-item");if(e&&!e.disabled){a(e.shadowRoot?.querySelector(".tree-item__label-icon-container"))}}break}case" ":case"Enter":{e.preventDefault();if(this.hasChildren){const e=!this.isChecked;this.updateCheckState(e);const t=e?this.expandOrCollapseAllDescendants(true):this.expandOrCollapseAllDescendants(false);this.ifxTreeViewItemExpandChange.emit({expanded:e,affectedItems:t,component:this})}else{this.updateCheckState(!this.isChecked)}break}}};render(){return s("div",{key:"9aab415f6363cfb42b27ec64372dbc10ba564f58",class:{"tree-item":true,"tree-item--expanded":this.isExpanded,"tree-item--has-children":this.hasChildren,"tree-item--disabled":this.disabled},role:"treeitem","aria-expanded":this.isExpanded?"true":"false","data-level":this.level,"aria-disabled":this.disabled?"true":undefined,"aria-label":this.ariaLabel},s("div",{key:"54e902025588fc30671623a3246ad25079f2b471",class:"tree-item__content"},s("div",{key:"9d82af8b1e9027bbe6f4b73f109cec013ed4babd",class:"tree-item__checkbox-container",onClick:e=>e.stopPropagation()},s("ifx-checkbox",{key:"a7fc71f1eb2dbb30e6e9df5f99b253299842cfd1",size:"s",checked:this.partialChecked?false:this.isChecked,indeterminate:this.partialChecked,onIfxChange:this.handleCheckboxChange,disabled:this.disabled})),s("div",{key:"700ecdb65e20732a4fe0a30cf05fd9207f884559",class:"tree-item__header",style:{paddingLeft:`${this.level*24+10}px`},onClick:this.handleHeaderClick,tabIndex:-1,"aria-disabled":this.disabled?"true":undefined},this.hasChildren&&s("div",{key:"1b6ed42b76033f14324db742ec7b1d2760873375",class:"tree-item__chevron-container",onClick:this.toggleExpand},s("ifx-icon",{key:"ec03dae18d7941443336d20f4d0c0a4dbbb54938",class:`tree-item__chevron ${this.isExpanded?"chevron-down":"chevron-right"}`,icon:"chevron-right-16"}),s("div",{key:"05979928988b2e43f7b572172147bf62129806d3",class:"tree-item__line"})),s("div",{key:"d5e85a32ba4de10152cec452fc5da951f52ef28d",class:"tree-item__label-icon-container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown},s("div",{key:"33221ccadd075833dbe60fe8030e9cf471c0828b",class:"tree-item__icon-container"},this.hasChildren?s(a,null,s("ifx-icon",{class:{"icon--hidden":this.isExpanded},icon:"folder-16"}),s("ifx-icon",{class:{"icon--hidden":!this.isExpanded},icon:"folder-open-16"})):s("ifx-icon",{icon:"file-16"})),s("span",{key:"b485fedddd71dad05ee86264c9bf4ba13f29f8a0",class:"tree-item__label"},s("slot",{key:"6f51f9308f910d7291b5797af8195b48b2d1b1a5"}))))),this.isExpanded&&s("div",{key:"e1b4fec8f6de6e2e1abddc2da76e01dacd7eb928",class:"tree-item__children"},s("slot",{key:"d193d748313f2fbcbfdbd943c20935aeec3a4a70",name:"children"})))}static get watchers(){return{expanded:[{handleExpandedChange:0}],disableItem:[{handleDisableItemChange:0}]}}};r.style=n();export{r as ifx_tree_view_item};
//# sourceMappingURL=p-187a30e6.entry.js.map