{"version":3,"names":["listCss","List","expanded","showMore","selectedCount","totalItems","name","maxVisibleItems","type","resetTrigger","internalResetTrigger","ifxListUpdate","observer","handleTypeChange","newType","this","updateListEntriesType","resetTriggerChanged","newValue","reset","componentWillLoad","setupListenersAndObservers","initializeList","disconnectedCallback","cleanupListenersAndObservers","resetListEntries","emit","selectedItems","render","renderList","el","addEventListener","handleCheckedChange","MutationObserver","handleMutation","observe","childList","removeEventListener","disconnect","getSelectedItems","length","getTotalItems","checkRadioButtonConstraint","listEntries","Array","from","querySelectorAll","forEach","entry","setAttribute","value","newTotalItems","toggleList","event","stopPropagation","toggleShowMore","filter","getAttribute","map","label","element","detail","otherRadioButtons","target","radioButton","visibleItems","slice","remainingItems","h","class","onClick","key","toString","icon","size","href","variant","disabled"],"sources":["src/components/table-advanced-version/list/list.scss?tag=ifx-list&encapsulation=shadow","src/components/table-advanced-version/list/list.tsx"],"sourcesContent":["@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n.link-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: tokens.$ifxSpace100;\n  margin-top: tokens.$ifxSpace100;\n}","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-list\",\n\tstyleUrl: \"list.scss\",\n\tshadow: true,\n})\nexport class List {\n\t@Element() private el: HTMLElement;\n\t@State() expanded: boolean = false;\n\t@State() showMore = false;\n\t@State() selectedCount: number = 0;\n\t@State() totalItems = 0;\n\t@Prop() name = \"\";\n\t@Prop() maxVisibleItems = 6;\n\t@Prop() type: string = \"checkbox\"; //default value\n\t@Prop({ mutable: true }) resetTrigger: boolean;\n\t@State() internalResetTrigger: boolean = false;\n\n\t@Event() ifxListUpdate: EventEmitter;\n\n\tobserver: MutationObserver;\n\n\t@Watch(\"type\")\n\thandleTypeChange(newType: string) {\n\t\tthis.updateListEntriesType(newType);\n\t}\n\n\t@Watch(\"resetTrigger\")\n\tresetTriggerChanged(newValue: boolean) {\n\t\tif (newValue) {\n\t\t\tthis.reset();\n\t\t\tthis.resetTrigger = false; // Resetting the trigger after the action is performed\n\t\t}\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.setupListenersAndObservers();\n\t\tthis.initializeList();\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.cleanupListenersAndObservers();\n\t}\n\n\treset() {\n\t\tthis.resetListEntries();\n\t\tthis.expanded = false;\n\t\tthis.showMore = false;\n\t\tthis.selectedCount = 0;\n\t\tthis.ifxListUpdate.emit({ name: this.name, selectedItems: [] });\n\t}\n\n\trender() {\n\t\treturn this.renderList();\n\t}\n\n\t// Refactored methods for clarity and maintainability\n\tprivate setupListenersAndObservers() {\n\t\tthis.el.addEventListener(\"ifxListEntryChange\", this.handleCheckedChange);\n\t\tthis.observer = new MutationObserver(this.handleMutation);\n\t\tthis.observer.observe(this.el, { childList: true });\n\t}\n\n\tprivate cleanupListenersAndObservers() {\n\t\tthis.el.removeEventListener(\"ifxListEntryChange\", this.handleCheckedChange);\n\t\tthis.observer.disconnect();\n\t}\n\n\tprivate initializeList() {\n\t\tthis.selectedCount = this.getSelectedItems(this.el).length;\n\t\tthis.totalItems = this.getTotalItems();\n\t\tthis.updateListEntriesType(this.type);\n\t\tthis.checkRadioButtonConstraint();\n\t}\n\n\tprivate updateListEntriesType(newType: string) {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tlistEntries.forEach((entry) => entry.setAttribute(\"type\", newType));\n\t}\n\n\tprivate resetListEntries() {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tlistEntries.forEach((entry) => {\n\t\t\tentry.value = false;\n\t\t\tentry.setAttribute(\"value\", \"false\");\n\t\t});\n\t}\n\n\tprivate handleMutation = () => {\n\t\tconst newTotalItems = this.getTotalItems();\n\t\tif (newTotalItems !== this.totalItems) {\n\t\t\tthis.totalItems = newTotalItems;\n\t\t\tthis.handleCheckedChange();\n\t\t}\n\t\tthis.updateListEntriesType(this.type);\n\t};\n\n\tprivate checkRadioButtonConstraint() {\n\t\tif (this.type === \"radio-button\" && this.selectedCount > 1) {\n\t\t\tthis.resetListEntries(); // Reset all and let the user select again\n\t\t\tthis.selectedCount = 0;\n\t\t}\n\t}\n\n\tgetTotalItems() {\n\t\treturn this.el.querySelectorAll(\"ifx-list-entry\").length;\n\t}\n\n\ttoggleList = (event: MouseEvent) => {\n\t\tevent.stopPropagation();\n\t\tthis.expanded = !this.expanded;\n\t};\n\n\ttoggleShowMore = (event: MouseEvent) => {\n\t\tevent.stopPropagation();\n\t\tthis.showMore = !this.showMore;\n\t};\n\n\tgetSelectedItems(el: HTMLElement) {\n\t\treturn Array.from(el.querySelectorAll(\"ifx-list-entry\"))\n\t\t\t.filter((entry) => entry.getAttribute(\"value\") === \"true\")\n\t\t\t.map((entry) => ({\n\t\t\t\tlabel: entry.getAttribute(\"label\"),\n\t\t\t\tvalue: entry.getAttribute(\"value\"),\n\t\t\t\ttype: entry.getAttribute(\"type\"),\n\t\t\t\telement: entry,\n\t\t\t}));\n\t}\n\n\thandleCheckedChange = (event?: CustomEvent) => {\n\t\t// If the type of the changed entry is 'radio-button' and its value is true, deselect all other radio buttons\n\t\tif (event && event.detail.type === \"radio-button\" && event.detail.value) {\n\t\t\tconst otherRadioButtons = Array.from(\n\t\t\t\tthis.el.querySelectorAll(\"ifx-list-entry\"),\n\t\t\t).filter(\n\t\t\t\t(entry) =>\n\t\t\t\t\tentry.getAttribute(\"type\") === \"radio-button\" &&\n\t\t\t\t\tentry !== event.target,\n\t\t\t);\n\t\t\totherRadioButtons.forEach((radioButton) =>\n\t\t\t\tradioButton.setAttribute(\"value\", \"false\"),\n\t\t\t);\n\t\t}\n\n\t\tconst selectedItems = this.getSelectedItems(this.el);\n\t\tthis.selectedCount = selectedItems.length;\n\n\t\tthis.ifxListUpdate.emit({ name: this.name, selectedItems });\n\t};\n\n\tprivate renderList() {\n\t\tconst listEntries = Array.from(this.el.querySelectorAll(\"ifx-list-entry\"));\n\t\tconst visibleItems = this.showMore\n\t\t\t? listEntries\n\t\t\t: listEntries.slice(0, this.maxVisibleItems);\n\t\tconst remainingItems = listEntries.length - visibleItems.length;\n\n\t\treturn (\n\t\t\t<div class=\"list-wrapper\">\n\t\t\t\t{visibleItems.map((entry) => (\n\t\t\t\t\t<slot name={entry.getAttribute(\"slot\")}></slot>\n\t\t\t\t))}\n\t\t\t\t{(remainingItems > 0 || this.showMore) && (\n\t\t\t\t\t<div class=\"link-wrapper\" onClick={this.toggleShowMore}>\n\t\t\t\t\t\t<ifx-icon\n\t\t\t\t\t\t\tkey={this.showMore.toString()}\n\t\t\t\t\t\t\ticon={this.showMore ? \"chevron-up-16\" : \"chevron-down-16\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ifx-link\n\t\t\t\t\t\t\tsize=\"s\"\n\t\t\t\t\t\t\thref=\"\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\tvariant=\"underlined\"\n\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.showMore ? \"Show less\" : `Show ${remainingItems} more`}\n\t\t\t\t\t\t</ifx-link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}