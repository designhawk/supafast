{"version":3,"file":"p-DNHOWgWh.js","sources":["src/shared/utils/dom-ready.ts","src/shared/utils/framework-detection.ts","src/shared/utils/tracking.ts"],"sourcesContent":["export const waitForDOMReady = (): Promise<void> => {\n\treturn new Promise((resolve) => {\n\t\tif (\n\t\t\tdocument.readyState === \"complete\" ||\n\t\t\tdocument.readyState === \"interactive\"\n\t\t) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tconst onReady = () => {\n\t\t\t\tresolve();\n\t\t\t\tdocument.removeEventListener(\"DOMContentLoaded\", onReady);\n\t\t\t};\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", onReady);\n\t\t}\n\t});\n};\n","let frameworkCache: string | null = null;\n\nimport { waitForDOMReady } from \"./dom-ready\";\n\nexport const detectFramework = async (): Promise<string> => {\n\tif (frameworkCache) return frameworkCache;\n\n\tif (typeof window === \"undefined\" || typeof document === \"undefined\") {\n\t\tframeworkCache = \"non-browser\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst win = window as any;\n\tconst doc = document;\n\n\tconst isJest =\n\t\ttypeof process !== \"undefined\" &&\n\t\tprocess.env &&\n\t\tprocess.env.NODE_ENV === \"test\";\n\tif (isJest) {\n\t\tframeworkCache = \"jest\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst isStorybook =\n\t\twin.location.search.includes(\"viewMode\") ||\n\t\twin.location.href.includes(\"viewMode\") ||\n\t\twin.__STORYBOOK_ENV__;\n\n\tif (isStorybook) {\n\t\tframeworkCache = \"Storybook\";\n\t\treturn frameworkCache;\n\t}\n\n\tconst isLocalhost = [\"localhost\", \"127.0.0.1\"].includes(\n\t\twin.location.hostname,\n\t);\n\tif (isLocalhost) {\n\t\tframeworkCache = \"localhost\";\n\t\treturn frameworkCache;\n\t}\n\n\ttry {\n\t\tif (win.React || win.ReactDOM) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (win.ng || win.getAllAngularRootElements) {\n\t\t\tframeworkCache = \"Angular\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (win.Vue || win.__VUE__) {\n\t\t\tframeworkCache = \"Vue\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tawait waitForDOMReady();\n\n\t\tconst reactRoot = doc.querySelector(\"[data-reactroot], [data-reactid]\");\n\t\tif (reactRoot) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tconst rootContainers = Array.from(doc.querySelectorAll(\"body > div\"));\n\t\tconst hasReactRoot = rootContainers.some((container) => {\n\t\t\tconst keys = Object.keys(container);\n\t\t\treturn keys.some((key) => key.startsWith(\"__reactContainer\"));\n\t\t});\n\n\t\tif (hasReactRoot) {\n\t\t\tframeworkCache = \"React\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (doc.querySelector(\"[ng-version], [ng-app]\")) {\n\t\t\tframeworkCache = \"Angular\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tif (doc.querySelector(\"[data-v-app]\")) {\n\t\t\tframeworkCache = \"Vue\";\n\t\t\treturn frameworkCache;\n\t\t}\n\n\t\tframeworkCache = \"Vanilla\";\n\t\treturn frameworkCache;\n\t} catch (e) {\n\t\tframeworkCache = \"error\";\n\t\treturn frameworkCache;\n\t}\n};\n","declare global {\n\tinterface Window {\n\t\tbtntConfig?: any;\n\t\tbtntQueue?: any[];\n\t\tbtnt?: (data: object) => void;\n\t\tINFINEON_TRACKED_COMPONENTS?: Set<string>;\n\t}\n}\n\nconst isTestEnvironment =\n\ttypeof process !== \"undefined\" &&\n\tprocess.env &&\n\tprocess.env.NODE_ENV === \"test\";\n\nfunction initializeTracking() {\n\tif (isTestEnvironment) {\n\t\tif (!window.btnt) {\n\t\t\twindow.btnt = () => {};\n\t\t}\n\t\treturn;\n\t}\n\n\t((t, r, _kk, n, pp) => {\n\t\tif (typeof window.btntConfig !== \"object\") {\n\t\t\twindow.btntConfig = {\n\t\t\t\tdomain: \"https://ssgtm.infineon.com\",\n\t\t\t\twithCookies: true,\n\t\t\t\tmaxBatchSize: 10,\n\t\t\t};\n\t\t}\n\n\t\tif (window[\"btnt\"]) return;\n\n\t\twindow[\"btnt\"] = (z) => {\n\t\t\tif (typeof z !== \"object\") {\n\t\t\t\tz = {};\n\t\t\t}\n\t\t\tif (typeof window.btntQueue !== \"object\") {\n\t\t\t\twindow.btntQueue = [];\n\t\t\t}\n\t\t\twindow.btntQueue.push(z);\n\t\t};\n\n\t\tn = t.createElement(r);\n\n\t\t// Add safety check for test environments\n\t\tpp = t.getElementsByTagName(r)[0];\n\t\tif (pp && pp.parentNode) {\n\t\t\tn.async = 1;\n\t\t\tn.src = window.btntConfig.domain + \"/btnt.js\";\n\t\t\tpp.parentNode.insertBefore(n, pp);\n\t\t}\n\t})(document, \"script\");\n}\n\nexport function trackComponent(componentName: string, environment: string) {\n\tconst skipEnvironments = [\"jest\", \"localhost\", \"error\"];\n\tif (skipEnvironments.includes(environment)) {\n\t\treturn;\n\t}\n\n\tif (!window.INFINEON_TRACKED_COMPONENTS) {\n\t\twindow.INFINEON_TRACKED_COMPONENTS = new Set();\n\t}\n\n\tif (window.INFINEON_TRACKED_COMPONENTS.has(componentName)) {\n\t\treturn;\n\t}\n\n\twindow.INFINEON_TRACKED_COMPONENTS.add(componentName);\n\n\tif (!window.btnt) initializeTracking();\n\n\twindow.btnt({\n\t\tevent_name: \"component_initialized\",\n\t\tcomponent_name: componentName,\n\t\tenvironment: environment,\n\t});\n}\n\nexport default trackComponent;\n"],"names":[],"mappings":"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"}