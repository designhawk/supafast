{"version":3,"names":["CustomLoadingOverlay","eGui","init","_params","this","document","createElement","innerHTML","getGui","refresh","CustomNoRowsOverlay","params","noRowsMessageFunc","tableCss","Table","gridOptions","cols","rows","columnDefs","rowData","rowHeight","tableHeight","variant","uniqueKey","container","gridApi","gridInitialized","componentWillLoad","ModuleRegistry","registerModules","AllCommunityModule","provideGlobalGridOptions","theme","Math","floor","random","setColsAndRows","setGridOptions","headerHeight","defaultColDef","resizable","autoHeight","suppressCellFocus","enableCellTextSelection","suppressDragLeaveHidesColumns","suppressRowHoverHighlight","onFirstDataRendered","loadingOverlayComponent","noRowsOverlayComponent","noRowsOverlayComponentParams","Date","toLocaleTimeString","icons","sortAscending","sortDescending","sortUnSort","rowDragManaged","some","col","dndSource","animateRows","JSON","parse","err","console","error","Array","isArray","getRowData","getColData","api","sizeColumnsToFit","componentWillUpdate","setGridOption","componentDidLoad","isNestedInIfxComponent","host","framework","detectFramework","trackComponent","createGrid","defaultMinWidth","getClassNames","classNames","getTableStyle","height","render","h","Host","key","id","class","style","ref","el"],"sources":["src/components/table-basic-version/customLoadingOverlay.ts","src/components/table-basic-version/customNoRowsOverlay.ts","src/components/table-basic-version/table.scss?tag=ifx-basic-table","src/components/table-basic-version/table.tsx"],"sourcesContent":["import type { ICellRendererComp, ICellRendererParams } from \"ag-grid-community\";\n\nexport class CustomLoadingOverlay implements ICellRendererComp {\n\teGui!: HTMLElement;\n\n\tinit(_params: ICellRendererParams & { loadingMessage: string }) {\n\t\tthis.eGui = document.createElement(\"div\");\n\t\tthis.eGui.innerHTML = `<div class=\"ag-overlay-loading-center\" role=\"presentation\">\n<ifx-spinner></ifx-spinner>\n            </div>`;\n\t}\n\n\tgetGui() {\n\t\treturn this.eGui;\n\t}\n\n\trefresh(_params: ICellRendererParams): boolean {\n\t\treturn false;\n\t}\n}\n","import type { ICellRendererComp, ICellRendererParams } from \"ag-grid-community\";\n\nexport class CustomNoRowsOverlay implements ICellRendererComp {\n\teGui!: HTMLElement;\n\n\tinit(params: ICellRendererParams & { noRowsMessageFunc: () => string }) {\n\t\tthis.eGui = document.createElement(\"div\");\n\t\tthis.eGui.innerHTML = `\n            <div role=\"presentation\" class=\"ag-overlay-loading-center\" >\n               ${params.noRowsMessageFunc()}\n            </div>\n        `;\n\t}\n\n\tgetGui() {\n\t\treturn this.eGui;\n\t}\n\n\trefresh(_params: ICellRendererParams): boolean {\n\t\treturn false;\n\t}\n}\n","@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n@import \"~ag-grid-community/styles/ag-grid.css\";\n// @import \"~ag-grid-community/styles/ag-theme-alpine.css\";\n\n// :host {\n//   --table-height: '200px';\n//   /* Default value */\n// } ag-ltr .ag-header-cell-resize\n\n.zebra {\n  & .ag-row-odd {\n    background-color: tokens.$ifxColorEngineering100!important;\n  }\n\n  & .ag-row {\n    border-bottom: none!important;\n  }\n}\n\n.ag-header-viewport {\n  background-color: tokens.$ifxColorEngineering200!important;\n}\n\n.table-wrapper {\n  overflow-x: auto;\n  width: 100%;\n}\n\n.table-wrapper .ag-root-wrapper-body {\n  height: auto !important;\n  min-height: 100px !important;\n  min-width: 100px;\n}\n\n.ifx-ag-grid {\n  display: grid;\n  height: 100%;\n  width: 100%;\n  min-width: 100px;\n  padding-bottom: tokens.$ifxSpace100;\n  overflow-x: auto;\n}\n\n\n.ifx-ag-grid .ag-header-cell::after {\n  outline: none !important;\n  border: none !important;\n  box-shadow: none !important;\n}\n\n.ifx-ag-grid .ag-header-cell:focus {\n  outline: none !important;\n}\n\n.ifx-ag-grid *:not(.ag-header-cell):focus {\n  outline: none;\n}\n\n.ifx-ag-grid .ag-header-cell:not(:last-child)::before {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: calc(50% - 12px);\n  height: 24px;\n  width: 1px;\n  background-color: tokens.$ifxColorEngineering300;\n}\n\n.ag-overlay-loading-center {\n  border: none;\n  background: none;\n  border-radius: none;\n  box-shadow: none;\n}\n\n\n.ag-root-wrapper {\n  border: 1px solid tokens.$ifxColorEngineering200;\n}\n\n.ag-header {\n  background-color: tokens.$ifxColorEngineering100;\n  border-bottom: none;\n\n  &.ag-header-active {\n    outline: none !important;\n    border-color: #0A8276 !important;\n  }\n}\n\n.ag-header-cell {\n  padding-left: 16px;\n  padding-right: 16px;\n  gap: 4px;\n}\n\n\n.ag-header-cell-focus {\n  border: none !important;\n  outline: none !important;\n}\n\n.ag-header-cell-text {\n  font-size: 13px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 20px;\n  color: tokens.$ifxColorBaseBlack;\n  font-family: var(--ifx-font-family); // tokens.$ifxFontFamilyBody;\n\n\n\n}\n\n.ag-row-focus {\n  background-color: inherit !important;\n  /* Reset the hover color to the row's original color */\n}\n\n.ag-row-hover {\n  background-color: tokens.$ifxColorBaseWhite !important; //inherit !important;\n  /* Reset the hover color to the row's original color */\n}\n\n\n.ag-cell-focus {\n  border: none !important;\n  outline: none !important;\n  background-color: inherit !important;\n}\n\n\n\n.ag-row {\n  background-color: tokens.$ifxColorBaseWhite;\n  border-bottom: 1px solid tokens.$ifxColorEngineering200;\n  font-size: 13px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n  z-index: 1; //ensure the stacking order when used inside js frameworks\n}\n\n.ag-row-odd {\n  background-color: tokens.$ifxColorBaseWhite;\n}\n\n.ag-cell {\n  display: flex;\n  padding-left: 16px;\n  padding-right: 16px;\n  white-space: pre-line;\n  min-height: 40px; \n  height: auto;\n}\n\n.ag-ltr .ag-sort-indicator-icon {\n  padding-left: 0px;\n  vertical-align: bottom;\n  line-height: 12px;\n}\n\n.unsort-icon-custom-color {\n  color: tokens.$ifxColorEngineering400;\n}\n\n// Mobile optimization for horizontal scrolling\n@media (max-width: tokens.$ifxBreakpointM) {\n  .table-wrapper {\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .ifx-ag-grid {\n    min-width: 400px;\n  }\n\n  .ag-root-wrapper {\n    min-width: 100%;\n  }\n\n  .ag-header-cell,\n  .ag-cell {\n    min-width: 100px;\n    white-space: nowrap;\n  }\n\n  .table-wrapper {\n    margin-bottom: tokens.$ifxSpace200;\n  }\n}\n","import { Component, Element, Host, h, Prop, State } from \"@stencil/core\";\nimport {\n\tAllCommunityModule,\n\tcreateGrid,\n\ttype FirstDataRenderedEvent,\n\ttype GridApi,\n\ttype GridOptions,\n\tModuleRegistry,\n\tprovideGlobalGridOptions,\n} from \"ag-grid-community\";\nimport classNames from \"classnames\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\nimport { CustomLoadingOverlay } from \"./customLoadingOverlay\";\nimport { CustomNoRowsOverlay } from \"./customNoRowsOverlay\";\n\n@Component({\n\ttag: \"ifx-basic-table\",\n\tstyleUrl: \"table.scss\",\n\tshadow: false, // only works with shadowdom off because we are using an external library\n})\nexport class Table {\n\t@State() gridOptions: GridOptions;\n\t@Prop() cols: any[] | string;\n\t@Prop() rows: any[] | string;\n\t@State() columnDefs: any[] = [];\n\t@State() rowData: any[] = [];\n\t@Prop() rowHeight: string = \"default\";\n\t@Prop() tableHeight: string = \"auto\";\n\t@Prop() variant: string = \"default\";\n\t@State() uniqueKey: string;\n\t@Element() host: HTMLElement;\n\n\tprivate container: HTMLDivElement;\n\tprivate gridApi: GridApi;\n\tprivate gridInitialized = false;\n\n\tcomponentWillLoad() {\n\t\tModuleRegistry.registerModules([AllCommunityModule]);\n\t\tprovideGlobalGridOptions({ theme: \"legacy\" });\n\n\t\tthis.uniqueKey = `unique-${Math.floor(Math.random() * 1000000)}`;\n\t\tthis.setColsAndRows(); //needed?\n\t\tthis.setGridOptions();\n\t}\n\n\tsetGridOptions() {\n\t\tthis.gridOptions = {\n\t\t\trowHeight: this.rowHeight === \"default\" ? 40 : 32,\n\t\t\theaderHeight: 40,\n\t\t\tdefaultColDef: {\n\t\t\t\tresizable: true,\n\t\t\t\tautoHeight: true,\n\t\t\t},\n\t\t\tsuppressCellFocus: false,\n\t\t\tenableCellTextSelection: true,\n\t\t\tsuppressDragLeaveHidesColumns: true,\n\t\t\tsuppressRowHoverHighlight: true,\n\t\t\tonFirstDataRendered: this.onFirstDataRendered,\n\t\t\tcolumnDefs: this.columnDefs,\n\t\t\trowData: this.rowData,\n\t\t\tloadingOverlayComponent: CustomLoadingOverlay,\n\t\t\tnoRowsOverlayComponent: CustomNoRowsOverlay,\n\t\t\tnoRowsOverlayComponentParams: {\n\t\t\t\tnoRowsMessageFunc: () =>\n\t\t\t\t\t\"No rows found at: \" + new Date().toLocaleTimeString(),\n\t\t\t},\n\t\t\ticons: {\n\t\t\t\tsortAscending: '<ifx-icon icon=\"arrow-triangle-up-16\"></ifx-icon>',\n\t\t\t\tsortDescending: '<ifx-icon icon=\"arrow-triangle-down-16\"></ifx-icon>',\n\t\t\t\tsortUnSort:\n\t\t\t\t\t'<a class=\"unsort-icon-custom-color\"><ifx-icon icon=\"arrow-triangle-vertikal-16\"></ifx-icon></a>',\n\t\t\t},\n\t\t\trowDragManaged: this.columnDefs.some((col) => col.dndSource === true)\n\t\t\t\t? true\n\t\t\t\t: false,\n\t\t\tanimateRows: this.columnDefs.some((col) => col.dndSource === true)\n\t\t\t\t? true\n\t\t\t\t: false,\n\t\t};\n\t}\n\n\tsetColsAndRows() {\n\t\tif (typeof this.rows === \"string\" && typeof this.cols === \"string\") {\n\t\t\ttry {\n\t\t\t\tif (this.cols) {\n\t\t\t\t\tthis.columnDefs = JSON.parse(this.cols);\n\t\t\t\t}\n\t\t\t\tif (this.rows) {\n\t\t\t\t\tthis.rowData = JSON.parse(this.rows);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"Failed to parse input:\", err);\n\t\t\t}\n\t\t} else if (\n\t\t\t(Array.isArray(this.rows) || typeof this.rows === \"object\") &&\n\t\t\t(Array.isArray(this.cols) || typeof this.cols === \"object\")\n\t\t) {\n\t\t\tthis.columnDefs = this.cols;\n\t\t\tthis.rowData = this.rows;\n\t\t} else {\n\t\t\tconsole.error(\n\t\t\t\t\"Unexpected value for cols and rows:\",\n\t\t\t\tthis.rows,\n\t\t\t\tthis.cols,\n\t\t\t);\n\t\t}\n\t}\n\n\tgetRowData() {\n\t\tlet rows: any[] = [];\n\t\tif (typeof this.rows === \"string\") {\n\t\t\ttry {\n\t\t\t\tif (this.rows) {\n\t\t\t\t\trows = JSON.parse(this.rows);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"Failed to parse input:\", err);\n\t\t\t}\n\t\t} else if (Array.isArray(this.rows) || typeof this.rows === \"object\") {\n\t\t\trows = this.rows;\n\t\t} else {\n\t\t\tconsole.error(\"Unexpected value for rows: \", this.rows);\n\t\t}\n\n\t\treturn rows;\n\t}\n\n\tgetColData() {\n\t\tlet cols: any[] = [];\n\n\t\tif (typeof this.cols === \"string\") {\n\t\t\ttry {\n\t\t\t\tif (this.cols) {\n\t\t\t\t\tcols = JSON.parse(this.cols);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"Failed to parse input:\", err);\n\t\t\t}\n\t\t} else if (Array.isArray(this.cols) || typeof this.cols === \"object\") {\n\t\t\tcols = this.cols;\n\t\t} else {\n\t\t\tconsole.error(\"Unexpected value for cols: \", this.cols);\n\t\t}\n\t\treturn cols;\n\t}\n\n\tonFirstDataRendered(params: FirstDataRenderedEvent) {\n\t\tparams.api.sizeColumnsToFit();\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.setColsAndRows();\n\t\tthis.gridOptions.columnDefs = this.columnDefs;\n\t\tthis.gridOptions.rowData = this.rowData;\n\t\tif (this.gridApi) {\n\t\t\tthis.gridApi.setGridOption(\"rowData\", this.rowData);\n\t\t\tthis.gridApi.setGridOption(\"columnDefs\", this.columnDefs);\n\t\t}\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (this.container && !this.gridInitialized) {\n\t\t\tif (!isNestedInIfxComponent(this.host)) {\n\t\t\t\tconst framework = detectFramework();\n\t\t\t\ttrackComponent(\"ifx-basic-table\", await framework);\n\t\t\t}\n\t\t\tthis.gridApi = createGrid(this.container, this.gridOptions);\n\t\t\tif (this.gridApi) {\n\t\t\t\tthis.gridApi.sizeColumnsToFit({\n\t\t\t\t\tdefaultMinWidth: 100,\n\t\t\t\t});\n\t\t\t\tthis.gridApi.setGridOption(\"columnDefs\", this.getColData());\n\t\t\t\tthis.gridApi.setGridOption(\"rowData\", this.getRowData());\n\t\t\t\tthis.gridInitialized = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetClassNames() {\n\t\treturn classNames(\n\t\t\tthis.tableHeight === \"auto\" && \"table-wrapper ag-root-wrapper-body\",\n\t\t\t\"table-wrapper\",\n\t\t);\n\t}\n\n\tgetTableStyle() {\n\t\tif (this.tableHeight !== \"auto\") {\n\t\t\treturn {\n\t\t\t\theight: this.tableHeight,\n\t\t\t};\n\t\t}\n\t\treturn {};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div id=\"table-wrapper\" class={this.getClassNames()}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid={`ifxTable-${this.uniqueKey}`}\n\t\t\t\t\t\tclass={`ifx-ag-grid ${this.variant === \"zebra\" ? \"zebra\" : \"\"}`}\n\t\t\t\t\t\tstyle={this.getTableStyle()}\n\t\t\t\t\t\tref={(el) => (this.container = el)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}