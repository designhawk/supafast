{"version":3,"names":["animationTo","element","keyframes","options","animated","animate","fill","addEventListener","commitStyles","cancel","keyframeDefaults","easing","KEYFRAMES","fadeIn","offset","opacity","fadeOut","queryShadowRoot","root","skipNode","isMatch","maxDepth","depth","matches","traverseSlot","$slot","assignedNodes","filter","node","nodeType","length","$slotParent","parentElement","children","Array","from","$child","push","shadowRoot","tagName","isHidden","$elem","hasAttribute","getAttribute","style","display","visibility","isDisabled","isFocusable","HTMLAnchorElement","HTMLAreaElement","HTMLButtonElement","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","HTMLIFrameElement","modalCss","IfxModal","opened","showModal","this","caption","captionAriaLabel","closeOnOverlayClick","ifxOpen","ifxClose","variant","size","alertIcon","okButtonLabel","cancelButtonLabel","closeButtonAriaLabel","slotButtonsPresent","showCloseButton","modalContainer","focusableElements","closeButton","resizeTimeout","handleResize","clearTimeout","setTimeout","handleComponentOverflow","componentDidLoad","isNestedInIfxComponent","hostElement","framework","detectFramework","trackComponent","el","window","disconnectedCallback","removeEventListener","componentWillRender","modalContentContainer","querySelector","isModalContentContainerHeightReachedViewport","classList","add","contains","remove","getFirstFocusableElement","getLastFocusableElement","handleTopFocus","attemptFocus","handleBottomFocus","focus","open","anim","duration","blur","emit","handleKeypress","err","close","event","key","doBeforeClose","trigger","triggers","prevented","some","defaultPrevented","openedChanged","newValue","handleOverlayClick","handleContentUpdate","e","slotElement","target","nodes","forEach","observer","disconnect","MutationObserver","mutationsList","_","mutation","type","observe","attributes","childList","subtree","handleButtonsSlotChange","currentTarget","assignedElements","childElementCount","Promise","resolve","modalContent","modalContentHeight","offsetHeight","viewportHeight","innerHeight","extraMarginForEdgeBrowser","render","isAlertVariant","h","Host","ref","class","onClick","onFocus","tabindex","role","icon","name","onSlotchange"],"sources":["src/shared/utils/animation.ts","src/shared/utils/focus-trap.ts","src/components/modal/modal.scss?tag=ifx-modal&encapsulation=shadow","src/components/modal/modal.tsx"],"sourcesContent":["export function animationTo(\n\telement: HTMLElement,\n\tkeyframes: Keyframe | Keyframe[],\n\toptions?: KeyframeAnimationOptions,\n) {\n\tconst animated = element.animate(keyframes, { ...options, fill: \"both\" });\n\tanimated.addEventListener(\"finish\", () => {\n\t\tanimated.commitStyles();\n\t\tanimated.cancel();\n\t});\n\n\treturn animated;\n}\n\nconst keyframeDefaults = {\n\teasing: \"cubic-bezier(0.390, 0.575, 0.565, 1.000)\",\n};\n\nexport const KEYFRAMES = {\n\tfadeIn: [\n\t\t{\n\t\t\toffset: 0,\n\t\t\t...keyframeDefaults,\n\t\t\topacity: 0,\n\t\t},\n\t\t{\n\t\t\toffset: 1,\n\t\t\t...keyframeDefaults,\n\t\t\topacity: 1,\n\t\t},\n\t],\n\tfadeOut: [\n\t\t{\n\t\t\toffset: 0,\n\t\t\t...keyframeDefaults,\n\t\t\topacity: 1,\n\t\t},\n\t\t{\n\t\t\toffset: 1,\n\t\t\t...keyframeDefaults,\n\t\t\topacity: 0,\n\t\t},\n\t],\n};\n","/**\n * Copy/pasted from https://github.com/andreasbm/focus-trap\n */\n\n/**\n * Traverses the slots of the open shadowroots and returns all children matching the query.\n * We need to traverse each child-depth one at a time because if an element should be skipped\n * (for example because it is hidden) we need to skip all of it's children. If we use querySelectorAll(\"*\")\n * the information of whether the children is within a hidden parent is lost.\n * @param {ShadowRoot | HTMLElement} root\n * @param skipNode\n * @param isMatch\n * @param {number} maxDepth\n * @param {number} depth\n * @returns {HTMLElement[]}\n */\nexport function queryShadowRoot(\n\troot: ShadowRoot | HTMLElement,\n\tskipNode: ($elem: HTMLElement) => boolean,\n\tisMatch: ($elem: HTMLElement) => boolean,\n\tmaxDepth: number = 20,\n\tdepth: number = 0,\n): HTMLElement[] {\n\tconst matches: HTMLElement[] = [];\n\n\t// If the depth is above the max depth, abort the searching here.\n\tif (depth >= maxDepth) {\n\t\treturn matches;\n\t}\n\n\t// Traverses a slot element\n\tconst traverseSlot = ($slot: HTMLSlotElement) => {\n\t\t// Only check nodes that are of the type Node.ELEMENT_NODE\n\t\t// Read more here https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n\t\tconst assignedNodes = $slot\n\t\t\t.assignedNodes()\n\t\t\t.filter((node) => node.nodeType === 1);\n\t\tif (assignedNodes.length > 0) {\n\t\t\tconst $slotParent = assignedNodes[0].parentElement!;\n\t\t\treturn queryShadowRoot(\n\t\t\t\t$slotParent,\n\t\t\t\tskipNode,\n\t\t\t\tisMatch,\n\t\t\t\tmaxDepth,\n\t\t\t\tdepth + 1,\n\t\t\t);\n\t\t}\n\n\t\treturn [];\n\t};\n\n\t// Go through each child and continue the traversing if necessary\n\t// Even though the typing says that children can't be undefined, Edge 15 sometimes gives an undefined value.\n\t// Therefore we fallback to an empty array if it is undefined.\n\tconst children = Array.from(root.children || []) as HTMLElement[];\n\tfor (const $child of children) {\n\t\t// Check if the element and its descendants should be skipped\n\t\tif (skipNode($child)) {\n\t\t\t// console.log('-- SKIP', $child);\n\t\t\tcontinue;\n\t\t}\n\n\t\t// console.log('$child', $child);\n\n\t\t// If the element matches we always add it\n\t\tif (isMatch($child)) {\n\t\t\tmatches.push($child);\n\t\t}\n\n\t\tif ($child.shadowRoot != null) {\n\t\t\t// If the element has a shadow root we need to traverse it\n\t\t\tmatches.push(\n\t\t\t\t...queryShadowRoot(\n\t\t\t\t\t$child.shadowRoot,\n\t\t\t\t\tskipNode,\n\t\t\t\t\tisMatch,\n\t\t\t\t\tmaxDepth,\n\t\t\t\t\tdepth + 1,\n\t\t\t\t),\n\t\t\t);\n\t\t} else if ($child.tagName === \"SLOT\") {\n\t\t\t// If the child is a slot we need to traverse each assigned node\n\t\t\tmatches.push(...traverseSlot($child as HTMLSlotElement));\n\t\t} else {\n\t\t\t// Traverse the children of the element\n\t\t\tmatches.push(\n\t\t\t\t...queryShadowRoot($child, skipNode, isMatch, maxDepth, depth + 1),\n\t\t\t);\n\t\t}\n\t}\n\n\treturn matches;\n}\n\n/**\n * Returns whether the element is hidden.\n * @param $elem\n */\nexport function isHidden($elem: HTMLElement): boolean {\n\treturn (\n\t\t$elem.hasAttribute(\"hidden\") ||\n\t\t($elem.hasAttribute(\"aria-hidden\") &&\n\t\t\t$elem.getAttribute(\"aria-hidden\") !== \"false\") ||\n\t\t// A quick and dirty way to check whether the element is hidden.\n\t\t// For a more fine-grained check we could use \"window.getComputedStyle\" but we don't because of bad performance.\n\t\t// If the element has visibility set to \"hidden\" or \"collapse\", display set to \"none\" or opacity set to \"0\" through CSS\n\t\t// we won't be able to catch it here. We accept it due to the huge performance benefits.\n\t\t$elem.style.display === `none` ||\n\t\t$elem.style.opacity === `0` ||\n\t\t$elem.style.visibility === `hidden` ||\n\t\t$elem.style.visibility === `collapse`\n\t);\n\n\t// If offsetParent is null we can assume that the element is hidden\n\t// https://stackoverflow.com/questions/306305/what-would-make-offsetparent-null\n\t// || $elem.offsetParent == null;\n}\n\n/**\n * Returns whether the element is disabled.\n * @param $elem\n */\nexport function isDisabled($elem: HTMLElement): boolean {\n\treturn (\n\t\t$elem.hasAttribute(\"disabled\") ||\n\t\t($elem.hasAttribute(\"aria-disabled\") &&\n\t\t\t$elem.getAttribute(\"aria-disabled\") !== \"false\")\n\t);\n}\n\n/**\n * Determines whether an element is focusable.\n * Read more here: https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus/1600194#1600194\n * Or here: https://stackoverflow.com/questions/18261595/how-to-check-if-a-dom-element-is-focusable\n * @param $elem\n */\nexport function isFocusable($elem: HTMLElement): boolean {\n\t// Discard elements that are removed from the tab order.\n\tif (\n\t\t$elem.getAttribute(\"tabindex\") === \"-1\" ||\n\t\tisHidden($elem) ||\n\t\tisDisabled($elem)\n\t) {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\t// At this point we know that the element can have focus (eg. won't be -1) if the tabindex attribute exists\n\t\t$elem.hasAttribute(\"tabindex\") ||\n\t\t// Anchor tags or area tags with a href set\n\t\t(($elem instanceof HTMLAnchorElement || $elem instanceof HTMLAreaElement) &&\n\t\t\t$elem.hasAttribute(\"href\")) ||\n\t\t// Form elements which are not disabled\n\t\t$elem instanceof HTMLButtonElement ||\n\t\t$elem instanceof HTMLInputElement ||\n\t\t$elem instanceof HTMLTextAreaElement ||\n\t\t$elem instanceof HTMLSelectElement ||\n\t\t// IFrames\n\t\t$elem instanceof HTMLIFrameElement\n\t);\n}\n","@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n:host {\n  display: block;\n}\n\n.modal-container {\n  display: none;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1060;\n  overflow-y: auto;\n  font-family: var(--ifx-font-family); // tokens.$ifxFontFamilyBody;\n\n\n\n}\n\n.modal-container.open {\n  display: flex;\n}\n\n.modal-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: tokens.$ifxColorBaseBlack;\n  opacity: 0.5;\n  z-index: 0;\n}\n\n.modal-content-container {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  width: 90%;\n  min-height: 218px;\n  background-color: #fff;\n  border-radius: tokens.$ifxBorderRadiusNone;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  //overflow: hidden;\n\n  box-sizing: border-box;\n  align-items: stretch;\n}\n\n.modal-content-container {\n  &.no-overflow { \n    overflow: hidden;\n    & .modal-body { \n      overflow-y: auto;\n    }\n  }\n}\n\n/* Add desktop size here */\n@media screen and (min-width: 768px) {\n  .modal-content-container {\n    width: 540px;\n    min-height: 132px;\n\n    &.m,\n    &.l,\n    &.s {\n      width: 90%;\n    }\n  }\n}\n\n@media screen and (min-width: 1024px) {\n  .modal-content-container {\n\n    &.s {\n      width: 47vw;\n    }\n\n    &.m {\n      width: 63vw;\n    }\n\n    &.l {\n      width: 80%;\n    }\n  }\n}\n\n.modal-content {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-height: 90vh;\n}\n\n.modal-icon-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  background-color: tokens.$ifxColorOcean500;\n  align-self: stretch;\n\n  &.danger {\n    background-color: tokens.$ifxColorRed500;\n  }\n\n  & ifx-icon {\n    color: tokens.$ifxColorBaseWhite;\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  min-height: 76px;\n  max-height: 105px;\n  box-sizing: border-box;\n  border-radius: 1px 1px 0px 0px;\n  border-bottom: 1px solid tokens.$ifxColorEngineering200;\n}\n\n.modal-caption {\n  max-height: 56px;\n  display: -webkit-box;\n  overflow: hidden;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical; \n}\n\n.modal-header h2 {\n  margin: 0;\n  font-weight: tokens.$ifxFontWeightSemibold;\n  font-size: tokens.$ifxFontSizeXl;\n  line-height: 28px;\n}\n\n.modal-header button {\n  background: none;\n  border: none;\n  font-size: 1.5em;\n  padding: 0;\n  cursor: pointer;\n}\n\n.modal-close-button {\n  align-self: flex-start;\n  margin-right: -8px;\n}\n\n.modal-body {\n  padding: 16px 24px;\n  min-height: 56px;\n  box-sizing: border-box;\n  flex: 1;\n  \n  //overflow-y: auto;\n}\n\n.modal-footer.buttons-present ::slotted(*){\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n  padding: 16px 24px 32px 16px\n}\n\n.modal-border {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  font-size: 1.5em;\n  flex-grow: 1;\n\n  &.primary {\n    background-color: tokens.$ifxColorOcean500;\n  }\n\n  &.secondary {\n    background-color: tokens.$ifxColorEngineering500;\n  }\n\n  &.danger {\n    background-color: tokens.$ifxColorRed500;\n  }\n\n  &.success {\n    background-color: tokens.$ifxColorGreen500;\n  }\n\n  &.warning {\n    background-color: tokens.$ifxColorOrange500;\n  }\n\n  &.orange {\n    background-color: tokens.$ifxColorOrange500;\n  }\n\n  &.ocean {\n    background-color: tokens.$ifxColorOcean500;\n  }\n\n  &.grey {\n    background-color: tokens.$ifxColorEngineering500;\n  }\n\n  &.grey-200 {\n    background-color: tokens.$ifxColorEngineering200;\n  }\n\n  &.red {\n    background-color: tokens.$ifxColorRed500;\n  }\n\n  &.green {\n    background-color: tokens.$ifxColorGreen500;\n  }\n\n  &.berry {\n    background-color: tokens.$ifxColorBerry500;\n  }\n}","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\nimport { animationTo, KEYFRAMES } from \"../..//shared/utils/animation\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport {\n\tisFocusable,\n\tisHidden,\n\tqueryShadowRoot,\n} from \"../..//shared/utils/focus-trap\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\n\ntype CloseEventTrigger = \"CLOSE_BUTTON\" | \"ESCAPE_KEY\" | \"BACKDROP\";\n\nexport interface BeforeCloseEventDetail {\n\ttrigger: CloseEventTrigger;\n}\n@Component({\n\ttag: \"ifx-modal\",\n\tstyleUrl: \"modal.scss\",\n\tshadow: true,\n})\nexport class IfxModal {\n\t@Prop({ reflect: true, mutable: true }) opened?: boolean = false;\n\t@State() showModal: boolean = this.opened || false;\n\n\t@Prop() caption: string = \"Modal Title\";\n\t@Prop() captionAriaLabel: string | null;\n\n\t@Prop() closeOnOverlayClick: boolean = true;\n\n\t@Event() ifxOpen: EventEmitter;\n\t@Event() ifxClose: EventEmitter;\n\n\t@Prop() variant: \"default\" | \"alert-brand\" | \"alert-danger\" = \"default\";\n\n\t@Prop() size: \"s\" | \"m\" | \"l\" = \"s\";\n\n\t@Prop() alertIcon: string = \"\";\n\t@Prop() okButtonLabel: string = \"OK\";\n\t@Prop() cancelButtonLabel: string = \"Cancel\";\n\t@Prop() closeButtonAriaLabel: string | null;\n\n\t@Element() hostElement: HTMLElement;\n\n\t@State() slotButtonsPresent: boolean = false;\n\n\t@Prop() showCloseButton: boolean = true;\n\n\tprivate modalContainer: HTMLElement;\n\tprivate focusableElements: HTMLElement[] = [];\n\tprivate closeButton: HTMLButtonElement | HTMLIfxIconButtonElement;\n\tprivate resizeTimeout: ReturnType<typeof setTimeout>;\n\n\thandleResize = () => {\n\t\tclearTimeout(this.resizeTimeout);\n\t\tthis.resizeTimeout = setTimeout(() => {\n\t\t\tif (this.showModal) {\n\t\t\t\tthis.handleComponentOverflow();\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.hostElement)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-modal\", await framework);\n\t\t}\n\t\t// Query all focusable elements and store them in `focusableElements`.\n\t\t// Needed for the \"focus trap\" functionality.\n\t\tthis.focusableElements = queryShadowRoot(\n\t\t\tthis.hostElement.shadowRoot,\n\t\t\t(el) => isHidden(el) || el.matches(\"[data-focus-trap-edge]\"),\n\t\t\tisFocusable,\n\t\t);\n\t\twindow.addEventListener(\"resize\", this.handleResize);\n\t}\n\n\tdisconnectedCallback() {\n\t\twindow.removeEventListener(\"resize\", this.handleResize);\n\t}\n\n\tcomponentWillRender() {\n\t\tif (this.showModal) {\n\t\t\tthis.handleComponentOverflow();\n\t\t}\n\t}\n\n\tasync handleComponentOverflow() {\n\t\tconst modalContentContainer = this.hostElement.shadowRoot.querySelector(\n\t\t\t\".modal-content-container\",\n\t\t);\n\t\tif (\n\t\t\tthis.showModal &&\n\t\t\t(await this.isModalContentContainerHeightReachedViewport())\n\t\t) {\n\t\t\tmodalContentContainer.classList.add(\"no-overflow\");\n\t\t} else if (modalContentContainer?.classList.contains(\"no-overflow\")) {\n\t\t\tmodalContentContainer?.classList.remove(\"no-overflow\");\n\t\t}\n\t}\n\n\tgetFirstFocusableElement(): HTMLElement | null {\n\t\treturn this.focusableElements[0];\n\t}\n\n\tgetLastFocusableElement(): HTMLElement | null {\n\t\treturn this.focusableElements[this.focusableElements.length - 1];\n\t}\n\n\thandleTopFocus = () => {\n\t\tthis.attemptFocus(this.getLastFocusableElement());\n\t};\n\n\thandleBottomFocus = () => {\n\t\tthis.attemptFocus(this.getFirstFocusableElement());\n\t};\n\n\tattemptFocus(element: HTMLElement | null) {\n\t\tif (element == null) {\n\t\t\tsetTimeout(() => {\n\t\t\t\t//wait until DOM is fully loaded\n\t\t\t\tthis.closeButton.focus();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\t//wait until DOM is fully loaded\n\t\t\telement.focus();\n\t\t}, 0);\n\t}\n\n\topen() {\n\t\tthis.showModal = true;\n\t\ttry {\n\t\t\tconst anim = animationTo(this.modalContainer, KEYFRAMES.fadeIn, {\n\t\t\t\tduration: 200,\n\t\t\t});\n\t\t\tanim.addEventListener(\"finish\", () => {\n\t\t\t\t// Setting focus on last item and removing immediately\n\t\t\t\t// so, on tab press first element is focused\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.getLastFocusableElement()?.focus();\n\t\t\t\t\tthis.getLastFocusableElement()?.blur();\n\t\t\t\t}, 0);\n\n\t\t\t\tthis.ifxOpen.emit();\n\t\t\t});\n\n\t\t\tthis.hostElement.addEventListener(\"keydown\", this.handleKeypress);\n\t\t} catch (err) {\n\t\t\tthis.ifxOpen.emit();\n\t\t}\n\t}\n\n\tclose() {\n\t\ttry {\n\t\t\tconst anim = animationTo(this.modalContainer, KEYFRAMES.fadeOut, {\n\t\t\t\tduration: 200,\n\t\t\t});\n\t\t\tanim.addEventListener(\"finish\", () => {\n\t\t\t\tthis.showModal = false;\n\t\t\t\tthis.ifxClose.emit();\n\t\t\t});\n\t\t\tthis.hostElement.removeEventListener(\"keydown\", this.handleKeypress);\n\t\t} catch (err) {\n\t\t\tthis.showModal = false;\n\t\t\tthis.ifxClose.emit();\n\t\t}\n\t}\n\n\thandleKeypress = (event: KeyboardEvent) => {\n\t\tif (!this.showModal) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.key === \"Escape\") {\n\t\t\tthis.doBeforeClose(\"ESCAPE_KEY\");\n\t\t}\n\t};\n\n\tdoBeforeClose(trigger: CloseEventTrigger) {\n\t\tconst triggers = [];\n\t\ttriggers.push(trigger);\n\t\tconst prevented = triggers.some((event) => event.defaultPrevented);\n\t\tif (!prevented) {\n\t\t\tthis.opened = false;\n\t\t}\n\t}\n\n\t@Watch(\"opened\")\n\topenedChanged(newValue) {\n\t\tif (newValue === true) {\n\t\t\tthis.open();\n\t\t} else {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\thandleOverlayClick() {\n\t\tif (this.closeOnOverlayClick) {\n\t\t\tthis.doBeforeClose(\"BACKDROP\");\n\t\t}\n\t}\n\n\thandleContentUpdate(e) {\n\t\tconst slotElement = e.target;\n\t\tconst nodes = slotElement.assignedNodes();\n\t\tif (nodes.length > 0) {\n\t\t\tnodes.forEach((node) => {\n\t\t\t\tif (node.observer) {\n\t\t\t\t\tnode.observer.disconnect();\n\t\t\t\t\tdelete node.observer;\n\t\t\t\t}\n\t\t\t\tconst observer = new MutationObserver((mutationsList, _) => {\n\t\t\t\t\tfor (const mutation of mutationsList) {\n\t\t\t\t\t\tif (mutation.type === \"childList\") {\n\t\t\t\t\t\t\tif (this.showModal) {\n\t\t\t\t\t\t\t\tthis.handleComponentOverflow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tobserver.observe(node, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t});\n\t\t\t\tnode.observer = observer;\n\t\t\t});\n\t\t}\n\t}\n\n\thandleButtonsSlotChange(e) {\n\t\tif (e.currentTarget.assignedElements()[0]?.childElementCount > 0) {\n\t\t\tthis.slotButtonsPresent = true;\n\t\t} else {\n\t\t\tthis.slotButtonsPresent = false;\n\t\t}\n\t}\n\n\tisModalContentContainerHeightReachedViewport() {\n\t\t//Adding timeout for proper height detection on Edge browser\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst modalContent = this.hostElement.shadowRoot.querySelector(\n\t\t\t\t\t\".modal-content\",\n\t\t\t\t) as HTMLElement;\n\t\t\t\tconst modalContentHeight = modalContent.offsetHeight;\n\t\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\t\tconst extraMarginForEdgeBrowser = 3;\n\t\t\t\tresolve(\n\t\t\t\t\tmodalContentHeight + extraMarginForEdgeBrowser >=\n\t\t\t\t\t\tviewportHeight * 0.9,\n\t\t\t\t);\n\t\t\t}, 100);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst isAlertVariant = this.variant !== \"default\";\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div\n\t\t\t\t\tref={(el) => (this.modalContainer = el)}\n\t\t\t\t\tclass={`modal-container ${this.showModal ? \"open\" : \"\"}`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"modal-overlay\"\n\t\t\t\t\t\tonClick={() => this.handleOverlayClick()}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-focus-trap-edge\n\t\t\t\t\t\tonFocus={this.handleTopFocus}\n\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`modal-content-container ${this.size}`}\n\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\taria-modal=\"true\"\n\t\t\t\t\t\taria-label={this.captionAriaLabel}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isAlertVariant ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass={`modal-icon-container ${this.variant === \"alert-brand\" ? \"\" : \"danger\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.alertIcon ? <ifx-icon icon={this.alertIcon} /> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<div class=\"modal-content\">\n\t\t\t\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t\t\t\t\t<h2 class=\"modal-caption\">{this.caption}</h2>\n\t\t\t\t\t\t\t\t{this.showCloseButton && (\n\t\t\t\t\t\t\t\t\t<ifx-icon-button\n\t\t\t\t\t\t\t\t\t\tclass=\"modal-close-button\"\n\t\t\t\t\t\t\t\t\t\tref={(el) => (this.closeButton = el)}\n\t\t\t\t\t\t\t\t\t\ticon=\"cross-16\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.doBeforeClose(\"CLOSE_BUTTON\")}\n\t\t\t\t\t\t\t\t\t></ifx-icon-button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"modal-body\">\n\t\t\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\t\tonSlotchange={(e) => this.handleContentUpdate(e)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass={`modal-footer ${this.slotButtonsPresent ? \"buttons-present\" : \"\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\t\t\tname=\"buttons\"\n\t\t\t\t\t\t\t\t\tonSlotchange={(e) => this.handleButtonsSlotChange(e)}\n\t\t\t\t\t\t\t\t></slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-focus-trap-edge\n\t\t\t\t\t\tonFocus={this.handleBottomFocus}\n\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"],"mappings":"wJAAgBA,EACfC,EACAC,EACAC,GAEA,MAAMC,EAAWH,EAAQI,QAAQH,EAAW,IAAKC,EAASG,KAAM,SAChEF,EAASG,iBAAiB,UAAU,KACnCH,EAASI,eACTJ,EAASK,QAAQ,IAGlB,OAAOL,CACR,CAEA,MAAMM,EAAmB,CACxBC,OAAQ,4CAGF,MAAMC,EAAY,CACxBC,OAAQ,CACP,CACCC,OAAQ,KACLJ,EACHK,QAAS,GAEV,CACCD,OAAQ,KACLJ,EACHK,QAAS,IAGXC,QAAS,CACR,CACCF,OAAQ,KACLJ,EACHK,QAAS,GAEV,CACCD,OAAQ,KACLJ,EACHK,QAAS,KCxBI,SAAAE,EACfC,EACAC,EACAC,EACAC,EAAmB,GACnBC,EAAgB,GAEhB,MAAMC,EAAyB,GAG/B,GAAID,GAASD,EAAU,CACtB,OAAOE,C,CAIR,MAAMC,EAAgBC,IAGrB,MAAMC,EAAgBD,EACpBC,gBACAC,QAAQC,GAASA,EAAKC,WAAa,IACrC,GAAIH,EAAcI,OAAS,EAAG,CAC7B,MAAMC,EAAcL,EAAc,GAAGM,cACrC,OAAOf,EACNc,EACAZ,EACAC,EACAC,EACAC,EAAQ,E,CAIV,MAAO,EAAE,EAMV,MAAMW,EAAWC,MAAMC,KAAKjB,EAAKe,UAAY,IAC7C,IAAK,MAAMG,KAAUH,EAAU,CAE9B,GAAId,EAASiB,GAAS,CAErB,Q,CAMD,GAAIhB,EAAQgB,GAAS,CACpBb,EAAQc,KAAKD,E,CAGd,GAAIA,EAAOE,YAAc,KAAM,CAE9Bf,EAAQc,QACJpB,EACFmB,EAAOE,WACPnB,EACAC,EACAC,EACAC,EAAQ,G,MAGJ,GAAIc,EAAOG,UAAY,OAAQ,CAErChB,EAAQc,QAAQb,EAAaY,G,KACvB,CAENb,EAAQc,QACJpB,EAAgBmB,EAAQjB,EAAUC,EAASC,EAAUC,EAAQ,G,EAKnE,OAAOC,CACR,CAMM,SAAUiB,EAASC,GACxB,OACCA,EAAMC,aAAa,WAClBD,EAAMC,aAAa,gBACnBD,EAAME,aAAa,iBAAmB,SAKvCF,EAAMG,MAAMC,UAAY,QACxBJ,EAAMG,MAAM7B,UAAY,KACxB0B,EAAMG,MAAME,aAAe,UAC3BL,EAAMG,MAAME,aAAe,UAM7B,CAMM,SAAUC,EAAWN,GAC1B,OACCA,EAAMC,aAAa,aAClBD,EAAMC,aAAa,kBACnBD,EAAME,aAAa,mBAAqB,OAE3C,CAQM,SAAUK,EAAYP,GAE3B,GACCA,EAAME,aAAa,cAAgB,MACnCH,EAASC,IACTM,EAAWN,GACV,CACD,OAAO,K,CAGR,OAECA,EAAMC,aAAa,cAEjBD,aAAiBQ,mBAAqBR,aAAiBS,kBACxDT,EAAMC,aAAa,SAEpBD,aAAiBU,mBACjBV,aAAiBW,kBACjBX,aAAiBY,qBACjBZ,aAAiBa,mBAEjBb,aAAiBc,iBAEnB,CChKA,MAAMC,EAAW,IAAM,yuF,MC+BVC,EAAQ,M,6FACoBC,OAAmB,MAClDC,UAAqBC,KAAKF,QAAU,MAErCG,QAAkB,cAClBC,iBAEAC,oBAA+B,KAE9BC,QACAC,SAEDC,QAAsD,UAEtDC,KAAwB,IAExBC,UAAoB,GACpBC,cAAwB,KACxBC,kBAA4B,SAC5BC,qB,iCAICC,mBAA8B,MAE/BC,gBAA2B,KAE3BC,eACAC,kBAAmC,GACnCC,YACAC,cAERC,aAAe,KACdC,aAAanB,KAAKiB,eAClBjB,KAAKiB,cAAgBG,YAAW,KAC/B,GAAIpB,KAAKD,UAAW,CACnBC,KAAKqB,yB,IAEJ,IAAI,EAGR,sBAAMC,GACL,IAAKC,EAAuBvB,KAAKwB,aAAc,CAC9C,MAAMC,EAAYC,IAClBC,EAAe,kBAAmBF,E,CAInCzB,KAAKe,kBAAoB1D,EACxB2C,KAAKwB,YAAY9C,YAChBkD,GAAOhD,EAASgD,IAAOA,EAAGjE,QAAQ,2BACnCyB,GAEDyC,OAAOlF,iBAAiB,SAAUqD,KAAKkB,a,CAGxC,oBAAAY,GACCD,OAAOE,oBAAoB,SAAU/B,KAAKkB,a,CAG3C,mBAAAc,GACC,GAAIhC,KAAKD,UAAW,CACnBC,KAAKqB,yB,EAIP,6BAAMA,GACL,MAAMY,EAAwBjC,KAAKwB,YAAY9C,WAAWwD,cACzD,4BAED,GACClC,KAAKD,iBACEC,KAAKmC,+CACX,CACDF,EAAsBG,UAAUC,IAAI,c,MAC9B,GAAIJ,GAAuBG,UAAUE,SAAS,eAAgB,CACpEL,GAAuBG,UAAUG,OAAO,c,EAI1C,wBAAAC,GACC,OAAOxC,KAAKe,kBAAkB,E,CAG/B,uBAAA0B,GACC,OAAOzC,KAAKe,kBAAkBf,KAAKe,kBAAkB7C,OAAS,E,CAG/DwE,eAAiB,KAChB1C,KAAK2C,aAAa3C,KAAKyC,0BAA0B,EAGlDG,kBAAoB,KACnB5C,KAAK2C,aAAa3C,KAAKwC,2BAA2B,EAGnD,YAAAG,CAAatG,GACZ,GAAIA,GAAW,KAAM,CACpB+E,YAAW,KAEVpB,KAAKgB,YAAY6B,OAAO,IAEzB,M,CAGDzB,YAAW,KAEV/E,EAAQwG,OAAO,GACb,E,CAGJ,IAAAC,GACC9C,KAAKD,UAAY,KACjB,IACC,MAAMgD,EAAO3G,EAAY4D,KAAKc,eAAgB9D,EAAUC,OAAQ,CAC/D+F,SAAU,MAEXD,EAAKpG,iBAAiB,UAAU,KAG/ByE,YAAW,KACVpB,KAAKyC,2BAA2BI,QAChC7C,KAAKyC,2BAA2BQ,MAAM,GACpC,GAEHjD,KAAKI,QAAQ8C,MAAM,IAGpBlD,KAAKwB,YAAY7E,iBAAiB,UAAWqD,KAAKmD,e,CACjD,MAAOC,GACRpD,KAAKI,QAAQ8C,M,EAIf,KAAAG,GACC,IACC,MAAMN,EAAO3G,EAAY4D,KAAKc,eAAgB9D,EAAUI,QAAS,CAChE4F,SAAU,MAEXD,EAAKpG,iBAAiB,UAAU,KAC/BqD,KAAKD,UAAY,MACjBC,KAAKK,SAAS6C,MAAM,IAErBlD,KAAKwB,YAAYO,oBAAoB,UAAW/B,KAAKmD,e,CACpD,MAAOC,GACRpD,KAAKD,UAAY,MACjBC,KAAKK,SAAS6C,M,EAIhBC,eAAkBG,IACjB,IAAKtD,KAAKD,UAAW,CACpB,M,CAED,GAAIuD,EAAMC,MAAQ,SAAU,CAC3BvD,KAAKwD,cAAc,a,GAIrB,aAAAA,CAAcC,GACb,MAAMC,EAAW,GACjBA,EAASjF,KAAKgF,GACd,MAAME,EAAYD,EAASE,MAAMN,GAAUA,EAAMO,mBACjD,IAAKF,EAAW,CACf3D,KAAKF,OAAS,K,EAKhB,aAAAgE,CAAcC,GACb,GAAIA,IAAa,KAAM,CACtB/D,KAAK8C,M,KACC,CACN9C,KAAKqD,O,EAIP,kBAAAW,GACC,GAAIhE,KAAKG,oBAAqB,CAC7BH,KAAKwD,cAAc,W,EAIrB,mBAAAS,CAAoBC,GACnB,MAAMC,EAAcD,EAAEE,OACtB,MAAMC,EAAQF,EAAYrG,gBAC1B,GAAIuG,EAAMnG,OAAS,EAAG,CACrBmG,EAAMC,SAAStG,IACd,GAAIA,EAAKuG,SAAU,CAClBvG,EAAKuG,SAASC,oBACPxG,EAAKuG,Q,CAEb,MAAMA,EAAW,IAAIE,kBAAiB,CAACC,EAAeC,KACrD,IAAK,MAAMC,KAAYF,EAAe,CACrC,GAAIE,EAASC,OAAS,YAAa,CAClC,GAAI7E,KAAKD,UAAW,CACnBC,KAAKqB,yB,OAKTkD,EAASO,QAAQ9G,EAAM,CACtB+G,WAAY,KACZC,UAAW,KACXC,QAAS,OAEVjH,EAAKuG,SAAWA,CAAQ,G,EAK3B,uBAAAW,CAAwBhB,GACvB,GAAIA,EAAEiB,cAAcC,mBAAmB,IAAIC,kBAAoB,EAAG,CACjErF,KAAKY,mBAAqB,I,KACpB,CACNZ,KAAKY,mBAAqB,K,EAI5B,4CAAAuB,GAEC,OAAO,IAAImD,SAASC,IACnBnE,YAAW,KACV,MAAMoE,EAAexF,KAAKwB,YAAY9C,WAAWwD,cAChD,kBAED,MAAMuD,EAAqBD,EAAaE,aACxC,MAAMC,EAAiB9D,OAAO+D,YAC9B,MAAMC,EAA4B,EAClCN,EACCE,EAAqBI,GACpBF,EAAiB,GAClB,GACC,IAAI,G,CAIT,MAAAG,GACC,MAAMC,EAAiB/F,KAAKM,UAAY,UACxC,OACC0F,EAACC,EAAI,CAAA1C,IAAA,4CACJyC,EAAA,OAAAzC,IAAA,2CACC2C,IAAMtE,GAAQ5B,KAAKc,eAAiBc,EACpCuE,MAAO,mBAAmBnG,KAAKD,UAAY,OAAS,MAEpDiG,EAAA,OAAAzC,IAAA,2CACC4C,MAAM,gBACNC,QAAS,IAAMpG,KAAKgE,uBAErBgC,EAEC,OAAAzC,IAAA,uEAAA8C,QAASrG,KAAK0C,eACd4D,SAAS,MAEVN,EAAA,OAAAzC,IAAA,2CACC4C,MAAO,2BAA2BnG,KAAKO,OACvCgG,KAAK,SACM,oBACC,aAAAvG,KAAKE,kBAEhB6F,EACAC,EAAA,OACCG,MAAO,wBAAwBnG,KAAKM,UAAY,cAAgB,GAAK,YAEpEN,KAAKQ,UAAYwF,EAAU,YAAAQ,KAAMxG,KAAKQ,YAAgB,MAErD,KACJwF,EAAK,OAAAzC,IAAA,2CAAA4C,MAAM,iBACVH,EAAK,OAAAzC,IAAA,2CAAA4C,MAAM,gBACVH,EAAA,MAAAzC,IAAA,2CAAI4C,MAAM,iBAAiBnG,KAAKC,SAC/BD,KAAKa,iBACLmF,EAAA,mBAAAzC,IAAA,2CACC4C,MAAM,qBACND,IAAMtE,GAAQ5B,KAAKgB,YAAcY,EACjC4E,KAAK,WACLlG,QAAQ,WACR8F,QAAS,IAAMpG,KAAKwD,cAAc,mBAIrCwC,EAAK,OAAAzC,IAAA,2CAAA4C,MAAM,cACVH,EAAA,QAAAzC,IAAA,2CACCkD,KAAK,UACLC,aAAexC,GAAMlE,KAAKiE,oBAAoBC,MAGhD8B,EAAA,OAAAzC,IAAA,2CACC4C,MAAO,gBAAgBnG,KAAKY,mBAAqB,kBAAoB,MAErEoF,EACC,QAAAzC,IAAA,2CAAAkD,KAAK,UACLC,aAAexC,GAAMlE,KAAKkF,wBAAwBhB,QAKtD8B,EAAA,OAAAzC,IAAA,uEAEC8C,QAASrG,KAAK4C,kBACd0D,SAAS,O","ignoreList":[]}