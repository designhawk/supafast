import{r as t,c as e,a as i,h as o}from"./p-CA_siwAQ.js";import{d as s,t as r}from"./p-DNHOWgWh.js";import{i as a}from"./p-CtINY9El.js";const n=()=>`:host{display:inline-block;position:relative}.popover__container{position:relative;display:inline-block;font-family:var(--ifx-font-family)}.popover{position:absolute;z-index:1000;display:none;background:#FFFFFF;box-shadow:0 0 16px 0 rgba(29, 29, 29, 0.1);width:var(--ifx-popover-width, 240px);min-width:var(--ifx-popover-width, 240px);max-width:320px;pointer-events:auto;box-sizing:border-box}.popover.visible{display:flex;flex-direction:column}.popover--disabled{opacity:0.5;pointer-events:none}.popover-close{all:unset;cursor:pointer;position:absolute;top:12px;right:12px;z-index:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:background-color 0.2s ease}.popover-close:hover{background-color:#F7F7F7}.popover-close:focus{outline:2px solid #0A8276;outline-offset:1px}.popover-content{display:flex;flex-direction:column;padding:12px;gap:4px;text-align:left}.popover-title{font-size:1rem;font-weight:600;color:#1D1D1D;margin:0;padding-right:24px;text-align:left}.popover-text{font-size:0.875rem;font-weight:400;line-height:1.25rem;color:#575352;margin:0;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;text-align:left}.popover-arrow-svg{position:absolute;width:12px;height:8px;color:#FFFFFF;pointer-events:none;z-index:1001}.popover-arrow-svg path{fill:currentColor}`;const p=class{constructor(i){t(this,i);this.ifxOpen=e(this,"ifxOpen",7);this.ifxClose=e(this,"ifxClose",7)}get el(){return i(this)}popoverVisible=false;computedArrowPosition={};popoverTitle="";text="";position="auto";disabled=false;open=false;ariaLabel=null;ifxOpen;ifxClose;static GAP=12;popoverEl;triggerEl;lastOpenTrigger=null;openChanged(t){this.popoverVisible=t;if(!this.popoverEl)return;if(t){this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible"}else{this.popoverEl.style.display="none";this.popoverEl.style.visibility=""}}async componentDidLoad(){if(!a(this.el)){const t=s();r("ifx-popover",await t)}this.popoverEl=this.el.shadowRoot.querySelector(".popover");this.setupTriggerElement();this.popoverVisible=this.open;if(this.open){this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible";this.ifxOpen.emit({trigger:this.lastOpenTrigger})}}setupTriggerElement(){this.cleanupTriggerListeners();const t=Array.from(this.el.children);this.triggerEl=t[0]||this.el;this.triggerEl.addEventListener("click",this.onClick)}disconnectedCallback(){this.cleanupTriggerListeners()}cleanupTriggerListeners(){if(!this.triggerEl)return;this.triggerEl.removeEventListener("click",this.onClick)}getViewportSpace(t){return{above:t.top,below:window.innerHeight-t.bottom,left:t.left,right:window.innerWidth-t.right}}resetPositioningStyles(){if(!this.popoverEl)return;this.popoverEl.style.top="";this.popoverEl.style.bottom="";this.popoverEl.style.left="";this.popoverEl.style.right="";this.popoverEl.style.transform="";this.popoverEl.style.visibility=""}positionPopover(){if(!this.popoverEl||!this.triggerEl)return;const t=this.triggerEl.getBoundingClientRect();const e=this.popoverEl.getBoundingClientRect();const i=this.getViewportSpace(t);let o=this.position;if(o==="auto"){o=this.getBestPosition(e,i)}else{o=this.validateAndAdjustPosition(o,e,i)}this.resetPositioningStyles();const{popoverStyle:s,arrowStyle:r}=this.calculatePosition(t,e,o);Object.assign(this.popoverEl.style,s);this.computedArrowPosition=r;this.popoverEl.setAttribute("data-placement",o)}getBestPosition(t,e){const i=p.GAP;if(e.above>=t.height+i){return"top"}else if(e.below>=t.height+i){return"bottom"}else if(e.right>=t.width+i){return"right"}else if(e.left>=t.width+i){return"left"}return"bottom"}validateAndAdjustPosition(t,e,i){const o=p.GAP;switch(t){case"top":case"top-start":case"top-end":if(i.above>=e.height+o)return t;if(i.below>=e.height+o)return"bottom";if(i.left>=e.width+o)return"left";if(i.right>=e.width+o)return"right";return"bottom";case"bottom":case"bottom-start":case"bottom-end":if(i.below>=e.height+o)return t;if(i.above>=e.height+o)return"top";if(i.left>=e.width+o)return"left";if(i.right>=e.width+o)return"right";return"top";case"left":if(i.left>=e.width+o)return"left";if(i.right>=e.width+o)return"right";if(i.below>=e.height+o)return"bottom";if(i.above>=e.height+o)return"top";return"right";case"right":if(i.right>=e.width+o)return"right";if(i.left>=e.width+o)return"left";if(i.below>=e.height+o)return"bottom";if(i.above>=e.height+o)return"top";return"left";default:return"bottom"}}calculatePosition(t,e,i){const o=p.GAP;let s={position:"absolute",zIndex:"1000"};let r={};switch(i){case"top-start":s.left=`0px`;s.bottom=`${t.height+o}px`;r={top:`100%`,left:"12px"};break;case"top-end":s.right=`0px`;s.bottom=`${t.height+o}px`;r={top:`100%`,right:"12px"};break;case"top":s.left=`${t.width/2-e.width/2}px`;s.bottom=`${t.height+o}px`;r={top:`100%`,left:"50%",transform:"translateX(-50%)"};break;case"bottom-start":s.left=`0px`;s.top=`${t.height+o}px`;r={bottom:`100%`,left:"12px",transform:"rotate(180deg)"};break;case"bottom-end":s.right=`0px`;s.top=`${t.height+o}px`;r={bottom:`100%`,right:"12px",transform:"rotate(180deg)"};break;case"bottom":s.left=`${t.width/2-e.width/2}px`;s.top=`${t.height+o}px`;r={bottom:`100%`,left:"50%",transform:"translateX(-50%) rotate(180deg)"};break;case"left":s.right=`${t.width+o}px`;s.top=`${t.height/2-e.height/2}px`;r={top:"50%",right:"-10px",transform:"translateY(-50%) rotate(-90deg)"};break;case"right":s.left=`${t.width+o}px`;s.top=`${t.height/2-e.height/2}px`;r={top:"50%",left:"-10px",transform:"translateY(-50%) rotate(90deg)"};break}return{popoverStyle:s,arrowStyle:r}}positionChanged(){if(this.popoverVisible){setTimeout((()=>this.positionPopover()),0)}}async show(){if(this.disabled)return;this.open=true;this.popoverEl.style.visibility="hidden";this.popoverEl.style.display="flex";this.positionPopover();this.popoverEl.style.visibility="visible";this.popoverVisible=true;this.lastOpenTrigger=this.triggerEl||null;this.ifxOpen.emit({trigger:this.lastOpenTrigger})}async hide(){this.open=false;this.popoverVisible=false;if(this.popoverEl){this.popoverEl.style.display="none";this.popoverEl.style.visibility=""}this.ifxClose.emit()}async toggle(){if(this.popoverVisible){this.hide()}else{this.show()}}onClick=t=>{t.stopPropagation();this.lastOpenTrigger=this.triggerEl||t.currentTarget||null;this.toggle()};onCloseClick=t=>{t.stopPropagation();this.hide()};render(){const t={popover:true,visible:this.popoverVisible,"popover--disabled":this.disabled};const e={position:"absolute",...this.computedArrowPosition};return o("div",{key:"1099e84c972aa386ccecb006f2b7c584ea9b2150",class:"popover__container","aria-label":this.ariaLabel},o("slot",{key:"17fbf7bd6096c3978479bfb9671507e23c939c27"}),o("div",{key:"75e0a84d2e8a4aa0714c7101be0c3d7670f18d3a",class:t,role:"dialog","aria-modal":"false"},o("button",{key:"d3511c1624466c65350214998bb0a853c2acad56","aria-label":"Close Popover",class:"popover-close",onClick:this.onCloseClick},o("ifx-icon",{key:"e068bd7d599ca59b36ea32941455d3bf6b508330",icon:"cross16"})),o("div",{key:"fab40f54e162be44db69fc74104cbf7e6313f64f",class:"popover-content"},this.popoverTitle&&o("div",{key:"eb762ff5ab6f1103e4702c2b7f7b718761bbfbee",class:"popover-title"},this.popoverTitle),this.text&&o("div",{key:"c5c6ca0bdbd47cce3c1cae942a1e81c0a8eaf4a5",class:"popover-text"},this.text),o("slot",{key:"533789c1b492b0b019fb2896225dee6e961dfe7c",name:"content"})),o("svg",{key:"06a4580f9e6362ff8e5fa911d352466138d5c98a",class:"popover-arrow-svg",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:e},o("path",{key:"704caa4a4c7874b04018c278ec5c2e0bcaf9e6b8",d:"M6 8L0 0L12 0L6 8Z",fill:"currentColor"}))))}static get watchers(){return{open:[{openChanged:0}],position:[{positionChanged:0}]}}};p.style=n();export{p as ifx_popover};
//# sourceMappingURL=p-2e6958b8.entry.js.map