var t=class{constructor(){this.allSyncListeners=new Map;this.allAsyncListeners=new Map;this.globalSyncListeners=new Set;this.globalAsyncListeners=new Set;this.asyncFunctionsQueue=[];this.scheduled=false;this.firedEvents={}}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,i){const s=e?this.allAsyncListeners:this.allSyncListeners;let n=s.get(t);if(!n&&i){n=new Set;s.set(t,n)}return n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,i=false){this.getListeners(t,i,true).add(e)}removeEventListener(t,e,i=false){const s=this.getListeners(t,i,false);if(!s){return}s.delete(e);if(s.size===0){(i?this.allAsyncListeners:this.allSyncListeners).delete(t)}}addGlobalListener(t,e=false){this.getGlobalListeners(e).add(t)}removeGlobalListener(t,e=false){this.getGlobalListeners(e).delete(t)}dispatchEvent(t){this.dispatchToListeners(t,true);this.dispatchToListeners(t,false);this.firedEvents[t.type]=true}dispatchEventOnce(t){if(!this.firedEvents[t.type]){this.dispatchEvent(t)}}dispatchToListeners(t,e){const i=t.type;if(e&&"event"in t){const e=t.event;if(e instanceof Event){t.eventPath=e.composedPath()}}const{frameworkOverrides:s}=this;const n=t=>{const i=s?()=>s.wrapIncoming(t):t;if(e){this.dispatchAsync(i)}else{i()}};const o=this.getListeners(i,e,false);if((o?.size??0)>0){const e=new Set(o);for(const i of e){if(!o?.has(i)){continue}n((()=>i(t)))}}const r=this.getGlobalListeners(e);if(r.size>0){const e=new Set(r);for(const s of e){n((()=>s(i,t)))}}}getGlobalListeners(t){return t?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(t){this.asyncFunctionsQueue.push(t);if(!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t();this.scheduled=true}}flushAsyncQueue(){this.scheduled=false;const t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const e of t){e()}}};function e(t){if(t==null||t===""){return null}return t}function i(t){return t!=null&&t!==""}function s(t){return!i(t)}function n(t){return t!=null&&typeof t.toString==="function"?t.toString():null}function o(t,e){const i=t?JSON.stringify(t):null;const s=e?JSON.stringify(e):null;return i===s}function r(t,e,i=false){const s=t==null;const n=e==null;if(t?.toNumber){t=t.toNumber()}if(e?.toNumber){e=e.toNumber()}if(s&&n){return 0}if(s){return-1}if(n){return 1}function o(t,e){return t>e?1:t<e?-1:0}if(typeof t!=="string"){return o(t,e)}if(!i){return o(t,e)}try{return t.localeCompare(e)}catch(i){return o(t,e)}}var l=/[&<>"']/g;var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(t){return t?.toString().toString()??null}function c(t){return h(t)?.replace(l,(t=>a[t]))??null}function u(t){return t.eRootDiv.getRootNode()}function d(t){return u(t).activeElement}function f(t){const{gos:e,eRootDiv:s}=t;let n=null;const o=e.get("getDocument");if(o&&i(o)){n=o()}else if(s){n=s.ownerDocument}if(n&&i(n)){return n}return document}function g(t){const e=d(t);return e===null||e===f(t).body}function p(t){const e=f(t);return e.defaultView||window}function m(t){let e=null;let i=null;try{e=f(t).fullscreenElement}catch(t){}finally{if(!e){e=u(t)}const s=e.querySelector("body");if(s){i=s}else if(e instanceof ShadowRoot){i=e}else if(e instanceof Document){i=e?.documentElement}else{i=e}}return i}function v(t){const e=m(t);return e?.clientWidth??(window.innerWidth||-1)}function w(t){const e=m(t);return e?.clientHeight??(window.innerHeight||-1)}function C(t,e,i){if(i==null||typeof i==="string"&&i==""){y(t,e)}else{b(t,e,i)}}function b(t,e,i){t.setAttribute(S(e),i.toString())}function y(t,e){t.removeAttribute(S(e))}function S(t){return`aria-${t}`}function x(t,e){if(e){t.setAttribute("role",e)}else{t.removeAttribute("role")}}function R(t){let e;if(t==="asc"){e="ascending"}else if(t==="desc"){e="descending"}else if(t==="mixed"){e="other"}else{e="none"}return e}function F(t){return t.getAttribute("aria-label")}function k(t,e){C(t,"label",e)}function P(t,e){C(t,"labelledby",e)}function D(t,e){C(t,"live",e)}function M(t,e){C(t,"atomic",e)}function T(t,e){C(t,"relevant",e)}function E(t,e){C(t,"invalid",e)}function A(t,e){C(t,"disabled",e)}function I(t,e){C(t,"hidden",e)}function H(t,e){b(t,"expanded",e)}function O(t,e){b(t,"setsize",e)}function N(t,e){b(t,"posinset",e)}function B(t,e){b(t,"multiselectable",e)}function G(t,e){b(t,"rowcount",e)}function V(t,e){b(t,"rowindex",e)}function L(t,e){b(t,"rowspan",e)}function z(t,e){b(t,"colcount",e)}function $(t,e){b(t,"colindex",e)}function W(t,e){b(t,"colspan",e)}function U(t,e){b(t,"sort",e)}function j(t){y(t,"sort")}function K(t,e){C(t,"selected",e)}function q(t,e){C(t,"controls",e)}function _(t,e){q(t,e.id);P(e,t.id)}function Z(t,e){C(t,"owns",e)}function Y(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===true?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var Q="[tabindex], input, select, button, textarea, [href]";var J="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function X(t){if(!t){return false}const e=t.matches("input, select, button, textarea");if(!e){return false}const i=t.matches(J);if(!i){return false}return pt(t)}function tt(t,e,i={}){const{skipAriaHidden:s}=i;t.classList.toggle("ag-hidden",!e);if(!s){I(t,!e)}}function et(t,e,i={}){const{skipAriaHidden:s}=i;t.classList.toggle("ag-invisible",!e);if(!s){I(t,!e)}}function it(t,e){const i="disabled";const s=e?t=>t.setAttribute(i,""):t=>t.removeAttribute(i);s(t);const n=t.querySelectorAll("input")??[];for(const t of n){s(t)}}function st(t,e,i){let s=0;while(t){if(t.classList.contains(e)){return true}t=t.parentElement;if(typeof i=="number"){if(++s>i){break}}else if(t===i){break}}return false}function nt(t){const{height:e,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:l,paddingRight:a,paddingBottom:h,paddingLeft:c,marginTop:u,marginRight:d,marginBottom:f,marginLeft:g,boxSizing:p}=window.getComputedStyle(t);const m=Number.parseFloat;return{height:m(e||"0"),width:m(i||"0"),borderTopWidth:m(s||"0"),borderRightWidth:m(n||"0"),borderBottomWidth:m(o||"0"),borderLeftWidth:m(r||"0"),paddingTop:m(l||"0"),paddingRight:m(a||"0"),paddingBottom:m(h||"0"),paddingLeft:m(c||"0"),marginTop:m(u||"0"),marginRight:m(d||"0"),marginBottom:m(f||"0"),marginLeft:m(g||"0"),boxSizing:p}}function ot(t){const e=nt(t);if(e.boxSizing==="border-box"){return e.height-e.paddingTop-e.paddingBottom-e.borderTopWidth-e.borderBottomWidth}return e.height}function rt(t){const e=nt(t);if(e.boxSizing==="border-box"){return e.width-e.paddingLeft-e.paddingRight-e.borderLeftWidth-e.borderRightWidth}return e.width}function lt(t){const{height:e,marginBottom:i,marginTop:s}=nt(t);return Math.floor(e+i+s)}function at(t){const{width:e,marginLeft:i,marginRight:s}=nt(t);return Math.floor(e+i+s)}function ht(t){const e=t.getBoundingClientRect();const{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=nt(t);return{top:e.top+(i||0),left:e.left+(s||0),right:e.right+(n||0),bottom:e.bottom+(o||0)}}function ct(t,e){let i=t.scrollLeft;if(e){i=Math.abs(i)}return i}function ut(t,e,i){if(i){e*=-1}t.scrollLeft=e}function dt(t){while(t?.firstChild){t.firstChild.remove()}}function ft(t){if(t?.parentNode){t.remove()}}function gt(t){return!!t.offsetParent}function pt(t){if(t.checkVisibility){return t.checkVisibility({checkVisibilityCSS:true})}const e=!gt(t)||window.getComputedStyle(t).visibility!=="visible";return!e}function mt(t){const e=document.createElement("div");e.innerHTML=(t||"").trim();return e.firstChild}function vt(t,e,i){if(i&&i.nextSibling===e){return}if(!t.firstChild){t.appendChild(e)}else if(i){if(i.nextSibling){t.insertBefore(e,i.nextSibling)}else{t.appendChild(e)}}else if(t.firstChild&&t.firstChild!==e){t.insertAdjacentElement("afterbegin",e)}}function wt(t,e){for(let i=0;i<e.length;i++){const s=e[i];const n=t.children[i];if(n!==s){t.insertBefore(s,n)}}}function Ct(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))}function bt(t,e){if(!e){return}for(const i of Object.keys(e)){const s=e[i];if(!i?.length||s==null){continue}const n=Ct(i);const o=s.toString();const r=o.replace(/\s*!important/g,"");const l=r.length!=o.length?"important":void 0;t.style.setProperty(n,r,l)}}function yt(t){return()=>{const e=t();if(!e){return true}return St(e)||xt(e)}}function St(t){return t.clientWidth<t.scrollWidth}function xt(t){return t.clientHeight<t.scrollHeight}function Rt(t,e){if(e==="flex"){t.style.removeProperty("width");t.style.removeProperty("minWidth");t.style.removeProperty("maxWidth");t.style.flex="1 1 auto"}else{Ft(t,e)}}function Ft(t,e){e=Pt(e);t.style.width=e;t.style.maxWidth=e;t.style.minWidth=e}function kt(t,e){e=Pt(e);t.style.height=e;t.style.maxHeight=e;t.style.minHeight=e}function Pt(t){return typeof t==="number"?`${t}px`:t}function Dt(t){return t instanceof Node||t instanceof HTMLElement}function Mt(t,e,i){if(i==null||i===""){t.removeAttribute(e)}else{t.setAttribute(e,i.toString())}}function Tt(t,e,i){const s=p(t);const n=s.ResizeObserver;const o=n?new n(i):null;o?.observe(e);return()=>o?.disconnect()}function Et(t,e){const i=p(t);if(i.requestAnimationFrame){i.requestAnimationFrame(e)}else if(i.webkitRequestAnimationFrame){i.webkitRequestAnimationFrame(e)}else{i.setTimeout(e,0)}}var At="data-ref";var It;function Ht(){It??(It=document.createTextNode(" "));return It.cloneNode()}function Ot(t){const{attrs:e,children:i,cls:s,ref:n,role:o,tag:r}=t;const l=document.createElement(r);if(s){l.className=s}if(n){l.setAttribute(At,n)}if(o){l.setAttribute("role",o)}if(e){for(const t of Object.keys(e)){l.setAttribute(t,e[t])}}if(i){if(typeof i==="string"){l.textContent=i}else{let t=true;for(const e of i){if(e){if(typeof e==="string"){l.appendChild(document.createTextNode(e));t=false}else if(typeof e==="function"){l.appendChild(e())}else{if(t){l.appendChild(Ht());t=false}l.append(Ot(e));l.appendChild(Ht())}}}}}return l}var Nt=["touchstart","touchend","touchmove","touchcancel","scroll"];var Bt=["wheel"];var Gt={};var Vt=(()=>{const t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};const e=e=>{if(typeof Gt[e]==="boolean"){return Gt[e]}const i=document.createElement(t[e]||"div");e="on"+e;return Gt[e]=e in i};return e})();function Lt(t,e){if(!e||!t){return false}return $t(e).indexOf(t)>=0}function zt(t){const e=[];let i=t.target;while(i){e.push(i);i=i.parentElement}return e}function $t(t){const e=t;if(e.path){return e.path}if(e.composedPath){return e.composedPath()}return zt(e)}function Wt(t,e,i){const s=Ut(e);let n;if(s!=null){n={passive:s}}t.addEventListener(e,i,n)}var Ut=t=>{const e=Nt.includes(t);const i=Bt.includes(t);if(e){return true}if(i){return false}};function jt(t,e,i){if(i===0){return false}const s=Math.abs(t.clientX-e.clientX);const n=Math.abs(t.clientY-e.clientY);return Math.max(s,n)<=i}var Kt=(t,e)=>{const i=t.identifier;for(let t=0,s=e.length;t<s;++t){const s=e[t];if(s.identifier===i){return s}}return null};function qt(t,e){return t.gos.isElementInThisInstance(e.target)}function _t(t,e,i){const s=t.getBoundingClientRect();const n=s.height;const o=v(i)-2;const r=w(i)-2;const l=t.offsetParent;if(!l){return}const a=ht(t.offsetParent);const{clientY:h,clientX:c}=e;let u=h-a.top-n/2;let d=c-a.left-10;const g=f(i);const p=g.defaultView||window;const m=p.pageYOffset||g.documentElement.scrollTop;const C=p.pageXOffset||g.documentElement.scrollLeft;if(o>0&&d+t.clientWidth>o+C){d=o+C-t.clientWidth}if(d<0){d=0}if(r>0&&u+t.clientHeight>r+m){u=r+m-t.clientHeight}if(u<0){u=0}t.style.left=`${d}px`;t.style.top=`${u}px`}var Zt=(t,...e)=>{for(const i of e){const[e,s,n,o]=i;e.addEventListener(s,n,o);t.push(i)}};var Yt=t=>{if(t){for(const[e,i,s,n]of t){e.removeEventListener(i,s,n)}t.length=0}};var Qt=t=>{if(t.cancelable){t.preventDefault()}};function Jt(t,e){return e}function Xt(t){return t?.getLocaleTextFunc()??Jt}function te(t,e,i,s){const n=e[i];return t.getLocaleTextFunc()(i,typeof n==="function"?n(s):n,s)}function ee(t){return(e,i,s)=>t({key:e,defaultValue:i,variableValues:s})}function ie(t){return(e,i,s)=>{let n=t?.[e];if(n&&s?.length){let t=0;while(true){if(t>=s.length){break}const e=n.indexOf("${variable}");if(e===-1){break}n=n.replace("${variable}",s[t++])}}return n??i}}var se=class{constructor(){this.destroyFunctions=[];this.destroyed=false;this.__v_skip=true;this.propertyListenerId=0;this.lastChangeSetIdLookup={};this.isAlive=()=>!this.destroyed}preWireBeans(t){this.beans=t;this.stubContext=t.context;this.eventSvc=t.eventSvc;this.gos=t.gos}destroy(){const{destroyFunctions:t}=this;for(let e=0;e<t.length;e++){t[e]()}t.length=0;this.destroyed=true;this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,i,s){if(!this.localEventService){this.localEventService=new t}this.localEventService.addEventListener(e,i,s)}removeEventListener(t,e,i){this.localEventService?.removeEventListener(t,e,i)}dispatchLocalEvent(t){this.localEventService?.dispatchEvent(t)}addManagedElementListeners(t,e){return this._setupListeners(t,e)}addManagedEventListeners(t){return this._setupListeners(this.eventSvc,t)}addManagedListeners(t,e){return this._setupListeners(t,e)}_setupListeners(t,e){const i=[];for(const s of Object.keys(e)){const n=e[s];if(n){i.push(this._setupListener(t,s,n))}}return i}_setupListener(t,e,i){if(this.destroyed){return()=>null}let s;if(ne(t)){t.__addEventListener(e,i);s=()=>{t.__removeEventListener(e,i);return null}}else{const n=oe(t);if(t instanceof HTMLElement){Wt(t,e,i)}else if(n){t.addListener(e,i)}else{t.addEventListener(e,i)}s=n?()=>{t.removeListener(e,i);return null}:()=>{t.removeEventListener(e,i);return null}}this.destroyFunctions.push(s);return()=>{s();this.destroyFunctions=this.destroyFunctions.filter((t=>t!==s));return null}}setupPropertyListener(t,e){const{gos:i}=this;i.addPropertyEventListener(t,e);const s=()=>{i.removePropertyEventListener(t,e);return null};this.destroyFunctions.push(s);return()=>{s();this.destroyFunctions=this.destroyFunctions.filter((t=>t!==s));return null}}addManagedPropertyListener(t,e){if(this.destroyed){return()=>null}return this.setupPropertyListener(t,e)}addManagedPropertyListeners(t,e){if(this.destroyed){return}const i=t.join("-")+this.propertyListenerId++;const s=t=>{if(t.changeSet){if(t.changeSet&&t.changeSet.id===this.lastChangeSetIdLookup[i]){return}this.lastChangeSetIdLookup[i]=t.changeSet.id}const s={type:"propertyChanged",changeSet:t.changeSet,source:t.source};e(s)};for(const e of t){this.setupPropertyListener(e,s)}}getLocaleTextFunc(){return Xt(this.beans.localeSvc)}addDestroyFunc(t){if(this.isAlive()){this.destroyFunctions.push(t)}else{t()}}createOptionalManagedBean(t,e){return t?this.createManagedBean(t,e):void 0}createManagedBean(t,e){const i=this.createBean(t,e);this.addDestroyFunc(this.destroyBean.bind(this,t,e));return i}createBean(t,e,i){return(e||this.stubContext).createBean(t,i)}destroyBean(t,e){return(e||this.stubContext).destroyBean(t)}destroyBeans(t,e){return(e||this.stubContext).destroyBeans(t)}};function ne(t){return t.__addEventListener!==void 0}function oe(t){return t.eventServiceType==="global"}var re=class extends se{};var le={};function ae(t,e){if(le[e]){return}t();le[e]=true}var he={pending:false,funcs:[]};var ce={pending:false,funcs:[]};function ue(t,e="setTimeout",i){const s=e==="raf"?ce:he;s.funcs.push(t);if(s.pending){return}s.pending=true;const n=()=>{const t=s.funcs.slice();s.funcs.length=0;s.pending=false;for(const e of t){e()}};if(e==="raf"){Et(i,n)}else{window.setTimeout(n,0)}}function de(t,e,i){let s;return function(...n){const o=this;window.clearTimeout(s);s=window.setTimeout((function(){if(t.isAlive()){e.apply(o,n)}}),i)}}function fe(t,e){let i=0;return function(...s){const n=this;const o=Date.now();if(o-i<e){return}i=o;t.apply(n,s)}}function ge(t,e,i,s=100){const n=Date.now();let o=null;let r=false;const l=()=>{if(o!=null){window.clearInterval(o);o=null}};t.addDestroyFunc(l);const a=()=>{const t=Date.now()-n>s;if(e()||t){i();r=true;l()}};a();if(!r){o=window.setInterval(a,10)}}var pe=new Set(["__proto__","constructor","prototype"]);function me(t,e){if(t==null){return}if(Array.isArray(t)){for(let i=0;i<t.length;i++){e(i.toString(),t[i])}return}for(const i of Object.keys(t).filter((t=>!pe.has(t)))){e(i,t[i])}}function ve(t,e,s=true,n=false){if(!i(e)){return}me(e,((e,i)=>{let o=t[e];if(o===i){return}if(n){const s=o==null&&i!=null;if(s){const s=typeof i==="object"&&i.constructor===Object;if(s){o={};t[e]=o}}}if(we(i)&&we(o)&&!Array.isArray(o)){ve(o,i,s,n)}else if(s||i!==void 0){t[e]=i}}))}function we(t){return typeof t==="object"&&t!==null}var Ce=class t{static applyGlobalGridOptions(e){if(!t.gridOptions){return{...e}}let i={};ve(i,t.gridOptions,true,true);if(t.mergeStrategy==="deep"){ve(i,e,true,true)}else{i={...i,...e}}if(t.gridOptions.context){i.context=t.gridOptions.context}if(e.context){if(t.mergeStrategy==="deep"&&i.context){ve(e.context,i.context,true,true)}i.context=e.context}return i}static applyGlobalGridOption(e,i){if(t.mergeStrategy==="deep"){const s=Se(e);if(s&&typeof s==="object"&&typeof i==="object"){return t.applyGlobalGridOptions({[e]:i})[e]}}return i}};Ce.gridOptions=void 0;Ce.mergeStrategy="shallow";var be=Ce;function ye(t,e="shallow"){be.gridOptions=t;be.mergeStrategy=e}function Se(t){return be.gridOptions?.[t]}var xe={suppressContextMenu:false,preventDefaultOnContextMenu:false,allowContextMenuWithControlKey:false,suppressMenuHide:true,enableBrowserTooltips:false,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:false,tooltipShowMode:"standard",tooltipInteraction:false,copyHeadersToClipboard:false,copyGroupHeadersToClipboard:false,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:false,suppressCopySingleCellRanges:false,suppressLastEmptyLineOnPaste:false,suppressClipboardPaste:false,suppressClipboardApi:false,suppressCutToClipboard:false,maintainColumnOrder:false,enableStrictPivotColumnOrder:false,suppressFieldDotNotation:false,allowDragFromColumnsToolPanel:false,suppressMovableColumns:false,suppressColumnMoveAnimation:false,suppressMoveWhenColumnDragging:false,suppressDragLeaveHidesColumns:false,suppressRowGroupHidesColumns:false,suppressAutoSize:false,autoSizePadding:20,skipHeaderOnAutoSize:false,singleClickEdit:false,suppressClickEdit:false,readOnlyEdit:false,stopEditingWhenCellsLoseFocus:false,enterNavigatesVertically:false,enterNavigatesVerticallyAfterEdit:false,enableCellEditingOnBackspace:false,undoRedoCellEditing:false,undoRedoCellEditingLimit:10,suppressCsvExport:false,suppressExcelExport:false,cacheQuickFilter:false,includeHiddenColumnsInQuickFilter:false,excludeChildrenWhenTreeDataFiltering:false,enableAdvancedFilter:false,includeHiddenColumnsInAdvancedFilter:false,enableCharts:false,masterDetail:false,keepDetailRows:false,keepDetailRowsCount:10,detailRowAutoHeight:false,tabIndex:0,rowBuffer:10,valueCache:false,valueCacheNeverExpires:false,enableCellExpressions:false,suppressTouch:false,suppressFocusAfterRefresh:false,suppressBrowserResizeObserver:false,suppressPropertyNamesCheck:false,suppressChangeDetection:false,debug:false,suppressLoadingOverlay:false,suppressNoRowsOverlay:false,pagination:false,paginationPageSize:100,paginationPageSizeSelector:true,paginationAutoPageSize:false,paginateChildRows:false,suppressPaginationPanel:false,pivotMode:false,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:false,suppressExpandablePivotGroups:false,functionsReadOnly:false,suppressAggFuncInHeader:false,alwaysAggregateAtRootLevel:false,aggregateOnlyChangedColumns:false,suppressAggFilteredOnly:false,removePivotHeaderRowWhenSingleValueColumn:false,animateRows:true,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:false,domLayout:"normal",ensureDomOrder:false,enableRtl:false,suppressColumnVirtualisation:false,suppressMaxRenderedRowRestriction:false,suppressRowVirtualisation:false,rowDragManaged:false,rowDragInsertDelay:500,suppressRowDrag:false,suppressMoveWhenRowDragging:false,rowDragEntireRow:false,rowDragMultiRow:false,embedFullWidthRows:false,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:false,groupSelectsChildren:false,groupSuppressBlankHeader:false,groupSelectsFiltered:false,showOpenedGroup:false,groupRemoveSingleChildren:false,groupRemoveLowestSingleChildren:false,groupHideOpenParents:false,groupAllowUnbalanced:false,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:false,treeData:false,rowGroupPanelSuppressSort:false,suppressGroupRowsSticky:false,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:false,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:false,serverSideSortAllLevels:false,serverSideOnlyRefreshFilteredGroups:false,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:false,alwaysShowVerticalScroll:false,debounceVerticalScrollbar:false,suppressHorizontalScroll:false,suppressScrollOnNewData:false,suppressScrollWhenPopupsAreOpen:false,suppressAnimationFrame:false,suppressMiddleClickScrolls:false,suppressPreventDefaultOnMouseWheel:false,rowMultiSelectWithClick:false,suppressRowDeselection:false,suppressRowClickSelection:false,suppressCellFocus:false,suppressHeaderFocus:false,suppressMultiRangeSelection:false,enableCellTextSelection:false,enableRangeSelection:false,enableRangeHandle:false,enableFillHandle:false,fillHandleDirection:"xy",suppressClearOnFillReduction:false,accentedSort:false,unSortIcon:false,suppressMultiSort:false,alwaysMultiSort:false,suppressMaintainUnsortedOrder:false,suppressRowHoverHighlight:false,suppressRowTransform:false,columnHoverHighlight:false,deltaSort:false,enableGroupEdit:false,groupLockGroupColumns:0,serverSideEnableClientSideSort:false,suppressServerSideFullWidthLoadingRow:false,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:true,suppressSetFilterByDefault:false,rowNumbers:false,enableFilterHandlers:false};var Re="https://www.ag-grid.com";function Fe(t,e,...i){if(t.get("debug")){console.log("AG Grid: "+e,...i)}}function ke(t,...e){ae((()=>console.warn("AG Grid: "+t,...e)),t+e?.join(""))}function Pe(t,...e){ae((()=>console.error("AG Grid: "+t,...e)),t+e?.join(""))}var De=new Set;var Me={};var Te={};var Ee;var Ae=false;var Ie=false;var He=false;function Oe(t){const[e,i]=t.version.split(".")||[];const[s,n]=Ee.split(".")||[];return e===s&&i===n}function Ne(t){if(!Ee){Ee=t.version}const e=t=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${t} Please update all modules to the same version.`;if(!t.version){Pe(e(`'${t.moduleName}' is incompatible.`))}else if(!Oe(t)){Pe(e(`'${t.moduleName}' is version ${t.version} but the other modules are version ${Ee}.`))}const i=t.validate?.();if(i&&!i.isValid){Pe(`${i.message}`)}}function Be(t,e,i=false){if(!i){Ae=true}Ne(t);const s=t.rowModels??["all"];De.add(t);let n;if(e!==void 0){Ie=true;if(Te[e]===void 0){Te[e]={}}n=Te[e]}else{n=Me}for(const e of s){if(n[e]===void 0){n[e]={}}n[e][t.moduleName]=t}if(t.dependsOn){for(const s of t.dependsOn){Be(s,e,i)}}}function Ge(t){delete Te[t]}function Ve(t,e,i){const s=i=>!!Me[i]?.[t]||!!Te[e]?.[i]?.[t];return s(i)||s("all")}function Le(){return Ie}function ze(t,e){const i=Te[t]??{};return[...Object.values(Me["all"]??{}),...Object.values(i["all"]??{}),...Object.values(Me[e]??{}),...Object.values(i[e]??{})]}function $e(){return new Set(De)}function We(){return Ae}function Ue(){return He}var je=class{static register(t){Be(t,void 0)}static registerModules(t){for(const e of t){Be(e,void 0)}}};var Ke="34.3.1";var qe=2e3;var _e=100;var Ze="_version_";var Ye=null;var Qe=`${Re}/javascript-data-grid`;function Je(t){Ye=t}function Xe(t){Qe=t}function ti(t,e,i){return Ye?.(t,e)??[ai(t,e,i)]}function ei(t,e,i,s,n){t(`${s?"warning":"error"} #${e}`,...ti(e,i,n))}function ii(t){if(!t){return String(t)}const e={};for(const i of Object.keys(t)){if(typeof t[i]!=="object"&&typeof t[i]!=="function"){e[i]=t[i]}}return JSON.stringify(e)}function si(t){let e=t;if(t instanceof Error){e=t.toString()}else if(typeof t==="object"){e=ii(t)}return e}function ni(t){return t===void 0?"undefined":t===null?"null":t}function oi(t,e){return`${t}?${e.toString()}`}function ri(t,e,i){const s=Array.from(e.entries()).sort(((t,e)=>e[1].length-t[1].length));let n=oi(t,e);for(const[o,r]of s){if(o===Ze){continue}const s=n.length-i;if(s<=0){break}const l="...";const a=s+l.length;const h=r.length-a>_e?r.slice(0,r.length-a)+l:r.slice(0,_e)+l;e.set(o,h);n=oi(t,e)}return n}function li(t,e){const i=new URLSearchParams;i.append(Ze,Ke);if(e){for(const t of Object.keys(e)){i.append(t,si(e[t]))}}const s=`${Qe}/errors/${t}`;const n=oi(s,i);return n.length<=qe?n:ri(s,i,qe)}var ai=(t,e,i)=>{const s=li(t,e);const n=`${i?i+" \n":""}Visit ${s}`;return`${n}${i?"":" \n  Alternatively register the ValidationModule to see the full message in the console."}`};function hi(...t){ei(ke,t[0],t[1],true)}function ci(...t){ei(Pe,t[0],t[1],false)}function ui(t,e,i){ei(Pe,t,e,false,i)}function di(t,e){const i=e[0];return`error #${i} `+ti(i,e[1],t).join(" ")}function fi(...t){return di(void 0,t)}function gi(t,e){return t.get("rowModelType")===e}function pi(t,e){return gi(t,"clientSide")}function mi(t,e){return gi(t,"serverSide")}function vi(t,e){return t.get("domLayout")===e}function wi(t){return qi(t)!==void 0}function Ci(t){return typeof t.get("getRowHeight")==="function"}function bi(t,e){if(e){return!t.get("enableStrictPivotColumnOrder")}return t.get("maintainColumnOrder")}function yi(t,e,i=false,s){const{gos:n,environment:o}=t;if(s==null){s=o.getDefaultRowHeight()}if(Ci(n)){if(i){return{height:s,estimated:true}}const t={node:e,data:e.data};const o=n.getCallback("getRowHeight")(t);if(Ri(o)){if(o===0){hi(23)}return{height:Math.max(1,o),estimated:false}}}if(e.detail&&n.get("masterDetail")){return Si(n)}const r=n.get("rowHeight");const l=r&&Ri(r)?r:s;return{height:l,estimated:false}}function Si(t){if(t.get("detailRowAutoHeight")){return{height:1,estimated:false}}const e=t.get("detailRowHeight");if(Ri(e)){return{height:e,estimated:false}}return{height:300,estimated:false}}function xi(t){const{environment:e,gos:i}=t;const n=i.get("rowHeight");if(!n||s(n)){return e.getDefaultRowHeight()}const o=e.refreshRowHeightVariable();if(o!==-1){return o}hi(24);return e.getDefaultRowHeight()}function Ri(t){return!isNaN(t)&&typeof t==="number"&&isFinite(t)}function Fi(t,e,i){const s=e[t.getDomDataKey()];return s?s[i]:void 0}function ki(t,e,i,n){const o=t.getDomDataKey();let r=e[o];if(s(r)){r={};e[o]=r}r[i]=n}function Pi(t){if(t.get("ensureDomOrder")){return false}return t.get("animateRows")}function Di(t){return!(t.get("paginateChildRows")||t.get("groupHideOpenParents")||vi(t,"print"))}function Mi(t){const e=t.get("autoGroupColumnDef");return!e?.comparator&&!t.get("treeData")}function Ti(t){const e=t.get("groupAggFiltering");if(typeof e==="function"){return t.getCallback("groupAggFiltering")}if(e===true){return()=>true}return void 0}function Ei(t){return t.get("grandTotalRow")}function Ai(t,e){if(e){return false}return t.get("groupDisplayType")==="groupRows"}function Ii(t,e,i){return!!e.group&&!e.footer&&Ai(t,i)}function Hi(t){const e=t.getCallback("getRowId");if(e===void 0){return e}return t=>{let i=e(t);if(typeof i!=="string"){ae((()=>hi(25,{id:i})),"getRowIdString");i=String(i)}return i}}function Oi(t,e){const i=t.get("groupHideParentOfSingleChild");if(i===true){return true}if(i==="leafGroupsOnly"&&e.leafGroup){return true}if(t.get("groupRemoveSingleChildren")){return true}if(t.get("groupRemoveLowestSingleChildren")&&e.leafGroup){return true}return false}function Ni(t){const e=t.get("maxConcurrentDatasourceRequests");return e>0?e:void 0}function Bi(t){return t?.checkboxes??true}function Gi(t){return t?.mode==="multiRow"&&(t.headerCheckbox??true)}function Vi(t){if(typeof t!=="object"){return void 0}return t.checkboxLocation??"selectionColumn"}function Li(t){return t?.hideDisabledCheckboxes??false}function zi(t){const e=t.get("rowSelection");return typeof e!=="string"}function $i(t){const e=t.get("cellSelection");const i=e!==void 0;return i?!!e:t.get("enableRangeSelection")}function Wi(t){const e=t.get("rowSelection")??"single";if(typeof e==="string"){const e=t.get("suppressRowClickSelection");const i=t.get("suppressRowDeselection");if(e&&i){return false}else if(e){return"enableDeselection"}else if(i){return"enableSelection"}else{return true}}return e.mode==="singleRow"||e.mode==="multiRow"?e.enableClickSelection??false:false}function Ui(t){const e=Wi(t);return e===true||e==="enableSelection"}function ji(t){const e=Wi(t);return e===true||e==="enableDeselection"}function Ki(t){const e=t.get("rowSelection");if(typeof e==="string"){return t.get("isRowSelectable")}return e?.isRowSelectable}function qi(t){const e="beanName"in t&&t.beanName==="gos"?t.get("rowSelection"):t.rowSelection;if(typeof e==="string"){switch(e){case"multiple":return"multiRow";case"single":return"singleRow";default:return}}switch(e?.mode){case"multiRow":case"singleRow":return e.mode;default:return}}function _i(t){const e=qi(t);return e==="multiRow"}function Zi(t){const e=t.get("rowSelection");if(typeof e==="string"){return t.get("rowMultiSelectWithClick")}return e?.enableSelectionWithoutKeys??false}function Yi(t){const e=t.get("rowSelection");if(typeof e==="string"){const e=t.get("groupSelectsChildren");const i=t.get("groupSelectsFiltered");if(e&&i){return"filteredDescendants"}else if(e){return"descendants"}else{return"self"}}return e?.mode==="multiRow"?e.groupSelects:void 0}function Qi(t,e=true){const i=t.get("rowSelection");if(typeof i!=="object"){return e?"all":void 0}return i.mode==="multiRow"?i.selectAll:"all"}function Ji(t){const e=t.get("rowSelection");if(typeof e==="string"){return false}return e?.mode==="multiRow"?e.ctrlASelectsRows??false:false}function Xi(t){const e=Yi(t);return e==="descendants"||e==="filteredDescendants"}function ts(t){const e=t.get("rowSelection");return typeof e==="object"&&e.masterSelects||"self"}function es(t){return t.isModuleRegistered("SetFilter")&&!t.get("suppressSetFilterByDefault")}function is(t){return t.get("columnMenu")==="legacy"}function ss(t){return!is(t)}function ns(t){if(!t||t.length<2){return t}return"on"+t[0].toUpperCase()+t.substring(1)}function os(t,e){return t.addCommon(e)}function rs({gos:t},e){return e.button===2||e.ctrlKey&&t.get("allowContextMenuWithControlKey")}var ls={resizable:true,sortable:true};var as=0;function hs(){return as++}function cs(t){return t instanceof us}var us=class extends re{constructor(e,i,s,n){super();this.colDef=e;this.userProvidedColDef=i;this.colId=s;this.primary=n;this.isColumn=true;this.instanceId=hs();this.autoHeaderHeight=null;this.moving=false;this.resizing=false;this.menuVisible=false;this.lastLeftPinned=false;this.firstRightPinned=false;this.filterActive=false;this.colEventSvc=new t;this.tooltipEnabled=false;this.rowGroupActive=false;this.pivotActive=false;this.aggregationActive=false;this.flex=null;this.colIdSanitised=c(s)}destroy(){super.destroy();this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:t,beans:{sortSvc:e,pinnedCols:i,colFlex:s}}=this;e?.initCol(this);const n=t.hide;if(n!==void 0){this.visible=!n}else{this.visible=!t.initialHide}i?.initCol(this);s?.initCol(this)}setColDef(t,e,i){const s=t.spanRows!==this.colDef.spanRows;this.colDef=t;this.userProvidedColDef=e;this.initMinAndMaxWidths();this.initDotNotation();this.initTooltip();if(s){this.beans.rowSpanSvc?.deregister(this);this.initRowSpan()}this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState();this.initMinAndMaxWidths();this.resetActualWidth("gridInitializing");this.initDotNotation();this.initTooltip();this.initRowSpan();this.addPivotListener()}initDotNotation(){const{gos:t,colDef:{field:e,tooltipField:s}}=this;const n=t.get("suppressFieldDotNotation");this.fieldContainsDots=i(e)&&e.includes(".")&&!n;this.tooltipFieldContainsDots=i(s)&&s.includes(".")&&!n}initMinAndMaxWidths(){const t=this.colDef;this.minWidth=t.minWidth??this.beans.environment.getDefaultColumnMinWidth();this.maxWidth=t.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){if(this.colDef.spanRows){this.beans.rowSpanSvc?.register(this)}}addPivotListener(){const t=this.beans.pivotColDefSvc;const e=this.colDef.pivotValueColumn;if(!t||!e){return}this.addManagedListeners(e,{colDefChanged:e=>{const i=t.recreateColDef(this.colDef);this.setColDef(i,i,e.source)}})}resetActualWidth(t){const e=this.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,true)}calculateColInitialWidth(t){let e;const i=t.width;const s=t.initialWidth;if(i!=null){e=i}else if(s!=null){e=s}else{e=200}return Math.max(Math.min(e,this.maxWidth),this.minWidth)}isEmptyGroup(){return false}isRowGroupDisplayed(t){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,t)??false}isPrimary(){return this.primary}isFilterAllowed(){const t=!!this.colDef.filter;return t}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(t,e){this.colEventSvc.addEventListener(t,e)}__removeEventListener(t,e){this.colEventSvc.removeEventListener(t,e)}addEventListener(t,e){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const i=this.frameworkEventListenerService?.wrap(t,e)??e;this.colEventSvc.addEventListener(t,i)}removeEventListener(t,e){const i=this.frameworkEventListenerService?.unwrap(t,e)??e;this.colEventSvc.removeEventListener(t,i)}createColumnFunctionCallbackParams(t){return os(this.gos,{node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){return this.beans.cellNavigation?.isSuppressNavigable(this,t)??false}isCellEditable(t){return this.beans.editSvc?.isCellEditable({rowNode:t,column:this})??false}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.beans.selectionSvc?.isCellCheckboxSelection(this,t)??false}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){return this.colDef[t]??ls[t]}isColumnFunc(t,e){if(typeof e==="boolean"){return e}if(typeof e==="function"){const i=this.createColumnFunctionCallbackParams(t);const s=e;return s(i)}return false}createColumnEvent(t,e){return os(this.gos,{type:t,column:this,columns:[this],source:e})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return s(this.sort)}isSorting(){return i(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,e){this.oldLeft=this.left;if(this.left!==t){this.left=t;this.dispatchColEvent("leftChanged",e)}}isFilterActive(){return this.filterActive}isHovered(){hi(261);return!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(t,e){if(this.firstRightPinned!==t){this.firstRightPinned=t;this.dispatchColEvent("firstRightPinnedChanged",e)}}setLastLeftPinned(t,e){if(this.lastLeftPinned!==t){this.lastLeftPinned=t;this.dispatchColEvent("lastLeftPinnedChanged",e)}}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,e){const i=t===true;if(this.visible!==i){this.visible=i;this.dispatchColEvent("visibleChanged",e)}this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const t=this.getColDef();return!t.suppressSpanHeaderHeight}getFirstRealParent(){let t=this.getOriginalParent();while(t?.isPadding()){t=t.getOriginalParent()}return t}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t?.isPadding()){return{numberOfParents:0,isSpanningTotal:false}}const e=t.getPaddingLevel()+1;let i=true;while(t){if(!t.isPadding()){i=false;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const e=t!==this.autoHeaderHeight;this.autoHeaderHeight=t;return e}createBaseColDefParams(t){const e=os(this.gos,{node:t,data:t.data,colDef:this.colDef,column:this});return e}getColSpan(t){if(s(this.colDef.colSpan)){return 1}const e=this.createBaseColDefParams(t);const i=this.colDef.colSpan(e);return Math.max(i,1)}getRowSpan(t){if(s(this.colDef.rowSpan)){return 1}const e=this.createBaseColDefParams(t);const i=this.colDef.rowSpan(e);return Math.max(i,1)}setActualWidth(t,e,i=false){t=Math.max(t,this.minWidth);t=Math.min(t,this.maxWidth);if(this.actualWidth!==t){this.actualWidth=t;if(this.flex!=null&&e!=="flex"&&e!=="gridInitializing"){this.flex=null}if(!i){this.fireColumnWidthChangedEvent(e)}}this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.dispatchColEvent("widthChanged",t)}isGreaterThanMax(t){return t>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===true}isAllowValue(){return this.colDef.enableValue===true}isAllowRowGroup(){return this.colDef.enableRowGroup===true}dispatchColEvent(t,e,i){const s=this.createColumnEvent(t,e);if(i){ve(s,i)}this.colEventSvc.dispatchEvent(s)}dispatchStateUpdatedEvent(t){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:t})}};function ds(t){return t instanceof fs}var fs=class extends re{constructor(t,e,i,s){super();this.colGroupDef=t;this.groupId=e;this.padding=i;this.level=s;this.isColumn=false;this.expandable=false;this.instanceId=hs();this.expandableListenerRemoveCallback=null;this.expanded=!!t?.openByDefault}destroy(){if(this.expandableListenerRemoveCallback){this.reset(null,void 0)}super.destroy()}reset(t,e){this.colGroupDef=t;this.level=e;this.originalParent=null;if(this.expandableListenerRemoveCallback){this.expandableListenerRemoveCallback()}this.children=void 0;this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){if(this.children){return this.children.some((t=>t.isVisible()))}return false}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?false:t;this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const t=[];this.addLeafColumns(t);return t}forEachLeafColumn(t){if(!this.children){return}for(const e of this.children){if(cs(e)){t(e)}else if(ds(e)){e.forEachLeafColumn(t)}}}addLeafColumns(t){if(!this.children){return}for(const e of this.children){if(cs(e)){t.push(e)}else if(ds(e)){e.addLeafColumns(t)}}}getColumnGroupShow(){const t=this.colGroupDef;if(!t){return}return t.columnGroupShow}setupExpandable(){this.setExpandable();if(this.expandableListenerRemoveCallback){this.expandableListenerRemoveCallback()}const t=this.onColumnVisibilityChanged.bind(this);for(const e of this.getLeafColumns()){e.__addEventListener("visibleChanged",t)}this.expandableListenerRemoveCallback=()=>{for(const e of this.getLeafColumns()){e.__removeEventListener("visibleChanged",t)}this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding()){return}let t=false;let e=false;let i=false;const s=this.findChildrenRemovingPadding();for(let n=0,o=s.length;n<o;n++){const o=s[n];if(!o.isVisible()){continue}const r=o.getColumnGroupShow();if(r==="open"){t=true;i=true}else if(r==="closed"){e=true;i=true}else{t=true;e=true}}const n=t&&e&&i;if(this.expandable!==n){this.expandable=n;this.dispatchLocalEvent({type:"expandableChanged"})}}findChildrenRemovingPadding(){const t=[];const e=i=>{for(const s of i){const i=ds(s)&&s.isPadding();if(i){e(s.children)}else{t.push(s)}}};e(this.children);return t}onColumnVisibilityChanged(){this.setExpandable()}};var gs={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function ps(t,e,i){const s={};const n=t.gos;Object.assign(s,n.get("defaultColGroupDef"));Object.assign(s,e);n.validateColDef(s,i);return s}var ms=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++){this.existingKeys[t[e]]=true}}getUniqueKey(t,e){t=n(t);let i=0;while(true){let s=t??e;if(s){if(i!==0){s+="_"+i}}else{s=i}if(!this.existingKeys[s]){const e=String(s);if(t&&i>0){hi(273,{providedId:t,usedId:e})}this.existingKeys[e]=true;return e}i++}}};function vs(t){if(!t?.length){return}return t[t.length-1]}function ws(t,e,i){if(t===e){return true}if(!t||!e){return t==null&&e==null}const s=t.length;if(s!==e.length){return false}for(let n=0;n<s;n++){if(t[n]!==e[n]&&!i?.(t[n],e[n])){return false}}return true}function Cs(t,e){if(!t){return}for(const i of t){e(i)}}function bs(t,e){const i=t.indexOf(e);if(i>=0){t.splice(i,1)}}function ys(t,e,i){for(let i=0;i<e.length;i++){bs(t,e[i])}for(let s=e.length-1;s>=0;s--){t.splice(i,0,e[s])}}var Ss="ag-Grid-AutoColumn";var xs="ag-Grid-SelectionColumn";var Rs="ag-Grid-RowNumbersColumn";function Fs(t){const e=[];const i=t=>{for(let s=0;s<t.length;s++){const n=t[s];if(cs(n)){e.push(n)}else if(ds(n)){i(n.getChildren())}}};i(t);return e}function ks(t){return t.reduce(((t,e)=>t+e.getActualWidth()),0)}function Ps(t,e,i){const s={};if(!e){return}Ys(null,e,(t=>{s[t.getInstanceId()]=t}));if(i){Ys(null,i,(t=>{s[t.getInstanceId()]=null}))}const n=Object.values(s).filter((t=>t!=null));t.context.destroyBeans(n)}function Ds(t){const e=t.getId();return e.startsWith(Ss)}function Ms(t){const e=typeof t==="string"?t:"getColId"in t?t.getColId():t.colId;return e?.startsWith(xs)??false}function Ts(t){const e=typeof t==="string"?t:"getColId"in t?t.getColId():t.colId;return e?.startsWith(Rs)??false}function Es(t){return Ms(t)||Ts(t)}function As(t){let e=[];if(t instanceof Array){e=t}else if(typeof t==="string"){e=t.split(",")}return e}function Is(t,e){return ws(t,e,((t,e)=>t.getColId()===e.getColId()))}function Hs(t){t.map={};for(const e of t.list){t.map[e.getId()]=e}}function Os(t){return t==="optionsUpdated"?"gridOptionsChanged":t}function Ns(t,e){const i=t===e;const s=t.getColDef()===e;const n=t.getColId()==e;return i||s||n}var Bs=(t,e)=>(s,n)=>{const o={value1:void 0,value2:void 0};let r=false;if(t){if(t[s]!==void 0){o.value1=t[s];r=true}if(i(n)&&t[n]!==void 0){o.value2=t[n];r=true}}if(!r&&e){if(e[s]!==void 0){o.value1=e[s]}if(i(n)&&e[n]!==void 0){o.value2=e[n]}}return o};var Gs=(t,e)=>{if(ds(t)){t.setupExpandable()}t.originalParent=e};function Vs(t,e=null,i,s,n){const o=new ms;const{existingCols:r,existingGroups:l,existingColKeys:a}=Ls(s);o.addExistingKeys(a);const h=zs(t,e,0,i,r,o,l,n);const{colGroupSvc:c}=t;const u=c?.findMaxDepth(h,0)??0;const d=c?c.balanceColumnTree(h,0,u,o):h;Ys(null,d,Gs);return{columnTree:d,treeDepth:u}}function Ls(t){const e=[];const i=[];const s=[];if(t){Ys(null,t,(t=>{if(ds(t)){const e=t;i.push(e)}else{const i=t;s.push(i.getId());e.push(i)}}))}return{existingCols:e,existingGroups:i,existingColKeys:s}}function zs(t,e,i,s,n,o,r,l){if(!e){return[]}const{colGroupSvc:a}=t;const h=new Array(e.length);for(let c=0;c<h.length;c++){const u=e[c];if(a&&Zs(u)){h[c]=a.createProvidedColumnGroup(s,u,i,n,o,r,l)}else{h[c]=$s(t,s,u,n,o,l)}}return h}function $s(t,e,i,s,n,o){const r=js(i,s);if(r){s?.splice(r.idx,1)}let l=r?.column;if(!l){const s=n.getUniqueKey(i.colId,i.field);const o=Ks(t,i,s);l=new us(o,i,s,e);t.context.createBean(l)}else{const e=Ks(t,i,l.getColId());l.setColDef(e,i,o);Us(t,l,e,o)}t.dataTypeSvc?.addColumnListeners(l);return l}function Ws(t,e,i,s,n,o,r,l){const{sortSvc:a,pinnedCols:h,colFlex:c}=t;if(i!==void 0){e.setVisible(!i,l)}if(a){a.updateColSort(e,s,l);if(n!==void 0){a.setColSortIndex(e,n)}}if(o!==void 0){h?.setColPinned(e,o)}if(r!==void 0){c?.setColFlex(e,r)}}function Us(t,e,i,s){Ws(t,e,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,s);const n=e.getFlex();if(n!=null&&n>0){return}if(i.width!=null){e.setActualWidth(i.width,s)}else{const t=e.getActualWidth();e.setActualWidth(t,s)}}function js(t,e){if(!e){return void 0}for(let i=0;i<e.length;i++){const s=e[i].getUserProvidedColDef();if(!s){continue}const n=t.colId!=null;if(n){if(e[i].getId()===t.colId){return{idx:i,column:e[i]}}continue}const o=t.field!=null;if(o){if(s.field===t.field){return{idx:i,column:e[i]}}continue}if(s===t){return{idx:i,column:e[i]}}}return void 0}function Ks(t,e,i,s){const{gos:n,dataTypeSvc:o}=t;const r={};const l=n.get("defaultColDef");ve(r,l,false,true);const a=qs(t,r,e,i);if(a){_s(t,a,r)}const h=r.cellDataType;ve(r,e,false,true);if(h!==void 0){r.cellDataType=h}const c=n.get("autoGroupColumnDef");const u=Mi(n);if(e.rowGroup&&c&&u){ve(r,{sort:c.sort,initialSort:c.initialSort},false,true)}if(o){o.postProcess(r);o.validateColDef(r)}n.validateColDef(r,i,s);return r}function qs(t,e,i,s){const n=t.dataTypeSvc?.updateColDefAndGetColumnType(e,i,s);const o=i.type??n??e.type;e.type=o;return o?As(o):void 0}function _s(t,e,i){if(!e.length){return}const s=Object.assign({},gs);const n=t.gos.get("columnTypes")||{};for(const t of Object.keys(n)){const e=n[t];if(t in s){hi(34,{key:t})}else{const i=e;if(i.type){hi(35)}s[t]=e}}for(const t of e){const e=s[t.trim()];if(e){ve(i,e,false,true)}else{hi(36,{t})}}}function Zs(t){return t.children!==void 0}function Ys(t,e,i){if(!e){return}for(let s=0;s<e.length;s++){const n=e[s];if(ds(n)){Ys(n,n.getChildren(),i)}i(n,t)}}function Qs(t,e){const i=[];const s=[];const n=[];t.forEach((t=>{const e=t.getColDef().lockPosition;if(e==="right"){n.push(t)}else if(e==="left"||e===true){i.push(t)}else{s.push(t)}}));const o=e.get("enableRtl");if(o){return[...n,...s,...i]}return[...i,...s,...n]}function Js(t,e){let i=true;Ys(null,e,(e=>{if(!ds(e)){return}const s=e;const n=s.getColGroupDef();const o=n?.marryChildren;if(!o){return}const r=[];for(const e of s.getLeafColumns()){const i=t.indexOf(e);r.push(i)}const l=Math.max.apply(Math,r);const a=Math.min.apply(Math,r);const h=l-a;const c=s.getLeafColumns().length-1;if(h>c){i=false}}));return i}function Xs(t,e){if(!t||t.length==0){return void 0}const i=e(t[0]);for(let s=1;s<t.length;s++){if(i!==e(t[s])){return void 0}}return i}function tn(t,e,i){if(!e.length){return}const s=e.length===1?e[0]:null;const n=Xs(e,(t=>t.getPinned()));t.dispatchEvent({type:"columnPinned",pinned:n!=null?n:null,columns:e,column:s,source:i})}function en(t,e,i){if(!e.length){return}const s=e.length===1?e[0]:null;const n=Xs(e,(t=>t.isVisible()));t.dispatchEvent({type:"columnVisible",visible:n,columns:e,column:s,source:i})}function sn(t,e,i,s){t.dispatchEvent({type:e,columns:i,column:i&&i.length==1?i[0]:null,source:s})}function nn(t,e,i,s,n=null){if(e?.length){t.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:i,source:s})}}function on(t,e,s){const{colModel:n,rowGroupColsSvc:o,pivotColsSvc:r,autoColSvc:l,selectionColSvc:a,colAnimation:h,visibleCols:c,pivotResultCols:u,environment:d,valueColsSvc:f,eventSvc:g,gos:p}=t;const m=n.getColDefCols()??[];const v=a?.getColumns();if(!m.length&&!v?.length){return false}if(e?.state&&!e.state.forEach){hi(32);return false}const w=(i,n,l,a,h)=>{if(!i){return}const c=Bs(n,e.defaultState);const u=c("flex").value1;Ws(t,i,c("hide").value1,c("sort").value1,c("sortIndex").value1,c("pinned").value1,u,s);if(u==null){const t=c("width").value1;if(t!=null){const e=i.getColDef().minWidth??d.getDefaultColumnMinWidth();if(e!=null&&t>=e){i.setActualWidth(t,s)}}}if(h||!i.isPrimary()){return}f?.syncColumnWithState(i,s,c);o?.syncColumnWithState(i,s,c,l);r?.syncColumnWithState(i,s,c,a)};const C=(i,h,u)=>{const d=ln(t,s);const f=h.slice();const m={};const v={};const C=[];const b=[];const y=[];let S=0;const x=o?.columns.slice()??[];const R=r?.columns.slice()??[];for(const t of i){const e=t.colId;const i=e.startsWith(Ss);if(i){C.push(t);y.push(t);continue}if(Ms(e)){b.push(t);y.push(t);continue}const s=u(e);if(!s){y.push(t);S+=1}else{w(s,t,m,v,false);bs(f,s)}}const F=t=>w(t,null,m,v,false);f.forEach(F);o?.sortColumns(fn.bind(o,m,x));r?.sortColumns(fn.bind(r,v,R));n.refreshCols(false,s);const k=(t,e,i=[])=>{for(const s of e){const e=t(s.colId);bs(i,e);w(e,s,null,null,true)}i.forEach(F)};k((t=>l?.getColumn(t)??null),C,l?.getColumns()?.slice());k((t=>a?.getColumn(t)??null),b,a?.getColumns()?.slice());cn(e,n,p);c.refresh(s);g.dispatchEvent({type:"columnEverythingChanged",source:s});d();return{unmatchedAndAutoStates:y,unmatchedCount:S}};h?.start();let{unmatchedAndAutoStates:b,unmatchedCount:y}=C(e.state||[],m,(t=>n.getColDefCol(t)));if(b.length>0||i(e.defaultState)){const t=u?.getPivotResultCols()?.list??[];y=C(b,t,(t=>u?.getPivotResultCol(t)??null)).unmatchedCount}h?.finish();return y===0}function rn(t,e){const{colModel:i,autoColSvc:n,selectionColSvc:o,eventSvc:r,gos:l}=t;const a=i.getColDefCols();if(!a?.length){return}const h=i.getColDefColTree();const c=Fs(h);const u=[];let d=1e3;let f=1e3;const g=t=>{const e=hn(t);if(s(e.rowGroupIndex)&&e.rowGroup){e.rowGroupIndex=d++}if(s(e.pivotIndex)&&e.pivot){e.pivotIndex=f++}u.push(e)};n?.getColumns()?.forEach(g);o?.getColumns()?.forEach(g);c?.forEach(g);on(t,{state:u},e);const p=n?.getColumns()??[];const m=o?.getColumns()??[];const v=[...m,...p,...a];const w=v.map((t=>({colId:t.colId})));on(t,{state:w,applyOrder:true},e);r.dispatchEvent(os(l,{type:"columnsReset",source:e}))}function ln(t,e){const{rowGroupColsSvc:i,pivotColsSvc:s,valueColsSvc:n,colModel:o,sortSvc:r,eventSvc:l}=t;const a={rowGroupColumns:i?.columns.slice()??[],pivotColumns:s?.columns.slice()??[],valueColumns:n?.columns.slice()??[]};const h=an(t);const c={};for(const t of h){c[t.colId]=t}return()=>{const n=(t,i,s,n)=>{const o=i.map(n);const r=s.map(n);const a=ws(o,r);if(a){return}const h=new Set(i);for(const t of s){if(!h.delete(t)){h.add(t)}}const c=[...h];l.dispatchEvent({type:t,columns:c,column:c.length===1?c[0]:null,source:e})};const u=t=>{const e=[];o.forAllCols((i=>{const s=c[i.getColId()];if(s&&t(s,i)){e.push(i)}}));return e};const d=t=>t.getColId();n("columnRowGroupChanged",a.rowGroupColumns,i?.columns??[],d);n("columnPivotChanged",a.pivotColumns,s?.columns??[],d);const f=(t,e)=>{const i=t.aggFunc!=null;const s=i!=e.isValueActive();const n=i&&t.aggFunc!=e.getAggFunc();return s||n};const g=u(f);if(g.length>0){sn(l,"columnValueChanged",g,e)}const p=(t,e)=>t.width!=e.getActualWidth();nn(l,u(p),true,e);const m=(t,e)=>t.pinned!=e.getPinned();tn(l,u(m),e);const v=(t,e)=>t.hide==e.isVisible();en(l,u(v),e);const w=(t,e)=>t.sort!=e.getSort()||t.sortIndex!=e.getSortIndex();const C=u(w);if(C.length>0){r?.dispatchSortChangedEvents(e,C)}const b=an(t);dn(h,b,e,o,l)}}function an(t){const{colModel:e,rowGroupColsSvc:i,pivotColsSvc:n}=t;const o=e.getColDefCols();if(s(o)||!e.isAlive()){return[]}const r=i?.columns;const l=n?.columns;const a=[];const h=t=>{const e=t.isRowGroupActive()&&r?r.indexOf(t):null;const i=t.isPivotActive()&&l?l.indexOf(t):null;const s=t.isValueActive()?t.getAggFunc():null;const n=t.getSort()!=null?t.getSort():null;const o=t.getSortIndex()!=null?t.getSortIndex():null;a.push({colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:n,sortIndex:o,aggFunc:s,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:i,flex:t.getFlex()??null})};e.forAllCols((t=>h(t)));const c=new Map(e.getCols().map(((t,e)=>[t.getColId(),e])));a.sort(((t,e)=>{const i=c.has(t.colId)?c.get(t.colId):-1;const s=c.has(e.colId)?c.get(e.colId):-1;return i-s}));return a}function hn(t){const e=(t,e)=>t!=null?t:e!=null?e:null;const i=t.getColDef();const s=e(i.sort,i.initialSort);const n=e(i.sortIndex,i.initialSortIndex);const o=e(i.hide,i.initialHide);const r=e(i.pinned,i.initialPinned);const l=e(i.width,i.initialWidth);const a=e(i.flex,i.initialFlex);let h=e(i.rowGroupIndex,i.initialRowGroupIndex);let c=e(i.rowGroup,i.initialRowGroup);if(h==null&&!c){h=null;c=null}let u=e(i.pivotIndex,i.initialPivotIndex);let d=e(i.pivot,i.initialPivot);if(u==null&&!d){u=null;d=null}const f=e(i.aggFunc,i.initialAggFunc);return{colId:t.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:l,flex:a,rowGroup:c,rowGroupIndex:h,pivot:d,pivotIndex:u,aggFunc:f}}function cn(t,e,i){if(!t.applyOrder||!t.state){return}const s=[];for(const e of t.state){if(e.colId!=null){s.push(e.colId)}}un(e.cols,s,e,i)}function un(t,e,i,s){if(t==null){return}let n=[];const o={};for(const i of e){if(o[i]){continue}const e=t.map[i];if(e){n.push(e);o[i]=true}}let r=0;for(const e of t.list){const t=e.getColId();const i=o[t]!=null;if(i){continue}const s=t.startsWith(Ss);if(s){n.splice(r++,0,e)}else{n.push(e)}}n=Qs(n,s);if(!Js(n,i.getColTree())){hi(39);return}t.list=n}function dn(t,e,i,s,n){const o={};for(const t of e){o[t.colId]=t}const r={};for(const e of t){if(o[e.colId]){r[e.colId]=true}}const l=t.filter((t=>r[t.colId]));const a=e.filter((t=>r[t.colId]));const h=[];a.forEach(((t,e)=>{const i=l?.[e];if(i&&i.colId!==t.colId){const t=s.getCol(i.colId);if(t){h.push(t)}}}));if(!h.length){return}n.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,finished:true,source:i})}var fn=(t,e,i,s)=>{const n=t[i.getId()];const o=t[s.getId()];const r=n!=null;const l=o!=null;if(r&&l){return n-o}if(r){return-1}if(l){return 1}const a=e.indexOf(i);const h=e.indexOf(s);const c=a>=0;const u=h>=0;if(c&&u){return a-h}if(c){return-1}return 1};var gn=class extends re{constructor(){super(...arguments);this.beanName="colModel";this.pivotMode=false;this.ready=false;this.changeEventsDispatching=false}postConstruct(){this.pivotMode=this.gos.get("pivotMode");this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],(t=>this.refreshAll(Os(t.source))));this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this));this.addManagedPropertyListener("pivotMode",(t=>this.setPivotMode(this.gos.get("pivotMode"),Os(t.source))))}createColsFromColDefs(t){const{beans:e}=this;const{valueCache:i,colAutosize:s,rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:r,visibleCols:l,eventSvc:a,groupHierarchyColSvc:h}=e;const c=this.colDefs?ln(e,t):void 0;i?.expire();const u=this.colDefCols?.list;const d=this.colDefCols?.tree;const f=Vs(e,this.colDefs,true,d,t);Ps(e,this.colDefCols?.tree,f.columnTree);const g=f.columnTree;const p=f.treeDepth;const m=Fs(g);const v={};for(const t of m){v[t.getId()]=t}this.colDefCols={tree:g,treeDepth:p,list:m,map:v};this.createColumnsForService([h],this.colDefCols,t);n?.extractCols(t,u);o?.extractCols(t,u);r?.extractCols(t,u);this.ready=true;this.refreshCols(true,t);l.refresh(t);a.dispatchEvent({type:"columnEverythingChanged",source:t});if(c){this.changeEventsDispatching=true;c();this.changeEventsDispatching=false}a.dispatchEvent({type:"newColumnsLoaded",source:t});if(t==="gridInitializing"){s?.applyAutosizeStrategy()}}refreshCols(t,e){if(!this.colDefCols){return}const i=this.cols?.tree;this.saveColOrder();const{autoColSvc:s,selectionColSvc:n,rowNumbersSvc:o,quickFilter:r,pivotResultCols:l,showRowGroupCols:a,rowAutoHeight:h,visibleCols:c,colViewport:u,eventSvc:d}=this.beans;const f=this.selectCols(l,this.colDefCols);this.createColumnsForService([s,n,o],f,e);const g=bi(this.gos,this.showingPivotResult);if(!t||g){this.restoreColOrder(f)}this.positionLockedCols(f);a?.refresh();r?.refreshCols();this.setColSpanActive();h?.setAutoHeightActive(f);c.clear();u.clear();const p=!ws(i,this.cols.tree);if(p){d.dispatchEvent({type:"gridColumnsChanged"})}}createColumnsForService(t,e,i){for(const s of t){if(!s){continue}s.createColumns(e,(t=>{this.lastOrder=t(this.lastOrder);this.lastPivotOrder=t(this.lastPivotOrder)}),i);s.addColumns(e)}}selectCols(t,e){const i=t?.getPivotResultCols()??null;this.showingPivotResult=i!=null;const{map:s,list:n,tree:o,treeDepth:r}=i??e;this.cols={list:n.slice(),map:{...s},tree:o.slice(),treeDepth:r};if(i){const t=i.list.some((t=>this.cols?.map[t.getColId()]!==void 0));if(!t){this.lastPivotOrder=null}}return this.cols}getColsToShow(){if(!this.cols){return[]}const{valueColsSvc:t,selectionColSvc:e,gos:i}=this.beans;const s=this.isPivotMode()&&!this.showingPivotResult;const n=e?.isSelectionColumnEnabled();const o=i.get("rowNumbers");const r=t?.columns;const l=this.cols.list.filter((t=>{const e=Ds(t);if(s){const i=r?.includes(t);return e||i||n&&Ms(t)||o&&Ts(t)}else{return e||t.isVisible()}}));return l}refreshAll(t){if(!this.ready){return}this.refreshCols(false,t);this.beans.visibleCols.refresh(t)}setColsVisible(t,e=false,i){on(this.beans,{state:t.map((t=>({colId:typeof t==="string"?t:t.getColId(),hide:!e})))},i)}restoreColOrder(t){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e){return}const i=e.filter((e=>t.map[e.getId()]!=null));if(i.length===0){return}if(i.length===t.list.length){t.list=i;return}const s=t=>{const e=t.getOriginalParent();if(!e){return false}const i=e.getChildren();if(i.length>1){return true}return s(e)};if(!i.some((t=>s(t)))){const e=new Set(i);for(const s of t.list){if(!e.has(s)){i.push(s)}}t.list=i;return}const n=new Map;for(let t=0;t<i.length;t++){const e=i[t];n.set(e,t)}const o=t.list.filter((t=>!n.has(t)));if(o.length===0){t.list=i;return}const r=(t,e)=>{const i=e?e.getOriginalParent():t.getOriginalParent();if(!i){return null}let s=null;let o=null;for(const r of i.getChildren()){if(r===e||r===t){continue}if(r instanceof us){const t=n.get(r);if(t==null){continue}if(s==null||s<t){s=t;o=r}continue}r.forEachLeafColumn((t=>{const e=n.get(t);if(e==null){return}if(s==null||s<e){s=e;o=t}}))}if(o==null){return r(t,i)}return o};const l=[];const a=new Map;for(const t of o){const e=r(t,null);if(e==null){l.push(t);continue}const i=a.get(e);if(i===void 0){a.set(e,t)}else if(Array.isArray(i)){i.push(t)}else{a.set(e,[i,t])}}const h=new Array(t.list.length);let c=h.length-1;for(let t=l.length-1;t>=0;t--){h[c--]=l[t]}for(let t=i.length-1;t>=0;t--){const e=i[t];const s=a.get(e);if(s){if(Array.isArray(s)){for(let t=s.length-1;t>=0;t--){const e=s[t];h[c--]=e}}else{h[c--]=s}}h[c--]=e}t.list=h}positionLockedCols(t){t.list=Qs(t.list,this.gos)}saveColOrder(){if(this.showingPivotResult){this.lastPivotOrder=this.cols?.list??null}else{this.lastOrder=this.cols?.list??null}}getColumnDefs(t){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],t)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some((t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(t,e){if(t===this.pivotMode){return}this.pivotMode=t;if(!this.ready){return}this.refreshCols(false,e);const{visibleCols:i,eventSvc:s}=this.beans;i.refresh(e);s.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const t=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!t?.length}recreateColumnDefs(t){if(!this.cols){return}this.beans.autoColSvc?.updateColumns(t);const e=Os(t.source);this.createColsFromColDefs(e)}setColumnDefs(t,e){this.colDefs=t;this.createColsFromColDefs(e)}destroy(){Ps(this.beans,this.colDefCols?.tree);super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(t){const{pivotResultCols:e,autoColSvc:i,selectionColSvc:s,groupHierarchyColSvc:n}=this.beans;Cs(this.colDefCols?.list,t);Cs(i?.columns?.list,t);Cs(s?.columns?.list,t);Cs(n?.columns?.list,t);Cs(e?.getPivotResultCols()?.list,t)}getColsForKeys(t){if(!t){return[]}return t.map((t=>this.getCol(t))).filter((t=>t!=null))}getColDefCol(t){if(!this.colDefCols?.list){return null}return this.getColFromCollection(t,this.colDefCols)}getCol(t){if(t==null){return null}return this.getColFromCollection(t,this.cols)}getColById(t){return this.cols?.map[t]??null}getColFromCollection(t,e){if(e==null){return null}const{map:i,list:s}=e;if(typeof t=="string"&&i[t]){return i[t]}for(let e=0;e<s.length;e++){if(Ns(s[e],t)){return s[e]}}const{autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:r}=this.beans;return n?.getColumn(t)??o?.getColumn(t)??r?.getColumn(t)??null}};var pn=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){const e=this.existingIds[t];let i;if(typeof e!=="number"){i=0}else{i=e+1}this.existingIds[t]=i;return i}};function mn(t,e,i){if(i){t.addDestroyFunc((()=>e.destroyBean(i)))}return i??t}var vn=null;function wn(t){return typeof t?.getGui==="function"}var Cn=class{constructor(t){this.cssClassStates={};this.getGui=t}toggleCss(t,e){if(!t){return}if(t.indexOf(" ")>=0){const i=(t||"").split(" ");if(i.length>1){for(const t of i){this.toggleCss(t,e)}return}}const i=this.cssClassStates[t]!==e;if(i&&t.length){this.getGui()?.classList.toggle(t,e);this.cssClassStates[t]=e}}};var bn=0;var yn=class extends se{constructor(t,e){super();this.suppressDataRefValidation=false;this.displayed=true;this.visible=true;this.compId=bn++;this.cssManager=new Cn((()=>this.eGui));this.componentSelectors=new Map((e??[]).map((t=>[t.selector,t])));if(t){this.setTemplate(t)}}preConstruct(){this.wireTemplate(this.getGui());const t="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const e of this.css??[]){this.beans.environment.addGlobalCSS(e,t)}}wireTemplate(t,e){if(t&&this.gos){this.applyElementsToComponent(t);this.createChildComponentsFromTags(t,e)}}getCompId(){return this.compId}getDataRefAttribute(t){if(t.getAttribute){return t.getAttribute(At)}return null}applyElementsToComponent(t,e,i,s=null){if(e===void 0){e=this.getDataRefAttribute(t)}if(e){const n=this[e];if(n===vn){this[e]=s??t}else{const t=i?.[e];if(!this.suppressDataRefValidation&&!t){throw new Error(`data-ref: ${e} on ${this.constructor.name} with ${n}`)}}}}createChildComponentsFromTags(t,e){const i=[];for(const e of t.childNodes??[]){i.push(e)}for(const s of i){if(!(s instanceof HTMLElement)){continue}const i=this.createComponentFromElement(s,(t=>{const e=t.getGui();if(e){for(const t of s.attributes??[]){e.setAttribute(t.name,t.value)}}}),e);if(i){if(i.addItems&&s.children.length){this.createChildComponentsFromTags(s,e);const t=Array.prototype.slice.call(s.children);i.addItems(t)}this.swapComponentForNode(i,t,s)}else if(s.childNodes){this.createChildComponentsFromTags(s,e)}}}createComponentFromElement(t,e,i){const s=t.nodeName;const n=this.getDataRefAttribute(t);const o=s.indexOf("AG-")===0;const r=o?this.componentSelectors.get(s):null;let l=null;if(r){const t=i&&n?i[n]:void 0;l=new r.component(t);l.setParentComponent(this);this.createBean(l,null,e)}else if(o){throw new Error(`selector: ${s}`)}this.applyElementsToComponent(t,n,i,l);return l}swapComponentForNode(t,e,i){const s=t.getGui();e.replaceChild(s,i);e.insertBefore(document.createComment(i.nodeName),s);this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const e=this.gos.get("tabIndex");if(!t){t=[]}if(!t.length){t.push(this.getGui())}for(const i of t){i.setAttribute("tabindex",e.toString())}}setTemplate(t,e,i){let s;if(typeof t==="string"||t==null){s=mt(t)}else{s=Ot(t)}this.setTemplateFromElement(s,e,i)}setTemplateFromElement(t,e,i,s=false){this.eGui=t;this.suppressDataRefValidation=s;if(e){for(let t=0;t<e.length;t++){const i=e[t];this.componentSelectors.set(i.selector,i)}}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,e){let i=e;if(t==null){return null}if(!i){i=this.eGui}if(Dt(t)){return{element:t,parent:i}}return{element:t.getGui(),parent:i}}prependChild(t,e){const{element:i,parent:s}=this.getContainerAndElement(t,e)||{};if(!i||!s){return}s.insertAdjacentElement("afterbegin",i)}appendChild(t,e){const{element:i,parent:s}=this.getContainerAndElement(t,e)||{};if(!i||!s){return}s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,e={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:i}=e;et(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,e={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:i}=e;tt(this.eGui,t,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){if(this.parentComponent){this.parentComponent=void 0}super.destroy()}addGuiEventListener(t,e,i){this.eGui.addEventListener(t,e,i);this.addDestroyFunc((()=>this.eGui.removeEventListener(t,e)))}addCss(t){this.cssManager.toggleCss(t,true)}removeCss(t){this.cssManager.toggleCss(t,false)}toggleCss(t,e){this.cssManager.toggleCss(t,e)}registerCSS(t){this.css||(this.css=[]);this.css.push(t)}};var Sn=class extends yn{};function xn(t){return typeof t==="object"&&!!t.component}function Rn(t,e){return new Fn((i=>{i(window.setInterval(t,e))}))}var Fn=class t{constructor(t){this.status=0;this.resolution=null;this.waiters=[];t((t=>this.onDone(t)),(t=>this.onReject(t)))}static all(e){return e.length?new t((t=>{let i=e.length;const s=new Array(i);e.forEach(((e,n)=>{e.then((e=>{s[n]=e;i--;if(i===0){t(s)}}))}))})):t.resolve()}static resolve(e=null){return new t((t=>t(e)))}then(e){return new t((t=>{if(this.status===1){t(e(this.resolution))}else{this.waiters.push((i=>t(e(i))))}}))}onDone(t){this.status=1;this.resolution=t;for(const e of this.waiters){e(t)}}onReject(t){}};function kn(t){if(!t){return false}return t.prototype&&"getGui"in t.prototype}function Pn(t,e,i,s){const{name:n}=i;let o;let r;let l;let a;let h;let c;if(e){const i=e;const u=i[n+"Selector"];const d=u?u(s):null;const f=e=>{if(typeof e==="string"){o=e}else if(e!=null&&e!==true){const i=t.isFrameworkComponent(e);if(i){l=e}else{r=e}}};if(d){f(d.component);a=d.params;h=d.popup;c=d.popupPosition}else{f(i[n])}}return{compName:o,jsComp:r,fwComp:l,paramsFromSelector:a,popupFromSelector:h,popupPositionFromSelector:c}}var Dn=class extends re{constructor(){super(...arguments);this.beanName="userCompFactory"}wireBeans(t){this.agCompUtils=t.agCompUtils;this.registry=t.registry;this.frameworkCompWrapper=t.frameworkCompWrapper;this.gridOptions=t.gridOptions}getCompDetailsFromGridOptions(t,e,i,s=false){return this.getCompDetails(this.gridOptions,t,e,i,s)}getCompDetails(t,e,i,s,n=false){const{name:o,cellRenderer:r}=e;let{compName:l,jsComp:a,fwComp:h,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}=Pn(this.beans.frameworkOverrides,t,e,s);let f;let g;const p=t=>{const e=this.registry.getUserComponent(o,t);if(e){a=!e.componentFromFramework?e.component:void 0;h=e.componentFromFramework?e.component:void 0;f=e.params;g=e.processParams}};if(l!=null){p(l)}if(a==null&&h==null&&i!=null){p(i)}if(a&&r&&!kn(a)){a=this.agCompUtils?.adaptFunction(e,a)}if(!a&&!h){const{validation:t}=this.beans;if(n&&(l!==i||!i)){if(l){if(!t?.isProvidedUserComp(l)){ci(50,{compName:l})}}else if(i){if(!t){ci(260,{...this.gos.getModuleErrorParams(),propName:o,compName:i})}}else{ci(216,{name:o})}}else if(i&&!t){ci(146,{comp:i})}return}const m=this.mergeParams(t,e,s,c,f,g);const v=a==null;const w=a??h;return{componentFromFramework:v,componentClass:w,params:m,type:e,popupFromSelector:u,popupPositionFromSelector:d,newAgStackInstance:()=>this.newAgStackInstance(w,v,m,e)}}newAgStackInstance(t,e,i,s){const n=!e;let o;if(n){o=new t}else{o=this.frameworkCompWrapper.wrap(t,s.mandatoryMethods,s.optionalMethods,s)}this.createBean(o);const r=o.init?.(i);if(r==null){return Fn.resolve(o)}return r.then((()=>o))}mergeParams(t,e,i,s=null,n,o){const r={...i,...n};const l=t;const a=l?.[e.name+"Params"];if(typeof a==="function"){const t=a(i);ve(r,t)}else if(typeof a==="object"){ve(r,a)}ve(r,s);return o?o(r):r}};var Mn={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]};var Tn={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]};var En={name:"headerComponent",optionalMethods:["refresh"]};var An={name:"innerHeaderComponent"};var In={name:"innerHeaderGroupComponent"};var Hn={name:"headerGroupComponent"};var On={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:true};var Nn={name:"loadingCellRenderer",cellRenderer:true};var Bn={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]};var Gn={name:"loadingOverlayComponent",optionalMethods:["refresh"]};var Vn={name:"noRowsOverlayComponent",optionalMethods:["refresh"]};var Ln={name:"tooltipComponent"};var zn={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]};var $n={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]};var Wn={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:true};var Un={name:"loadingCellRenderer",cellRenderer:true};var jn={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:true};var Kn={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:true};function qn(t,e){return t.getCompDetailsFromGridOptions(Tn,"agDragAndDropImage",e,true)}function _n(t,e,i){return t.getCompDetails(e,En,"agColumnHeader",i)}function Zn(t,e,i){return t.getCompDetails(e,An,void 0,i)}function Yn(t,e){const i=e.columnGroup.getColGroupDef();return t.getCompDetails(i,Hn,"agColumnGroupHeader",e)}function Qn(t,e,i){return t.getCompDetails(e,In,void 0,i)}function Jn(t,e){return t.getCompDetailsFromGridOptions(Wn,void 0,e,true)}function Xn(t,e){return t.getCompDetailsFromGridOptions(Un,"agLoadingCellRenderer",e,true)}function to(t,e){return t.getCompDetailsFromGridOptions(jn,"agGroupRowRenderer",e,true)}function eo(t,e){return t.getCompDetailsFromGridOptions(Kn,"agDetailCellRenderer",e,true)}function io(t,e,i){return t.getCompDetails(e,On,void 0,i)}function so(t,e,i){return t.getCompDetails(e,Nn,"agSkeletonCellRenderer",i,true)}function no(t,e,i){return t.getCompDetails(e,Bn,"agCellEditor",i,true)}function oo(t,e,i,s){const n=e.filter;if(xn(n)){e={filter:n.component,filterParams:e.filterParams}}return t.getCompDetails(e,zn,s,i,true)}function ro(t,e,i){return t.getCompDetails(e,Mn,"agDateInput",i,true)}function lo(t,e){return t.getCompDetailsFromGridOptions(Gn,"agLoadingOverlay",e,true)}function ao(t,e){return t.getCompDetailsFromGridOptions(Vn,"agNoRowsOverlay",e,true)}function ho(t,e){return t.getCompDetails(e.colDef,Ln,"agTooltipComponent",e,true)}function co(t,e,i,s){return t.getCompDetails(e,$n,s,i)}function uo(t,e){return Pn(t,e,zn)}function fo(t,e,i){return t.mergeParams(e,zn,i)}function go(t){const e=t;const i=e?.getFrameworkComponentInstance!=null;return i?e.getFrameworkComponentInstance():t}function po(t){return typeof t==="object"&&!!t.getComp}var mo={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"};var vo=class extends yn{isPopup(){return true}setParentComponent(t){t.addCss("ag-has-popup");super.setParentComponent(t)}destroy(){const t=this.parentComponent;const e=t?.isAlive();if(e){t.getGui().classList.remove("ag-has-popup")}super.destroy()}};var wo;var Co;var bo;var yo;var So;var xo;var Ro;function Fo(){if(wo===void 0){wo=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}return wo}function ko(){if(Co===void 0){Co=/(firefox)/i.test(navigator.userAgent)}return Co}function Po(){if(bo===void 0){bo=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)}return bo}function Do(){if(yo===void 0){yo=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}return yo}function Mo(t){if(!t){return null}const e=t.tabIndex;const i=t.getAttribute("tabIndex");if(e===-1&&(i===null||i===""&&!ko())){return null}return e.toString()}function To(){if(Ro!==void 0){return Ro}if(!document.body){return-1}let t=1e6;const e=ko()?6e6:1e9;const i=document.createElement("div");document.body.appendChild(i);while(true){const s=t*2;i.style.height=s+"px";if(s>e||i.clientHeight!==s){break}else{t=s}}i.remove();Ro=t;return t}function Eo(){if(xo==null){Ao()}return xo}function Ao(){const t=document.body;const e=document.createElement("div");e.style.width=e.style.height="100px";e.style.opacity="0";e.style.overflow="scroll";e.style.msOverflowStyle="scrollbar";e.style.position="absolute";t.appendChild(e);let i=e.offsetWidth-e.clientWidth;if(i===0&&e.clientWidth===0){i=null}if(e.parentNode){e.remove()}if(i!=null){xo=i;So=i===0}}function Io(){if(So==null){Ao()}return So}var Ho="T";var Oo=new RegExp(`[${Ho} ]`);var No=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${Ho}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Bo(t,e){return t.toString().padStart(e,"0")}function Go(t,e=true,i=Ho){if(!t){return null}let s=[t.getFullYear(),t.getMonth()+1,t.getDate()].map((t=>Bo(t,2))).join("-");if(e){s+=i+[t.getHours(),t.getMinutes(),t.getSeconds()].map((t=>Bo(t,2))).join(":")}return s}function Vo(t,e=true){if(!t){return null}if(e){return[String(t.getFullYear()),String(t.getMonth()+1),Bo(t.getDate(),2),Bo(t.getHours(),2),`:${Bo(t.getMinutes(),2)}`,`:${Bo(t.getSeconds(),2)}`]}return[t.getFullYear(),t.getMonth()+1,Bo(t.getDate(),2)].map(String)}var Lo=t=>{if(t>3&&t<21){return"th"}const e=t%10;switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};var zo=["January","February","March","April","May","June","July","August","September","October","November","December"];var $o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Wo(t,e){if(e==null){return Go(t,false)}const i=Bo(t.getFullYear(),4);const s={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>zo[t.getMonth()],MMM:()=>zo[t.getMonth()].slice(0,3),MM:()=>Bo(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${Lo(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${Lo(t.getDate())}`,DD:()=>Bo(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>$o[t.getDay()],ddd:()=>$o[t.getDay()].slice(0,3),dd:()=>$o[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${Lo(t.getDay())}`,d:()=>`${t.getDay()}`};const n=new RegExp(Object.keys(s).join("|"),"g");return e.replace(n,(t=>{if(t in s){return s[t]()}return t}))}function Uo(t,e=false){return!!Ko(t,e)}function jo(t){return Uo(t,true)}function Ko(t,e=false,i){if(!t){return null}if(!i&&!No.test(t)){return null}const[s,n]=t.split(Oo);if(!s){return null}const o=s.split("-").map((t=>Number.parseInt(t,10)));if(o.filter((t=>!isNaN(t))).length!==3){return null}const[r,l,a]=o;const h=new Date(r,l-1,a);if(h.getFullYear()!==r||h.getMonth()!==l-1||h.getDate()!==a){return null}if(!n&&e){return null}if(!n||n==="00:00:00"){return h}const[c,u,d]=n.split(":").map((t=>Number.parseInt(t,10)));if(c>=0&&c<24){h.setHours(c)}else if(e){return null}if(u>=0&&u<60){h.setMinutes(u)}else if(e){return null}if(d>=0&&d<60){h.setSeconds(d)}else if(e){return null}return h}function qo(t){const{inputValue:e,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n}=t;let o=(i??[]).map(((t,i)=>({value:t,relevance:_o(e,t),idx:i})));o.sort(((t,e)=>t.relevance-e.relevance));if(s){o=o.filter((t=>t.relevance<Math.max(t.value.length,e.length)))}if(o.length>0&&n&&n>0){const t=o[0].relevance;const e=t*n;o=o.filter((t=>e-t.relevance<0))}const r=[];const l=[];for(const t of o){r.push(t.value);l.push(t.idx)}return{values:r,indices:l}}function _o(t,e){if(t.length<e.length){[t,e]=[e,t]}let i=[];let s=[];const n=t.length;const o=e.length;for(let t=0;t<=o;t++){i[t]=t}let r=0;for(let l=1;l<=n;l++){s[0]=l;for(let a=1;a<=o;a++){const o=t[l-1];const h=e[a-1];if(o.toLocaleLowerCase()===h.toLocaleLowerCase()){++r;if(o===h){++r}if(l>1&&a>1){if(t[l-2].toLocaleLowerCase()===e[a-2].toLocaleLowerCase()){++r;if(t[l-2]===e[a-2]){++r}}}if(l<n/2-10){++r}s[a]=i[a-1]}else{const t=s[a-1];const e=i[a];const n=i[a-1];s[a]=1+Math.min(t,e,n)}}[i,s]=[s,i]}return i[o]/(r+1)}function Zo(t){if(t.altKey||t.ctrlKey||t.metaKey){return false}const e=t.key?.length===1;return e}var Yo=false;var Qo=0;function Jo(t){if(Qo>0){return}t.addEventListener("keydown",tr);t.addEventListener("mousedown",tr)}function Xo(t){if(Qo>0){return}t.removeEventListener("keydown",tr);t.removeEventListener("mousedown",tr)}function tr(t){const e=Yo;const i=t.type==="keydown";if(i){if(t.ctrlKey||t.metaKey||t.altKey){return}}if(e===i){return}Yo=i}function er(t){const e=f(t);Jo(e);Qo++;return()=>{Qo--;Xo(e)}}function ir(){return Yo}function sr(t,e,i=false){const s=Q;let n=J;if(e){n+=", "+e}if(i){n+=', [tabindex="-1"]'}const o=Array.prototype.slice.apply(t.querySelectorAll(s)).filter((t=>pt(t)));const r=Array.prototype.slice.apply(t.querySelectorAll(n));if(!r.length){return o}const l=(t,e)=>t.filter((t=>e.indexOf(t)===-1));return l(o,r)}function nr(t,e=false,i=false,s=false){const n=sr(t,s?".ag-tab-guard":null,i);const o=e?vs(n):n[0];if(o){o.focus({preventScroll:true});return true}return false}function or(t,e,i,s){const n=sr(e,i?':not([tabindex="-1"])':null);const o=d(t);let r;if(i){r=n.findIndex((t=>t.contains(o)))}else{r=n.indexOf(o)}const l=r+(s?-1:1);if(l<0||l>=n.length){return null}return n[l]}function rr(t,e=5){let i=0;while(t&&Mo(t)===null&&++i<=e){t=t.parentElement}if(Mo(t)===null){return null}return t}var lr=`.ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}`;var ar=class extends yn{constructor(t,e,i){super(e,i);this.labelSeparator="";this.labelAlignment="left";this.disabled=false;this.label="";this.config=t||{};this.registerCSS(lr)}postConstruct(){this.addCss("ag-labeled");this.eLabel.classList.add("ag-label");const{labelSeparator:t,label:e,labelWidth:i,labelAlignment:s,disabled:n}=this.config;if(n!=null){this.setDisabled(n)}if(t!=null){this.setLabelSeparator(t)}if(e!=null){this.setLabel(e)}if(i!=null){this.setLabelWidth(i)}this.setLabelAlignment(s||this.labelAlignment);this.refreshLabel()}refreshLabel(){const{label:t,eLabel:e}=this;dt(e);if(typeof t==="string"){e.innerText=t+this.labelSeparator}else if(t){e.appendChild(t)}if(t===""){tt(e,false);x(e,"presentation")}else{tt(e,true);x(e,null)}}setLabelSeparator(t){if(this.labelSeparator===t){return this}this.labelSeparator=t;if(this.label!=null){this.refreshLabel()}return this}getLabelId(){const t=this.eLabel;t.id=t.id||`ag-${this.getCompId()}-label`;return t.id}getLabel(){return this.label}setLabel(t){if(this.label===t){return this}this.label=t;this.refreshLabel();return this}setLabelAlignment(t){const e=this.getGui();const i=e.classList;i.toggle("ag-label-align-left",t==="left");i.toggle("ag-label-align-right",t==="right");i.toggle("ag-label-align-top",t==="top");return this}setLabelEllipsis(t){this.eLabel.classList.toggle("ag-label-ellipsis",t);return this}setLabelWidth(t){if(this.label==null){return this}Rt(this.eLabel,t);return this}setDisabled(t){t=!!t;const e=this.getGui();it(e,t);e.classList.toggle("ag-disabled",t);this.disabled=t;return this}isDisabled(){return!!this.disabled}};var hr=class extends ar{constructor(t,e,i,s){super(t,e,i);this.className=s}postConstruct(){super.postConstruct();const{width:t,value:e,onValueChange:i}=this.config;if(t!=null){this.setWidth(t)}if(e!=null){this.setValue(e)}if(i!=null){this.onValueChange(i)}if(this.className){this.addCss(this.className)}this.refreshAriaLabelledBy()}setLabel(t){super.setLabel(t);this.refreshAriaLabelledBy();return this}refreshAriaLabelledBy(){const t=this.getAriaElement();const e=this.getLabelId();const i=this.getLabel();if(i==null||i==""||F(t)!==null){P(t,"")}else{P(t,e??"")}}setAriaLabel(t){k(this.getAriaElement(),t);this.refreshAriaLabelledBy();return this}onValueChange(t){this.addManagedListeners(this,{fieldValueChanged:()=>t(this.getValue())});return this}getWidth(){return this.getGui().clientWidth}setWidth(t){Ft(this.getGui(),t);return this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){if(this.value===t){return this}this.previousValue=this.value;this.value=t;if(!e){this.dispatchLocalEvent({type:"fieldValueChanged"})}return this}};function cr(t){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:t,ref:"eInput",cls:"ag-input-field-input"}]}]}}var ur=class extends hr{constructor(t,e,i="text",s="input"){super(t,t?.template??cr(s),[],e);this.inputType=i;this.displayFieldTag=s;this.eLabel=vn;this.eWrapper=vn;this.eInput=vn}postConstruct(){super.postConstruct();this.setInputType(this.inputType);const{eLabel:t,eWrapper:e,eInput:i,className:s}=this;t.classList.add(`${s}-label`);e.classList.add(`${s}-input-wrapper`);i.classList.add(`${s}-input`);this.addCss("ag-input-field");i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:n,inputWidth:o}=this.config;if(n!=null){this.setInputName(n)}if(o!=null){this.setInputWidth(o)}this.addInputListeners();this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:t=>this.setValue(t.target.value)})}setInputType(t){if(this.displayFieldTag==="input"){this.inputType=t;Mt(this.eInput,"type",t)}}getInputElement(){return this.eInput}setInputWidth(t){Rt(this.eWrapper,t);return this}setInputName(t){this.getInputElement().setAttribute("name",t);return this}getFocusableElement(){return this.eInput}setMaxLength(t){const e=this.eInput;e.maxLength=t;return this}setInputPlaceholder(t){Mt(this.eInput,"placeholder",t);return this}setInputAriaLabel(t){k(this.eInput,t);this.refreshAriaLabelledBy();return this}setDisabled(t){it(this.eInput,t);return super.setDisabled(t)}setAutoComplete(t){if(t===true){Mt(this.eInput,"autocomplete",null)}else{const e=typeof t==="string"?t:"off";Mt(this.eInput,"autocomplete",e)}return this}};var dr=class extends ur{constructor(t,e="ag-checkbox",i="checkbox"){super(t,e,i);this.labelAlignment="right";this.selected=false;this.readOnly=false;this.passive=false}postConstruct(){super.postConstruct();const{readOnly:t,passive:e}=this.config;if(typeof t==="boolean"){this.setReadOnly(t)}if(typeof e==="boolean"){this.setPassive(e)}}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)});this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?true:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t);this.eInput.disabled=t;this.readOnly=t}setDisabled(t){this.eWrapper.classList.toggle("ag-disabled",t);return super.setDisabled(t)}toggle(){if(this.eInput.disabled){return}const t=this.isSelected();const e=this.getNextValue();if(this.passive){this.dispatchChange(e,t)}else{this.setValue(e)}}getValue(){return this.isSelected()}setValue(t,e){this.refreshSelectedClass(t);this.setSelected(t,e);return this}setName(t){const e=this.getInputElement();e.name=t;return this}isSelected(){return this.selected}setSelected(t,e){if(this.isSelected()===t){return}this.previousValue=this.isSelected();t=this.selected=typeof t==="boolean"?t:void 0;const i=this.eInput;i.checked=t;i.indeterminate=t===void 0;if(!e){this.dispatchChange(this.selected,this.previousValue)}}dispatchChange(t,e,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:t,previousValue:e,event:i});const s=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:t,previousValue:e})}onCheckboxClick(t){if(this.passive||this.eInput.disabled){return}const e=this.isSelected();const i=this.selected=t.target.checked;this.refreshSelectedClass(i);this.dispatchChange(i,e,t)}refreshSelectedClass(t){const e=this.eWrapper.classList;e.toggle("ag-checked",t===true);e.toggle("ag-indeterminate",t==null)}};var fr={selector:"AG-CHECKBOX",component:dr};var gr=class extends dr{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){if(this.eInput.disabled){return}if(!this.isSelected()){this.setValue(true)}}addInputListeners(){super.addInputListeners();this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(t){const e=this.eInput;if(t.selected&&t.name&&e.name&&e.name===t.name&&t.id&&e.id!==t.id){this.setValue(false,true)}}};var pr=class extends ur{constructor(t,e="ag-text-field",i="text"){super(t,e,i)}postConstruct(){super.postConstruct();if(this.config.allowedCharPattern){this.preventDisallowedCharacters()}}setValue(t,e){const s=this.eInput;if(s.value!==t){s.value=i(t)?t:""}return super.setValue(t,e)}setStartValue(t){this.setValue(t,true)}preventDisallowedCharacters(){const t=new RegExp(`[${this.config.allowedCharPattern}]`);const e=e=>{if(!Zo(e)){return}if(e.key&&!t.test(e.key)){e.preventDefault()}};this.addManagedListeners(this.eInput,{keydown:e,paste:e=>{const i=e.clipboardData?.getData("text");if(i?.split("").some((e=>!t.test(e)))){e.preventDefault()}}})}};var mr={selector:"AG-INPUT-TEXT-FIELD",component:pr};var vr=class extends ur{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){const i=super.setValue(t,e);this.eInput.value=t;return i}setCols(t){this.eInput.cols=t;return this}setRows(t){this.eInput.rows=t;return this}};var wr={selector:"AG-INPUT-TEXT-AREA",component:vr};var Cr=class extends pr{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct();const t=this.eInput;this.addManagedListeners(t,{blur:()=>{const e=Number.parseFloat(t.value);const i=isNaN(e)?"":this.normalizeValue(e.toString());if(this.value!==i){this.setValue(i)}},wheel:this.onWheel.bind(this)});t.step="any";const{precision:e,min:i,max:s,step:n}=this.config;if(typeof e==="number"){this.setPrecision(e)}if(typeof i==="number"){this.setMin(i)}if(typeof s==="number"){this.setMax(s)}if(typeof n==="number"){this.setStep(n)}}onWheel(t){if(d(this.beans)===this.eInput){t.preventDefault()}}normalizeValue(t){if(t===""){return""}if(this.precision!=null){t=this.adjustPrecision(t)}return t}adjustPrecision(t,e){const i=this.precision;if(i==null){return t}if(e){const e=Number.parseFloat(t).toFixed(i);return Number.parseFloat(e).toString()}const s=String(t).split(".");if(s.length>1){if(s[1].length<=i){return t}else if(i>0){return`${s[0]}.${s[1].slice(0,i)}`}}return s[0]}setMin(t){if(this.min===t){return this}this.min=t;Mt(this.eInput,"min",t);return this}setMax(t){if(this.max===t){return this}this.max=t;Mt(this.eInput,"max",t);return this}setPrecision(t){this.precision=t;return this}setStep(t){if(this.step===t){return this}this.step=t;Mt(this.eInput,"step",t);return this}setValue(t,e){return this.setValueOrInputValue((t=>super.setValue(t,e)),(()=>this),t)}setStartValue(t){return this.setValueOrInputValue((t=>super.setValue(t,true)),(t=>{this.eInput.value=t}),t)}setValueOrInputValue(t,e,s){if(i(s)){let i=this.isScientificNotation(s);if(i&&this.eInput.validity.valid){return t(s)}if(!i){s=this.adjustPrecision(s);const t=this.normalizeValue(s);i=s!=t}if(i){return e(s)}}return t(s)}getValue(){const t=this.eInput;if(!t.validity.valid){return void 0}const e=t.value;if(this.isScientificNotation(e)){return this.adjustPrecision(e,true)}return super.getValue()}isScientificNotation(t){return typeof t==="string"&&t.includes("e")}};var br={selector:"AG-INPUT-NUMBER-FIELD",component:Cr};var yr=class extends pr{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct();const t=Fo();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{if(this.isDisabled()||t){return}this.eInput.focus()}});this.eInput.step="any"}onWheel(t){if(d(this.beans)===this.eInput){t.preventDefault()}}setMin(t){const e=t instanceof Date?Go(t??null,!!this.includeTime)??void 0:t;if(this.min===e){return this}this.min=e;Mt(this.eInput,"min",e);return this}setMax(t){const e=t instanceof Date?Go(t??null,!!this.includeTime)??void 0:t;if(this.max===e){return this}this.max=e;Mt(this.eInput,"max",e);return this}setStep(t){if(this.step===t){return this}this.step=t;Mt(this.eInput,"step",t);return this}setIncludeTime(t){if(this.includeTime===t){return this}this.includeTime=t;super.setInputType(t?"datetime-local":"date");if(t){this.setStep(1)}return this}getDate(){if(!this.eInput.validity.valid){return void 0}return Ko(this.getValue())??void 0}setDate(t,e){this.setValue(Go(t??null,this.includeTime),e)}};var Sr={selector:"AG-INPUT-DATE-FIELD",component:yr};var xr=`.ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}`;var Rr="ag-active-item";var Fr=(t,e)=>({tag:"div",cls:`ag-list-item ag-${t}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:e}]});var kr=class extends yn{constructor(t,e,i){super(Fr(t,e));this.label=e;this.value=i;this.eText=vn}postConstruct(){this.createTooltip();this.addEventListeners()}setHighlighted(t){const e=this.getGui();e.classList.toggle(Rr,t);K(e,t);this.dispatchLocalEvent({type:"itemHighlighted",highlighted:t})}getHeight(){return this.getGui().clientHeight}setIndex(t,e){const i=this.getGui();N(i,t);O(i,e)}createTooltip(){const t={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>St(this.eText)};const e=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",false,t,this));if(e){this.tooltipFeature=e}}addEventListeners(){const t=this.getParentComponent();if(!t){return}this.addGuiEventListener("mouseover",(()=>{t.highlightItem(this)}));this.addGuiEventListener("mousedown",(e=>{e.preventDefault();e.stopPropagation();t.setValue(this.value)}))}};var Pr=class extends yn{constructor(t="default"){super({tag:"div",cls:`ag-list ag-${t}-list`});this.cssIdentifier=t;this.options=[];this.listItems=[];this.highlightedItem=null;this.registerCSS(xr)}postConstruct(){const t=this.getGui();this.addManagedElementListeners(t,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(t){const e=t.key;switch(e){case mo.ENTER:if(!this.highlightedItem){this.setValue(this.getValue())}else{const t=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(t)}break;case mo.DOWN:case mo.UP:t.preventDefault();this.navigate(e);break;case mo.PAGE_DOWN:case mo.PAGE_UP:case mo.PAGE_HOME:case mo.PAGE_END:t.preventDefault();this.navigateToPage(e);break}}addOptions(t){for(const e of t){this.addOption(e)}return this}addOption(t){const{value:e,text:i}=t;const s=i??e;this.options.push({value:e,text:s});this.renderOption(e,s);this.updateIndices();return this}clearOptions(){this.options=[];this.reset(true);for(const t of this.listItems){t.destroy()}dt(this.getGui());this.listItems=[];this.refreshAriaRole()}setValue(t,e){if(this.value===t){this.fireItemSelected();return this}if(t==null){this.reset(e);return this}const i=this.options.findIndex((e=>e.value===t));if(i!==-1){const t=this.options[i];this.value=t.value;this.displayValue=t.text;this.highlightItem(this.listItems[i]);if(!e){this.fireChangeEvent()}}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const t=this.options.findIndex((t=>t.value===this.value));if(t!==-1){this.highlightItem(this.listItems[t])}}highlightItem(t){const e=t.getGui();if(!pt(e)){return}this.clearHighlighted();t.setHighlighted(true);this.highlightedItem=t;const i=this.getGui();const{scrollTop:s,clientHeight:n}=i;const{offsetTop:o,offsetHeight:r}=e;if(o+r>s+n||o<s){e.scrollIntoView({block:"nearest"})}}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip();super.destroy()}reset(t){this.value=null;this.displayValue=null;this.clearHighlighted();if(!t){this.fireChangeEvent()}}clearHighlighted(){this.highlightedItem?.setHighlighted(false);this.highlightedItem=null}renderOption(t,e){const i=new kr(this.cssIdentifier,e,t);i.setParentComponent(this);const s=this.createManagedBean(i);this.listItems.push(s);this.getGui().appendChild(s.getGui())}navigate(t){const e=t===mo.DOWN;let i;const{listItems:s,highlightedItem:n}=this;if(!n){i=e?s[0]:vs(s)}else{const t=s.indexOf(n);let o=t+(e?1:-1);o=Math.min(Math.max(o,0),s.length-1);i=s[o]}this.highlightItem(i)}navigateToPage(t){const{listItems:e,highlightedItem:i}=this;if(!i||e.length===0){return}const s=e.indexOf(i);const n=this.options.length-1;const o=e[0].getHeight();const r=Math.floor(this.getGui().clientHeight/o);let l=-1;if(t===mo.PAGE_HOME){l=0}else if(t===mo.PAGE_END){l=n}else if(t===mo.PAGE_DOWN){l=Math.min(s+r,n)}else if(t===mo.PAGE_UP){l=Math.max(s-r,0)}if(l===-1){return}this.highlightItem(e[l])}refreshAriaRole(){x(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const t=this.listItems;const e=t.length;t.forEach(((t,i)=>{t.setIndex(i+1,e)}))}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"});this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}};var Dr=`.ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}`;var Mr={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]};var Tr=class extends hr{constructor(t){super(t,t?.template||Mr,t?.agComponents||[],t?.className);this.isPickerDisplayed=false;this.skipClick=false;this.pickerGap=4;this.hideCurrentPicker=null;this.eLabel=vn;this.eWrapper=vn;this.eDisplayField=vn;this.eIcon=vn;this.registerCSS(Dr);this.ariaRole=t?.ariaRole;this.onPickerFocusIn=this.onPickerFocusIn.bind(this);this.onPickerFocusOut=this.onPickerFocusOut.bind(this);if(!t){return}const{pickerGap:e,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=t;if(e!=null){this.pickerGap=e}this.variableWidth=!!s;if(i!=null){this.setPickerMaxHeight(i)}if(n!=null){this.setPickerMinWidth(n)}if(o!=null){this.setPickerMaxWidth(o)}}postConstruct(){super.postConstruct();this.setupAria();const t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);const e=this.getAriaElement();this.addManagedElementListeners(e,{keydown:this.onKeyDown.bind(this)});this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const t=this.beans.iconSvc.createIconNoSpan(i);if(t){this.eIcon.appendChild(t)}}if(s!=null){this.setInputWidth(s)}}setupAria(){const t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString());H(t,false);if(this.ariaRole){x(t,this.ariaRole)}}onLabelOrWrapperMouseDown(t){if(t){const e=this.getFocusableElement();if(e!==this.eWrapper&&t?.target===e){return}t.preventDefault();this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=false;return}if(this.isDisabled()){return}if(this.isPickerDisplayed){this.hidePicker()}else{this.showPicker()}}onKeyDown(t){switch(t.key){case mo.UP:case mo.DOWN:case mo.ENTER:case mo.SPACE:t.preventDefault();this.onLabelOrWrapperMouseDown();break;case mo.ESCAPE:if(this.isPickerDisplayed){t.preventDefault();t.stopPropagation();if(this.hideCurrentPicker){this.hideCurrentPicker()}}break}}showPicker(){this.isPickerDisplayed=true;if(!this.pickerComponent){this.pickerComponent=this.createPickerComponent()}const t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn);t.addEventListener("focusout",this.onPickerFocusOut);this.hideCurrentPicker=this.renderAndPositionPicker();this.toggleExpandedStyles(true)}renderAndPositionPicker(){const t=this.pickerComponent.getGui();if(!this.gos.get("suppressScrollWhenPopupsAreOpen")){[this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}})}const e=this.getLocaleTextFunc();const{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=true},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:l,variableWidth:a,beans:h,eWrapper:c}=this;const u={modal:n,eChild:t,closeOnEsc:true,closedCallback:()=>{const t=g(h);this.beforeHidePicker();if(t&&this.isAlive()){this.getFocusableElement().focus()}},ariaLabel:e(i,s),anchorToElement:c};t.style.position="absolute";const d=h.popupSvc;const f=d.addPopup(u);if(a){if(r){t.style.minWidth=r}t.style.width=Pt(at(c));if(l){t.style.maxWidth=l}}else{Rt(t,l??at(c))}const p=o??`${ot(d.getPopupParent())}px`;t.style.setProperty("max-height",p);this.alignPickerToComponent();return f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent){return}const{pickerGap:t,config:{pickerType:e},beans:{popupSvc:i,gos:s},eWrapper:n,pickerComponent:o}=this;const r=s.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:e,eventSource:n,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:true,nudgeY:t})}beforeHidePicker(){if(this.destroyMouseWheelFunc){this.destroyMouseWheelFunc();this.destroyMouseWheelFunc=void 0}this.toggleExpandedStyles(false);const t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn);t.removeEventListener("focusout",this.onPickerFocusOut);this.isPickerDisplayed=false;this.pickerComponent=void 0;this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive()){return}const e=this.getAriaElement();H(e,t);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",t);i.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(true)}onPickerFocusOut(t){if(!this.pickerComponent?.getGui().contains(t.relatedTarget)){this.togglePickerHasFocus(false)}}togglePickerHasFocus(t){if(!this.pickerComponent){return}this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){if(this.hideCurrentPicker){this.hideCurrentPicker();this.dispatchLocalEvent({type:"pickerHidden"})}}setInputWidth(t){Rt(this.eWrapper,t);return this}getFocusableElement(){return this.eWrapper}setPickerGap(t){this.pickerGap=t;return this}setPickerMinWidth(t){if(typeof t==="number"){t=`${t}px`}this.minPickerWidth=t==null?void 0:t;return this}setPickerMaxWidth(t){if(typeof t==="number"){t=`${t}px`}this.maxPickerWidth=t==null?void 0:t;return this}setPickerMaxHeight(t){if(typeof t==="number"){t=`${t}px`}this.maxPickerHeight=t==null?void 0:t;return this}destroy(){this.hidePicker();super.destroy()}};var Er=`.ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}`;var Ar=class extends Tr{constructor(t){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...t});this.registerCSS(Er)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",false,{shouldDisplayTooltip:yt((()=>this.eDisplayField)),getGui:()=>this.getGui()}));super.postConstruct();this.createListComponent();this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:t,value:e,placeholder:i}=this.config;if(t!=null){this.addOptions(t)}if(e!=null){this.setValue(e,true)}if(i&&e==null){this.eDisplayField.textContent=i}this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(t){if(!this.eWrapper.contains(t.relatedTarget)){this.hidePicker()}}createListComponent(){const t=this.createBean(new Pr("select"));this.listComponent=t;t.setParentComponent(this);const e=t.getAriaElement();const i=`ag-select-list-${t.getCompId()}`;e.setAttribute("id",i);_(this.getAriaElement(),e);t.addManagedElementListeners(t.getGui(),{mousedown:t=>{t?.preventDefault()}});t.addManagedListeners(t,{selectedItem:()=>{this.hidePicker();this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{if(!this.listComponent){return}this.setValue(this.listComponent.getValue(),false,true);this.hidePicker()}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip();super.beforeHidePicker()}onKeyDown(t){const{key:e}=t;if(e===mo.TAB){this.hidePicker()}switch(e){case mo.ENTER:case mo.UP:case mo.DOWN:case mo.PAGE_UP:case mo.PAGE_DOWN:case mo.PAGE_HOME:case mo.PAGE_END:t.preventDefault();if(this.isPickerDisplayed){this.listComponent?.handleKeyDown(t)}else{super.onKeyDown(t)}break;case mo.ESCAPE:super.onKeyDown(t);break;case mo.SPACE:if(this.isPickerDisplayed){t.preventDefault()}else{super.onKeyDown(t)}break}}showPicker(){const t=this.listComponent;if(!t){return}super.showPicker();t.refreshHighlighted()}addOptions(t){for(const e of t){this.addOption(e)}return this}addOption(t){this.listComponent.addOption(t);return this}clearOptions(){this.listComponent?.clearOptions();this.setValue(void 0,true);return this}setValue(t,e,i){const{listComponent:s,config:{placeholder:n},eDisplayField:o,tooltipFeature:r}=this;if(this.value===t||!s){return this}if(!i){s.setValue(t,true)}const l=s.getValue();if(l===this.getValue()){return this}let a=s.getDisplayValue();if(a==null&&n){a=n}o.textContent=a;r?.setTooltipAndRefresh(a??null);return super.setValue(t,e)}destroy(){this.listComponent=this.destroyBean(this.listComponent);super.destroy()}};var Ir={selector:"AG-SELECT",component:Ar};var Hr=`:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}`;var Or=typeof window!=="object"||!window?.document?.fonts?.forEach;var Nr=(t,e,i,s,n,o)=>{if(Or){return}if(s){t=`@layer ${CSS.escape(s)} { ${t} }`}let r=zr.map.get(e);if(!r){r=[];zr.map.set(e,r)}if(r.some((e=>e.css===t))){return}const l=document.createElement("style");if(o){l.setAttribute("nonce",o)}l.dataset.agGlobalCss=i;l.textContent=t;const a={css:t,el:l,priority:n};let h;for(const t of r){if(t.priority>n){break}h=t}if(h){h.el.insertAdjacentElement("afterend",l);const t=r.indexOf(h);r.splice(t+1,0,a)}else{e.insertBefore(l,e.querySelector(":not(title, meta)"));r.push(a)}};var Br=(t,e,i,s)=>{Nr(Hr,t,"shared",e,0,i);s?.forEach(((s,n)=>s.forEach((s=>Nr(s,t,n,e,0,i)))))};var Gr=t=>{zr.grids.add(t)};var Vr=t=>{zr.grids.delete(t);if(zr.grids.size===0){zr.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]")){t.remove()}}};var Lr;var zr=(Lr=typeof window==="object"?window:{}).agStyleInjectionState??(Lr.agStyleInjectionState={map:new WeakMap,grids:new Set});var $r=t=>new jr(t);var Wr="$default";var Ur=0;var jr=class{constructor({feature:t,params:e,modeParams:i={},css:s,cssImports:n}){this.feature=t;this.css=s;this.cssImports=n;this.modeParams={[Wr]:{...i[Wr]??{},...e??{}},...i}}use(t,e,i){let s=this._inject;if(s==null){let{css:t}=this;if(t){const e=`ag-theme-${this.feature??"part"}-${++Ur}`;if(typeof t==="function"){t=t()}t=`:where(.${e}) {\n${t}\n}\n`;for(const e of this.cssImports??[]){t=`@import url(${JSON.stringify(e)});\n${t}`}s={css:t,class:e}}else{s=false}this._inject=s}if(s&&t){Nr(s.css,t,s.class,e,1,i)}return s?s.class:false}};var Kr=t=>t.replace(/[A-Z]/g,(t=>`-${t}`)).toLowerCase();var qr=t=>`--ag-${Kr(t)}`;var _r=t=>`var(${qr(t)})`;var Zr=(t,e,i)=>Math.max(e,Math.min(i,t));var Yr=t=>{const e=new Map;return i=>{const s=i;if(!e.has(s)){e.set(s,t(i))}return e.get(s)}};var Qr=t=>({ref:"accentColor",mix:t});var Jr=t=>({ref:"foregroundColor",mix:t});var Xr=t=>({ref:"foregroundColor",mix:t,onto:"backgroundColor"});var tl=t=>({ref:"foregroundColor",mix:t,onto:"headerBackgroundColor"});var el={ref:"backgroundColor"};var il={ref:"foregroundColor"};var sl={ref:"accentColor"};var nl={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Jr(.15),chromeBackgroundColor:Xr(.02),browserColorScheme:"light"};var ol={...nl,textColor:il,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Qr(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:el,dragAndDropImageBorder:true,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:sl,toggleButtonOffBackgroundColor:Xr(.3),toggleButtonSwitchBackgroundColor:el,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:true,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}};var rl=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"];var ll=Yr((t=>{t=t.toLowerCase();return rl.find((e=>t.endsWith(e.toLowerCase())))??"length"}));var al=t=>{if(typeof t==="object"&&t?.ref){return _r(t.ref)}if(typeof t==="string"){return t}if(typeof t==="number"){return String(t)}return false};var hl=t=>{if(typeof t==="string"){return t}if(t&&"ref"in t){const e=_r(t.ref);if(t.mix==null){return e}const i=t.onto?_r(t.onto):"transparent";return`color-mix(in srgb, ${i}, ${e} ${Zr(t.mix*100,0,100)}%)`}return false};var cl=al;var ul=t=>{if(typeof t==="string"){return t}if(typeof t==="number"){return`${t}px`}if(t&&"calc"in t){const e=t.calc.replace(/ ?[*/+] ?/g," $& ");return`calc(${e.replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,(t=>t[0]==="-"?t:" "+_r(t)+" "))})`}if(t&&"ref"in t){return _r(t.ref)}return false};var dl=al;var fl=(t,e)=>{if(typeof t==="string"){return t}if(t===true){return fl({},e)}if(t===false){return e==="columnBorder"?fl({color:"transparent"},e):"none"}if(t&&"ref"in t){return _r(t.ref)}return pl(t.style??"solid")+" "+ul(t.width??{ref:"borderWidth"})+" "+hl(t.color??{ref:"borderColor"})};var gl=t=>{if(typeof t==="string"){return t}if(t===false){return"none"}if(t&&"ref"in t){return _r(t.ref)}return[ul(t.offsetX??0),ul(t.offsetY??0),ul(t.radius??0),ul(t.spread??0),hl(t.color??{ref:"foregroundColor"})].join(" ")};var pl=al;var ml=t=>{if(typeof t==="string"){return t.includes(",")?t:vl(t)}if(t&&"googleFont"in t){return ml(t.googleFont)}if(t&&"ref"in t){return _r(t.ref)}if(Array.isArray(t)){return t.map((t=>{if(typeof t==="object"&&"googleFont"in t){t=t.googleFont}return vl(t)})).join(", ")}return false};var vl=t=>/^[\w-]+$|\w\(/.test(t)?t:JSON.stringify(t);var wl=al;var Cl=t=>{if(typeof t==="string"){return t}if(t&&"url"in t){return`url(${JSON.stringify(t.url)})`}if(t&&"svg"in t){return Cl({url:`data:image/svg+xml,${encodeURIComponent(t.svg)}`})}if(t&&"ref"in t){return _r(t.ref)}return false};var bl=(t,e,i)=>{if(typeof t==="string"){return t}if(typeof t==="number"){if(t>=10){i.warn(104,{value:t,param:e})}return`${t}s`}if(t&&"ref"in t){return _r(t.ref)}return false};var yl={color:hl,colorScheme:cl,length:ul,scale:dl,border:fl,borderStyle:pl,shadow:gl,image:Cl,fontFamily:ml,fontWeight:wl,duration:bl};var Sl=(t,e,i)=>{const s=ll(t);return yl[s](e,t,i)};var xl=t=>new Rl(t);var Rl=class t{constructor(t,e=[]){this.themeLogger=t;this.parts=e}withPart(e){if(typeof e==="function"){e=e()}if(!(e instanceof jr)){this.themeLogger.preInitErr(259,"Invalid part",{part:e});return this}return new t(this.themeLogger,[...this.parts,e])}withoutPart(t){return this.withPart($r({feature:t}))}withParams(t,e=Wr){return this.withPart($r({modeParams:{[e]:t}}))}_startUse({styleContainer:t,cssLayer:e,nonce:i,loadThemeGoogleFonts:s,moduleCss:n}){if(Or){return}Dl();Br(t,e,i,n);const o=kl(this);if(o.length>0){for(const t of o){if(s){Ml(t,i)}}}for(const s of this.parts){s.use(t,e,i)}}_getCssClass(){return this._cssClassCache??(this._cssClassCache=Fl(this.parts).map((t=>t.use(void 0,void 0,void 0))).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const e={[Wr]:{...ol}};for(const t of Fl(this.parts)){for(const i of Object.keys(t.modeParams)){const s=t.modeParams[i];if(s){const t=e[i]??(e[i]={});const n=new Set;for(const e of Object.keys(s)){const i=s[e];if(i!==void 0){t[e]=i;n.add(e)}}if(i===Wr){for(const t of Object.keys(e)){const i=e[t];if(t!==Wr){for(const t of n){delete i[t]}}}}}}}this._paramsCache=t=e}return t}_getPerInstanceCss(t){const e="##SELECTOR##";let i=this._paramsCssCache;if(!i){let t="";let s="";const n=this._getModeParams();for(const e of Object.keys(n)){const i=n[e];if(e!==Wr){const i=typeof CSS==="object"?CSS.escape(e):e;const n=`:where([data-ag-theme-mode="${i}"]) & {\n`;t+=n;s+=n}for(const e of Object.keys(i).sort()){const n=i[e];const o=Sl(e,n,this.themeLogger);if(o===false){this.themeLogger.error(107,{key:e,value:n})}else{const i=qr(e);const n=i.replace("--ag-","--ag-inherited-");t+=`\t${i}: var(${n}, ${o});\n`;s+=`\t${n}: var(${i});\n`}}if(e!==Wr){t+="}\n";s+="}\n"}}let o=`${e} {\n${t}}\n`;o+=`:has(> ${e}):not(${e}) {\n${s}}\n`;this._paramsCssCache=i=o}return i.replaceAll(e,`:where(.${t})`)}};var Fl=t=>{const e=new Map;for(const i of t){e.set(i.feature,i)}const i=[];for(const s of t){if(!s.feature||e.get(s.feature)===s){i.push(s)}}return i};var kl=t=>{const e=new Set;const i=t=>{if(Array.isArray(t)){t.forEach(i)}else{const i=t?.googleFont;if(typeof i==="string"){e.add(i)}}};const s=Object.values(t._getModeParams());const n=s.flatMap((t=>Object.values(t)));n.forEach(i);return Array.from(e).sort()};var Pl=false;var Dl=()=>{if(Pl){return}Pl=true;for(const t of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]'))){t.remove()}};var Ml=async(t,e)=>{const i=`@import url('https://${Tl}/css2?family=${encodeURIComponent(t)}:wght@100;200;300;400;500;600;700;800;900&display=swap');\n`;Nr(i,document.head,`googleFont:${t}`,void 0,0,e)};var Tl="fonts.googleapis.com";var El=1;var Al=class{constructor(t){this.beans={};this.createdBeans=[];this.destroyed=false;this.instanceId=El++;if(!t?.beanClasses){return}this.beanDestroyComparator=t.beanDestroyComparator;this.init(t)}init(t){this.id=t.id;this.beans.context=this;this.destroyCallback=t.destroyCallback;for(const e of Object.keys(t.providedBeanInstances)){this.beans[e]=t.providedBeanInstances[e]}for(const e of t.beanClasses){const t=new e;if(t.beanName){this.beans[t.beanName]=t}else{console.error(`Bean ${e.name} is missing beanName`)}this.createdBeans.push(t)}for(const e of t.derivedBeans??[]){const{beanName:t,bean:i}=e(this);this.beans[t]=i;this.createdBeans.push(i)}if(t.beanInitComparator){this.createdBeans.sort(t.beanInitComparator)}this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(t,e){this.initBeans([t],e);return t}initBeans(t,e){const i=this.beans;for(const e of t){e.preWireBeans?.(i);e.wireBeans?.(i)}for(const e of t){e.preConstruct?.()}if(e){t.forEach(e)}for(const e of t){e.postConstruct?.()}}getBeans(){return this.beans}getBean(t){return this.beans[t]}getId(){return this.id}destroy(){if(this.destroyed){return}this.destroyed=true;const t=this.getBeanInstances();if(this.beanDestroyComparator){t.sort(this.beanDestroyComparator)}this.destroyBeans(t);this.beans={};this.createdBeans=[];this.destroyCallback?.()}destroyBean(t){t?.destroy?.()}destroyBeans(t){if(t){for(let e=0;e<t.length;e++){this.destroyBean(t[e])}}return[]}isDestroyed(){return this.destroyed}};var Il=0;var Hl=class extends se{constructor(){super(...arguments);this.beanName="environment";this.paramsClass=`ag-theme-params-${++Il}`;this.globalCSS=[]}wireBeans(t){this.eRootDiv=t.eRootDiv}postConstruct(){const{gos:t,eRootDiv:e}=this;t.setInstanceDomData(e);this.eStyleContainer=t.get("themeStyleContainer")??(e.getRootNode()===document?document.head:e);this.cssLayer=t.get("themeCssLayer");this.styleNonce=t.get("styleNonce");this.addManagedPropertyListener("theme",(()=>this.handleThemeChange()));this.handleThemeChange();this.initVariables();this.addDestroyFunc((()=>Vr(this)));this.mutationObserver=new MutationObserver((()=>{this.fireStylesChangedEvent("themeChanged")}));this.addDestroyFunc((()=>this.mutationObserver.disconnect()))}applyThemeClasses(t,e=[]){const{theme:i}=this;let s;if(i){s=`${this.paramsClass} ${i._getCssClass()}`}else{s=this.applyLegacyThemeClasses()}for(const e of Array.from(t.classList)){if(e.startsWith("ag-theme-")){t.classList.remove(e)}}if(s){const i=t.className;t.className=`${i}${i?" ":""}${s}${e?.length?" "+e.join(" "):""}`}}applyLegacyThemeClasses(){let t="";this.mutationObserver.disconnect();let e=this.eRootDiv;while(e){let i=false;for(const s of Array.from(e.classList)){if(s.startsWith("ag-theme-")){i=true;t=t?`${t} ${s}`:s}}if(i){this.mutationObserver.observe(e,{attributes:true,attributeFilter:["class"]})}e=e.parentElement}return t}addGlobalCSS(t,e){if(this.theme){Nr(t,this.eStyleContainer,e,this.cssLayer,0,this.styleNonce)}else{this.globalCSS.push([t,e])}}handleThemeChange(){const{gos:t,theme:e}=this;const i=t.get("theme");let s;if(i==="legacy"){s=void 0}else{const t=i??this.getDefaultTheme();if(t instanceof Rl){s=t}else{this.themeError(t)}}if(s!==e){this.handleNewTheme(s)}this.postProcessThemeChange(s,i)}handleNewTheme(t){const{gos:e,eRootDiv:i,globalCSS:s}=this;const n=this.getAdditionalCss();if(t){Gr(this);Br(this.eStyleContainer,this.cssLayer,this.styleNonce,n);for(const[t,e]of s){Nr(t,this.eStyleContainer,e,this.cssLayer,0,this.styleNonce)}s.length=0}this.theme=t;t?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=Ot({tag:"style"});const t=e.get("styleNonce");if(t){o.setAttribute("nonce",t)}i.appendChild(o)}if(!Or){o.textContent=t?._getPerInstanceCss(this.paramsClass)||""}this.applyThemeClasses(i);this.fireStylesChangedEvent("themeChanged")}};var Ol=class extends se{constructor(){super(...arguments);this.beanName="registry"}registerDynamicBeans(t){if(t){this.dynamicBeans??(this.dynamicBeans={});for(const e of Object.keys(t)){this.dynamicBeans[e]=t[e]}}}createDynamicBean(t,e,...i){if(!this.dynamicBeans){throw new Error(this.getDynamicError(t,true))}const s=this.dynamicBeans[t];if(s==null){if(e){throw new Error(this.getDynamicError(t,false))}return void 0}return new s(...i)}};var Nl=class extends se{constructor(){super(...arguments);this.beanName="eventSvc";this.eventServiceType="global";this.globalSvc=new t}addListener(t,e,i){this.globalSvc.addEventListener(t,e,i)}removeListener(t,e,i){this.globalSvc.removeEventListener(t,e,i)}addGlobalListener(t,e=false){this.globalSvc.addGlobalListener(t,e)}removeGlobalListener(t,e=false){this.globalSvc.removeGlobalListener(t,e)}dispatchEvent(t){this.globalSvc.dispatchEvent(this.gos.addCommon(t))}dispatchEventOnce(t){this.globalSvc.dispatchEventOnce(this.gos.addCommon(t))}};var Bl=class extends se{constructor(t,e){super();this.ctrl=t;if(e){this.beans=e}}postConstruct(){this.refreshTooltip()}setBrowserTooltip(t,e){const i="title";const s=this.ctrl.getGui();if(!s){return}if(t!=null&&(t!=""||e)){s.setAttribute(i,t)}else{s.removeAttribute(i)}}updateTooltipText(){const{getTooltipValue:t}=this.ctrl;if(t){this.tooltip=t()}}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const t=this.beans.registry.createDynamicBean("tooltipStateManager",true,this.ctrl,(()=>this.tooltip));if(t){this.tooltipManager=this.createBean(t,this.beans.context)}}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(t){this.tooltip=t;this.refreshTooltip()}refreshTooltip(t){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips");this.updateTooltipText();if(this.browserTooltips){this.setBrowserTooltip(this.tooltip);this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)}else{this.setBrowserTooltip(t?"":null,t);this.createTooltipFeatureIfNeeded()}}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context);super.destroy()}};var Gl=1e3;var Vl=1e3;var Ll=100;var zl;var $l=false;var Wl=class extends se{constructor(t,e){super();this.tooltipCtrl=t;this.getTooltipValue=e;this.interactionEnabled=false;this.isInteractingWithTooltip=false;this.state=0;this.tooltipInstanceCount=0;this.tooltipMouseTrack=false}wireBeans(t){this.popupSvc=t.popupSvc}postConstruct(){if(this.gos.get("tooltipInteraction")){this.interactionEnabled=true}this.tooltipTrigger=this.getTooltipTrigger();this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.tooltipCtrl.getGui();if(this.tooltipTrigger===0){this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)})}if(this.tooltipTrigger===1){this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)})}this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)});if(!this.interactionEnabled){this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}}getGridOptionsTooltipDelay(t){const e=this.gos.get(t);return Math.max(200,e)}getTooltipDelay(t){if(t==="show"){return this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay")}return this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing();super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");if(!t||t==="hover"){return 0}return 1}onMouseEnter(t){if(this.interactionEnabled&&this.interactiveTooltipTimeoutId){this.unlockService();this.startHideTimeout()}if(Do()){return}if($l){this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),Ll)}else{this.prepareToShowTooltip(t)}}onMouseMove(t){if(this.lastMouseEvent){this.lastMouseEvent=t}if(this.tooltipMouseTrack&&this.state===2&&this.tooltipComp){this.positionTooltip()}}onMouseDown(){this.setToDoNothing()}onMouseLeave(){if(this.interactionEnabled){this.lockService()}else{this.setToDoNothing()}}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){const e=t.relatedTarget;const i=this.tooltipCtrl.getGui();const s=this.tooltipComp?.getGui();if(this.isInteractingWithTooltip||i.contains(e)||this.interactionEnabled&&s?.contains(e)){return}this.setToDoNothing()}onKeyDown(){if(this.isInteractingWithTooltip){this.isInteractingWithTooltip=false}this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||$l){return}let e=0;if(t){e=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")}this.lastMouseEvent=t||null;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),e);this.state=1}isLastTooltipHiddenRecently(){const t=Date.now();const e=zl;return t-e<Gl}setToDoNothing(t){if(!t&&this.state===2){this.hideTooltip()}if(this.onBodyScrollEventCallback){this.onBodyScrollEventCallback();this.onBodyScrollEventCallback=void 0}this.clearEventHandlers();if(this.onDocumentKeyDownCallback){this.onDocumentKeyDownCallback();this.onDocumentKeyDownCallback=void 0}this.clearTimeouts();this.state=0;this.lastMouseEvent=null}showTooltip(){const t=this.getTooltipValue();const e=this.tooltipCtrl;if(!i(t)||e.shouldDisplayTooltip&&!e.shouldDisplayTooltip()){this.setToDoNothing();return}const s=this.gos.addCommon({location:e.getLocation?.()??"UNKNOWN",value:t,hideTooltipCallback:()=>this.hideTooltip(true),...e.getAdditionalParams?.()});this.state=2;this.tooltipInstanceCount++;const n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(s,n)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip){return}if(this.tooltipComp){this.destroyTooltipComp();zl=Date.now()}this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()});if(t){this.isInteractingWithTooltip=false}this.setToDoNothing(true)}newTooltipComponentCallback(t,e){const i=this.state!==2||this.tooltipInstanceCount!==t;if(i){this.destroyBean(e);return}const s=e.getGui();this.tooltipComp=e;if(!s.classList.contains("ag-tooltip")){s.classList.add("ag-tooltip-custom")}if(this.tooltipTrigger===0){s.classList.add("ag-tooltip-animate")}if(this.interactionEnabled){s.classList.add("ag-tooltip-interactive")}const n=this.getLocaleTextFunc();const o=this.popupSvc?.addPopup({eChild:s,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(o){this.tooltipPopupDestroyFunc=o.hideFunc}this.positionTooltip();if(this.tooltipTrigger===1){const t=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:t});this.setEventHandlers(t)}if(this.interactionEnabled){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)});[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(f(this.beans),{keydown:t=>{if(!s.contains(t?.target)){this.onKeyDown()}}});if(this.tooltipTrigger===1){[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)})}}this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:s,parentGui:this.tooltipCtrl.getGui()});this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=true;this.unlockService()}onTooltipMouseLeave(){if(this.isTooltipFocused()){return}this.isInteractingWithTooltip=false;this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=true}isTooltipFocused(){const t=this.tooltipComp?.getGui();const e=d(this.beans);return!!t&&t.contains(e)}onTooltipFocusOut(t){const e=this.tooltipCtrl.getGui();if(this.isTooltipFocused()){return}this.isInteractingWithTooltip=false;if(e.contains(t.relatedTarget)){this.startHideTimeout()}else{this.hideTooltip()}}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};if(this.lastMouseEvent){this.popupSvc?.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent})}else{this.popupSvc?.positionPopupByComponent({...t,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:true,nudgeY:5})}}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc;const e=this.tooltipComp;const i=this.tooltipTrigger===0?Vl:0;window.setTimeout((()=>{t();this.destroyBean(e)}),i);this.clearTooltipListeners();this.tooltipPopupDestroyFunc=void 0;this.tooltipComp=void 0}clearTooltipListeners(){for(const t of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener]){if(t){t()}}this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){$l=true;this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService();this.setToDoNothing()}),Ll)}unlockService(){$l=false;this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout();this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){if(!this.showTooltipTimeoutId){return}window.clearTimeout(this.showTooltipTimeoutId);this.showTooltipTimeoutId=void 0}clearHideTimeout(){if(!this.hideTooltipTimeoutId){return}window.clearTimeout(this.hideTooltipTimeoutId);this.hideTooltipTimeoutId=void 0}clearInteractiveTimeout(){if(!this.interactiveTooltipTimeoutId){return}window.clearTimeout(this.interactiveTooltipTimeoutId);this.interactiveTooltipTimeoutId=void 0}clearTimeouts(){this.clearShowTimeout();this.clearHideTimeout();this.clearInteractiveTimeout()}};var Ul=class extends Bl{constructor(t,e,i){super(t,i);this.highlightTracker=e;this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct();this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",(({currentValue:t})=>{this.setTooltipMode(t)}));this.setTooltipMode(this.gos.get("tooltipTrigger"));this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(t){if(this.tooltipMode!==1){return}if(t.highlighted){this.attemptToShowTooltip()}else{this.attemptToHideTooltip()}}setTooltipMode(t="focus"){this.tooltipMode=t==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight);super.destroy()}};var jl=0;var Kl=200;var ql=class extends se{constructor(){super(...arguments);this.beanName="popupSvc";this.popupList=[]}getPopupParent(){const t=this.gos.get("popupParent");if(t){return t}return this.getDefaultPopupParent()}positionPopupUnderMouseEvent(t){const{ePopup:e,nudgeX:i,nudgeY:s,skipObserver:n}=t;this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:true,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t,t.type,t.ePopup,null,t.mouseEvent)})}calculatePointerAlign(t){const e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){const{ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:l="over",type:a}=t;const h=o.getBoundingClientRect();const c=this.getParentRect();this.setAlignedTo(o,e);const u=()=>{let i=h.left-c.left;if(r==="right"){i-=e.offsetWidth-h.width}let n;if(l==="over"){n=h.top-c.top;this.setAlignedStyles(e,"over")}else{this.setAlignedStyles(e,"under");const i=this.shouldRenderUnderOrAbove(e,h,c,t.nudgeY||0);if(i==="under"){n=h.top-c.top+h.height}else{n=h.top-e.offsetHeight-(s||0)*2-c.top}}return{x:i,y:n}};this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:u,postProcessCallback:()=>this.callPostProcessPopup(t,a,e,o,null)})}shouldRenderUnderOrAbove(t,e,i,s){const n=i.bottom-e.bottom;const o=e.top-i.top;const r=t.offsetHeight+s;if(n>r){return"under"}if(o>r||o>n){return"above"}return"under"}setAlignedStyles(t,e){const i=this.getPopupIndex(t);if(i===-1){return}const s=this.popupList[i];const{alignedToElement:n}=s;if(!n){return}const o=["right","left","over","above","under"];for(const e of o){n.classList.remove(`ag-has-popup-positioned-${e}`);t.classList.remove(`ag-popup-positioned-${e}`)}if(!e){return}n.classList.add(`ag-has-popup-positioned-${e}`);t.classList.add(`ag-popup-positioned-${e}`)}setAlignedTo(t,e){const i=this.getPopupIndex(e);if(i!==-1){const e=this.popupList[i];e.alignedToElement=t}}positionPopup(t){const{ePopup:e,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:o,updatePosition:r}=t;const l={width:0,height:0};const a=(o=false)=>{let{x:a,y:h}=r();if(o&&e.clientWidth===l.width&&e.clientHeight===l.height){return}l.width=e.clientWidth;l.height=e.clientHeight;if(s){a+=s}if(n){h+=n}if(i){a=this.keepXYWithinBounds(e,a,1);h=this.keepXYWithinBounds(e,h,0)}e.style.left=`${a}px`;e.style.top=`${h}px`;if(t.postProcessCallback){t.postProcessCallback()}};a();if(!o){const t=Tt(this.beans,e,(()=>a(true)));setTimeout((()=>t()),Kl)}}getParentRect(){const t=f(this.beans);let e=this.getPopupParent();if(e===t.body){e=t.documentElement}else if(getComputedStyle(e).position==="static"){e=e.offsetParent}return ht(e)}keepXYWithinBounds(t,e,i){const s=i===0;const n=s?"clientHeight":"clientWidth";const o=s?"top":"left";const r=s?"height":"width";const l=s?"scrollTop":"scrollLeft";const a=f(this.beans);const h=a.documentElement;const c=this.getPopupParent();const u=t.getBoundingClientRect();const d=c.getBoundingClientRect();const g=a.documentElement.getBoundingClientRect();const p=c===a.body;const m=Math.ceil(u[r]);const v=s?lt:at;let w=p?v(h)+h[l]:c[n];if(p){w-=Math.abs(g[o]-d[o])}const C=w-m;return Math.min(Math.max(e,0),Math.max(C,0))}addPopup(t){const{eChild:e,ariaLabel:i,ariaOwns:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=t;const l=this.getPopupIndex(e);if(l!==-1){const t=this.popupList[l];return{hideFunc:t.hideFunc}}this.initialisePopupPosition(e);const a=this.createPopupWrapper(e,!!n,i,s);const h=this.addEventListenersToPopup({...t,wrapperEl:a});if(o){o()}this.addPopupToPopupList(e,a,h,r);return{hideFunc:h}}initialisePopupPosition(t){const e=this.getPopupParent();const s=e.getBoundingClientRect();if(!i(t.style.top)){t.style.top=`${s.top*-1}px`}if(!i(t.style.left)){t.style.left=`${s.left*-1}px`}}createPopupWrapper(t,e,i,s){const n=this.getPopupParent();const{environment:o,gos:r}=this.beans;const l=Ot({tag:"div"});o.applyThemeClasses(l);l.classList.add("ag-popup");t.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child");if(!t.hasAttribute("role")){x(t,"dialog")}if(i){k(t,i)}else if(s){t.id||(t.id=`popup-component-${jl}`);Z(s,t.id)}l.appendChild(t);n.appendChild(l);if(e){this.setAlwaysOnTop(t,true)}else{this.bringPopupToFront(t)}return l}addEventListenersToPopup(t){const e=this.beans;const i=f(e);const{wrapperEl:s,eChild:n,closedCallback:o,afterGuiAttached:r,closeOnEsc:l,modal:a,ariaOwns:h}=t;let c=false;const u=t=>{if(!s.contains(d(e))){return}const i=t.key;if(i===mo.ESCAPE&&!this.isStopPropagation(t)){m({keyboardEvent:t})}};const g=t=>m({mouseEvent:t});const p=t=>m({touchEvent:t});const m=(t={})=>{const{mouseEvent:e,touchEvent:r,keyboardEvent:l,forceHide:a}=t;if(!a&&(this.isEventFromCurrentPopup({mouseEvent:e,touchEvent:r},n)||c)){return}c=true;s.remove();i.removeEventListener("keydown",u);i.removeEventListener("mousedown",g);i.removeEventListener("touchstart",p);i.removeEventListener("contextmenu",g);this.eventSvc.removeListener("dragStarted",g);if(o){o(e||r||l)}this.removePopupFromPopupList(n,h)};if(r){r({hidePopup:m})}window.setTimeout((()=>{if(l){i.addEventListener("keydown",u)}if(a){i.addEventListener("mousedown",g);this.eventSvc.addListener("dragStarted",g);i.addEventListener("touchstart",p);i.addEventListener("contextmenu",g)}}),0);return m}addPopupToPopupList(t,e,i,s){this.popupList.push({element:t,wrapper:e,hideFunc:i,instanceId:jl,isAnchored:!!s});if(s){this.setPopupPositionRelatedToElement(t,s)}jl=jl+1}getPopupIndex(t){return this.popupList.findIndex((e=>e.element===t))}setPopupPositionRelatedToElement(t,e){const i=this.getPopupIndex(t);if(i===-1){return}const s=this.popupList[i];if(s.stopAnchoringPromise){s.stopAnchoringPromise.then((t=>t&&t()))}s.stopAnchoringPromise=void 0;s.isAnchored=false;if(!e){return}const n=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:s.hideFunc});s.stopAnchoringPromise=n;s.isAnchored=true;return n}removePopupFromPopupList(t,e){this.setAlignedStyles(t,null);this.setPopupPositionRelatedToElement(t,null);if(e){Z(e,null)}this.popupList=this.popupList.filter((e=>e.element!==t))}keepPopupPositionedRelativeTo(t){const e=this.getPopupParent();const i=e.getBoundingClientRect();const{element:s,ePopup:n}=t;const o=s.getBoundingClientRect();const r=t=>Number.parseInt(t.substring(0,t.length-1),10);const l=(t,e)=>{const s=i[t]-o[t];const l=r(n.style[t]);return{initialDiff:s,lastDiff:s,initial:l,last:l,direction:e}};const a=l("top",0);const h=l("left",1);const c=this.beans.frameworkOverrides;return new Fn((i=>{c.wrapIncoming((()=>{Rn((()=>{const i=e.getBoundingClientRect();const o=s.getBoundingClientRect();const l=o.top==0&&o.left==0&&o.height==0&&o.width==0;if(l){t.hidePopup();return}const c=(t,e)=>{const s=r(n.style[e]);if(t.last!==s){t.initial=s;t.last=s}const l=i[e]-o[e];if(l!=t.lastDiff){const i=this.keepXYWithinBounds(n,t.initial+t.initialDiff-l,t.direction);n.style[e]=`${i}px`;t.last=i}t.lastDiff=l};c(a,"top");c(h,"left")}),200).then((t=>{const e=()=>{if(t!=null){window.clearInterval(t)}};i(e)}))}),"popupPositioning")}))}isEventFromCurrentPopup(t,e){const{mouseEvent:i,touchEvent:s}=t;const n=i?i:s;if(!n){return false}const o=this.getPopupIndex(e);if(o===-1){return false}for(let t=o;t<this.popupList.length;t++){const e=this.popupList[t];if(Lt(e.element,n)){return true}}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(t){const e=f(this.beans);while(t&&t!==e.body){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null){return true}t=t.parentElement}return false}getWrapper(t){while(!t.classList.contains("ag-popup")&&t.parentElement){t=t.parentElement}return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){const i=this.getWrapper(t);if(!i){return}i.classList.toggle("ag-always-on-top",!!e);if(e){this.bringPopupToFront(i)}}bringPopupToFront(t){const e=this.getPopupParent();const i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup"));const s=i.length;const n=this.getWrapper(t);if(!n||s<=1||!e.contains(t)){return}const o=[];const r=[];for(const t of i){if(t===n){continue}if(t.classList.contains("ag-always-on-top")){r.push(t)}else{o.push(t)}}const l=[];const a=r.length;const h=n.classList.contains("ag-always-on-top");const c=h||!a;const u=c?[...o,...r,n]:[...o,n,...r];for(let t=0;t<=s;t++){const s=u[t];if(i[t]===u[t]||s===n){continue}const o=s.querySelectorAll("div");for(const t of o){if(t.scrollTop!==0){l.push([t,t.scrollTop])}}if(t===0){e.insertAdjacentElement("afterbegin",s)}else{u[t-1].insertAdjacentElement("afterend",s)}}while(l.length){const t=l.pop();t[0].scrollTop=t[1]}}};var _l=class extends vo{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(t){const{value:e}=t;const i=this.getGui();i.textContent=h(e);const s=t.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add(`ag-${s}-tooltip`)}};var Zl=(t,e)=>{if(e!=null&&t?.setPointerCapture){try{t.setPointerCapture(e);return t.hasPointerCapture(e)}catch{}}return false};var Yl=(t,e)=>{if(typeof PointerEvent==="undefined"||!(e instanceof PointerEvent)){return null}const i=e.pointerId;if(!Zl(t,i)){return null}const s={eElement:t,pointerId:i,onLost(t){Xl(s,t)}};t.addEventListener("lostpointercapture",s.onLost);return s};var Ql=t=>{if(!t){return}Jl(t);const{eElement:e,pointerId:i}=t;if(!e){return}try{e.releasePointerCapture(i)}catch{}t.eElement=null};var Jl=t=>{const{eElement:e,onLost:i}=t;if(e&&i){e.removeEventListener("lostpointercapture",i);t.onLost=null}};var Xl=(t,e)=>{Jl(t);const{eElement:i,pointerId:s}=t;if(i&&e.pointerId===s){Zl(i,s)}};var ta;var ea;var ia=t=>{if(!ea){ea=new WeakSet}else if(ea.has(t)){return false}ea.add(t);return true};var sa=class extends se{constructor(){super(...arguments);this.beanName="dragSvc";this.dragging=false;this.drag=null;this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!ta?.has(u(this.beans))}hasPointerCapture(){const t=this.drag?.pointerCapture;return!!(t&&this.beans.eRootDiv.hasPointerCapture?.(t.pointerId))}destroy(){if(this.drag){this.cancelDrag()}const t=this.dragSources;for(const e of t){na(e)}t.length=0;super.destroy()}removeDragSource(t){const e=this.dragSources;for(let i=0,s=e.length;i<s;++i){const s=e[i];if(s.params===t){e.splice(i,1);na(s);break}}}addDragSource(t){if(!this.isAlive()){return}const{eElement:e,includeTouch:i}=t;const s=[];let n;if(i){const t=e.style;if(t){n=t.touchAction;t.touchAction="none"}}const o={handlers:s,params:t,oldTouchAction:n};this.dragSources.push(o);const r=e=>this.onPointerDown(t,e);const l=e=>this.onMouseDown(t,e);Zt(s,[e,"pointerdown",r,{passive:false}],[e,"mousedown",l]);const a=this.gos.get("suppressTouch");if(i&&!a){const i=e=>this.onTouchStart(t,e);Zt(s,[e,"touchstart",i,{passive:false}])}}cancelDrag(t){const e=this.drag;t??(t=e?.eElement);if(t){this.eventSvc.dispatchEvent({type:"dragCancelled",target:t})}e?.params.onDragCancel?.();this.destroyDrag()}shouldPreventMouseEvent(t){const e=t.type;const i=e==="mousemove"||e==="pointermove";return i&&t.cancelable&&qt(this.beans,t)&&!X(ra(t))}initDrag(t,...e){this.drag=t;const i=this.beans;const s=t=>this.onScroll(t);const n=t=>this.onKeyDown(t);const o=u(i);const r=f(i);Zt(t.handlers,[o,"contextmenu",Qt],[o,"keydown",n],[r,"scroll",s,{capture:true}],[r.defaultView||window,"scroll",s],...e)}destroyDrag(){this.dragging=false;const t=this.drag;if(t){const e=t.rootEl;if(ta?.get(e)===t){ta?.delete(e)}this.drag=null;Ql(t.pointerCapture);Yt(t.handlers)}}onPointerDown(t,e){if(this.isPointer()){return}const i=this.beans;if(ea?.has(e)){return}const s=e.pointerType;if(s==="touch"){if(i.gos.get("suppressTouch")||!t.includeTouch){return}if(t.stopPropagationForTouch){e.stopPropagation()}if(X(ra(e))){return}}if(!e.isPrimary){return}if(s==="mouse"&&e.button!==0){return}this.destroyDrag();const n=u(i);const o=t.eElement;const r=e.pointerId;const l=new oa(n,t,e,r);ta??(ta=new WeakMap);ta.set(n,l);const a=t=>{if(t.pointerId===r){this.onMouseOrPointerMove(t)}};const h=t=>{if(t.pointerId===r){this.onMouseOrPointerUp(t)}};const c=t=>{if(t.pointerId===r&&ia(t)){this.cancelDrag()}};this.initDrag(l,[n,"pointerup",h],[n,"pointercancel",c],[n,"pointermove",a,{passive:false}],[n,"touchmove",Qt,{passive:false}],[o,"mousemove",Qt,{passive:false}]);if(t.dragStartPixels===0){this.onMouseOrPointerMove(e)}else{ia(e)}}onTouchStart(t,e){const i=this.gos.get("suppressTouch");if(i||!t.includeTouch){return}if(!ia(e)){return}if(X(ra(e))){return}if(t.stopPropagationForTouch){e.stopPropagation()}if(this.isPointer()){Qt(e);return}this.destroyDrag();const s=this.beans;const n=u(s);const o=new oa(n,t,e.touches[0]);const r=t=>this.onTouchMove(t);const l=t=>this.onTouchUp(t);const a=e.target??t.eElement;this.initDrag(o,[u(s),"touchmove",Qt,{passive:false}],[a,"touchmove",r,{passive:true}],[a,"touchend",l,{passive:true}],[a,"touchcancel",l,{passive:true}]);if(t.dragStartPixels===0){this.onMove(o.start)}}onMouseDown(t,e){if(e.button!==0){return}if(ea?.has(e)){return}if(this.isPointer()){return}const i=this.beans;this.destroyDrag();const s=new oa(u(i),t,e);const n=t=>this.onMouseOrPointerMove(t);const o=t=>this.onMouseOrPointerUp(t);const r=u(i);this.initDrag(s,[r,"mousemove",n],[r,"mouseup",o]);if(t.dragStartPixels===0){this.onMouseOrPointerMove(e)}else{ia(e)}}onScroll(t){if(!ia(t)){return}const e=this.drag;const i=e?.lastDrag;if(i&&this.dragging){e.params?.onDragging(i)}}onMouseOrPointerMove(t){if(!ia(t)){return}if(Fo()){f(this.beans).getSelection()?.removeAllRanges()}if(this.shouldPreventMouseEvent(t)){Qt(t)}this.onMove(t)}onTouchMove(t){const e=this.drag;if(!e||!ia(t)){return}const i=Kt(e.start,t.touches);if(i){t.preventDefault();this.onMove(i)}}onMove(t){const e=this.drag;if(!e){return}e.lastDrag=t;const i=e.params;if(!this.dragging){const s=e.start;const n=i.dragStartPixels;const o=n??4;if(jt(t,s,o)){return}this.dragging=true;if(i.capturePointer){e.pointerCapture=Yl(this.beans.eRootDiv,t)}this.eventSvc.dispatchEvent({type:"dragStarted",target:i.eElement});i.onDragStart(s);if(this.drag!==e){return}i.onDragging(s);if(this.drag!==e){return}}i.onDragging(t)}onTouchUp(t){const e=this.drag;if(e&&ia(t)){this.onUp(Kt(e.start,t.changedTouches))}}onMouseOrPointerUp(t){if(ia(t)){this.onUp(t)}}onUp(t){const e=this.drag;if(!e){return}if(!t){t=e.lastDrag}if(t&&this.dragging){this.dragging=false;e.params.onDragStop(t);this.eventSvc.dispatchEvent({type:"dragStopped",target:e.params.eElement})}this.destroyDrag()}onKeyDown(t){if(t.key===mo.ESCAPE){this.cancelDrag()}}};var na=t=>{Yt(t.handlers);const e=t.oldTouchAction;if(e!=null){const i=t.params.eElement.style;if(i){i.touchAction=e}}};var oa=class{constructor(t,e,i,s=null){this.rootEl=t;this.params=e;this.start=i;this.pointerId=s;this.handlers=[];this.lastDrag=null;this.pointerCapture=null;this.eElement=e.eElement}};var ra=t=>{const e=t.target;return e instanceof Element?e:null};var la=class extends se{constructor(){super(...arguments);this.beanName="dragAndDrop";this.dragSourceAndParamsList=[];this.dragItem=null;this.dragInitialSourcePointerOffsetX=0;this.dragInitialSourcePointerOffsetY=0;this.lastMouseEvent=null;this.lastDraggingEvent=null;this.dragSource=null;this.dragImageParent=null;this.dragImageCompPromise=null;this.dragImageComp=null;this.dragImageLastIcon=void 0;this.dragImageLastLabel=void 0;this.dropTargets=[];this.lastDropTarget=null}addDragSource(t,e=false){const i={capturePointer:true,dragSource:t,eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:e=>this.onDragStart(t,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:e};this.dragSourceAndParamsList.push(i);this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(t,e=false){const i=this.dragImageComp;if(i&&(e||this.dragImageLastIcon!==t)){this.dragImageLastIcon=t;i.setIcon(t,e)}}removeDragSource(t){const{dragSourceAndParamsList:e,beans:i}=this;const s=e.find((e=>e.dragSource===t));if(s){i.dragSvc?.removeDragSource(s);bs(e,s)}}destroy(){const{dragSourceAndParamsList:t,dropTargets:e,beans:i}=this;const s=i.dragSvc;for(const e of t){s?.removeDragSource(e)}t.length=0;e.length=0;this.clearDragAndDropProperties();super.destroy()}nudge(){const t=this.lastMouseEvent;if(t){this.onDragging(t,true)}}onDragStart(t,e){this.lastMouseEvent=e;this.dragSource=t;this.dragItem=t.getDragItem();const i=t.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=e.clientX-i.left;this.dragInitialSourcePointerOffsetY=e.clientY-i.top;t.onDragStarted?.();this.createAndUpdateDragImageComp(t)}onDragStop(t){const{dragSource:e,lastDropTarget:i}=this;e?.onDragStopped?.();if(i){const e=this.dropTargetEvent(i,t,false);i.onDragStop?.(e)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:t,lastDropTarget:e,lastMouseEvent:i}=this;t?.onDragCancelled?.();if(e&&i){const t=this.dropTargetEvent(e,i,false);e.onDragCancel?.(t)}this.clearDragAndDropProperties()}onDragging(t,e=false){this.positionDragImageComp(t);const i=this.findCurrentDropTarget(t);const{lastDropTarget:s,dragSource:n,dragItem:o}=this;let r=false;if(i!==s){r=true;if(s){const i=this.dropTargetEvent(s,t,e);s.onDragLeave?.(i)}if(s!==null&&!i){this.handleExit(n,o)}else if(s===null&&i){this.handleEnter(n,o)}if(i){const s=this.dropTargetEvent(i,t,e);i.onDragEnter?.(s)}this.lastDropTarget=i}else if(i){const s=this.dropTargetEvent(i,t,e);i.onDragging?.(s);if(s?.changed){r=true}}this.lastMouseEvent=t;if(r){this.updateDragImageComp()}}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp);this.dragImageCompPromise=null;this.dragImageParent=null;this.dragImageLastIcon=void 0;this.dragImageLastLabel=void 0;this.lastMouseEvent=null;this.lastDraggingEvent=null;this.lastDropTarget=null;this.dragItem=null;this.dragInitialSourcePointerOffsetX=0;this.dragInitialSourcePointerOffsetY=0;this.dragSource=null}getAllContainersFromDropTarget(t){const e=t.getSecondaryContainers?t.getSecondaryContainers():null;const i=[[t.getContainer()]];return e?i.concat(e):i}isMouseOnDropTarget(t,e){const i=this.getAllContainersFromDropTarget(e);let s=false;const n=(t,e)=>{for(const i of e){const{width:e,height:s,left:n,right:o,top:r,bottom:l}=i.getBoundingClientRect();if(e===0||s===0){return false}const a=t.clientX>=n&&t.clientX<o;const h=t.clientY>=r&&t.clientY<l;if(!a||!h){return false}}return true};for(const e of i){if(n(t,e)){s=true;break}}const{eElement:o,type:r}=this.dragSource;if(e.targetContainsSource&&!e.getContainer().contains(o)){return false}return s&&e.isInterestedIn(r,o)}findCurrentDropTarget(t){const e=this.dropTargets.filter((e=>this.isMouseOnDropTarget(t,e)));const i=e.length;if(i===0){return null}if(i===1){return e[0]}const s=u(this.beans);const n=s.elementsFromPoint(t.clientX,t.clientY);for(const t of n){for(const i of e){const e=this.getAllContainersFromDropTarget(i).flatMap((t=>t));if(e.indexOf(t)!==-1){return i}}}return null}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter((e=>e.getContainer()!==t.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((t=>t.external))}findExternalZone(t){return this.dropTargets.find((e=>e.external&&e.getContainer()===t))||null}dropTargetEvent(t,e,i){const{dragSource:s,dragItem:n,lastDraggingEvent:o,lastMouseEvent:r,dragInitialSourcePointerOffsetX:l,dragInitialSourcePointerOffsetY:a}=this;const h=t.getContainer();const c=h.getBoundingClientRect();const{clientX:u,clientY:d}=e;const f=u-(r?.clientX||0);const g=d-(r?.clientY||0);const p=this.createEvent({event:e,x:u-c.left,y:d-c.top,vDirection:g>0?"down":g<0?"up":null,hDirection:f<0?"left":f>0?"right":null,initialSourcePointerOffsetX:l,initialSourcePointerOffsetY:a,dragSource:s,fromNudge:i,dragItem:n,dropZoneTarget:h,dropTarget:o?.dropTarget??null,changed:!!o?.changed});this.lastDraggingEvent=p;return p}positionDragImageComp(t){const e=this.dragImageComp?.getGui();if(e){_t(e,t,this.beans)}}removeDragImageComp(t){if(this.dragImageComp===t){this.dragImageComp=null}if(t){t.getGui()?.remove();this.destroyBean(t)}}createAndUpdateDragImageComp(t){const e=this.createDragImageComp(t)??null;this.dragImageCompPromise=e;e?.then((t=>{if(e!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(t);return}this.dragImageCompPromise=null;this.dragImageLastIcon=void 0;this.dragImageLastLabel=void 0;const i=this.dragImageComp;if(i!==t){this.dragImageComp=t;this.removeDragImageComp(i)}if(t){this.appendDragImageComp(t);this.updateDragImageComp()}}))}appendDragImageComp(t){const e=t.getGui();const i=e.style;i.position="absolute";i.zIndex="9999";if(this.beans.dragSvc?.hasPointerCapture()){i.pointerEvents="none"}this.gos.setInstanceDomData(e);this.beans.environment.applyThemeClasses(e);i.top="20px";i.left="20px";const s=m(this.beans);this.dragImageParent=s;if(!s){this.warnNoBody()}else{s.appendChild(e)}}updateDragImageComp(){const{dragImageComp:t,dragSource:e,lastDropTarget:i,lastDraggingEvent:s,dragImageLastLabel:n}=this;if(!t){return}this.setDragImageCompIcon(i?.getIconName?.(s)??null);let o=e?.dragItemName;if(typeof o==="function"){o=o(s)}o||(o="");if(n!==o){this.dragImageLastLabel=o;t.setLabel(o)}}};var aa=class extends la{createEvent(t){return os(this.gos,t)}createDragImageComp(t){const{gos:e,beans:i}=this;const s=qn(i.userCompFactory,os(e,{dragSource:t}));return s?.newAgStackInstance()}handleEnter(t,e){t?.onGridEnter?.(e)}handleExit(t,e){t?.onGridExit?.(e)}warnNoBody(){hi(54)}isDropZoneWithinThisGrid(t){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(t.dropZoneTarget)}registerGridDropTarget(t,e){const i={getContainer:t,isInterestedIn:t=>t===1||t===0,getIconName:()=>"notAllowed"};this.addDropTarget(i);e.addDestroyFunc((()=>this.removeDropTarget(i)))}};function ha(t,e){return t+"_"+e}function ca(t){return t instanceof ua}var ua=class extends re{constructor(t,e,i,s){super();this.providedColumnGroup=t;this.groupId=e;this.partId=i;this.pinned=s;this.isColumn=false;this.displayedChildren=[];this.autoHeaderHeight=null;this.parent=null;this.colIdSanitised=c(this.getUniqueId())}reset(){this.parent=null;this.children=null;this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return ha(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const t=this.getProvidedColumnGroup().getLeafColumns();if(!t||t.length===0){return false}return t.every((t=>t.isMoving()))}checkLeft(){for(const t of this.displayedChildren){if(ca(t)){t.checkLeft()}}if(this.displayedChildren.length>0){if(this.gos.get("enableRtl")){const t=vs(this.displayedChildren);const e=t.getLeft();this.setLeft(e)}else{const t=this.displayedChildren[0].getLeft();this.setLeft(t)}}else{this.setLeft(null)}}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left;if(this.left!==t){this.left=t;this.dispatchLocalEvent({type:"leftChanged"})}}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let t=0;for(const e of this.displayedChildren??[]){t+=e.getActualWidth()}return t}isResizable(){if(!this.displayedChildren){return false}let t=false;for(const e of this.displayedChildren){if(e.isResizable()){t=true}}return t}getMinWidth(){let t=0;for(const e of this.displayedChildren){t+=e.getMinWidth()}return t}addChild(t){if(!this.children){this.children=[]}this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const t=[];this.addLeafColumns(t);return t}getDisplayedLeafColumns(){const t=[];this.addDisplayedLeafColumns(t);return t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const e=t!==this.autoHeaderHeight;this.autoHeaderHeight=t;return e}addDisplayedLeafColumns(t){for(const e of this.displayedChildren??[]){if(cs(e)){t.push(e)}else if(ca(e)){e.addDisplayedLeafColumns(t)}}}addLeafColumns(t){for(const e of this.children??[]){if(cs(e)){t.push(e)}else if(ca(e)){e.addLeafColumns(t)}}}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const t=this.getParent();if(!this.isPadding()||!t?.isPadding()){return 0}return 1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;while(t?.isPadding()){t=t.getParent()}const e=t?t.getProvidedColumnGroup().isExpandable():false;if(!e){this.displayedChildren=this.children;this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const e of this.children??[]){const i=ca(e)&&!e.displayedChildren?.length;if(i){continue}const s=e.getColumnGroupShow();switch(s){case"open":if(t.getProvidedColumnGroup().isExpanded()){this.displayedChildren.push(e)}break;case"closed":if(!t.getProvidedColumnGroup().isExpanded()){this.displayedChildren.push(e)}break;default:this.displayedChildren.push(e);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}};var da="row-group-";var fa="t-";var ga="b-";var pa=0;var ma=class{constructor(t){this.master=false;this.detail=void 0;this.rowIndex=null;this.key=null;this.sourceRowIndex=-1;this._leafs=void 0;this.childrenMapped=null;this.treeParent=null;this.treeNodeFlags=0;this.displayed=false;this.rowTop=null;this.oldRowTop=null;this.selectable=true;this.__objectId=pa++;this.alreadyRendered=false;this.hovered=false;this.__selected=false;this.beans=t}get allLeafChildren(){const t=this._leafs;return t===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:t}set allLeafChildren(t){this._leafs=t}setData(t){this.setDataCommon(t,false)}updateData(t){this.setDataCommon(t,true)}setDataCommon(t,e){const{valueCache:i,eventSvc:s}=this.beans;const n=this.data;this.data=t;i?.onDataChanged();this.updateDataOnDetailNode();this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(t,n,e);this.__localEventService?.dispatchEvent(o);if(this.sibling){this.sibling.data=t;const i=this.sibling.createDataChangedEvent(t,n,e);this.sibling.__localEventService?.dispatchEvent(i)}s.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;if(r){r.data=t;r.__localEventService?.dispatchEvent(r.createDataChangedEvent(t,n,e));s.dispatchEvent({type:"rowNodeDataChanged",node:r})}}updateDataOnDetailNode(){const t=this.detailNode;if(t){t.data=this.data}}createDataChangedEvent(t,e,i){return{type:"dataChanged",node:this,oldData:e,newData:t,update:i}}getRowIndexString(){if(this.rowIndex==null){ci(13);return null}if(this.rowPinned==="top"){return fa+this.rowIndex}if(this.rowPinned==="bottom"){return ga+this.rowIndex}return this.rowIndex.toString()}setDataAndId(t,e){const{selectionSvc:i}=this.beans;const s=i?.createDaemonNode?.(this);const n=this.data;this.data=t;this.updateDataOnDetailNode();this.setId(e);if(i){i.updateRowSelectable(this);i.syncInRowNode(this,s)}const o=this.createDataChangedEvent(t,n,false);this.__localEventService?.dispatchEvent(o)}setId(t){const e=Hi(this.beans.gos);if(e){if(this.data){const t=this.parent?.getRoute()??[];this.id=e({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level,rowPinned:this.rowPinned});if(this.id.startsWith(da)){ci(14,{groupPrefix:da})}}else{this.id=void 0}}else{this.id=t}}setRowTop(t){this.oldRowTop=this.rowTop;if(this.rowTop===t){return}this.rowTop=t;this.dispatchRowEvent("topChanged");const e=t!==null;if(this.displayed!==e){this.displayed=e;this.dispatchRowEvent("displayedChanged")}}clearRowTopAndRowIndex(){this.oldRowTop=null;this.setRowTop(null);this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setRowHeight(t,e=false){this.rowHeight=t;this.rowHeightEstimated=e;this.dispatchRowEvent("heightChanged")}setExpanded(t,e,i){this.beans.expansionSvc?.setExpanded(this,t,e,i)}setDataValue(t,e,i){const{colModel:s,valueSvc:n,gos:o,editSvc:r}=this.beans;const l=typeof t!=="string"?t:s.getCol(t)??s.getColDefCol(t);if(!l){return false}const a=n.getValueForDisplay(l,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:t},data:s,rowIndex:n,rowPinned:o}=this;t.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:n,rowPinned:o,column:l,colDef:l.colDef,data:s,node:this,oldValue:a,newValue:e,value:e,source:i});return false}if(r&&!r.committing){const t=r.setDataValue({rowNode:this,column:l},e,i);if(t!=null){return t}}const h=n.setValue(this,l,e,i);this.dispatchCellChangedEvent(l,e,a);if(h){this.pinnedSibling?.dispatchCellChangedEvent(l,e,a)}return h}updateHasChildren(){let t=this.group&&!this.footer||!!this.childrenAfterGroup?.length;const{rowChildrenSvc:e}=this.beans;if(e){t=e.getHasChildrenValue(this)}if(t!==this.__hasChildren){this.__hasChildren=!!t;this.dispatchRowEvent("hasChildrenChanged")}}hasChildren(){if(this.__hasChildren==null){this.updateHasChildren()}return this.__hasChildren}dispatchCellChangedEvent(t,e,i){const s={type:"cellChanged",node:this,column:t,newValue:e,oldValue:i};this.__localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??false}isSelected(){if(this.footer){return this.sibling.isSelected()}const t=this.rowPinned&&this.pinnedSibling;if(t){return t.isSelected()}return this.__selected}depthFirstSearch(t){const e=this.childrenAfterGroup;if(e){for(let i=0,s=e.length;i<s;++i){e[i].depthFirstSearch(t)}}t(this)}dispatchRowEvent(t){this.__localEventService?.dispatchEvent({type:t,node:this})}setSelected(t,e=false,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:t,clearSelection:e,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,i){const s=this.__localEventService??(this.__localEventService=new t);s.addEventListener(e,i)}__removeEventListener(t,e){this.removeLocalListener(t,e)}addEventListener(e,i){this.beans.validation?.checkRowEvents(e);const s=this.__localEventService??(this.__localEventService=new t);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,s);const n=this.frameworkEventListenerService?.wrap(e,i)??i;s.addEventListener(e,n)}removeEventListener(t,e){const i=this.frameworkEventListenerService?.unwrap(t,e)??e;this.removeLocalListener(t,i)}removeLocalListener(t,e){const i=this.__localEventService;if(i){i.removeEventListener(t,e);if(i.noRegisteredListenersExist()){this.__localEventService=null}}}isFullWidthCell(){hi(61);if(this.detail){return true}const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):false}getRoute(){if(this.level===-1){return[]}if(this.key==null){return void 0}const t=[];let e=this;while(e?.key!=null){t.push(e.key);e=e.parent}return t.reverse()}setRowIndex(t){if(this.rowIndex!==t){this.rowIndex=t;this.dispatchRowEvent("rowIndexChanged")}}setAllChildrenCount(t){if(this.allChildrenCount!==t){this.allChildrenCount=t;this.dispatchRowEvent("allChildrenCountChanged")}}setUiLevel(t){if(this.uiLevel!==t){this.uiLevel=t;this.dispatchRowEvent("uiLevelChanged")}}getFirstChild(){const t=this.childStore;if(t){return t.getFirstNode()}return this.childrenAfterSort?.[0]??null}};function va(t,e,i){return os(e,{type:i,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned})}var wa=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]);var Ca=(t,e)=>{const i=new ma(e);for(const e of Object.keys(t)){if(wa.has(e)){continue}i[e]=t[e]}i.oldRowTop=null;return i};var ba=t=>{while(t?.length){const e=t[0];if(e.data){return e}t=e.childrenAfterGroup}};var ya={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"};var Sa=new Set(Object.values(ya));function xa(t,e){const i=t.filterUi;if(!i){return null}if(i.created){return i.promise}if(e){return null}const s=i.create(i.refreshed);const n=i;n.created=true;n.promise=s;return s}function Ra(t,e,i,s,n,o,r){e.refresh?.({...i,model:s,source:o,additionalEventAttributes:r});return t().then((t=>{if(t){const{filter:e,filterParams:i}=t;Fa(e,i,s,n,o,r)}}))}function Fa(t,e,i,s,n,o){t?.refresh?.({...e,model:i,state:s,source:n,additionalEventAttributes:o})}function ka(t,e,i){const s=t();if(s?.created){s.promise.then((t=>{const n=e();Fa(t,s.filterParams,n,i()??{model:n},"ui")}))}}function Pa(t,e,i,s,n,o,r){let l;let a=false;let h;switch(t){case"apply":{const t=s();h=t?.model??null;if(r){h=r(h)}l={state:t?.state,model:h};a=true;break}case"clear":{l={model:null};break}case"reset":{l={model:null};a=true;h=null;break}case"cancel":{l={model:i()};break}}n(l);if(a){o(h)}else{ka(e,i,s)}}function Da(t,e){return t[e]??null}function Ma(t){return Ot(t)}function Ta(t){return{tag:"div",cls:t}}var Ea=class extends Sn{constructor(t){const{className:e="ag-filter-apply-panel"}=t??{};super(Ta(e));this.listeners=[];this.validationMessage=null;this.className=e}updateButtons(t,e){const i=this.buttons;this.buttons=t;if(i===t){return}const s=this.getGui();dt(s);let n;this.destroyListeners();const o=document.createDocumentFragment();const r=this.className;const l=({type:t,label:i})=>{const s=e=>{this.dispatchLocalEvent({type:t,event:e})};if(!["apply","clear","reset","cancel"].includes(t)){hi(75)}const l=t==="apply";const a=l&&e?"submit":"button";const h=Ma({tag:"button",attrs:{type:a},ref:`${t}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${l?" "+r+"-apply-button":""}`,children:i});this.activateTabIndex([h]);if(l){n=h}const c=t=>{if(t.key===mo.ENTER){t.preventDefault();s(t)}};const u=this.listeners;h.addEventListener("click",s);u.push((()=>h.removeEventListener("click",s)));h.addEventListener("keydown",c);u.push((()=>h.removeEventListener("keydown",c)));o.append(h)};for(const e of t){l(e)}this.eApply=n;const a=this.validationTooltipFeature;if(n&&!a){this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",false,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3}))}else if(!n&&a){this.validationTooltipFeature=this.destroyBean(a)}s.append(o)}getApplyButton(){return this.eApply}updateValidity(t,e=null){const i=this.eApply;if(!i){return}it(i,t===false);this.validationMessage=e??null;this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage)}destroyListeners(){for(const t of this.listeners){t()}this.listeners=[]}destroy(){this.destroyListeners();super.destroy()}};var Aa={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:t=>`(${t[0]}, ${t[1]})`,filterSummaryTextQuote:t=>`"${t[0]}"`};function Ia(t,e,i){return te(t,Aa,e,i)}function Ha(t,e){const{debounceMs:i}=t;if(Oa(t)){if(i!=null){hi(71)}return 0}return i??e}function Oa(t){return(t.buttons?.indexOf("apply")??-1)>=0}var Na=class extends Sn{constructor(t,e,i,s,n,o){super();this.column=t;this.wrapper=e;this.eventParent=i;this.updateModel=s;this.isGlobalButtons=n;this.enableGlobalButtonCheck=o;this.hidePopup=null;this.applyActive=false}postConstruct(){const{comp:t,params:e}=this.wrapper;const i=e;const s=i.useForm;const n=s?"form":"div";this.setTemplate({tag:n,cls:"ag-filter-wrapper"});if(s){this.addManagedElementListeners(this.getGui(),{submit:t=>{t?.preventDefault()},keydown:this.handleKeyDown.bind(this)})}this.appendChild(t.getGui());this.params=i;this.resetButtonsPanel(i);this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:t,params:e})=>{if(t===this.column){this.resetButtonsPanel(e,this.params)}},filterStateChanged:({column:t,state:e})=>{if(t===this.column){this.eButtons?.updateValidity(e.valid!==false)}},filterAction:({column:t,action:e,event:i})=>{if(t===this.column){this.afterAction(e,i)}},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:t})=>{if(t!==this.isGlobalButtons){this.isGlobalButtons=t;const e=this.params;this.resetButtonsPanel(e,e,true)}}}:void 0})}afterGuiAttached(t){if(t){this.hidePopup=t.hidePopup}}resetButtonsPanel(t,e,i){const{buttons:s,readOnly:n}=e??{};const{buttons:r,readOnly:l,useForm:a}=t;if(!i&&n===l&&o(s,r)){return}const h=r&&r.length>0&&!t.readOnly&&!this.isGlobalButtons;let c=this.eButtons;if(h){const t=r.map((t=>{const e=`${t}Filter`;return{type:t,label:Ia(this,e)}}));this.applyActive=Oa(this.params);if(!c){c=this.createBean(new Ea);this.appendChild(c.getGui());const t=this.column;const e=e=>({event:i})=>{this.updateModel(t,e,{fromButtons:true});this.afterAction(e,i)};c?.addManagedListeners(c,{apply:e("apply"),clear:e("clear"),reset:e("reset"),cancel:e("cancel")});this.eButtons=c}c.updateButtons(t,a)}else{this.applyActive=false;if(c){ft(c.getGui());this.eButtons=this.destroyBean(c)}}}close(t){const e=this.hidePopup;if(!e){return}const i=t;const s=i?.key;let n;if(s===mo.ENTER||s===mo.SPACE){n={keyboardEvent:i}}e(n);this.hidePopup=null}afterAction(t,e){const{params:i,applyActive:s}=this;const n=i?.closeOnApply;switch(t){case"apply":{e?.preventDefault();if(n&&s){this.close(e)}break}case"reset":{if(n&&s){this.close()}break}case"cancel":{if(n){this.close(e)}break}}}handleKeyDown(t){if(!t.defaultPrevented&&t.key===mo.ENTER&&this.applyActive){this.updateModel(this.column,"apply",{fromButtons:true});this.afterAction("apply",t)}}destroy(){this.hidePopup=null;this.eButtons=this.destroyBean(this.eButtons)}};var Ba={tag:"div",cls:"ag-filter"};var Ga=class extends Sn{constructor(t,e,i){super(Ba);this.column=t;this.source=e;this.enableGlobalButtonCheck=i;this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this);this.createFilter(true);this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then((t=>t.comp))??null}afterInit(){return this.wrapper?.then((()=>{}))??Fn.resolve()}afterGuiAttached(t){this.afterGuiAttachedParams=t;this.wrapper?.then((e=>{this.comp?.afterGuiAttached(t);e?.comp?.afterGuiAttached?.(t)}))}afterGuiDetached(){this.wrapper?.then((t=>{t?.comp?.afterGuiDetached?.()}))}createFilter(t){const{column:e,source:s,beans:{colFilter:n}}=this;const o=n.getFilterUiForDisplay(e)??null;this.wrapper=o;o?.then((o=>{if(!o){return}const{isHandler:r,comp:l}=o;let a;if(r){const t=!!this.enableGlobalButtonCheck;const i=this.createBean(new Na(e,o,n,n.updateModel.bind(n),t&&n.isGlobalButtons,t));this.comp=i;a=i.getGui()}else{a=l.getGui();if(!i(a)){hi(69,{guiFromFilter:a})}}this.appendChild(a);if(t){this.eventSvc.dispatchEvent({type:"filterOpened",column:e,source:s,eGui:this.getGui()})}else{l.afterGuiAttached?.(this.afterGuiAttachedParams)}}))}onFilterDestroyed(t){const{source:e,column:i}=t;if((e==="api"||e==="paramsUpdated")&&i.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)){dt(this.getGui());this.comp=this.destroyBean(this.comp);this.createFilter()}}destroy(){this.beans.colFilter?.activeFilterComps.delete(this);this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column});this.wrapper=null;this.comp=this.destroyBean(this.comp);this.afterGuiAttachedParams=void 0;super.destroy()}};var Va={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"};var La=["january","february","march","april","may","june","july","august","september","october","november","december"];function za(t,e){if(t==null){return-1}if(e==null){return 1}return Number.parseFloat(t)-Number.parseFloat(e)}function $a(t){return t instanceof Date&&!isNaN(t.getTime())}var Wa={number:()=>void 0,boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(t,e)=>e,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(t,e)=>e===false,numberOfInputs:0}]}),date:()=>({isValidDate:$a}),dateString:({dataTypeDefinition:t})=>({comparator:(e,i)=>{const s=t.dateParser(i);if(i==null||s<e){return-1}if(s>e){return 1}return 0},isValidDate:e=>typeof e==="string"&&$a(t.dateParser(e))}),dateTime:t=>Wa.date(t),dateTimeString:t=>Wa.dateString(t),object:()=>void 0,text:()=>void 0};var Ua={number:()=>({comparator:za}),boolean:({t})=>({valueFormatter:e=>i(e.value)?t(String(e.value),e.value?"True":"False"):t("blanks","(Blanks)")}),date:({formatValue:t,t:e})=>({valueFormatter:s=>{const n=t(s);return i(n)?n:e("blanks","(Blanks)")},treeList:true,treeListFormatter:(t,i)=>{if(t==="NaN"){return e("invalidDate","Invalid Date")}if(i===1&&t!=null){const i=La[Number(t)-1];return e(i,Va[i])}return t??e("blanks","(Blanks)")},treeListPathGetter:t=>Vo(t,false)}),dateString:({formatValue:t,dataTypeDefinition:e,t:s})=>({valueFormatter:e=>{const n=t(e);return i(n)?n:s("blanks","(Blanks)")},treeList:true,treeListPathGetter:t=>Vo(e.dateParser(t??void 0),false),treeListFormatter:(t,e)=>{if(e===1&&t!=null){const e=La[Number(t)-1];return s(e,Va[e])}return t??s("blanks","(Blanks)")}}),dateTime:t=>{const e=Ua.date(t);e.treeListPathGetter=Vo;return e},dateTimeString(t){const e=t.dataTypeDefinition.dateParser;const i=Ua.dateString(t);i.treeListPathGetter=t=>Vo(e(t??void 0));return i},object:({formatValue:t,t:e})=>({valueFormatter:s=>{const n=t(s);return i(n)?n:e("blanks","(Blanks)")}}),text:()=>void 0};function ja(t,e,i,s,n,o,r){let l=e;let a=i;const h=t==="agSetColumnFilter";if(!a&&s.baseDataType==="object"&&!h){a=({column:t,node:e})=>n({column:t,node:e,value:o.valueSvc.getValue(t,e)})}const c=h?Ua:Wa;const u=c[s.baseDataType];const d=u({dataTypeDefinition:s,formatValue:n,t:r});l=typeof e==="object"?{...d,...e}:d;return{filterParams:l,filterValueGetter:a}}var Ka={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"};var qa={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function _a(t,e=false){const i=e?qa:Ka;return i[t??"text"]}var Za="ag-resizer-wrapper";var Ya=(t,e)=>({tag:"div",ref:`${t}Resizer`,cls:`ag-resizer ag-resizer-${e}`});var Qa={tag:"div",cls:Za,children:[Ya("eTopLeft","topLeft"),Ya("eTop","top"),Ya("eTopRight","topRight"),Ya("eRight","right"),Ya("eBottomRight","bottomRight"),Ya("eBottom","bottom"),Ya("eBottomLeft","bottomLeft"),Ya("eLeft","left")]};var Ja=class extends re{constructor(t,e){super();this.element=t;this.dragStartPosition={x:0,y:0};this.position={x:0,y:0};this.lastSize={width:-1,height:-1};this.positioned=false;this.resizersAdded=false;this.resizeListeners=[];this.boundaryEl=null;this.isResizing=false;this.isMoving=false;this.resizable={};this.movable=false;this.currentResizer=null;this.config=Object.assign({},{popup:false},e)}wireBeans(t){this.popupSvc=t.popupSvc;this.dragSvc=t.dragSvc}center(t){const{clientHeight:e,clientWidth:i}=this.offsetParent;const s=i/2-this.getWidth()/2;const n=e/2-this.getHeight()/2;this.offsetElement(s,n,t)}initialisePosition(t){if(this.positioned){return}const{centered:e,forcePopupParentAsOffsetParent:i,minWidth:s,width:n,minHeight:o,height:r,x:l,y:a}=this.config;if(!this.offsetParent){this.setOffsetParent()}let h=0;let c=0;const u=pt(this.element);if(u){const t=this.findBoundaryElement();const e=window.getComputedStyle(t);if(e.minWidth!=null){const i=t.offsetWidth-this.element.offsetWidth;c=Number.parseInt(e.minWidth,10)-i}if(e.minHeight!=null){const i=t.offsetHeight-this.element.offsetHeight;h=Number.parseInt(e.minHeight,10)-i}}this.minHeight=o||h;this.minWidth=s||c;if(n){this.setWidth(n)}if(r){this.setHeight(r)}if(!n||!r){this.refreshSize()}if(e){this.center(t)}else if(l||a){this.offsetElement(l,a,t)}else if(u&&i){let e=this.boundaryEl;let i=true;if(!e){e=this.findBoundaryElement();i=false}if(e){const s=Number.parseFloat(e.style.top);const n=Number.parseFloat(e.style.left);if(i){this.offsetElement(isNaN(n)?0:n,isNaN(s)?0:s,t)}else{this.setPosition(n,s)}}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable){return}this.movable=t;const i=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};if(t){this.dragSvc?.addDragSource(i);this.moveElementDragListener=i}else{this.dragSvc?.removeDragSource(i);this.moveElementDragListener=void 0}}setResizable(t){this.clearResizeListeners();if(t){this.addResizers()}else{this.removeResizers()}if(typeof t==="boolean"){if(t===false){return}t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach((e=>{const i=t;const s=!!i[e];const n=this.getResizerElement(e);const o={dragStartPixels:0,eElement:n,onDragStart:t=>this.onResizeStart(t,e),onDragging:this.onResize.bind(this),onDragStop:t=>this.onResizeEnd(t,e)};if(s||!this.isAlive()&&!s){if(s){this.dragSvc?.addDragSource(o);this.resizeListeners.push(o);n.style.pointerEvents="all"}else{n.style.pointerEvents="none"}this.resizable[e]=s}}))}removeSizeFromEl(){this.element.style.removeProperty("height");this.element.style.removeProperty("width");this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:t,width:e}=this.lastSize;if(e!==-1){this.element.style.width=`${e}px`}if(t!==-1){this.element.style.height=`${t}px`}}getHeight(){return this.element.offsetHeight}setHeight(t){const{popup:e}=this.config;const i=this.element;let s=false;if(typeof t==="string"&&t.includes("%")){kt(i,t);t=lt(i);s=true}else{t=Math.max(this.minHeight,t);if(this.positioned){const e=this.getAvailableHeight();if(e&&t>e){t=e}}}if(this.getHeight()===t){return}if(!s){if(e){kt(i,t)}else{i.style.height=`${t}px`;i.style.flex="0 0 auto";this.lastSize.height=typeof t==="number"?t:Number.parseFloat(t)}}else{i.style.maxHeight="unset";i.style.minHeight="unset"}}getAvailableHeight(){const{popup:t,forcePopupParentAsOffsetParent:e}=this.config;if(!this.positioned){this.initialisePosition()}const{clientHeight:i}=this.offsetParent;if(!i){return null}const s=this.element.getBoundingClientRect();const n=this.offsetParent.getBoundingClientRect();const o=t?this.position.y:s.top;const r=t?0:n.top;let l=0;if(e){const t=this.element.parentElement;if(t){const{bottom:e}=t.getBoundingClientRect();l=e-s.bottom}}const a=i+r-o-l;return a}getWidth(){return this.element.offsetWidth}setWidth(t){const e=this.element;const{popup:i}=this.config;let s=false;if(typeof t==="string"&&t.includes("%")){Ft(e,t);t=at(e);s=true}else if(this.positioned){t=Math.max(this.minWidth,t);const{clientWidth:e}=this.offsetParent;const s=i?this.position.x:this.element.getBoundingClientRect().left;if(e&&t+s>e){t=e-s}}if(this.getWidth()===t){return}if(!s){if(this.config.popup){Ft(e,t)}else{e.style.width=`${t}px`;e.style.flex=" unset";this.lastSize.width=typeof t==="number"?t:Number.parseFloat(t)}}else{e.style.maxWidth="unset";e.style.minWidth="unset"}}offsetElement(t=0,e=0,i){const{forcePopupParentAsOffsetParent:s}=this.config;const n=s?this.boundaryEl:this.element;if(!n){return}this.popupSvc?.positionPopup({ePopup:n,keepWithinBounds:true,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e}),postProcessCallback:i});this.setPosition(Number.parseFloat(n.style.left),Number.parseFloat(n.style.top))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent){return}const e=()=>{const t=this.getAvailableHeight();this.element.style.setProperty("max-height",`${t}px`)};if(t&&this.popupSvc){this.resizeObserverSubscriber?.();this.resizeObserverSubscriber=Tt(this.beans,this.popupSvc?.getPopupParent(),e)}else{this.element.style.removeProperty("max-height");if(this.resizeObserverSubscriber){this.resizeObserverSubscriber();this.resizeObserverSubscriber=void 0}}}setPosition(t,e){this.position.x=t;this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){const{e,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=t;const r=e.clientX-this.dragStartPosition.x;const l=e.clientY-this.dragStartPosition.y;const a=this.shouldSkipX(e,!!i,!!n,r)?0:r;const h=this.shouldSkipY(e,!!s,o,l)?0:l;return{movementX:a,movementY:h}}shouldSkipX(t,e,i,s){const n=this.element.getBoundingClientRect();const o=this.offsetParent.getBoundingClientRect();const r=this.boundaryEl.getBoundingClientRect();const l=this.config.popup?this.position.x:n.left;let a=l<=0&&o.left>=t.clientX||o.right<=t.clientX&&o.right<=r.right;if(a){return true}if(e){a=s<0&&t.clientX>l+o.left||s>0&&t.clientX<l+o.left}else if(i){a=s<0&&t.clientX>r.right||s>0&&t.clientX<l+o.left}else{a=s<0&&t.clientX>r.right||s>0&&t.clientX<r.right}return a}shouldSkipY(t,e,i=0,s){const n=this.element.getBoundingClientRect();const o=this.offsetParent.getBoundingClientRect();const r=this.boundaryEl.getBoundingClientRect();const l=this.config.popup?this.position.y:n.top;let a=l<=0&&o.top>=t.clientY||o.bottom<=t.clientY&&o.bottom<=r.bottom;if(a){return true}if(e){a=s<0&&t.clientY>l+o.top+i||s>0&&t.clientY<l+o.top}else{a=s<0&&t.clientY>r.bottom||s>0&&t.clientY<r.bottom}return a}createResizeMap(){const t=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:t("eTopLeft"),top:t("eTop"),topRight:t("eTopRight"),right:t("eRight"),bottomRight:t("eBottomRight"),bottom:t("eBottom"),bottomLeft:t("eBottomLeft"),left:t("eLeft")}}addResizers(){if(this.resizersAdded){return}const t=this.element;if(!t){return}t.appendChild(Ma(Qa));this.createResizeMap();this.resizersAdded=true}removeResizers(){this.resizerMap=void 0;const t=this.element.querySelector(`.${Za}`);t?.remove();this.resizersAdded=false}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement();if(!this.positioned){this.initialisePosition()}this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)};this.element.classList.add("ag-resizing");this.resizerMap[e].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;if(!i&&!s){this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop)}this.isResizing=true;this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){const t=this.element;const e=t.parentElement;if(!e){return null}return Array.prototype.slice.call(e.children).filter((t=>!t.classList.contains("ag-hidden")))}getMinSizeOfSiblings(){const t=this.getSiblings()||[];let e=0;let i=0;for(let s=0;s<t.length;s++){const n=t[s];const o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element){continue}let r=this.minHeight||0;let l=this.minWidth||0;if(o){const t=window.getComputedStyle(n);if(t.minHeight){r=Number.parseInt(t.minHeight,10)}if(t.minWidth){l=Number.parseInt(t.minWidth,10)}}else{r=n.offsetHeight;l=n.offsetWidth}e+=r;i+=l}return{height:e,width:i}}applySizeToSiblings(t){let e=null;const i=this.getSiblings();if(!i){return}for(let s=0;s<i.length;s++){const n=i[s];if(n===e){continue}if(t){n.style.height=`${n.offsetHeight}px`}else{n.style.width=`${n.offsetWidth}px`}n.style.flex="0 0 auto";if(n===this.element){e=i[s+1]}}if(e){e.style.removeProperty("height");e.style.removeProperty("min-height");e.style.removeProperty("max-height");e.style.flex="1 1 auto"}}isResizable(){return Object.values(this.resizable).some((t=>t))}onResize(t){if(!this.isResizing||!this.currentResizer){return}const{popup:e,forcePopupParentAsOffsetParent:i}=this.config;const{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer;const l=n||r;const a=o||s;const{movementX:h,movementY:c}=this.calculateMouseMovement({e:t,isLeft:r,isTop:s});const u=this.position.x;const d=this.position.y;let f=0;let g=0;if(l&&h){const t=r?-1:1;const e=this.getWidth();const i=e+h*t;let s=false;if(r){f=e-i;if(u+f<=0||i<=this.minWidth){s=true;f=0}}if(!s){this.setWidth(i)}}if(a&&c){const t=s?-1:1;const e=this.getHeight();const i=e+c*t;let n=false;if(s){g=e-i;if(d+g<=0||i<=this.minHeight){n=true;g=0}}else if(!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&e<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight){n=true}if(!n){this.setHeight(i)}}this.updateDragStartPosition(t.clientX,t.clientY);if((e||i)&&f||g){this.offsetElement(u+f,d+g)}}onResizeEnd(t,e){this.isResizing=false;this.currentResizer=null;this.boundaryEl=null;this.element.classList.remove("ag-resizing");this.resizerMap[e].element.classList.remove("ag-active");this.dispatchLocalEvent({type:"resize"})}refreshSize(){const t=this.element;if(this.config.popup){if(!this.config.width){this.setWidth(t.offsetWidth)}if(!this.config.height){this.setHeight(t.offsetHeight)}}}onMoveStart(t){this.boundaryEl=this.findBoundaryElement();if(!this.positioned){this.initialisePosition()}this.isMoving=true;this.element.classList.add("ag-moving");this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving){return}const{x:e,y:i}=this.position;let s;if(this.config.calculateTopBuffer){s=this.config.calculateTopBuffer()}const{movementX:n,movementY:o}=this.calculateMouseMovement({e:t,isTop:true,anywhereWithin:true,topBuffer:s});this.offsetElement(e+n,i+o);this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=false;this.boundaryEl=null;this.element.classList.remove("ag-moving")}setOffsetParent(){if(this.config.forcePopupParentAsOffsetParent&&this.popupSvc){this.offsetParent=this.popupSvc.getPopupParent()}else{this.offsetParent=this.element.offsetParent}}findBoundaryElement(){let t=this.element;while(t){if(window.getComputedStyle(t).position!=="static"){return t}t=t.parentElement}return this.element}clearResizeListeners(){while(this.resizeListeners.length){const t=this.resizeListeners.pop();this.dragSvc?.removeDragSource(t)}}destroy(){super.destroy();if(this.moveElementDragListener){this.dragSvc?.removeDragSource(this.moveElementDragListener)}this.constrainSizeToAvailableHeight(false);this.clearResizeListeners();this.removeResizers()}};var Xa="__ag_Grid_Stop_Propagation";function th(t){t[Xa]=true}function eh(t){return t[Xa]===true}var ih="ag-focus-managed";var sh=class extends re{constructor(t,e={}){super();this.eFocusable=t;this.callbacks=e;this.callbacks={shouldStopEventPropagation:()=>false,onTabKeyDown:t=>{if(t.defaultPrevented){return}const e=or(this.beans,this.eFocusable,false,t.shiftKey);if(!e){return}e.focus();t.preventDefault()},...e}}postConstruct(){const{eFocusable:t,callbacks:{onFocusIn:e,onFocusOut:i}}=this;t.classList.add(ih);this.addKeyDownListeners(t);if(e){this.addManagedElementListeners(t,{focusin:e})}if(i){this.addManagedElementListeners(t,{focusout:i})}}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:t=>{if(t.defaultPrevented||eh(t)){return}const{callbacks:e}=this;if(e.shouldStopEventPropagation(t)){th(t);return}if(t.key===mo.TAB){e.onTabKeyDown(t)}else if(e.handleKeyDown){e.handleKeyDown(t)}}})}};var nh=class extends Sn{constructor(t,e){super();this.filterNameKey=t;this.cssIdentifier=e;this.applyActive=false;this.debouncePending=false;this.defaultDebounceMs=0}postConstruct(){const t={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(t,this.getAgComponents());this.createManagedBean(new sh(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}));this.positionableFeature=this.createBean(new Ja(this.getPositionableElement(),{forcePopupParentAsOffsetParent:true}))}handleKeyDown(t){}init(t){const e=t;this.setParams(e);this.setModelIntoUi(e.state.model,true).then((()=>this.updateUiVisibility()))}refresh(t){const e=t;const i=this.params;this.params=e;const s=e.source;if(s==="colDef"){this.updateParams(e,i)}const n=e.state;const o=this.state;this.state=n;if(n.model!==o.model||n.state!==o.state){this.setModelIntoUi(n.model)}return true}setParams(t){this.params=t;this.state=t.state;this.commonUpdateParams(t)}updateParams(t,e){this.commonUpdateParams(t,e)}commonUpdateParams(t,e){this.applyActive=Oa(t);this.setupApplyDebounced()}doesFilterPass(t){hi(283);const{getHandler:e,model:i,column:s}=this.params;return e().doesFilterPass({...t,model:i,handlerParams:this.beans.colFilter.getHandlerParams(s)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){hi(284);return this.params.model!=null}setupApplyDebounced(){const t=Ha(this.params,this.defaultDebounceMs);const e=de(this,this.checkApplyDebounce.bind(this),t);this.applyDebounced=()=>{this.debouncePending=true;e()}}checkApplyDebounce(){if(this.debouncePending){this.debouncePending=false;this.doApplyModel()}}getModel(){hi(285);return this.params.model}setModel(t){hi(286);const{beans:e,params:i}=this;return e.colFilter.setModelForColumnLegacy(i.column,t)}applyModel(t="api"){return this.doApplyModel()}canApply(t){return true}doApplyModel(t){const{params:e,state:i}=this;const s=!this.areModelsEqual(e.model,i.model);if(s){e.onAction("apply",t)}return s}onNewRowsLoaded(){}onUiChanged(t,e=false){this.updateUiVisibility();const i=this.getModelFromUi();const s={model:i,state:this.getState(),valid:this.canApply(i)};this.state=s;const n=this.params;n.onStateChange(s);n.onUiChange(this.getUiChangeEventParams());if(!this.gos.get("enableFilterHandlers")){this.eventSvc.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this})}t??(t=this.applyActive?void 0:"debounce");if(t==="immediately"){this.doApplyModel({afterFloatingFilter:e,afterDataChange:false})}else if(t==="debounce"){this.applyDebounced()}}getState(){return void 0}getUiChangeEventParams(){return void 0}afterGuiAttached(t){this.lastContainerType=t?.container;this.refreshFilterResizer(t?.container)}refreshFilterResizer(t){const{positionableFeature:e,gos:i}=this;if(!e){return}const s=t==="floatingFilter"||t==="columnFilter";if(s){e.restoreLastSize();e.setResizable(i.get("enableRtl")?{bottom:true,bottomLeft:true,left:true}:{bottom:true,bottomRight:true,right:true})}else{e.removeSizeFromEl();e.setResizable(false)}e.constrainSizeToAvailableHeight(s)}afterGuiDetached(){this.checkApplyDebounce();this.positionableFeature?.constrainSizeToAvailableHeight(false)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature);super.destroy()}translate(t){return Ia(this,t)}getPositionableElement(){return this.getGui()}areModelsEqual(t,e){if(t===e||t==null&&e==null){return true}if(t==null||e==null){return false}return this.areNonNullModelsEqual(t,e)}};function oh(t){return!!t.operator}function rh(t,e,i){if(e==null){return null}let s=null;const{compName:n,jsComp:o,fwComp:r}=uo(t,e);if(n){const t={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};s=t[n]}else{const t=o==null&&r==null&&e.filter===true;if(t){s=i()}}return s}var lh={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"};var ah=class extends re{constructor(t){super();this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this));this.updateLayoutClasses()}updateLayoutClasses(){const t=this.gos.get("domLayout");const e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"};const i=e.autoHeight?lh.AUTO_HEIGHT:e.print?lh.PRINT:lh.NORMAL;this.view.updateLayoutClasses(i,e)}};var hh="Viewport";var ch="fakeVScrollComp";var uh=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"];var dh=100;var fh=150;var gh=class extends re{constructor(t){super();this.clearRetryListenerFncs=[];this.lastScrollSource=[null,null];this.scrollLeft=-1;this.nextScrollTop=-1;this.scrollTop=-1;this.lastOffsetHeight=-1;this.lastScrollTop=-1;this.lastIsHorizontalScrollShowing=false;this.scrollTimer=0;this.isScrollActive=false;this.isVerticalPositionInvalidated=true;this.isHorizontalPositionInvalidated=true;this.eBodyViewport=t;this.resetLastHScrollDebounced=de(this,(()=>this.lastScrollSource[1]=null),fh);this.resetLastVScrollDebounced=de(this,(()=>this.lastScrollSource[0]=null),fh)}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc;this.animationFrameSvc=t.animationFrameSvc;this.visibleCols=t.visibleCols}destroy(){super.destroy();this.clearRetryListenerFncs=[];window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const t=this.invalidateVerticalScroll.bind(this);const e=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:t,scrollGapChanged:e});this.addManagedElementListeners(this.eBodyViewport,{scroll:t});this.ctrlsSvc.whenReady(this,(t=>{this.centerRowsCtrl=t.center;this.onDisplayedColumnsWidthChanged();this.addScrollListener()}))}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=true}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=true}addScrollListener(){this.addHorizontalScrollListeners();this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,hh)});for(const t of uh){const e=this.ctrlsSvc.get(t);this.registerScrollPartner(e,this.onHScroll.bind(this,t))}}addVerticalScrollListeners(){const t=this.ctrlsSvc.get("fakeVScrollComp");const e=this.gos.get("debounceVerticalScrollbar");const i=e?de(this,this.onVScroll.bind(this,hh),dh):this.onVScroll.bind(this,hh);const s=e?de(this,this.onVScroll.bind(this,ch),dh):this.onVScroll.bind(this,ch);this.addManagedElementListeners(this.eBodyViewport,{scroll:i});this.registerScrollPartner(t,s)}registerScrollPartner(t,e){t.onScrollCallback(e)}onDisplayedColumnsWidthChanged(){if(this.enableRtl){this.horizontallyScrollHeaderCenterAndFloatingCenter()}}horizontallyScrollHeaderCenterAndFloatingCenter(t){const e=this.centerRowsCtrl==null;if(e){return}if(t===void 0){t=this.centerRowsCtrl.getCenterViewportScrollLeft()}this.setScrollLeftForAllContainersExceptCurrent(Math.abs(t))}setScrollLeftForAllContainersExceptCurrent(t){for(const e of[...uh,hh]){if(this.lastScrollSource[1]===e){continue}const i=this.getViewportForSource(e);ut(i,t,this.enableRtl)}}getViewportForSource(t){if(t===hh){return this.centerRowsCtrl.eViewport}return this.ctrlsSvc.get(t).eViewport}isControllingScroll(t,e){if(this.lastScrollSource[e]==null){if(e===0){this.lastScrollSource[0]=t}else{this.lastScrollSource[1]=t}return true}return this.lastScrollSource[e]===t}onHScroll(t){if(!this.isControllingScroll(t,1)){return}const e=this.centerRowsCtrl.eViewport;const{scrollLeft:i}=e;if(this.shouldBlockScrollUpdate(1,i,true)){return}const s=ct(this.getViewportForSource(t),this.enableRtl);this.doHorizontalScroll(s);this.resetLastHScrollDebounced()}onVScroll(t){if(!this.isControllingScroll(t,0)){return}let e;if(t===hh){e=this.eBodyViewport.scrollTop}else{e=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition()}if(this.shouldBlockScrollUpdate(0,e,true)){return}const{animationFrameSvc:i}=this;i?.setScrollTop(e);this.nextScrollTop=e;if(t===hh){this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(e)}else{this.eBodyViewport.scrollTop=e}if(i?.active){i.schedule()}else{this.scrollGridIfNeeded(true)}this.resetLastVScrollDebounced()}doHorizontalScroll(t){const e=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();if(this.scrollLeft===t&&t===e){return}this.scrollLeft=t;this.fireScrollEvent(1);this.horizontallyScrollHeaderCenterAndFloatingCenter(t);this.centerRowsCtrl.onHorizontalViewportChanged(true)}isScrolling(){return this.isScrollActive}fireScrollEvent(t){const e={type:"bodyScroll",direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=true;this.eventSvc.dispatchEvent(e);window.clearTimeout(this.scrollTimer);this.scrollTimer=window.setTimeout((()=>{this.scrollTimer=0;this.isScrollActive=false;this.eventSvc.dispatchEvent({...e,type:"bodyScrollEnd"})}),fh)}shouldBlockScrollUpdate(t,e,i=false){if(i&&!Do()){return false}if(t===0){return this.shouldBlockVerticalScroll(e)}return this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){const e=ot(this.eBodyViewport);const{scrollHeight:i}=this.eBodyViewport;return!!(t<0||t+e>i)}shouldBlockHorizontalScroll(t){const e=this.centerRowsCtrl.getCenterWidth();const{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(t>0){return true}}else if(t<0){return true}return Math.abs(t)+e>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const t=this.scrollLeft;let e=false;for(const i of uh){const s=this.getViewportForSource(i);if(s.scrollLeft!==t){e=true;break}}if(e){this.onHScroll(hh)}}scrollGridIfNeeded(t=false){const e=this.scrollTop!=this.nextScrollTop;if(e){this.scrollTop=this.nextScrollTop;if(t){this.invalidateVerticalScroll()}this.redrawRowsAfterScroll()}return e}setHorizontalScrollPosition(t,e=false){const i=0;const s=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();if(!e&&this.shouldBlockScrollUpdate(1,t)){if(this.enableRtl){t=t>0?0:s}else{t=Math.min(Math.max(t,i),s)}}ut(this.centerRowsCtrl.eViewport,Math.abs(t),this.enableRtl);this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.invalidateVerticalScroll();this.eBodyViewport.scrollTop=t}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:t,lastScrollTop:e}=this;return{top:e,bottom:e+t}}this.isVerticalPositionInvalidated=false;const{scrollTop:t,offsetHeight:e}=this.eBodyViewport;this.lastScrollTop=t;this.lastOffsetHeight=e;return{top:t,bottom:t+e}}getApproximateVScollPosition(){if(this.lastScrollTop>=0&&this.lastOffsetHeight>=0){return{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}}return this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){if(this.isHorizontalPositionInvalidated){this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing();this.isHorizontalPositionInvalidated=false}return this.lastIsHorizontalScrollShowing}scrollHorizontally(t){const e=this.centerRowsCtrl.eViewport.scrollLeft;this.setHorizontalScrollPosition(e+t);return this.centerRowsCtrl.eViewport.scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){const{rowModel:i}=this.beans;const s=i.getRowCount();let n=-1;for(let e=0;e<s;e++){const s=i.getRow(e);if(typeof t==="function"){const i=t;if(s&&i(s)){n=e;break}}else if(t===s||t===s.data){n=e;break}}if(n>=0){this.ensureIndexVisible(n,e)}}ensureIndexVisible(t,e,i=0){if(vi(this.gos,"print")){return}const{rowModel:s}=this.beans;const n=s.getRowCount();if(typeof t!=="number"||t<0||t>=n){hi(88,{index:t});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:l,rowRenderer:a}=this.beans;o.wrapIncoming((()=>{const n=this.ctrlsSvc.getGridBodyCtrl();const o=s.getRow(t);let h;let c;let u=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:t,stickyBottomHeight:i}=n;const s=o.rowTop;const d=o.rowHeight;const f=r.getPixelOffset();const g=o.rowTop-f;const p=g+o.rowHeight;const m=this.getVScrollPosition();const v=l.divStretchOffset;const w=m.top+v;const C=m.bottom+v;const b=C-w;const y=l.getScrollPositionForPixel(g);const S=l.getScrollPositionForPixel(p-b);const x=Math.min((y+S)/2,g);const R=w+t>g;const F=C-i<p;let k=null;if(e==="top"){k=y-t}else if(e==="bottom"){k=S+i}else if(e==="middle"){k=x}else if(R){k=y-t}else if(F){if(S-y>b){k=y-t}else{k=S+i}}if(k!==null){this.setVerticalScrollPosition(k);a.redraw({afterScroll:true})}h=s!==o.rowTop||d!==o.rowHeight;c=t!==n.stickyTopHeight||i!==n.stickyBottomHeight;u++}while((h||c)&&u<10);this.animationFrameSvc?.flushAllFrames();if(i<10&&(o?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const n=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const t=this.getVScrollPosition().top;if(n===t){return}this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners();if(t>=s.getRowCount()){return}this.ensureIndexVisible(t,e,i+1)}})}}))}clearRetryListeners(){for(const t of this.clearRetryListenerFncs){t()}this.clearRetryListenerFncs=[]}ensureColumnVisible(t,e="auto"){const{colModel:i,frameworkOverrides:s}=this.beans;const n=i.getCol(t);if(!n){return}if(n.isPinned()){return}if(!this.visibleCols.isColDisplayed(n)){return}const o=this.getPositionedHorizontalScroll(n,e);s.wrapIncoming((()=>{if(o!==null){this.centerRowsCtrl.setCenterViewportScrollLeft(o)}this.centerRowsCtrl.onHorizontalViewportChanged();this.animationFrameSvc?.flushAllFrames()}))}getPositionedHorizontalScroll(t,e){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(t);const n=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth();const o=this.centerRowsCtrl.getCenterWidth();const r=this.enableRtl;let l=(r?i:s)||n;let a=r?s:i;if(e!=="auto"){l=e==="start";a=e==="end"}const h=e==="middle";if(l||a||h){const{colLeft:e,colMiddle:i,colRight:s}=this.getColumnBounds(t);if(h){return i-o/2}if(l){return r?s:e}return r?e-o:s-o}return null}isColumnOutsideViewport(t){const{start:e,end:i}=this.getViewportBounds();const{colLeft:s,colRight:n}=this.getColumnBounds(t);const o=this.enableRtl;const r=o?e>n:i<n;const l=o?i<s:e>s;return{columnBeforeStart:r,columnAfterEnd:l}}getColumnBounds(t){const e=this.enableRtl;const i=this.visibleCols.bodyWidth;const s=t.getActualWidth();const n=t.getLeft();const o=e?-1:1;const r=e?i-n:n;const l=r+s*o;const a=r+s/2*o;return{colLeft:r,colMiddle:a,colRight:l}}getViewportBounds(){const t=this.centerRowsCtrl.getCenterWidth();const e=this.centerRowsCtrl.getCenterViewportScrollLeft();const i=e;const s=t+e;return{start:i,end:s,width:t}}};var ph=class extends re{constructor(t,e=false){super();this.callback=t;this.addSpacer=e}postConstruct(){const t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t);this.addManagedEventListeners({columnContainerWidthChanged:t,displayedColumnsChanged:t,leftPinnedWidthChanged:t});if(this.addSpacer){this.addManagedEventListeners({rightPinnedWidthChanged:t,scrollVisibilityChanged:t,scrollbarWidthChanged:t})}this.setWidth()}setWidth(){const t=vi(this.gos,"print");const{visibleCols:e,scrollVisibleSvc:i}=this.beans;const s=e.bodyWidth;const n=e.getColsLeftWidth();const o=e.getDisplayedColumnsRightWidth();let r;if(t){r=s+n+o}else{r=s;if(this.addSpacer){const t=this.gos.get("enableRtl")?n:o;if(t===0&&i.verticalScrollShowing){r+=i.getScrollbarWidth()}}}this.callback(r)}};var mh=class extends re{constructor(t){super();this.centerContainerCtrl=t}wireBeans(t){this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCtrl=t.gridBodyCtrl;this.listenForResize()}));this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)});this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const{beans:t,centerContainerCtrl:e,gridBodyCtrl:i}=this;const s=()=>{Et(t,(()=>{this.onCenterViewportResized()}))};e.registerViewportResizeListener(s);i.registerBodyViewportResizeListener(s)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){this.scrollVisibleSvc.updateScrollGap();if(this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:t,colFlex:e}=this.beans;t?.keepPinnedColumnsNarrowerThanViewport();this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();if(i!==this.centerWidth){this.centerWidth=i;e?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:true,fireResizedEvent:true})}}else{this.bodyHeight=0}}checkViewportAndScrolls(){this.updateScrollVisibleService();this.checkBodyHeight();this.onHorizontalViewportChanged();this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const t=this.gridBodyCtrl.eBodyViewport;const e=ot(t);if(this.bodyHeight!==e){this.bodyHeight=e;this.eventSvc.dispatchEvent({type:"bodyHeightChanged"})}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl();setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive()){return}const t={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(t)}onHorizontalViewportChanged(){const t=this.centerContainerCtrl.getCenterWidth();const e=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,e)}};function vh(t,e,i,s){const n=e.getColDef().cellRendererParams?.suppressMouseEventHandling;return Ch(t,e,i,s,n)}function wh(t,e,i,s){const n=e?.suppressMouseEventHandling;return Ch(t,void 0,i,s,n)}function Ch(t,e,i,s,n){if(!n){return false}return n(os(t,{column:e,node:i,event:s}))}function bh(t,e,i){let s=e;while(s){const e=Fi(t,s,i);if(e){return e}s=s.parentElement}return null}var yh="cellCtrl";function Sh(t,e){return bh(t,e,yh)}var xh="renderedRow";function Rh(t,e){return bh(t,e,xh)}function Fh(t,e,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o){return false}const r=os(t,{event:e,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});if(o){const t=o(r);if(t){return true}}return false}function kh(t){const{pinnedRowModel:e,rowModel:i}=t;const[s,n]=[e?.isEmpty("top")??true,e?.isEmpty("bottom")??true];const o=s?null:"top";let r;let l;if(n){r=null;l=i.getRowCount()-1}else{r="bottom";l=e?.getPinnedBottomRowCount()??0-1}const{visibleCols:a,rangeSvc:h}=t;const c=a.allCols;if(!h||!c?.length){return}h.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:r})}var Ph=65;var Dh=67;var Mh=86;var Th=68;var Eh=90;var Ah=89;function Ih(t){const{keyCode:e}=t;let i;switch(e){case Ph:i=mo.A;break;case Dh:i=mo.C;break;case Mh:i=mo.V;break;case Th:i=mo.D;break;case Eh:i=mo.Z;break;case Ah:i=mo.Y;break;default:i=t.code}return i}var Hh=class extends re{constructor(t){super();this.element=t}postConstruct(){this.addKeyboardListeners();this.addMouseListeners();this.beans.touchSvc?.mockRowContextMenu(this);this.editSvc=this.beans.editSvc}addKeyboardListeners(){const t="keydown";const e=this.processKeyboardEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}addMouseListeners(){const t=Vt("touchstart")?"touchstart":"mousedown";const e=["dblclick","contextmenu","mouseover","mouseout","click",t];for(const t of e){const e=this.processMouseEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}}processMouseEvent(t,e){if(!qt(this.beans,e)||eh(e)){return}const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(e.target);if(t==="contextmenu"){if(i?.column){i.dispatchCellContextMenuEvent(e)}this.beans.contextMenuSvc?.handleContextMenuMouseEvent(e,void 0,s,i)}else{if(i){i.onMouseEvent(t,e)}if(s){s.onMouseEvent(t,e)}}}getControlsForEventTarget(t){const{gos:e}=this;return{cellCtrl:Sh(e,t),rowCtrl:Rh(e,t)}}processKeyboardEvent(t,e){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(e.target);if(e.defaultPrevented){return}if(i){this.processCellKeyboardEvent(i,t,e)}else if(s?.isFullWidth()){this.processFullWidthRowKeyboardEvent(s,t,e)}}processCellKeyboardEvent(t,e,i){const s=this.editSvc?.isEditing(t,{withOpenEditor:true})??false;const n=!Fh(this.gos,i,t.rowNode,t.column,s);if(n){if(e==="keydown"){const e=!s&&this.beans.navigation?.handlePageScrollingKey(i);if(!e){t.onKeyDown(i)}this.doGridOperations(i,s);if(Zo(i)){t.processCharacter(i)}}}if(e==="keydown"){this.eventSvc.dispatchEvent(t.createEvent(i,"cellKeyDown"))}}processFullWidthRowKeyboardEvent(t,e,i){const{rowNode:s}=t;const{focusSvc:n,navigation:o}=this.beans;const r=n.getFocusedCell();const l=r?.column;const a=!Fh(this.gos,i,s,l,false);if(a){const s=i.key;if(e==="keydown"){switch(s){case mo.PAGE_HOME:case mo.PAGE_END:case mo.PAGE_UP:case mo.PAGE_DOWN:o?.handlePageScrollingKey(i,true);break;case mo.LEFT:case mo.RIGHT:if(!this.gos.get("embedFullWidthRows")){break}case mo.UP:case mo.DOWN:t.onKeyboardNavigate(i);break;case mo.TAB:t.onTabKeyDown(i);break}}}if(e==="keydown"){this.eventSvc.dispatchEvent(t.createRowEvent("cellKeyDown",i))}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey){return}if(e){return}if(!qt(this.beans,t)){return}const i=Ih(t);const{clipboardSvc:s,undoRedo:n}=this.beans;if(i===mo.A){return this.onCtrlAndA(t)}if(i===mo.C){return this.onCtrlAndC(s,t)}if(i===mo.D){return this.onCtrlAndD(s,t)}if(i===mo.V){return this.onCtrlAndV(s,t)}if(i===mo.X){return this.onCtrlAndX(s,t)}if(i===mo.Y){return this.onCtrlAndY(n)}if(i===mo.Z){return this.onCtrlAndZ(n,t)}}onCtrlAndA(t){const{beans:{rowModel:e,rangeSvc:i,selectionSvc:s},gos:n}=this;if(i&&$i(n)&&!Ji(n)&&e.isRowsToRender()){kh(this.beans)}else if(s){s.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Qi(n)})}t.preventDefault()}onCtrlAndC(t,e){if(!t||this.gos.get("enableCellTextSelection")){return}const{cellCtrl:i}=this.getControlsForEventTarget(e.target);if(this.editSvc?.isEditing(i,{withOpenEditor:true})){return}e.preventDefault();t.copyToClipboard()}onCtrlAndX(t,e){if(!t||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard")){return}const{cellCtrl:i}=this.getControlsForEventTarget(e.target);if(this.editSvc?.isEditing(i,{withOpenEditor:true})){return}e.preventDefault();t.cutToClipboard(void 0,"ui")}onCtrlAndV(t,e){const{cellCtrl:i}=this.getControlsForEventTarget(e.target);if(this.editSvc?.isEditing(i,{withOpenEditor:true})){return}if(t&&!this.gos.get("suppressClipboardPaste")){t.pasteFromClipboard()}}onCtrlAndD(t,e){if(t&&!this.gos.get("suppressClipboardPaste")){t.copyRangeDown()}e.preventDefault()}onCtrlAndZ(t,e){if(!this.gos.get("undoRedoCellEditing")||!t){return}e.preventDefault();if(e.shiftKey){t.redo("ui")}else{t.undo("ui")}}onCtrlAndY(t){t?.redo("ui")}};var Oh=class extends re{constructor(t,e){super();this.eContainer=t;this.eViewport=e}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(t){const e=t.uiContainerHeight;const i=e!=null?`${e}px`:``;this.eContainer.style.height=i;if(this.eViewport){this.eViewport.style.height=i}}};var Nh=t=>t.topRowCtrls;var Bh=t=>t.getStickyTopRowCtrls();var Gh=t=>t.getStickyBottomRowCtrls();var Vh=t=>t.bottomRowCtrls;var Lh=t=>t.allRowCtrls;var zh=t=>t.getCtrls("top");var $h=t=>t.getCtrls("center");var Wh=t=>t.getCtrls("bottom");var Uh={center:{type:"center",name:"center-cols",getRowCtrls:Lh,getSpannedRowCtrls:$h},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Lh,getSpannedRowCtrls:$h},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Lh,getSpannedRowCtrls:$h},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:true,getRowCtrls:Lh},topCenter:{type:"center",name:"floating-top",getRowCtrls:Nh,getSpannedRowCtrls:zh},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Nh,getSpannedRowCtrls:zh},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Nh,getSpannedRowCtrls:zh},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:true,getRowCtrls:Nh},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Bh},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Bh},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Bh},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:true,getRowCtrls:Bh},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Gh},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Gh},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Gh},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:true,getRowCtrls:Gh},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Vh,getSpannedRowCtrls:Wh},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Vh,getSpannedRowCtrls:Wh},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Vh,getSpannedRowCtrls:Wh},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:true,getRowCtrls:Vh}};function jh(t){const e=_h(t);return`ag-${e.name}-viewport`}function Kh(t){const e=_h(t);return e.container??`ag-${e.name}-container`}function qh(t){const e=_h(t);return`ag-${e.name}-spanned-cells-container`}function _h(t){return Uh[t]}var Zh=["topCenter","topLeft","topRight"];var Yh=["bottomCenter","bottomLeft","bottomRight"];var Qh=["center","left","right"];var Jh=["center","left","right","fullWidth"];var Xh=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"];var tc=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"];var ec=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];var ic=["stickyTopCenter","stickyTopLeft","stickyTopRight"];var sc=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"];var nc=[...ic,"stickyTopFullWidth",...sc,"stickyBottomFullWidth"];var oc=[...Zh,...Yh,...Qh,...ic,...sc];var rc=class extends re{constructor(t){super();this.name=t;this.visible=true;this.EMPTY_CTRLS=[];this.options=_h(t)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new mh(this));this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(t){this.comp.setOffsetTop(`${t.offset}px`)}registerWithCtrlsService(){if(this.options.fullWidth){return}this.beans.ctrlsSvc.register(this.name,this)}forContainers(t,e){if(t.indexOf(this.name)>=0){e()}}setComp(t,e,i,s){this.comp=t;this.eContainer=e;this.eSpannedContainer=i;this.eViewport=s;this.createManagedBean(new Hh(this.eViewport??this.eContainer));this.addPreventScrollWhileDragging();this.listenOnDomOrder();const{pinnedCols:n,rangeSvc:o}=this.beans;const r=()=>this.onPinnedWidthChanged();this.forContainers(tc,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n?.createPinnedWidthFeature(true,this.eContainer,this.eSpannedContainer));this.addManagedEventListeners({leftPinnedWidthChanged:r})}));this.forContainers(ec,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n?.createPinnedWidthFeature(false,this.eContainer,this.eSpannedContainer));this.addManagedEventListeners({rightPinnedWidthChanged:r})}));this.forContainers(Jh,(()=>this.createManagedBean(new Oh(this.eContainer,this.name==="center"?s:void 0))));if(o){this.forContainers(oc,(()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))))}this.forContainers(Xh,(()=>this.createManagedBean(new ph((t=>this.comp.setContainerWidth(`${t}px`))))));this.visible=this.isContainerVisible();this.addListeners();this.registerWithCtrlsService()}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}addListeners(){const{spannedRowRenderer:t,gos:e}=this.beans;const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:t=>this.onDisplayedRowsChanged(t.afterScroll)});i();this.onDisplayedRowsChanged();if(t&&this.options.getSpannedRowCtrls&&e.get("enableCellSpan")){this.addManagedListeners(t,{spannedRowsUpdated:()=>{const e=this.options.getSpannedRowCtrls(t);if(!e){return}this.comp.setSpannedRowCtrls(e,false)}})}}listenOnDomOrder(){const t=nc.indexOf(this.name)>=0;if(t){this.comp.setDomOrder(true);return}const e=()=>{const t=this.gos.get("ensureDomOrder");const e=vi(this.gos,"print");this.comp.setDomOrder(t||e)};this.addManagedPropertyListener("domLayout",e);e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const{dragSvc:t}=this.beans;if(!t){return}const e=e=>{if(t.dragging){if(e.cancelable){e.preventDefault()}}};this.eContainer.addEventListener("touchmove",e,{passive:false});this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(t=false){const e=this.getCenterWidth();const i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,i,t)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return rt(this.eViewport)}getCenterViewportScrollLeft(){return ct(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){const e=Tt(this.beans,this.eViewport,t);this.addDestroyFunc((()=>e()))}isViewportInTheDOMTree(){return gt(this.eViewport)}getViewportScrollLeft(){return ct(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){const t=this.gos.get("alwaysShowHorizontalScroll");return t||St(this.eViewport)}setHorizontalScroll(t){this.comp.setHorizontalScroll(t)}getHScrollPosition(){const t={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return t}setCenterViewportScrollLeft(t){ut(this.eViewport,t,this.enableRtl)}isContainerVisible(){const t=this.options.pinnedType!=null;return!t||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const t=this.isContainerVisible();if(this.visible!=t){this.visible=t;this.onDisplayedRowsChanged()}}onDisplayedRowsChanged(t=false){const e=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||e.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=vi(this.gos,"print");const s=this.gos.get("embedFullWidthRows");const n=s||i;const o=e.filter((t=>{const e=t.isFullWidth();const i=this.options.fullWidth?!n&&e:n||!e;return i}));this.comp.setRowCtrls({rowCtrls:o,useFlushSync:t})}};var lc="ag-force-vertical-scroll";var ac="ag-selectable";var hc="ag-column-moving";var cc=class extends re{constructor(){super(...arguments);this.stickyTopHeight=0;this.stickyBottomHeight=0}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc;this.colModel=t.colModel;this.scrollVisibleSvc=t.scrollVisibleSvc;this.pinnedRowModel=t.pinnedRowModel;this.filterManager=t.filterManager;this.rowGroupColsSvc=t.rowGroupColsSvc}setComp(t,e,i,s,n,o,r){this.comp=t;this.eGridBody=e;this.eBodyViewport=i;this.eTop=s;this.eBottom=n;this.eStickyTop=o;this.eStickyBottom=r;this.eCenterColsViewport=i.querySelector(`.${jh("center")}`);this.eFullWidthContainer=i.querySelector(`.${Kh("fullWidth")}`);this.eStickyTopFullWidthContainer=o.querySelector(`.${Kh("stickyTopFullWidth")}`);this.eStickyBottomFullWidthContainer=r.querySelector(`.${Kh("stickyBottomFullWidth")}`);this.setCellTextSelection(this.gos.get("enableCellTextSelection"));this.addManagedPropertyListener("enableCellTextSelection",(t=>this.setCellTextSelection(t.currentValue)));this.createManagedBean(new ah(this.comp));this.scrollFeature=this.createManagedBean(new gh(i));this.beans.rowDragSvc?.setupRowDrag(i,this);this.setupRowAnimationCssClass();this.addEventListeners();this.addFocusListeners([s,i,n,o,r]);this.setGridRootRole();this.onGridColumnsChanged();this.addBodyViewportListener();this.setFloatingHeights();this.disableBrowserDragging();this.addStopEditingWhenGridLosesFocus();this.updateScrollingClasses();this.filterManager?.setupAdvFilterHeaderComp(s);this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const t=this.setFloatingHeights.bind(this);const e=this.setGridRootRole.bind(this);const i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:t,pinnedHeightChanged:t,pinnedRowsChanged:t,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:e,columnPivotChanged:e,rowResizeStarted:i,rowResizeEnded:i});this.addManagedPropertyListener("treeData",e)}toggleRowResizeStyles(t){const e=t.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",e)}onGridColumnsChanged(){const t=this.beans.colModel.getCols();this.comp.setColumnCount(t.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:t}=this;const e=t.verticalScrollShowing;this.setVerticalScrollPaddingVisible(e);this.setStickyWidth(e);this.setStickyBottomOffsetBottom();const i=e?t.getScrollbarWidth()||0:0;const s=Io()?16:0;const n=`calc(100% + ${i+s}px)`;Et(this.beans,(()=>this.comp.setBodyViewportWidth(n)));this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:t,colModel:e}=this;let i=this.gos.get("treeData");if(!i){const s=e.isPivotMode();const n=!t?0:t.columns.length;const o=s?2:1;i=n>=o}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(t){for(const e of t){this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t;const s=st(i,"ag-root",e);e.classList.toggle("ag-has-focus",!s)},focusout:t=>{const{target:i,relatedTarget:s}=t;const n=e.contains(s);const o=st(s,"ag-root",e);const r=st(i,"ag-root",e);if(r){return}if(!n||o){e.classList.remove("ag-has-focus")}}})}}setColumnMovingCss(t){this.comp.setColumnMovingCss(hc,t)}setCellTextSelection(t=false){this.comp.setCellSelectableCss(ac,t)}updateScrollingClasses(){const{eGridBody:{classList:t},scrollVisibleSvc:e}=this;t.toggle("ag-body-vertical-content-no-gap",!e.verticalScrollGap);t.toggle("ag-body-horizontal-content-no-gap",!e.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:t=>{if(t.target instanceof HTMLImageElement){t.preventDefault();return false}}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const t=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0);const{rowModel:e}=this.beans;const i=e.isLastRowIndexKnown()?e.getRowCount():-1;const s=i===-1?-1:t+i;this.comp.setRowCount(s)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){const e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){const t=this.gos.get("alwaysShowVerticalScroll");const e=t?lc:null;const i=vi(this.gos,"normal");this.comp.setAlwaysVerticalScrollClass(e,t);return t||i&&xt(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:t,environment:e}=this.beans;let i=e.sizesMeasured;const s=()=>{const e=i&&Pi(this.gos)&&!t.stretching;const s=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,e)};s();this.addManagedEventListeners({heightScaleChanged:s});this.addManagedPropertyListener("animateRows",s);this.addManagedEventListeners({gridStylesChanged:()=>{if(!i&&e.sizesMeasured){i=true;s()}}})}addBodyViewportListener(){const{eBodyViewport:t,eStickyTop:e,eStickyBottom:i,eTop:s,eBottom:n,beans:{popupSvc:o,touchSvc:r}}=this;const l=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(t,{contextmenu:l});r?.mockBodyContextMenu(this,l);this.addManagedElementListeners(t,{wheel:this.onBodyViewportWheel.bind(this,o)});const a=this.onStickyWheel.bind(this);for(const t of[e,i,s,n]){this.addManagedElementListeners(t,{wheel:a})}const h=this.onHorizontalWheel.bind(this);for(const t of["left","right","topLeft","topRight","bottomLeft","bottomRight"]){this.addManagedElementListeners(this.ctrlsSvc.get(t).eContainer,{wheel:h})}this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:t=>this.onFullWidthContainerWheel(t)})}onFullWidthContainerWheel(t){const{deltaX:e,deltaY:i,shiftKey:s}=t;const n=s||Math.abs(e)>Math.abs(i);if(n&&qt(this.beans,t)){this.scrollGridBodyToMatchEvent(t)}}onStickyWheel(t){const{deltaY:e}=t;const i=this.scrollVertically(e);if(i>0){t.preventDefault()}}onHorizontalWheel(t){const{deltaX:e,deltaY:i,shiftKey:s}=t;const n=s||Math.abs(e)>Math.abs(i);if(!n){return}this.scrollGridBodyToMatchEvent(t)}scrollGridBodyToMatchEvent(t){const{deltaX:e,deltaY:i}=t;t.preventDefault();this.eCenterColsViewport.scrollBy({left:e||i})}onBodyViewportContextMenu(t,e,i){if(!t&&!i){return}if(this.gos.get("preventDefaultOnContextMenu")){const e=t||i;e.preventDefault()}const{target:s}=t||e;if(s===this.eBodyViewport||s===this.ctrlsSvc.get("center").eViewport){this.beans.contextMenuSvc?.showContextMenu({mouseEvent:t,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}}onBodyViewportWheel(t,e){if(!this.gos.get("suppressScrollWhenPopupsAreOpen")){return}if(t?.hasAnchoredPopup()){e.preventDefault()}}scrollVertically(t){const e=this.eBodyViewport.scrollTop;this.scrollFeature.setVerticalScrollPosition(e+t);return this.eBodyViewport.scrollTop-e}setFloatingHeights(){const{pinnedRowModel:t,beans:{environment:e}}=this;const i=t?.getPinnedTopTotalHeight();const s=t?.getPinnedBottomTotalHeight();const n=e.getPinnedRowBorderWidth();const o=e.getRowBorderWidth();const r=n-o;const l=!i?0:r+i;const a=!s?0:r+s;this.comp.setTopHeight(l);this.comp.setBottomHeight(a);this.comp.setTopInvisible(l<=0);this.comp.setBottomInvisible(a<=0);this.setStickyTopOffsetTop();this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`);this.stickyTopHeight=t}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`);this.stickyBottomHeight=t}setStickyWidth(t){if(!t){this.comp.setStickyTopWidth("100%");this.comp.setStickyBottomWidth("100%")}else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`);this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl");const e=t.headerHeight+(this.filterManager?.getHeaderHeight()??0);const i=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let s=0;if(e>0){s+=e}if(i>0){s+=i}if(s>0){s+=1}this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:t,scrollVisibleSvc:e,comp:i}=this;const s=t?.getPinnedBottomTotalHeight()??0;const n=e.horizontalScrollShowing;const o=n?e.getScrollbarWidth()||0:0;const r=s+o;i.setStickyBottomBottom(`${r}px`)}};function uc(t,e){return Sh(t,e.target)?.getFocusedCellPosition()??null}function dc(t,e){const i=vi(t.gos,"normal");const s=e;let n;let o;if(s.clientX!=null||s.clientY!=null){n=s.clientX;o=s.clientY}else{n=s.x;o=s.y}const{pageFirstPixel:r}=t.pageBounds.getCurrentPagePixelRange();o+=r;if(i){const e=t.ctrlsSvc.getScrollFeature();const i=e.getVScrollPosition();const s=e.getHScrollPosition();n+=s.left;o+=i.top}return{x:n,y:o}}var fc=class extends Sn{constructor(t,e){super();this.direction=e;this.eViewport=vn;this.eContainer=vn;this.hideTimeout=0;this.setTemplate(t)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)});this.onScrollVisibilityChanged();this.toggleCss("ag-apple-scrollbar",Po()||Do())}destroy(){super.destroy();window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){if(this.invisibleScrollbar!==void 0){return}this.invisibleScrollbar=Io();if(this.invisibleScrollbar){this.hideAndShowInvisibleScrollAsNeeded();this.addActiveListenerToggles()}}addActiveListenerToggles(){const t=this.getGui();const e=()=>this.toggleCss("ag-scrollbar-active",true);const i=()=>this.toggleCss("ag-scrollbar-active",false);this.addManagedListeners(t,{mouseenter:e,mousedown:e,touchstart:e,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){if(this.invisibleScrollbar===void 0){this.initialiseInvisibleScrollbar()}Et(this.beans,(()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:t=>{if(t.direction===this.direction){if(this.hideTimeout){window.clearTimeout(this.hideTimeout);this.hideTimeout=0}this.toggleCss("ag-scrollbar-scrolling",true)}},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.toggleCss("ag-scrollbar-scrolling",false);this.hideTimeout=0}),400)}})}attemptSettingScrollPosition(t){const e=this.eViewport;ge(this,(()=>pt(e)),(()=>this.setScrollPosition(t)),100)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}};var gc={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]};var pc=class extends fc{constructor(){super(gc,"horizontal");this.eLeftSpacer=vn;this.eRightSpacer=vn;this.setScrollVisibleDebounce=0}wireBeans(t){this.visibleCols=t.visibleCols;this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){super.postConstruct();const t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,pinnedRowDataChanged:this.refreshCompBottom.bind(this)});this.addManagedPropertyListener("domLayout",t);this.beans.ctrlsSvc.register("fakeHScrollComp",this);this.createManagedBean(new ph((t=>this.eContainer.style.width=`${t}px`)));this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce);super.destroy()}initialiseInvisibleScrollbar(){if(this.invisibleScrollbar!==void 0){return}this.enableRtl=this.gos.get("enableRtl");super.initialiseInvisibleScrollbar();if(this.invisibleScrollbar){this.refreshCompBottom()}}refreshCompBottom(){if(!this.invisibleScrollbar){return}const t=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged();this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const t=this.scrollVisibleSvc.verticalScrollShowing;let e=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&t;const s=this.scrollVisibleSvc.getScrollbarWidth();if(i){e+=s}Ft(this.eRightSpacer,e);this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=s);let n=this.visibleCols.getColsLeftWidth();const o=this.enableRtl&&t;if(o){n+=s}Ft(this.eLeftSpacer,n);this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const t=this.scrollVisibleSvc.horizontalScrollShowing;const e=this.invisibleScrollbar;const i=this.gos.get("suppressHorizontalScroll");const s=t?this.scrollVisibleSvc.getScrollbarWidth()||0:0;const n=s===0&&e?16:s;const o=!i?n:0;const r=()=>{this.setScrollVisibleDebounce=0;this.toggleCss("ag-scrollbar-invisible",e);kt(this.getGui(),o);kt(this.eViewport,o);kt(this.eContainer,o);if(!o){this.eContainer.style.setProperty("min-height","1px")}this.setVisible(t,{skipAriaHidden:true})};window.clearTimeout(this.setScrollVisibleDebounce);if(!t){r()}else{this.setScrollVisibleDebounce=window.setTimeout(r,100)}}getScrollPosition(){return ct(this.eViewport,this.enableRtl)}setScrollPosition(t){if(!pt(this.eViewport)){this.attemptSettingScrollPosition(t)}ut(this.eViewport,t,this.enableRtl)}};var mc={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:pc};var vc={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]};var wc=class extends fc{constructor(){super(vc,"vertical")}postConstruct(){super.postConstruct();this.createManagedBean(new Oh(this.eContainer));const{ctrlsSvc:t}=this.beans;t.register("fakeVScrollComp",this);this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,t)})}setScrollVisible(){const{scrollVisibleSvc:t}=this.beans;const e=t.verticalScrollShowing;const i=this.invisibleScrollbar;const s=e?t.getScrollbarWidth()||0:0;const n=s===0&&i?16:s;this.toggleCss("ag-scrollbar-invisible",i);Ft(this.getGui(),n);Ft(this.eViewport,n);Ft(this.eContainer,n);this.setDisplayed(e,{skipAriaHidden:true})}onRowContainerHeightChanged(t){const e=t.getGridBodyCtrl();const i=e.eBodyViewport;const s=this.getScrollPosition();const n=i.scrollTop;if(s!=n){this.setScrollPosition(n,true)}}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(t,e){if(!e&&!pt(this.eViewport)){this.attemptSettingScrollPosition(t)}this.eViewport.scrollTop=t}};var Cc={selector:"AG-FAKE-VERTICAL-SCROLL",component:wc};var bc="ag-column-first";var yc="ag-column-last";function Sc(t,e,i,n){if(s(t)){return[]}return Fc(t.headerClass,t,e,i,n)}function xc(t,e,i){t.toggleCss(bc,i.isColAtEdge(e,"first"));t.toggleCss(yc,i.isColAtEdge(e,"last"))}function Rc(t,e,i,s){return os(e,{colDef:t,column:i,columnGroup:s})}function Fc(t,e,i,n,o){if(s(t)){return[]}let r;if(typeof t==="function"){const s=Rc(e,i,n,o);r=t(s)}else{r=t}if(typeof r==="string"){return[r]}if(Array.isArray(r)){return[...r]}return[]}function kc(t,e,i){e.addManagedElementListeners(i,{keydown:e=>{if(!e.defaultPrevented&&e.key===mo.TAB){const s=e.shiftKey;if(!or(t,i,false,s)){if(Tc(t,s)){e.preventDefault()}}}}})}function Pc(t,e){return t.ctrlsSvc.get("gridCtrl").focusInnerElement(e)}function Dc(t){return t.gos.get("suppressHeaderFocus")||!!t.overlays?.isExclusive()}function Mc(t){return t.gos.get("suppressCellFocus")||!!t.overlays?.isExclusive()}function Tc(t,e,i=false){const s=t.ctrlsSvc.get("gridCtrl");if(!i&&s.focusNextInnerContainer(e)){return true}if(i||!e&&!s.isDetailGrid()){s.forceFocusOutOfContainer(e)}return false}function Ec(t){return t.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function Ac(t){const e=[];const i=t.ctrlsSvc.getHeaderRowContainerCtrls();for(const s of i){if(!s){continue}const i=s.getGroupRowCount()||0;for(let n=0;n<i;n++){const i=s.getGroupRowCtrlAtIndex(n);const o=e[n];if(i){const s=Ic(t,i);if(o==null||s>o){e[n]=s}}}}return e}function Ic(t,e){const i=t.colModel.isPivotMode()?Vc(t):Bc(t);let s=i;const n=e.getHeaderCellCtrls();for(const t of n){const{column:e}=t;const i=e.getAutoHeaderHeight();if(i!=null&&i>s&&e.isAutoHeaderHeight()){s=i}}return s}function Hc(t){const e=t.colModel.isPivotMode()?Gc(t):Oc(t);let i=e;t.colModel.forAllCols((t=>{const e=t.getAutoHeaderHeight();if(e!=null&&e>i&&t.isAutoHeaderHeight()){i=e}}));return i}function Oc(t){return t.gos.get("headerHeight")??t.environment.getDefaultHeaderHeight()}function Nc(t){return t.gos.get("floatingFiltersHeight")??Oc(t)}function Bc(t){return t.gos.get("groupHeaderHeight")??Oc(t)}function Gc(t){return t.gos.get("pivotHeaderHeight")??Oc(t)}function Vc(t){return t.gos.get("pivotGroupHeaderHeight")??Bc(t)}function Lc(t,e){return t.headerRowIndex===e.headerRowIndex&&t.column===e.column}var zc=class extends re{setComp(t,e,i){this.comp=t;this.eGui=e;const{beans:s}=this;const{headerNavigation:n,touchSvc:o,ctrlsSvc:r}=s;if(n){this.createManagedBean(new sh(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)}))}this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,s),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,s)});this.onPivotModeChanged(s);this.setupHeaderHeight();const l=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:l});o?.mockHeaderContextMenu(this,l);r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const t=this.setHeaderHeight.bind(this);t();this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t);this.addManagedEventListeners({headerRowsChanged:t,columnHeaderHeightChanged:t,columnGroupHeaderHeightChanged:()=>Et(this.beans,(()=>t())),gridStylesChanged:t,advancedFilterEnabledChanged:t})}setHeaderHeight(){const{beans:t}=this;let e=0;const i=Ac(t).reduce(((t,e)=>t+e),0);const s=Hc(t);if(t.filterManager?.hasFloatingFilters()){e+=Nc(t)}e+=i;e+=s;if(this.headerHeight===e){return}this.headerHeight=e;const n=`${e+1}px`;this.comp.setHeightAndMinHeight(n);this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(t){const e=t.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",e);this.comp.toggleCss("ag-pivot-off",!e)}onDisplayedColumnsChanged(t){const e=t.visibleCols.allCols;const i=e.some((t=>t.isSpanHeaderHeight()));this.comp.toggleCss("ag-header-allow-overflow",i)}onTabKeyDown(t){const e=this.gos.get("enableRtl");const i=t.shiftKey;const s=i!==e?"LEFT":"RIGHT";const{beans:n}=this;const{headerNavigation:o,focusSvc:r}=n;if(o.navigateHorizontally(s,true,t)||!i&&r.focusOverlay(false)||Tc(n,i,true)){t.preventDefault()}}handleKeyDown(t){let e=null;const{headerNavigation:s}=this.beans;switch(t.key){case mo.LEFT:e="LEFT";case mo.RIGHT:{if(!i(e)){e="RIGHT"}if(s.navigateHorizontally(e,false,t)){t.preventDefault()}break}case mo.UP:e="UP";case mo.DOWN:{if(!i(e)){e="DOWN"}if(s.navigateVertically(e,t)){t.preventDefault()}break}default:return}}onFocusOut(t){const{relatedTarget:e}=t;const{eGui:i,beans:s}=this;if(!e&&i.contains(d(s))){return}if(!i.contains(e)){s.focusSvc.focusedHeader=null}}onHeaderContextMenu(t,e,i){const{menuSvc:s,ctrlsSvc:n}=this.beans;if(!t&&!i||!s?.isHeaderContextMenuEnabled()){return}const{target:o}=t??e;if(o===this.eGui||o===n.getHeaderRowContainerCtrl()?.eViewport){s.showHeaderContextMenu(void 0,t,i)}}};var $c=class extends Sn{constructor(t,e){super(t);this.ctrl=e}getCtrl(){return this.ctrl}};var Wc={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]};var Uc=class extends $c{constructor(t){super(Wc,t);this.eResize=vn;this.eHeaderCompWrapper=vn;this.headerCompVersion=0}postConstruct(){const t=this.getGui();const e=()=>{const t=this.ctrl.getSelectAllGui();if(t){this.eResize.insertAdjacentElement("afterend",t);this.addDestroyFunc((()=>t.remove()))}};const i={setWidth:e=>t.style.width=e,toggleCss:(t,e)=>this.toggleCss(t,e),setUserStyles:e=>bt(t,e),setAriaSort:e=>e?U(t,e):j(t),setUserCompDetails:t=>this.setUserCompDetails(t),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:e,removeSelectAllGui:()=>this.ctrl.getSelectAllGui()?.remove()};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);e()}destroy(){this.destroyHeaderComp();super.destroy()}destroyHeaderComp(){if(this.headerComp){this.headerCompGui?.remove();this.headerComp=this.destroyBean(this.headerComp);this.headerCompGui=void 0}}setUserCompDetails(t){this.headerCompVersion++;const e=this.headerCompVersion;t.newAgStackInstance().then((t=>this.afterCompCreated(e,t)))}afterCompCreated(t,e){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(e);return}this.destroyHeaderComp();this.headerComp=e;this.headerCompGui=e.getGui();this.eHeaderCompWrapper.appendChild(this.headerCompGui);this.ctrl.setDragSource(this.getGui())}};var jc={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]};var Kc=class extends $c{constructor(t){super(jc,t);this.eResize=vn;this.eHeaderCompWrapper=vn}postConstruct(){const t=this.getGui();const e=(e,i)=>i!=void 0?t.setAttribute(e,i):t.removeAttribute(e);const i={toggleCss:(t,e)=>this.toggleCss(t,e),setUserStyles:e=>bt(t,e),setHeaderWrapperHidden:t=>{if(t){this.eHeaderCompWrapper.style.setProperty("display","none")}else{this.eHeaderCompWrapper.style.removeProperty("display")}},setHeaderWrapperMaxHeight:t=>{if(t!=null){this.eHeaderCompWrapper.style.setProperty("max-height",`${t}px`)}else{this.eHeaderCompWrapper.style.removeProperty("max-height")}this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",t!=null)},setResizableDisplayed:t=>tt(this.eResize,t),setWidth:e=>t.style.width=e,setAriaExpanded:t=>e("aria-expanded",t),setUserCompDetails:t=>this.setUserCompDetails(t),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(i,t,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(t){t.newAgStackInstance().then((t=>this.afterHeaderCompCreated(t)))}afterHeaderCompCreated(t){const e=()=>this.destroyBean(t);if(!this.isAlive()){e();return}const i=this.getGui();const s=t.getGui();this.eHeaderCompWrapper.appendChild(s);this.addDestroyFunc(e);this.headerGroupComp=t;this.ctrl.setDragSource(i)}};var qc={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]};var _c=class extends $c{constructor(t){super(qc,t);this.eFloatingFilterBody=vn;this.eButtonWrapper=vn;this.eButtonShowMainFilter=vn}postConstruct(){const t=this.getGui();const e={toggleCss:(t,e)=>this.toggleCss(t,e),setUserStyles:e=>bt(t,e),addOrRemoveBodyCssClass:(t,e)=>this.eFloatingFilterBody.classList.toggle(t,e),setButtonWrapperDisplayed:t=>tt(this.eButtonWrapper,t),setCompDetails:t=>this.setCompDetails(t),getFloatingFilterComp:()=>this.compPromise,setWidth:e=>t.style.width=e,setMenuIcon:t=>this.eButtonShowMainFilter.appendChild(t)};this.ctrl.setComp(e,t,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp();this.compPromise=null;return}this.compPromise=t.newAgStackInstance();this.compPromise.then((t=>this.afterCompCreated(t)))}destroy(){this.destroyFloatingFilterComp();super.destroy()}destroyFloatingFilterComp(){if(this.floatingFilterComp){this.floatingFilterComp.getGui().remove();this.floatingFilterComp=this.destroyBean(this.floatingFilterComp)}}afterCompCreated(t){if(!t){return}if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp();this.floatingFilterComp=t;this.eFloatingFilterBody.appendChild(t.getGui());if(t.afterGuiAttached){t.afterGuiAttached()}}};var Zc=class extends Sn{constructor(t){super({tag:"div",cls:t.headerRowClass,role:"row"});this.ctrl=t;this.headerComps={}}postConstruct(){const t=this.getGui();t.setAttribute("tabindex",String(this.gos.get("tabIndex")));V(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,e)=>this.setHeaderCtrls(t,e),setWidth:t=>this.getGui().style.width=t,setRowIndex:t=>V(this.getGui(),t)};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],false);super.destroy()}setHeaderCtrls(t,e){if(!this.isAlive()){return}const i=this.headerComps;this.headerComps={};for(const e of t){const t=e.instanceId;let s=i[t];delete i[t];if(s==null){s=this.createHeaderComp(e);this.getGui().appendChild(s.getGui())}this.headerComps[t]=s}Object.values(i).forEach((t=>{t.getGui().remove();this.destroyBean(t)}));if(e){const t=Object.values(this.headerComps);t.sort(((t,e)=>{const i=t.getCtrl().column.getLeft();const s=e.getCtrl().column.getLeft();return i-s}));const e=t.map((t=>t.getGui()));wt(this.getGui(),e)}}createHeaderComp(t){let e;switch(this.ctrl.type){case"group":e=new Kc(t);break;case"filter":e=new _c(t);break;default:e=new Uc(t);break}this.createBean(e);e.setParentComponent(this);return e}};var Yc=class extends re{constructor(t,e,i,s){super();this.columnOrGroup=t;this.eCell=e;this.colsSpanning=s;this.columnOrGroup=t;this.ariaEl=e.querySelector("[role=columnheader]")||e;this.beans=i}setColsSpanning(t){this.colsSpanning=t;this.onLeftChanged()}getColumnOrGroup(){const{beans:t,colsSpanning:e}=this;if(t.gos.get("enableRtl")&&e){return vs(e)}return this.columnOrGroup}postConstruct(){const t=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:t});this.setLeftFirstTime();this.addManagedEventListeners({displayedColumnsWidthChanged:t});this.addManagedPropertyListener("domLayout",t)}setLeftFirstTime(){const{gos:t,colAnimation:e}=this.beans;const s=t.get("suppressColumnMoveAnimation");const n=i(this.columnOrGroup.getOldLeft());const o=e?.isActive()&&n&&!s;if(o){this.animateInLeft()}else{this.onLeftChanged()}}animateInLeft(){const t=this.getColumnOrGroup();const e=this.modifyLeftForPrintLayout(t,t.getOldLeft());const i=this.modifyLeftForPrintLayout(t,t.getLeft());this.setLeft(e);this.actualLeft=i;this.beans.colAnimation.executeNextVMTurn((()=>{if(this.actualLeft===i){this.setLeft(i)}}))}onLeftChanged(){const t=this.getColumnOrGroup();const e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e);this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){const{gos:i,visibleCols:s}=this.beans;const n=vi(i,"print");if(!n){return e}if(t.getPinned()==="left"){return e}const o=s.getColsLeftWidth();if(t.getPinned()==="right"){const t=s.bodyWidth;return o+t+e}return o+e}setLeft(t){if(i(t)){this.eCell.style.left=`${t}px`}if(ca(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length){return}if(t.length>1){W(this.ariaEl,t.length)}}}};var Qc=0;var Jc="headerCtrl";var Xc=class extends re{constructor(t,e){super();this.column=t;this.rowCtrl=e;this.resizeToggleTimeout=0;this.resizeMultiplier=1;this.resizeFeature=null;this.lastFocusEvent=null;this.dragSource=null;this.reAttemptToFocus=false;this.instanceId=t.getUniqueId()+"-"+Qc++}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t);this.addManagedEventListeners({overlayExclusiveChanged:t})}setComp(t,e,i,s,n){e.setAttribute("col-id",this.column.colIdSanitised);this.wireComp(t,e,i,s,n);if(this.reAttemptToFocus){this.reAttemptToFocus=false;this.focus(this.lastFocusEvent??void 0)}}shouldStopEventPropagation(t){const{headerRowIndex:e,column:s}=this.beans.focusSvc.focusedHeader;const n=s.getDefinition();const o=n?.suppressHeaderKeyboardEvent;if(!i(o)){return false}const r=os(this.gos,{colDef:n,column:s,headerRowIndex:e,event:t});return!!o(r)}getWrapperHasFocus(){const t=d(this.beans);return t===this.eGui}setGui(t,e){this.eGui=t;this.addDomData(e);e.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)});e.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)});this.onDisplayedColumnsChanged();this.refreshTabIndex()}refreshHeaderStyles(){const t=this.column.getDefinition();if(!t){return}const{headerStyle:e}=t;let i;if(typeof e==="function"){const t=this.getHeaderClassParams();i=e(t)}else{i=e}if(i){this.comp.setUserStyles(i)}}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:e,checkMeasuringCallback:i,compBean:s}=t;const{beans:n}=this;const o=t=>{if(!this.isAlive()||!s.isAlive()){return}const{paddingTop:i,paddingBottom:r,borderBottomWidth:l,borderTopWidth:a}=nt(this.eGui);const h=i+r+l+a;const c=e.offsetHeight;const u=c+h;if(t<5){const i=f(n);const s=!i?.contains(e);const r=u==0;if(s||r){ue((()=>o(t+1)),"raf",n);return}}this.setColHeaderHeight(this.column,u)};let r=false;let l;const a=()=>{const t=this.column.isAutoHeaderHeight();if(t&&!r){h()}if(!t&&r){c()}};const h=()=>{r=true;this.comp.toggleCss("ag-header-cell-auto-height",true);o(0);l=Tt(this.beans,e,(()=>o(0)))};const c=()=>{r=false;if(l){l()}this.comp.toggleCss("ag-header-cell-auto-height",false);l=void 0};a();s.addDestroyFunc((()=>c()));s.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)});s.addManagedEventListeners({sortChanged:()=>{if(r){window.setTimeout((()=>o(0)))}}});if(i){i(a)}}onDisplayedColumnsChanged(){const{comp:t,column:e,beans:i,eGui:s}=this;if(!t||!e||!s){return}xc(t,e,i.visibleCols);$(s,i.visibleCols.getAriaColIndex(e))}addResizeAndMoveKeyboardListeners(t){t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=Dc(this.beans);if(this.eGui){Mt(this.eGui,"tabindex",t?null:"-1")}}onGuiKeyDown(t){const e=d(this.beans);const i=t.key===mo.LEFT||t.key===mo.RIGHT;if(this.isResizing){t.preventDefault();t.stopImmediatePropagation()}if(e!==this.eGui||!t.shiftKey&&!t.altKey){return}if(this.isResizing||i){t.preventDefault();t.stopImmediatePropagation()}if(!i){return}const s=t.key===mo.LEFT!==this.gos.get("enableRtl");const n=s?"left":"right";if(t.altKey){this.isResizing=true;this.resizeMultiplier+=1;const e=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(e,t.shiftKey);this.resizeFeature?.toggleColumnResizing(true)}else{this.moveHeader(n)}}moveHeader(t){this.beans.colMoves?.moveHeader(t,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(t){const e=this.getResizeDiff(t);const{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(e,this.column):e}getResizeDiff(t){const{gos:e,column:i}=this;let s=t.key===mo.LEFT!==e.get("enableRtl");const n=i.getPinned();const o=e.get("enableRtl");if(n){if(o!==(n==="right")){s=!s}}return(s?-1:1)*this.resizeMultiplier}onGuiKeyUp(){if(!this.isResizing){return}if(this.resizeToggleTimeout){window.clearTimeout(this.resizeToggleTimeout);this.resizeToggleTimeout=0}this.isResizing=false;this.resizeMultiplier=1;this.resizeToggleTimeout=window.setTimeout((()=>{this.resizeFeature?.toggleColumnResizing(false)}),150)}handleKeyDown(t){const e=this.getWrapperHasFocus();switch(t.key){case mo.PAGE_DOWN:case mo.PAGE_UP:case mo.PAGE_HOME:case mo.PAGE_END:if(e){t.preventDefault()}}}addDomData(t){const e=Jc;const{eGui:i,gos:s}=this;ki(s,i,e,this);t.addDestroyFunc((()=>ki(s,i,e,null)))}focus(t){if(!this.isAlive()){return false}const{eGui:e}=this;if(!e){this.reAttemptToFocus=true}else{e.focus();this.lastFocusEvent=t||null}return true}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){if(this.dragSource){this.beans.dragAndDrop?.removeDragSource(this.dragSource);this.dragSource=null}}handleContextMenuMouseEvent(t,e,i){const s=t??e;const{menuSvc:n,gos:o}=this.beans;if(o.get("preventDefaultOnContextMenu")){s.preventDefault()}if(n?.isHeaderContextMenuEnabled(i)){n.showHeaderContextMenu(i,t,e)}this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,e){this.eventSvc.dispatchEvent({type:t,column:e})}setColHeaderHeight(t,e){if(!t.setAutoHeaderHeight(e)){return}const{eventSvc:i}=this;if(t.isColumn){i.dispatchEvent({type:"columnHeaderHeightChanged",column:t,columns:[t],source:"autosizeColumnHeaderHeight"})}else{i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:t,source:"autosizeColumnGroupHeaderHeight"})}}clearComponent(){this.removeDragSource();this.resizeFeature=null;this.comp=null;this.eGui=null}destroy(){super.destroy();this.column=null;this.lastFocusEvent=null;this.rowCtrl=null}};var tu=class extends Xc{constructor(){super(...arguments);this.refreshFunctions={};this.userHeaderClasses=new Set;this.ariaDescriptionProperties=new Map}wireComp(t,e,i,s,n){this.comp=t;const{rowCtrl:o,column:r,beans:l}=this;const{colResize:a,context:h,colHover:c,rangeSvc:u}=l;const d=mn(this,h,n);this.setGui(e,d);this.updateState();this.setupWidth(d);this.setupMovingCss(d);this.setupMenuClass(d);this.setupSortableClass(d);this.setupWrapTextClass();this.refreshSpanHeaderHeight();this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:t=>this.setRefreshFunction("measuring",t),compBean:d});this.addColumnHoverListener(d);this.setupFilterClass(d);this.setupStylesFromColDef();this.setupClassesFromColDef();this.setupTooltip();this.addActiveHeaderMouseListeners(d);this.setupSelectAll(d);this.setupUserComp();this.refreshAria();if(a){this.resizeFeature=d.createManagedBean(a.createResizeFeature(o.pinned,r,i,t,this))}else{tt(i,false)}c?.createHoverFeature(d,[r],e);u?.createRangeHighlightFeature(d,r,t);d.createManagedBean(new Yc(r,e,l));d.createManagedBean(new sh(e,{shouldStopEventPropagation:t=>this.shouldStopEventPropagation(t),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)}));this.addResizeAndMoveKeyboardListeners(d);d.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],(()=>this.refresh()));d.addManagedListeners(r,{colDefChanged:()=>this.refresh()});d.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const f=()=>this.checkDisplayName();d.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)});d.addDestroyFunc((()=>{this.refreshFunctions={};this.selectAllFeature=null;this.dragSourceElement=void 0;this.userCompDetails=null;this.userHeaderClasses.clear();this.ariaDescriptionProperties.clear();this.clearComponent()}))}resizeHeader(t,e){this.beans.colResize?.resizeHeader(this.column,t,e)}getHeaderClassParams(){const{column:t,beans:e}=this;const i=t.colDef;return os(e.gos,{colDef:i,column:t,floatingFilter:false})}setupUserComp(){const t=this.lookupUserCompDetails();if(t){this.setCompDetails(t)}}setCompDetails(t){this.userCompDetails=t;this.comp.setUserCompDetails(t)}lookupUserCompDetails(){const t=this.createParams();const e=this.column.getColDef();return _n(this.beans.userCompFactory,e,t)}createParams(){const{menuSvc:t,sortSvc:e,colFilter:i,gos:s}=this.beans;const n=os(s,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!t?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||is(this.gos)),showColumnMenu:(e,i)=>{t?.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(e,i)=>{t?.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse",onClosedCallback:i})},showFilter:e=>{t?.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{e?.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,i)=>{e?.setSortForColumn(this.column,t,!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(t,e)=>{s.assertModuleRegistered("Tooltip",3);this.setupTooltip(t,e)}});return n}setupSelectAll(t){const{selectionSvc:e}=this.beans;if(!e){return}this.selectAllFeature=t.createOptionalManagedBean(e.createSelectAllFeature(this.column));this.selectAllFeature?.setComp(this);t.addManagedPropertyListener("rowSelection",(()=>{const i=e.createSelectAllFeature(this.column);if(i&&!this.selectAllFeature){this.selectAllFeature=t.createManagedBean(i);this.selectAllFeature?.setComp(this);this.comp.refreshSelectAllGui()}else if(this.selectAllFeature&&!i){this.comp.removeSelectAllGui();this.selectAllFeature=this.destroyBean(this.selectAllFeature)}}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t);if(t.key===mo.SPACE){this.selectAllFeature?.onSpaceKeyDown(t)}if(t.key===mo.ENTER){this.onEnterKeyDown(t)}if(t.key===mo.DOWN&&t.altKey){this.showMenuOnKeyPress(t,false)}}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey){this.showMenuOnKeyPress(t,true)}else if(this.sortable){this.beans.sortSvc?.progressSort(this.column,t.shiftKey,"uiColumnSorted")}}showMenuOnKeyPress(t,e){const i=this.comp.getUserCompInstance();if(!eu(i)){return}if(i.onMenuKeyboardShortcut(e)){t.preventDefault()}}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){this.focusThis();this.announceAriaDescription()}if(ir()){this.setActiveHeader(true)}}onFocusOut(t){if(this.eGui.contains(t.relatedTarget)){return}this.setActiveHeader(false)}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,t,e)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this));this.refreshHeaderStyles()}setupClassesFromColDef(){const t=()=>{const t=this.column.getColDef();const e=Sc(t,this.gos,this.column,null);const i=this.userHeaderClasses;this.userHeaderClasses=new Set(e);for(const t of e){if(i.has(t)){i.delete(t)}else{this.comp.toggleCss(t,true)}}for(const t of i){this.comp.toggleCss(t,false)}};this.setRefreshFunction("headerClasses",t);t()}setDragSource(t){this.dragSourceElement=t;this.removeDragSource();if(!t||!this.draggable){return}this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null}updateState(){const{menuSvc:t}=this.beans;this.menuEnabled=!!t?.isColumnMenuInHeaderEnabled(this.column);this.openFilterEnabled=!!t?.isFilterMenuInHeaderEnabled(this.column);this.sortable=this.column.isSortable();this.displayName=this.calculateDisplayName();this.draggable=this.workOutDraggable()}setRefreshFunction(t,e){this.refreshFunctions[t]=e}refresh(){this.updateState();this.refreshHeaderComp();this.refreshAria();for(const t of Object.values(this.refreshFunctions)){t()}}refreshHeaderComp(){const t=this.lookupUserCompDetails();if(!t){return}const e=this.comp.getUserCompInstance();const i=e!=null&&this.userCompDetails.componentClass==t.componentClass;const s=i?this.attemptHeaderCompRefresh(t.params):false;if(s){this.setDragSource(this.dragSourceElement)}else{this.setCompDetails(t)}}attemptHeaderCompRefresh(t){const e=this.comp.getUserCompInstance();if(!e){return false}if(!e.refresh){return false}const i=e.refresh(t);return i}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",true)}checkDisplayName(){if(this.displayName!==this.calculateDisplayName()){this.refresh()}}workOutDraggable(){const t=this.column.getColDef();const e=this.gos.get("suppressMovableColumns");const i=!e&&!t.suppressMovable&&!t.lockPosition;return!!i||!!t.enableRowGroup||!!t.enablePivot}setupWidth(t){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};t.addManagedListeners(this.column,{widthChanged:e});e()}setupMovingCss(t){const e=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};t.addManagedListeners(this.column,{movingChanged:e});e()}setupMenuClass(t){const e=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};t.addManagedListeners(this.column,{menuVisibleChanged:e});e()}setupSortableClass(t){const e=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};e();this.setRefreshFunction("updateSortable",e);t.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(t){const e=()=>{const t=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",t);this.refreshAria()};t.addManagedListeners(this.column,{filterActiveChanged:e});e()}setupWrapTextClass(){const t=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};t();this.setRefreshFunction("wrapText",t)}onHeaderHighlightChanged(){const t=this.column.getHighlighted();const e=t===0;const i=t===1;this.comp.toggleCss("ag-header-highlight-before",e);this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged();if(!this.isAlive()){return}this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:t,column:e,comp:i,beans:s}=this;const n=Ac(this.beans);const o=n.reduce(((t,e)=>t+e),0)===0;i.toggleCss("ag-header-parent-hidden",o);if(!e.isSpanHeaderHeight()){t.style.removeProperty("top");t.style.removeProperty("height");i.toggleCss("ag-header-span-height",false);i.toggleCss("ag-header-span-total",false);return}const{numberOfParents:r,isSpanningTotal:l}=this.column.getColumnGroupPaddingInfo();i.toggleCss("ag-header-span-height",r>0);const a=Hc(s);if(r===0){i.toggleCss("ag-header-span-total",false);t.style.setProperty("top",`0px`);t.style.setProperty("height",`${a}px`);return}i.toggleCss("ag-header-span-total",l);const h=(this.column.getFirstRealParent()?.getLevel()??-1)+1;const c=n.length-h;let u=0;for(let t=0;t<c;t++){u+=n[n.length-1-t]}t.style.setProperty("top",`${-u}px`);t.style.setProperty("height",`${a+u}px`)}refreshAriaSort(){if(this.sortable){const t=this.getLocaleTextFunc();const e=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(R(e));this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else{this.comp.setAriaSort();this.setAriaDescriptionProperty("sort",null)}}refreshAriaMenu(){if(this.menuEnabled){const t=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else{this.setAriaDescriptionProperty("menu",null)}}refreshAriaFilterButton(){if(this.openFilterEnabled&&!is(this.gos)){const t=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else{this.setAriaDescriptionProperty("filterButton",null)}}refreshAriaFiltered(){const t=this.getLocaleTextFunc();const e=this.column.isFilterActive();if(e){this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered"))}else{this.setAriaDescriptionProperty("filter",null)}}setAriaDescriptionProperty(t,e){if(e!=null){this.ariaDescriptionProperties.set(t,e)}else{this.ariaDescriptionProperties.delete(t)}}announceAriaDescription(){if(!this.eGui.contains(d(this.beans))){return}const t=Array.from(this.ariaDescriptionProperties.keys()).sort(((t,e)=>t==="filter"?-1:e.charCodeAt(0)-t.charCodeAt(0))).map((t=>this.ariaDescriptionProperties.get(t))).join(". ");this.beans.ariaAnnounce?.announceValue(t,"columnHeader")}refreshAria(){this.refreshAriaSort();this.refreshAriaMenu();this.refreshAriaFilterButton();this.refreshAriaFiltered()}addColumnHoverListener(t){this.beans.colHover?.addHeaderColumnHoverListener(t,this.comp,this.column)}addActiveHeaderMouseListeners(t){const e=t=>this.handleMouseOverChange(t.type==="mouseenter");const i=()=>{this.setActiveHeader(true);this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)};const s=t=>this.handleContextMenuMouseEvent(t,void 0,this.column);t.addManagedListeners(this.eGui,{mouseenter:e,mouseleave:e,click:i,contextmenu:s})}handleMouseOverChange(t){this.setActiveHeader(t);this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(t){this.comp.toggleCss("ag-header-active",t)}getAnchorElementForMenu(t){const e=this.comp.getUserCompInstance();if(eu(e)){return e.getAnchorElementForMenu(t)}return this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature);super.destroy()}};function eu(t){return typeof t?.getAnchorElementForMenu==="function"&&typeof t.onMenuKeyboardShortcut==="function"}var iu=0;var su=class extends re{constructor(t,e,i){super();this.rowIndex=t;this.pinned=e;this.type=i;this.instanceId=iu++;this.comp=null;this.allCtrls=[];let s="ag-header-row-column";if(i==="group"){s="ag-header-row-group"}else if(i==="filter"){s="ag-header-row-filter"}this.headerRowClass=`ag-header-row ${s}`}setRowIndex(t){this.rowIndex=t;this.comp?.setRowIndex(this.getAriaRowIndex());this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=vi(this.gos,"print");this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){if(!this.comp){return false}return this.allCtrls.every((t=>t.eGui!=null))}setComp(t,e,i=true){this.comp=t;e=mn(this,this.beans.context,e);if(i){this.setRowIndex(this.rowIndex);this.onVirtualColumnsChanged()}this.setWidth();this.addEventListeners(e)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(t){const e=this.onRowHeightChanged.bind(this);const i=this.onDisplayedColumnsChanged.bind(this);t.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnGroupHeaderHeightChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e});t.addManagedPropertyListener("domLayout",i);t.addManagedPropertyListener("ensureDomOrder",(t=>this.isEnsureDomOrder=t.currentValue));t.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}onDisplayedColumnsChanged(){this.isPrintLayout=vi(this.gos,"print");this.onVirtualColumnsChanged();this.setWidth();this.onRowHeightChanged()}setWidth(){if(!this.comp){return}const t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){const{visibleCols:t}=this.beans;if(this.isPrintLayout){const e=this.pinned!=null;if(e){return 0}return t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null)}return t.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp){return}const{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px");this.comp.setHeight(e+"px")}getTopAndHeight(){let t=0;const e=Ac(this.beans);for(let i=0;i<e.length;i++){if(i===this.rowIndex&&this.type==="group"){return{topOffset:t,rowHeight:e[i]}}t+=e[i]}const i=Hc(this.beans);if(this.type==="column"){return{topOffset:t,rowHeight:i}}t+=i;const s=Nc(this.beans);return{topOffset:t,rowHeight:s}}onVirtualColumnsChanged(t=false){if(!this.comp){return}const e=this.getUpdatedHeaderCtrls();const i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,i,t)}getUpdatedHeaderCtrls(){const t=this.ctrlsById;this.ctrlsById=new Map;const e=this.getColumnsInViewport();for(const i of e){this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,t)}const i=t=>{const{focusSvc:e,visibleCols:i}=this.beans;const s=e.isHeaderWrapperFocused(t);if(!s){return false}const n=i.isVisible(t.column);return n};if(t){for(const[e,s]of t){const t=i(s);if(t){this.ctrlsById.set(e,s)}else{this.destroyBean(s)}}}this.allCtrls=Array.from(this.ctrlsById.values());return this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(t,e,i){if(t.isEmptyGroup()){return}const s=t.getUniqueId();let n;if(i){n=i.get(s);i.delete(s)}const o=n&&n.column!=t;if(o){this.destroyBean(n);n=void 0}if(n==null){switch(this.type){case"filter":{n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",true,t,this));break}case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",true,t,this));break;default:n=this.createBean(new tu(t,this));break}}e.set(s,n)}getColumnsInViewport(){if(!this.isPrintLayout){return this.getComponentsToRender()}if(this.pinned){return[]}const t=[];for(const e of["left",null,"right"]){t.push(...this.getComponentsToRender(e))}return t}getComponentsToRender(t=this.pinned){if(this.type==="group"){return this.beans.colViewport.getHeadersToRender(t,this.rowIndex)}return this.beans.colViewport.getColumnHeadersToRender(t)}focusHeader(t,e){const i=this.allCtrls.find((e=>e.column==t));if(!i){return false}const s=i.focus(e);return s}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls);this.ctrlsById=void 0;this.comp=null;super.destroy()}};var nu=class extends re{constructor(t){super();this.pinned=t;this.hidden=false;this.includeFloatingFilter=false;this.groupsRowCtrls=[]}setComp(t,e){this.comp=t;this.eViewport=e;const{pinnedCols:i,ctrlsSvc:s,colModel:n,colMoves:o}=this.beans;this.setupCenterWidth();i?.setupHeaderPinnedWidth(this);this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,true);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const l=`${typeof this.pinned==="string"?this.pinned:"center"}Header`;s.register(l,this);if(n.ready){this.refresh()}}getAllCtrls(){const t=[...this.groupsRowCtrls];if(this.columnsRowCtrl){t.push(this.columnsRowCtrl)}if(this.filtersRowCtrl){t.push(this.filtersRowCtrl)}return t}refresh(t=false){const{focusSvc:e,filterManager:i,visibleCols:s}=this.beans;let n=0;const o=e.getFocusHeaderToUseAfterRefresh();const r=()=>{const e=s.headerGroupRowCount;n=e;if(!t){this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)}const i=this.groupsRowCtrls.length;if(i===e){return}if(i>e){for(let t=e;t<i;t++){this.destroyBean(this.groupsRowCtrls[t])}this.groupsRowCtrls.length=e;return}for(let t=i;t<e;t++){const e=this.createBean(new su(t,this.pinned,"group"));this.groupsRowCtrls.push(e)}};const l=()=>{const e=n++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}if(this.columnsRowCtrl==null||!t){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);this.columnsRowCtrl=this.createBean(new su(e,this.pinned,"column"))}else if(this.columnsRowCtrl.rowIndex!==e){this.columnsRowCtrl.setRowIndex(e)}};const a=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;const e=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){e();return}if(!t){e()}const s=n++;if(this.filtersRowCtrl){const t=this.filtersRowCtrl.rowIndex!==s;if(t){this.filtersRowCtrl.setRowIndex(s)}}else{this.filtersRowCtrl=this.createBean(new su(s,this.pinned,"filter"))}};const h=this.getAllCtrls();r();l();a();const c=this.getAllCtrls();this.comp.setCtrls(c);this.restoreFocusOnHeader(e,o);if(h.length!==c.length){this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}}getHeaderCtrlForColumn(t){const e=e=>e?.getHeaderCellCtrls().find((e=>e.column===t));if(cs(t)){return e(this.columnsRowCtrl)}if(this.groupsRowCtrls.length===0){return}for(let t=0;t<this.groupsRowCtrls.length;t++){const i=e(this.groupsRowCtrls[t]);if(i){return i}}}getHtmlElementForColumnHeader(t){return this.getHeaderCtrlForColumn(t)?.eGui??null}getRowType(t){return this.getAllCtrls()[t]?.type}focusHeader(t,e,i){const s=this.getAllCtrls();const n=s[t];if(!n){return false}return n.focusHeader(e,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(t){return this.groupsRowCtrls[t]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl);this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);super.destroy()}setupDragAndDrop(t,e){const i=t?.createBodyDropTarget(this.pinned,e);if(i){this.createManagedBean(i)}}restoreFocusOnHeader(t,e){if(!e){return}const{column:i}=e;if(i.getPinned()!=this.pinned){return}t.focusHeaderPosition({headerPosition:e,scroll:false})}setupCenterWidth(){if(this.pinned!=null){return}this.createManagedBean(new ph((t=>this.comp.setCenterWidth(`${t}px`)),true))}};var ou=class extends re{constructor(){super(...arguments);this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:t,filterMenuFactory:e}=this.beans;this.activeMenuFactory=t??e}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){this.showColumnMenuCommon(lu(this.beans),t,t.containerType,true)}showHeaderContextMenu(t,e,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(t,e,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu();this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){lu(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(t){const{suppressHeaderMenuButton:e}=t.getColDef();return!e&&!!this.activeMenuFactory?.isMenuEnabled(t)&&(is(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){const e=t&&cs(t)?t.getColDef():t?.getColGroupDef();return!e?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const t=!this.isSuppressMenuHide();const e=Do()&&t;return!e}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!is(this.gos)&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return!!this.beans.filterManager?.isFilterAllowed(t)&&!is(this.gos)&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isFloatingFilterButtonEnabled(t){return!t.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){const t=this.gos;const e=t.get("suppressMenuHide");if(is(t)){return t.exists("suppressMenuHide")?e:false}return e}showColumnMenuCommon(t,e,i,s){const{positionBy:n,onClosedCallback:o}=e;const r=e.column;if(n==="button"){const{buttonElement:n}=e;t?.showMenuAfterButtonClick(r,n,i,o,s)}else if(n==="mouse"){const{mouseEvent:n}=e;t?.showMenuAfterMouseEvent(r,n,i,o,s)}else if(r){const e=this.beans;const n=e.ctrlsSvc;n.getScrollFeature().ensureColumnVisible(r,"auto");Et(e,(()=>{const e=n.getHeaderRowContainerCtrl(r.getPinned())?.getHeaderCtrlForColumn(r);if(e){t?.showMenuAfterButtonClick(r,e.getAnchorElementForMenu(s),i,o,s)}}))}}};function ru(t,e,i){if(t.menuVisible!==e){t.menuVisible=e;t.dispatchColEvent("menuVisibleChanged",i)}}function lu(t){const{enterpriseMenuFactory:e,filterMenuFactory:i,gos:s}=t;return e&&is(s)?e:i}var au=class extends vo{constructor(){super(...arguments);this.errorMessages=null}init(t){this.params=t;this.initialiseEditor(t);this.eEditor.onValueChange((()=>t.validate()))}destroy(){this.errorMessages=null}};var hu=class extends Sn{constructor(){super()}};var cu={tag:"span",cls:"ag-overlay-loading-center"};var uu=class extends hu{init(){const t=e(this.gos.get("overlayLoadingTemplate")?.trim());this.setTemplate(t??cu);if(!t){const t=this.getLocaleTextFunc();const e=t("loadingOoo","Loading...");this.getGui().textContent=e;this.beans.ariaAnnounce.announceValue(e,"overlay")}}};var du={tag:"span",cls:"ag-overlay-no-rows-center"};var fu=class extends hu{init(){const t=e(this.gos.get("overlayNoRowsTemplate")?.trim());this.setTemplate(t??du);if(!t){const t=this.getLocaleTextFunc();const e=t("noRowsToShow","No Rows To Show");this.getGui().textContent=e;this.beans.ariaAnnounce.announceValue(e,"overlay")}}};function gu(t,e,i){const s=pu(t,e,i);if(s){const{className:t}=s;if(typeof t==="string"&&t.includes("ag-icon")||typeof t==="object"&&t["ag-icon"]){return s}}const n=Ma({tag:"span"});n.appendChild(s);return n}function pu(t,e,i){let s=null;if(t==="smallDown"){hi(262)}else if(t==="smallLeft"){hi(263)}else if(t==="smallRight"){hi(264)}const n=i?.getColDef().icons;if(n){s=n[t]}if(e.gos&&!s){const i=e.gos.get("icons");if(i){s=i[t]}}if(s){let e;if(typeof s==="function"){e=s()}else if(typeof s==="string"){e=s}else{hi(38,{iconName:t});return void 0}if(typeof e==="string"){return mt(e)}if(Dt(e)){return e}hi(133,{iconName:t});return void 0}else{const i=e.registry.getIcon(t);if(!i){e.validation?.validateIcon(t)}return Ma({tag:"span",cls:`ag-icon ag-icon-${i??t}`,role:"presentation",attrs:{unselectable:"on"}})}}var mu=`.ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}`;var vu={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]};var wu=class extends Sn{constructor(){super();this.dragSource=null;this.eIcon=vn;this.eLabel=vn;this.eGhost=vn;this.registerCSS(mu)}postConstruct(){const t=t=>gu(t,this.beans,null);this.dropIconMap={pinned:t("columnMovePin"),hide:t("columnMoveHide"),move:t("columnMoveMove"),left:t("columnMoveLeft"),right:t("columnMoveRight"),group:t("columnMoveGroup"),aggregate:t("columnMoveValue"),pivot:t("columnMovePivot"),notAllowed:t("dropNotAllowed")}}init(t){this.dragSource=t.dragSource;this.setTemplate(vu);this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null;super.destroy()}setIcon(t,e){const{eGhost:i,eIcon:s,dragSource:n,dropIconMap:o,gos:r}=this;dt(s);let l=null;if(!t){t=n?.getDefaultIconName?n.getDefaultIconName():"notAllowed"}l=o[t];i.classList.toggle("ag-dnd-ghost-not-allowed",t==="notAllowed");s.classList.toggle("ag-shake-left-to-right",e);if(l===o["hide"]&&r.get("suppressDragLeaveHidesColumns")){return}if(l){s.appendChild(l)}}setLabel(t){this.eLabel.textContent=t}};var Cu=`.ag-checkbox-cell{height:100%}`;var bu={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]};var yu=class extends Sn{constructor(){super(bu,[fr]);this.eCheckbox=vn;this.registerCSS(Cu)}init(t){this.refresh(t);const{eCheckbox:e,beans:i}=this;const s=e.getInputElement();s.setAttribute("tabindex","-1");D(s,"polite");this.addManagedListeners(s,{click:t=>{th(t);if(e.isDisabled()){return}const i=e.getValue();this.onCheckboxChanged(i)},dblclick:t=>{th(t)}});this.addManagedElementListeners(t.eGridCell,{keydown:s=>{if(s.key===mo.SPACE&&!e.isDisabled()){if(t.eGridCell===d(i)){e.toggle()}const n=e.getValue();this.onCheckboxChanged(n);s.preventDefault()}}})}refresh(t){this.params=t;this.updateCheckbox(t);return true}updateCheckbox(t){let e;let i=true;const{value:s,column:n,node:o}=t;if(o.group&&n){if(typeof s==="boolean"){e=s}else{const t=n.getColId();if(t.startsWith(Ss)){e=s==null||s===""?void 0:s==="true"}else if(o.aggData&&o.aggData[t]!==void 0){e=s??void 0}else if(o.sourceRowIndex>=0){e=s??void 0}else{i=false}}}else{e=s??void 0}const{eCheckbox:r}=this;if(!i){r.setDisplayed(false);return}r.setValue(e);const l=t.disabled??!n?.isCellEditable(o);r.setDisabled(l);const a=this.getLocaleTextFunc();const h=Y(a,e);const c=l?h:`${a("ariaToggleCellValue","Press SPACE to toggle cell value")} (${h})`;r.setInputAriaLabel(c)}onCheckboxChanged(t){const{params:e}=this;const{column:i,node:s,value:n}=e;this.beans?.editSvc?.setEditingCells([{column:i,colId:i.getColId(),rowIndex:s.rowIndex,rowPinned:s.rowPinned,state:"changed",oldValue:n,newValue:n}],{update:true,forceRefreshOfEditCellsOnly:true});const o=s.setDataValue(i,t,"renderer");this.beans.editSvc?.stopEditing({rowNode:s,column:i},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"});if(!o){this.updateCheckbox(e)}}};var Su=class{constructor(t,e){this.beans=t;this.floating=e;this.all=new Set;this.visible=new Set;this.order=[];this.queued=new Set}size(){return this.visible.size}add(t){const{all:e,visible:i,order:s}=this;if(e.has(t)){return}e.add(t);i.add(t);s.push(t);this.sort()}delete(t){this.all.delete(t);this.visible.delete(t);this.queued.delete(t.id);bs(this.order,t)}has(t){return this.visible.has(t)}forEach(t){this.order.forEach(t)}getByIndex(t){return this.order[t]}getById(t){for(const e of this.visible){if(e.id==t){return e}}}clear(){const{all:t,visible:e,order:i,queued:s}=this;t.clear();s.clear();e.clear();i.length=0}sort(){const{sortSvc:t,rowNodeSorter:e,gos:i}=this.beans;const s=t?.getSortOptions()??[];const n=Pu(this.order);this.order.sort(((t,e)=>(t.pinnedSibling?.rowIndex??0)-(e.pinnedSibling?.rowIndex??0)));this.order=e?.doFullSort(this.order,s)??this.order;if(!n){return}const o=Ei(i);if(o==="bottom"||o==="pinnedBottom"){this.order.push(n)}else{this.order.unshift(n)}}hide(t){const{all:e,visible:i}=this;e.forEach((e=>t(e)?i.delete(e):i.add(e)));this.order=Array.from(i);this.sort()}queue(t){this.queued.add(t)}unqueue(t){this.queued.delete(t)}forEachQueued(t){this.queued.forEach(t)}};function xu(t){if(t.level===-1){return true}const e=t.parent;if(e?.childrenAfterSort?.some((e=>e==t))){return xu(e)}return false}function Ru(t,e){const{gos:i,rowModel:s,filterManager:n}=t;if(mi(i)){return!s.getRowNode(e.id)}if(n?.isAnyFilterPresent()){return!xu(e)}if(i.get("pivotMode")){return!e.group}return false}function Fu(t){return!!t.footer&&t.level===-1}function ku(t){return!!t.pinnedSibling&&Fu(t.pinnedSibling)}function Pu(t){const e=t.findIndex(ku);if(e>-1){return t.splice(e,1)?.[0]}}var Du=class extends re{postConstruct(){const{gos:t,beans:e}=this;this.top=new Su(e,"top");this.bottom=new Su(e,"bottom");const i=t=>Ru(e,t.pinnedSibling);const s=()=>{const i=t.get("isRowPinned");if(i&&t.get("enableRowPinning")){e.rowModel.forEachNode((t=>this.pinRow(t,i(t))),true)}this.refreshRowPositions();this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:t})=>{this.tryToEmptyQueues();this.pinGrandTotalRow();this.forContainers((t=>t.hide(i)));const e=this.refreshRowPositions();if(!t||e){this.dispatchRowPinnedEvents()}},columnRowGroupChanged:()=>{this.forContainers(Au);this.refreshRowPositions()},rowNodeDataChanged:({node:e})=>{const i=t.get("isRowPinnable");const s=i?.(e)??true;if(!s){this.pinRow(e,null)}},firstDataRendered:s});this.addManagedPropertyListener("pivotMode",(()=>{this.forContainers((t=>t.hide(i)));this.dispatchRowPinnedEvents()}));this.addManagedPropertyListener("grandTotalRow",(({currentValue:t})=>{this._grandTotalPinned=t==="pinnedBottom"?"bottom":t==="pinnedTop"?"top":null}));this.addManagedPropertyListener("isRowPinned",s)}destroy(){this.reset(false);super.destroy()}reset(t=true){this.forContainers((t=>{const e=[];t.forEach((t=>e.push(t)));e.forEach((t=>this.pinRow(t,null)));t.clear()}));if(t){this.dispatchRowPinnedEvents()}}pinRow(t,e,i){if(t.footer&&t.level>-1){return}if(t.footer&&t.level===-1){this._grandTotalPinned=e;Ou(this.beans);return}const s=t.rowPinned??t.pinnedSibling?.rowPinned;const n=s!=null&&e!=null&&e!=s;if(n){const s=t.rowPinned?t:t.pinnedSibling;const n=t.rowPinned?t.pinnedSibling:t;this.pinRow(s,null,i);this.pinRow(n,e,i);return}const o=i&&Iu(this.beans,t,i);if(o){o.forEach((t=>this.pinRow(t,e)));return}if(e==null){const i=t.rowPinned?t:t.pinnedSibling;const s=this.findPinnedRowNode(i);if(!s){return}s.delete(i);const n=i.pinnedSibling;Eu(i);this.refreshRowPositions(e);this.dispatchRowPinnedEvents(n)}else{const i=Tu(this.beans,t,e);const s=this.getContainer(e);s.add(i);if(Ru(this.beans,t)){s.hide((t=>Ru(this.beans,t.pinnedSibling)))}this.refreshRowPositions(e);this.dispatchRowPinnedEvents(t)}}isManual(){return true}isEmpty(t){return this.getContainer(t).size()===0}isRowsToRender(t){return!this.isEmpty(t)}ensureRowHeightsValid(){let t=false;let e=0;const i=i=>{if(i.rowHeightEstimated){const s=yi(this.beans,i);i.setRowTop(e);i.setRowHeight(s.height);e+=s.height;t=true}};this.bottom.forEach(i);e=0;this.top.forEach(i);this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"});return t}getPinnedTopTotalHeight(){return Hu(this.top)}getPinnedBottomTotalHeight(){return Hu(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(t){return this.top.getByIndex(t)}getPinnedBottomRow(t){return this.bottom.getByIndex(t)}getPinnedRowById(t,e){return this.getContainer(e).getById(t)}forEachPinnedRow(t,e){this.getContainer(t).forEach(e)}getPinnedState(){const t=t=>{const e=[];this.forEachPinnedRow(t,(t=>e.push(t.pinnedSibling.id)));return e};return{top:t("top"),bottom:t("bottom")}}setPinnedState(t){this.forContainers(((e,i)=>{for(const s of t[i]){const t=this.beans.rowModel.getRowNode(s);if(t){this.pinRow(t,i)}else{e.queue(s)}}}))}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(t){this._grandTotalPinned=t}tryToEmptyQueues(){this.forContainers(((t,e)=>{const i=new Set;t.forEachQueued((t=>{const e=this.beans.rowModel.getRowNode(t);if(e){i.add(e)}}));for(const s of i){t.unqueue(s.id);this.pinRow(s,e)}}))}pinGrandTotalRow(){const{gos:t,beans:e,_grandTotalPinned:i}=this;const s=e.rowModel;if(!pi(t)){return}const n=s.rootNode?.sibling;if(!n){return}const o=n.pinnedSibling;const r=o&&this.findPinnedRowNode(o);if(!i){if(!r){return}r.delete(o);Eu(o)}else{if(r&&r.floating!==i){r.delete(o);Eu(o)}if(!r||r.floating!==i){const t=Tu(e,n,i);this.getContainer(i).add(t)}}}onGridStylesChanges(t){if(t.rowHeightChanged){this.forContainers((t=>t.forEach((t=>t.setRowHeight(t.rowHeight,true)))))}}getContainer(t){return t==="top"?this.top:this.bottom}findPinnedRowNode(t){if(this.top.has(t)){return this.top}if(this.bottom.has(t)){return this.bottom}}refreshRowPositions(t){const e=t=>Mu(this.beans,t);if(t){return e(this.getContainer(t))}let i=false;this.forContainers((t=>{const s=e(t);i||(i=s)}));return i}forContainers(t){t(this.top,"top");t(this.bottom,"bottom")}dispatchRowPinnedEvents(t){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"});t?.dispatchRowEvent("rowPinned")}};function Mu(t,e){let i=0;let s=false;e.forEach(((e,n)=>{s||(s=e.rowTop!==i);e.setRowTop(i);if(e.rowHeightEstimated||e.rowHeight==null){const i=yi(t,e).height;s||(s=e.rowHeight!==i);e.setRowHeight(i)}e.setRowIndex(n);i+=e.rowHeight}));return s}function Tu(t,e,i){if(e.pinnedSibling){return e.pinnedSibling}const s=Ca(e,t);s.setRowTop(null);s.setRowIndex(null);s.rowPinned=i;const n=i==="top"?fa:ga;s.id=`${n}${i}-${e.id}`;s.pinnedSibling=e;e.pinnedSibling=s;return s}function Eu(t){if(!t.pinnedSibling){return}t.rowPinned=null;t.setRowTop(null);t.setRowIndex(null);const e=t.pinnedSibling;t.pinnedSibling=void 0;if(e){e.pinnedSibling=void 0;e.rowPinned=null}}function Au(t){const e=new Set;t.forEach((t=>{if(t.group){e.add(t)}}));e.forEach((e=>t.delete(e)))}function Iu(t,e,i){const{rowSpanSvc:s}=t;const n=(i&&s?.isCellSpanning(i,e))??false;if(i&&n){return s?.getCellSpan(i,e)?.spannedNodes}}function Hu(t){const e=t.size();if(e===0){return 0}const i=t.getByIndex(e-1);if(i===void 0){return 0}return i.rowTop+i.rowHeight}function Ou({gos:t,rowModel:e}){if(pi(t)){e.refreshModel({step:"map"})}}var Nu=class extends re{constructor(){super(...arguments);this.nextId=0;this.pinnedTopRows={cache:{},order:[]};this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const t=this.gos;this.setPinnedRowData(t.get("pinnedTopRowData"),"top");this.setPinnedRowData(t.get("pinnedBottomRowData"),"bottom");this.addManagedPropertyListener("pinnedTopRowData",(t=>this.setPinnedRowData(t.currentValue,"top")));this.addManagedPropertyListener("pinnedBottomRowData",(t=>this.setPinnedRowData(t.currentValue,"bottom")));this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(t){return this.getCache(t).order.length===0}isRowsToRender(t){return!this.isEmpty(t)}isManual(){return false}pinRow(t,e){}onGridStylesChanges(t){if(t.rowHeightChanged){const t=t=>{t.setRowHeight(t.rowHeight,true)};Lu(this.pinnedBottomRows,t);Lu(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let t=false;let e=0;const i=i=>{if(i.rowHeightEstimated){const s=yi(this.beans,i);i.setRowTop(e);i.setRowHeight(s.height);e+=s.height;t=true}};Lu(this.pinnedBottomRows,i);e=0;Lu(this.pinnedTopRows,i);this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"});return t}setPinnedRowData(t,e){this.updateNodesFromRowData(t,e);this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(t,e){const i=this.getCache(e);if(t===void 0){i.order.length=0;i.cache={};return}const s=Hi(this.gos);const n=e==="top"?fa:ga;const o=new Set(i.order);const r=[];const l=new Set;let a=0;let h=-1;for(const c of t){const t=s?.({data:c,level:0,rowPinned:e})??n+this.nextId++;if(l.has(t)){hi(96,{id:t,data:c});continue}h++;l.add(t);r.push(t);const u=Gu(i,t);if(u!==void 0){if(u.data!==c){u.updateData(c)}a+=this.setRowTopAndRowIndex(u,a,h);o.delete(t)}else{const s=new ma(this.beans);s.id=t;s.data=c;s.rowPinned=e;a+=this.setRowTopAndRowIndex(s,a,h);i.cache[t]=s;i.order.push(t)}}for(const t of o){Gu(i,t)?.clearRowTopAndRowIndex();delete i.cache[t]}i.order=r}setRowTopAndRowIndex(t,e,i){t.setRowTop(e);t.setRowHeight(yi(this.beans,t).height);t.setRowIndex(i);return t.rowHeight}getPinnedTopTotalHeight(){return Bu(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return Bu(this.pinnedBottomRows)}getPinnedTopRowCount(){return zu(this.pinnedTopRows)}getPinnedBottomRowCount(){return zu(this.pinnedBottomRows)}getPinnedTopRow(t){return Vu(this.pinnedTopRows,t)}getPinnedBottomRow(t){return Vu(this.pinnedBottomRows,t)}getPinnedRowById(t,e){return Gu(this.getCache(e),t)}forEachPinnedRow(t,e){return Lu(this.getCache(t),e)}getCache(t){return t==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){return}setGrandTotalPinned(){}};function Bu(t){const e=zu(t);if(e===0){return 0}const i=Vu(t,e-1);if(i===void 0){return 0}return i.rowTop+i.rowHeight}function Gu(t,e){return t.cache[e]}function Vu(t,e){return Gu(t,t.order[e])}function Lu(t,e){t.order.forEach(((i,s)=>{const n=Gu(t,i);n&&e(n,s)}))}function zu(t){return t.order.length}var $u=class extends re{constructor(){super(...arguments);this.beanName="pinnedRowModel"}postConstruct(){const{gos:t}=this;const e=()=>{const e=t.get("enableRowPinning");const i=Ei(t);const s=i==="pinnedBottom"||i==="pinnedTop";const n=!!e||s;const o=n?this.inner instanceof Nu:this.inner instanceof Du;if(this.inner&&o){this.destroyBean(this.inner)}if(o||!this.inner){this.inner=this.createManagedBean(n?new Du:new Nu)}};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],e);e()}reset(){return this.inner.reset()}isEmpty(t){return this.inner.isEmpty(t)}isManual(){return this.inner.isManual()}isRowsToRender(t){return this.inner.isRowsToRender(t)}pinRow(t,e,i){return this.inner.pinRow(t,e,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(t,e){return this.inner.getPinnedRowById(t,e)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.inner.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.inner.getPinnedBottomRow(t)}forEachPinnedRow(t,e){return this.inner.forEachPinnedRow(t,e)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(t){return this.inner.setPinnedState(t)}setGrandTotalPinned(t){return this.inner.setGrandTotalPinned(t)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function Wu(t){return!!(t.rowPinned&&t.pinnedSibling)}function Uu(t,e,i,s){const n=e==="top";if(!i){return Uu(t,e,n?t.getPinnedTopRow(0):t.getPinnedBottomRow(0),s)}if(!s){const s=n?t.getPinnedTopRowCount():t.getPinnedBottomRowCount();return Uu(t,e,i,n?t.getPinnedTopRow(s-1):t.getPinnedBottomRow(s-1))}let o=false;let r=false;const l=[];t.forEachPinnedRow(e,(t=>{if(t===i&&!o){o=true;l.push(t);return}if(o&&t===s){r=true;l.push(t);return}if(o&&!r){l.push(t)}}));return l}var ju={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]};var Ku=class extends Sn{constructor(){super(ju,[fr]);this.eCheckbox=vn}postConstruct(){this.eCheckbox.setPassive(true)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const t=this.getLocaleTextFunc();const{rowNode:e,eCheckbox:i}=this;const s=e.isSelected();const n=Y(t,s);const[o,r]=e.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"];const l=t(o,r);i.setValue(s,true);i.setInputAriaLabel(`${l} (${n})`)}init(t){this.rowNode=t.rowNode;this.column=t.column;this.overrides=t.overrides;this.onSelectionChanged();this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:th,click:t=>{th(t);this.beans.selectionSvc?.handleSelectionEvent(t,this.rowNode,"checkboxSelected")}});this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)});this.addManagedPropertyListener("rowSelection",(({currentValue:t,previousValue:e})=>{const i=typeof t==="object"?Li(t):void 0;const s=typeof e==="object"?Li(e):void 0;if(i!==s){this.onSelectableChanged()}}));const e=Ki(this.gos);const i=e||typeof this.getIsVisible()==="function";if(i){const t=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t});this.addManagedListeners(this.rowNode,{dataChanged:t,cellChanged:t});this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:t,rowNode:e,overrides:i,gos:s}=this;const n=e.selectable;const o=this.getIsVisible();let r=void 0;if(typeof o==="function"){const s=i?.callbackParams;if(!t){r=o({...s,node:e,data:e.data})}else{const i=t.createColumnFunctionCallbackParams(e);r=o({...s,...i})}}else{r=o??false}const l=n&&!r||!n&&r;const a=n||r;const h=s.get("rowSelection");const c=h&&typeof h!=="string"?!Li(h):!!t?.getColDef().showDisabledCheckboxes;this.setVisible(a&&(l?c:true));this.setDisplayed(a&&(l?c:true));if(a){this.eCheckbox.setDisabled(l)}if(i?.removeHidden){this.setDisplayed(a)}}getIsVisible(){const t=this.overrides;if(t){return t.isVisible}const e=this.gos.get("rowSelection");if(e&&typeof e!=="string"){return Bi(e)}return this.column?.getColDef()?.checkboxSelection}};var qu=class{constructor(t,e){this.rowModel=t;this.pinnedRowModel=e;this.selectAll=false;this.rootId=null;this.endId=null;this.cachedRange=[]}reset(){this.rootId=null;this.endId=null;this.cachedRange.length=0}setRoot(t){this.rootId=t.id;this.endId=null;this.cachedRange.length=0}setEndRange(t){this.endId=t.id;this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const t=this.getRoot();const e=this.getEnd();if(t==null||e==null){return this.cachedRange}this.cachedRange=this.getNodesInRange(t,e)??[]}return this.cachedRange}isInRange(t){if(this.rootId===null){return false}return this.getRange().some((e=>e.id===t.id))}getRoot(t){if(this.rootId){return this.getRowNode(this.rootId)}if(t){this.setRoot(t);return t}}getEnd(){if(this.endId){return this.getRowNode(this.endId)}}getRowNode(t){let e;const{rowModel:i,pinnedRowModel:s}=this;e??(e=i.getRowNode(t));if(s?.isManual()){e??(e=s.getPinnedRowById(t,"top"));e??(e=s.getPinnedRowById(t,"bottom"))}return e}truncate(t){const e=this.getRange();if(e.length===0){return{keep:[],discard:[]}}const i=e[0].id===this.rootId;const s=e.findIndex((e=>e.id===t.id));if(s>-1){const n=e.slice(0,s);const o=e.slice(s+1);this.setEndRange(t);return i?{keep:n,discard:o}:{keep:o,discard:n}}else{return{keep:e,discard:[]}}}extend(t,e=false){const i=this.getRoot();if(i==null){const i=this.getRange().slice();if(e){t.depthFirstSearch((t=>!t.group&&i.push(t)))}i.push(t);this.setRoot(t);return{keep:i,discard:[]}}const s=this.getNodesInRange(i,t);if(!s){this.setRoot(t);return{keep:[t],discard:[]}}if(s.find((t=>t.id===this.endId))){this.setEndRange(t);return{keep:this.getRange(),discard:[]}}else{const e=this.getRange().slice();this.setEndRange(t);return{keep:this.getRange(),discard:e}}}getNodesInRange(t,e){const{pinnedRowModel:i,rowModel:s}=this;if(!i?.isManual()){return s.getNodesInRangeForSelection(t,e)}if(t.rowPinned==="top"&&!e.rowPinned){const n=Uu(i,"top",t,void 0);return n.concat(s.getNodesInRangeForSelection(s.getRow(0),e)??[])}if(t.rowPinned==="bottom"&&!e.rowPinned){const n=Uu(i,"bottom",void 0,t);const o=s.getRowCount();const r=s.getRow(o-1);return(s.getNodesInRangeForSelection(e,r)??[]).concat(n)}if(!t.rowPinned&&!e.rowPinned){return s.getNodesInRangeForSelection(t,e)}if(t.rowPinned==="top"&&e.rowPinned==="top"){return Uu(i,"top",t,e)}if(t.rowPinned==="bottom"&&e.rowPinned==="top"){const n=Uu(i,"top",e,void 0);const o=Uu(i,"bottom",void 0,t);const r=s.getRow(0);const l=s.getRow(s.getRowCount()-1);return n.concat(s.getNodesInRangeForSelection(r,l)??[]).concat(o)}if(!t.rowPinned&&e.rowPinned==="top"){const n=Uu(i,"top",e,void 0);return n.concat(s.getNodesInRangeForSelection(s.getRow(0),t)??[])}if(t.rowPinned==="top"&&e.rowPinned==="bottom"){const n=Uu(i,"top",t,void 0);const o=Uu(i,"bottom",void 0,e);const r=s.getRow(0);const l=s.getRow(s.getRowCount()-1);return n.concat(s.getNodesInRangeForSelection(r,l)??[]).concat(o)}if(t.rowPinned==="bottom"&&e.rowPinned==="bottom"){return Uu(i,"bottom",t,e)}if(!t.rowPinned&&e.rowPinned==="bottom"){const n=Uu(i,"bottom",void 0,e);const o=s.getRow(s.getRowCount());return(s.getNodesInRangeForSelection(t,o)??[]).concat(n)}return null}};var _u=class extends re{constructor(t){super();this.column=t;this.cbSelectAllVisible=false;this.processingEventFromCheckbox=false}onSpaceKeyDown(t){const e=this.cbSelectAll;if(e.isDisplayed()&&!e.getGui().contains(d(this.beans))){t.preventDefault();e.setValue(!e.getValue())}}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t;const e=this.createManagedBean(new dr);this.cbSelectAll=e;e.addCss("ag-header-select-all");x(e.getGui(),"presentation");this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i});this.addManagedPropertyListener("rowSelection",(({currentValue:t,previousValue:e})=>{const i=t=>typeof t==="string"||!t||t.mode==="singleRow"?void 0:t.selectAll;if(i(t)!==i(e)){this.showOrHideSelectAll()}this.updateStateOfCheckbox()}));this.addManagedListeners(e,{fieldValueChanged:this.onCbSelectAll.bind(this)});e.getInputElement().setAttribute("tabindex","-1");this.refreshSelectAllLabel()}onDisplayedColumnsChanged(t){if(!this.isAlive()){return}this.showOrHideSelectAll(t.source==="uiColumnMoved")}showOrHideSelectAll(t=false){const e=this.isCheckboxSelection();this.cbSelectAllVisible=e;this.cbSelectAll.setDisplayed(e);if(e){this.checkRightRowModelType("selectAllCheckbox");this.checkSelectionType("selectAllCheckbox");this.updateStateOfCheckbox()}this.refreshSelectAllLabel(t)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox){return}this.processingEventFromCheckbox=true;const t=this.getSelectAllMode();const e=this.beans.selectionSvc;const i=this.cbSelectAll;const s=e.getSelectAllState(t);i.setValue(s);const n=e.hasNodesToSelect(t);i.setDisabled(!n);this.refreshSelectAllLabel();this.processingEventFromCheckbox=false}refreshSelectAllLabel(t=false){const e=this.getLocaleTextFunc();const{headerCellCtrl:i,cbSelectAll:s,cbSelectAllVisible:n}=this;const o=s.getValue();const r=Y(e,o);const l=e("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",n?`${l} (${r})`:null);s.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection"));if(!t){i.announceAriaDescription()}}checkSelectionType(t){const e=_i(this.gos);if(!e){hi(128,{feature:t});return false}return true}checkRightRowModelType(t){const{gos:e,rowModel:i}=this.beans;const s=pi(e)||mi(e);if(!s){hi(129,{feature:t,rowModel:i.getType()});return false}return true}onCbSelectAll(){if(this.processingEventFromCheckbox){return}if(!this.cbSelectAllVisible){return}const t=this.cbSelectAll.getValue();const e=this.getSelectAllMode();let i="uiSelectAll";if(e==="currentPage"){i="uiSelectAllCurrentPage"}else if(e==="filtered"){i="uiSelectAllFiltered"}const s={source:i,selectAll:e};const n=this.beans.selectionSvc;if(t){n.selectAllRowNodes(s)}else{n.deselectAllRowNodes(s)}}isCheckboxSelection(){const{column:t,gos:e,beans:i}=this;const s=e.get("rowSelection");const n=typeof s==="object";const o=n?"headerCheckbox":"headerCheckboxSelection";return Zu(i,t)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const t=Qi(this.gos,false);if(t){return t}const{headerCheckboxSelectionCurrentPageOnly:e,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();if(e){return"currentPage"}if(i){return"filtered"}return"all"}destroy(){super.destroy();this.cbSelectAll=void 0;this.headerCellCtrl=void 0}};function Zu({gos:t,selectionColSvc:e},i){const s=t.get("rowSelection");const n=i.getColDef();const{headerCheckboxSelection:o}=n;let r=false;const l=typeof s==="object";if(l){const t=Ms(i);const n=Ds(i);const o=Vi(s);if(o==="autoGroupColumn"&&n||t&&e?.isSelectionColumnEnabled()){r=Gi(s)}}else if(typeof o==="function"){r=o(os(t,{column:i,colDef:n}))}else{r=!!o}return r}var Yu=class extends re{postConstruct(){const{gos:t,beans:e}=this;this.selectionCtx=new qu(e.rowModel,e.pinnedRowModel);this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>{const e=Ki(t);if(e!==this.isRowSelectable){this.isRowSelectable=e;this.updateSelectable()}}));this.isRowSelectable=Ki(t);this.addManagedEventListeners({cellValueChanged:t=>this.updateRowSelectable(t.node),rowNodeDataChanged:t=>this.updateRowSelectable(t.node)})}destroy(){super.destroy();this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new Ku}createSelectAllFeature(t){if(Zu(this.beans,t)){return new _u(t)}}isMultiSelect(){return _i(this.gos)}onRowCtrlSelected(t,e,i){const s=!!t.rowNode.isSelected();t.forEachGui(i,(t=>{t.rowComp.toggleCss("ag-row-selected",s);const i=t.element;K(i,s);const n=i.contains(d(this.beans));if(n){e(t)}}))}announceAriaRowSelection(t){if(this.isRowSelectionBlocked(t)){return}const e=t.isSelected();const i=this.beans.editSvc?.isEditing({rowNode:t});if(!t.selectable||i){return}const s=this.getLocaleTextFunc();const n=s(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(n,"rowSelection")}isRowSelectionBlocked(t){return!t.selectable||t.rowPinned&&!Wu(t)||!wi(this.gos)}updateRowSelectable(t,e){const i=t.rowPinned&&t.pinnedSibling?t.pinnedSibling.selectable:this.isRowSelectable?.(t)??true;this.setRowSelectable(t,i,e);return i}setRowSelectable(t,e,i){if(t.selectable!==e){t.selectable=e;t.dispatchRowEvent("selectableChanged");if(i){return}const s=Xi(this.gos);if(s){const e=this.calculateSelectedFromChildren(t);this.setNodesSelected({nodes:[t],newValue:e??false,source:"selectableChanged"});return}if(t.isSelected()&&!t.selectable){this.setNodesSelected({nodes:[t],newValue:false,source:"selectableChanged"})}}}calculateSelectedFromChildren(t){let e=false;let i=false;if(!t.childrenAfterGroup?.length){return t.selectable?t.__selected:null}for(let s=0;s<t.childrenAfterGroup.length;s++){const n=t.childrenAfterGroup[s];let o=n.isSelected();if(!n.selectable){const t=this.calculateSelectedFromChildren(n);if(t===null){continue}o=t}switch(o){case true:e=true;break;case false:i=true;break;default:return void 0}}if(e&&i){return void 0}if(e){return true}if(i){return false}if(!t.selectable){return null}return t.__selected}selectRowNode(t,e,i,s="api"){const n=!t.selectable&&e;const o=t.__selected===e;if(n||o){return false}t.__selected=e;t.dispatchRowEvent("rowSelected");const r=t.sibling;if(r&&r.footer&&r.__localEventService){r.dispatchRowEvent("rowSelected")}const l=t.pinnedSibling;if(l?.rowPinned&&l.__localEventService){l.dispatchRowEvent("rowSelected")}this.eventSvc.dispatchEvent({...va(t,this.gos,"rowSelected"),event:i||null,source:s});return true}isCellCheckboxSelection(t,e){const i=this.gos.get("rowSelection");if(i&&typeof i!=="string"){const s=Ms(t)&&Bi(i);return t.isColumnFunc(e,s)}else{return t.isColumnFunc(e,t.colDef.checkboxSelection)}}inferNodeSelections(t,e,i,s){const{gos:n,selectionCtx:o}=this;const r=t.isSelected();const l=Xi(n);const a=Ui(n);const h=ji(n);const c=this.isMultiSelect();const u=s==="rowClicked";if(u&&!(a||h)){return null}if(e&&i&&c){const e=o.getRoot();if(!e){return null}else if(!e.isSelected()){const e=o.extend(t,l);return{select:[],deselect:e.keep,reset:false}}else{const e=o.isInRange(t)?o.truncate(t):o.extend(t,l);return{deselect:e.discard,select:e.keep,reset:false}}}else if(e&&c){const e=o.selectAll?this.beans.rowModel.getRow(0):void 0;const i=o.getRoot(e);const s=o.isInRange(t)?o.truncate(t):o.extend(t,l);return{select:s.keep,deselect:s.discard,reset:o.selectAll||!!(i&&!i.isSelected())}}else if(i){if(u){const e=!r;const i=e&&!a;const s=!e&&!h;if(i||s){return null}o.setRoot(t);return{node:t,newValue:e,clearSelection:false}}o.setRoot(t);return{node:t,newValue:!r,clearSelection:!c}}else{o.setRoot(t);const e=Zi(n);const i=Yi(n)==="filteredDescendants";const s=u&&(!e||!a);if(i&&r===void 0&&pi(n)){return{node:t,newValue:false,checkFilteredNodes:true,clearSelection:!c||s}}if(u){const i=r?!e:a;const n=i&&!a;const o=!i&&!h;const u=i===r&&!s;if(u||n||o){return null}return{node:t,newValue:i,clearSelection:!c||s,keepDescendants:t.group&&l}}return{node:t,newValue:!r,clearSelection:!c||s}}}};var Qu={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"};var Ju=class extends re{constructor(t){super();this.skipTabGuardFocus=false;this.forcingFocusOut=false;this.allowFocus=false;const{comp:e,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:l,onFocusIn:a,onFocusOut:h,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:d,isEmpty:f,eFocusableElement:g}=t;this.comp=e;this.eTopGuard=i;this.eBottomGuard=s;this.providedFocusInnerElement=l;this.eFocusableElement=g;this.focusTrapActive=!!n;this.forceFocusOutWhenTabGuardsAreEmpty=!!o;this.isFocusableContainer=!!r;this.providedFocusIn=a;this.providedFocusOut=h;this.providedShouldStopEventPropagation=c;this.providedOnTabKeyDown=u;this.providedHandleKeyDown=d;this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new sh(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)}));this.activateTabGuards();for(const t of[this.eTopGuard,this.eBottomGuard]){this.addManagedElementListeners(t,{focus:this.onFocus.bind(this)})}}handleKeyDown(t){if(this.providedHandleKeyDown){this.providedHandleKeyDown(t)}}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){if(this.providedShouldStopEventPropagation){return this.providedShouldStopEventPropagation()}return false}activateTabGuards(){if(this.forcingFocusOut){return}const t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.isFocusableContainer&&!this.eFocusableElement.contains(t.relatedTarget)){if(!this.allowFocus){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}}if(this.skipTabGuardFocus){this.skipTabGuardFocus=false;return}if(this.forceFocusOutWhenTabGuardsAreEmpty){const e=this.providedIsEmpty?this.providedIsEmpty():sr(this.eFocusableElement,".ag-tab-guard").length===0;if(e){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}}if(this.isFocusableContainer&&this.eFocusableElement.contains(t.relatedTarget)){return}const e=t.target===this.eBottomGuard;const i=this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e);if(!i&&this.forceFocusOutWhenTabGuardsAreEmpty){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard)}}findNextElementOutsideAndFocus(t){const e=f(this.beans);const i=sr(e.body,null,true);const s=i.indexOf(t?this.eTopGuard:this.eBottomGuard);if(s===-1){return}let n;let o;if(t){n=0;o=s}else{n=s+1;o=i.length}const r=i.slice(n,o);const l=this.gos.get("tabIndex");r.sort(((t,e)=>{const i=Number.parseInt(t.getAttribute("tabindex")||"0");const s=Number.parseInt(e.getAttribute("tabindex")||"0");if(s===l){return 1}if(i===l){return-1}if(i===0){return 1}if(s===0){return-1}return i-s}));r[t?r.length-1:0]?.focus()}onFocusIn(t){if(this.focusTrapActive||this.forcingFocusOut){return}if(this.providedFocusIn){this.providedFocusIn(t)}if(!this.isFocusableContainer){this.deactivateTabGuards()}}onFocusOut(t){if(this.focusTrapActive){return}if(this.providedFocusOut){this.providedFocusOut(t)}if(!this.eFocusableElement.contains(t.relatedTarget)){this.activateTabGuards()}}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive){return}if(t.defaultPrevented){return}const e=this.tabGuardsAreActive();if(e){this.deactivateTabGuards()}const i=this.getNextFocusableElement(t.shiftKey);if(e){setTimeout((()=>this.activateTabGuards()),0)}if(!i){return}i.focus();t.preventDefault()}focusInnerElement(t=false){const e=sr(this.eFocusableElement);if(this.tabGuardsAreActive()){e.splice(0,1);e.splice(e.length-1,1)}if(!e.length){return false}e[t?e.length-1:0].focus({preventScroll:true});return true}getNextFocusableElement(t){return or(this.beans,this.eFocusableElement,false,t)}forceFocusOutOfContainer(t=false){if(this.forcingFocusOut){return}const e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards();this.skipTabGuardFocus=true;this.forcingFocusOut=true;e.focus();window.setTimeout((()=>{this.forcingFocusOut=false;this.activateTabGuards()}))}isTabGuard(t,e){return t===this.eTopGuard&&!e||t===this.eBottomGuard&&(e??true)}setAllowFocus(t){this.allowFocus=t}};var Xu=class extends re{constructor(t){super();this.comp=t}initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top");this.eBottomGuard=this.createTabGuard("bottom");this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:e,eBottomGuard:i,eFocusableElement:s}=this;const n=[e,i];const o={setTabIndex:t=>{for(const e of n){t!=null?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}}};this.addTabGuards(e,i);const{focusTrapActive:r=false,onFocusIn:l,onFocusOut:a,focusInnerElement:h,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:d,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:p}=t;this.tabGuardCtrl=this.createManagedBean(new Ju({comp:o,focusTrapActive:r,eTopGuard:e,eBottomGuard:i,eFocusableElement:s,onFocusIn:l,onFocusOut:a,focusInnerElement:h,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:d,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:p}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(t){const e=f(this.beans).createElement("div");const i=t==="top"?Qu.TAB_GUARD_TOP:Qu.TAB_GUARD_BOTTOM;e.classList.add(Qu.TAB_GUARD,i);x(e,"presentation");return e}addTabGuards(t,e){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",t);i.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){const t=[this.eTopGuard,this.eBottomGuard];dt(this.comp.getFocusableElement());this.addTabGuards(...t)}forceFocusOutOfContainer(t=false){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e,i){if(!Dt(e)){e=e.getGui()}const{eBottomGuard:s}=this;if(s){s.insertAdjacentElement("beforebegin",e)}else{t(e,i)}}destroy(){const{eTopGuard:t,eBottomGuard:e}=this;ft(t);ft(e);super.destroy()}};var td=class extends Sn{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new Xu(this));this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=false){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,e){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,e)}};var ed=500;var id=550;var sd;var nd=t=>{if(!sd){sd=new WeakSet}else if(sd.has(t)){return false}sd.add(t);return true};var od=class{constructor(t,e=false){this.eElement=t;this.preventClick=e;this.startListener=null;this.handlers=[];this.eventSvc=void 0;this.touchStart=null;this.lastTapTime=null;this.longPressTimer=0;this.moved=false}addEventListener(e,i){let s=this.eventSvc;if(!s){if(s===null){return}this.eventSvc=s=new t;const e=this.onTouchStart.bind(this);this.startListener=e;this.eElement.addEventListener("touchstart",e,{passive:true})}s.addEventListener(e,i)}removeEventListener(t,e){this.eventSvc?.removeEventListener(t,e)}onTouchStart(t){if(this.touchStart||!nd(t)){return}const e=t.touches[0];this.touchStart=e;const i=this.handlers;if(!i.length){const t=this.eElement;const e=t.ownerDocument;const s=this.onTouchMove.bind(this);const n=this.onTouchEnd.bind(this);const o=this.onTouchCancel.bind(this);const r={passive:true};const l={passive:false};Zt(i,[t,"touchmove",s,r],[e,"touchcancel",o,r],[e,"touchend",n,l],[e,"contextmenu",Qt,l])}this.clearLongPress();this.longPressTimer=window.setTimeout((()=>{this.longPressTimer=0;if(this.touchStart===e&&!this.moved){this.moved=true;this.eventSvc?.dispatchEvent({type:"longTap",touchStart:e,touchEvent:t})}}),id)}onTouchMove(t){const{moved:e,touchStart:i}=this;if(!e&&i){const e=Kt(i,t.touches);const s=e&&!jt(e,i,4);if(s){this.clearLongPress();this.moved=true}}}onTouchEnd(t){const e=this.touchStart;if(!e||!Kt(e,t.changedTouches)){return}if(!this.moved){this.eventSvc?.dispatchEvent({type:"tap",touchStart:e});this.checkDoubleTap(e)}if(this.preventClick){Qt(t)}this.cancel()}onTouchCancel(t){const e=this.touchStart;if(!e||!Kt(e,t.changedTouches)){return}this.lastTapTime=null;this.cancel()}checkDoubleTap(t){let e=Date.now();const i=this.lastTapTime;if(i){const s=e-i;if(s>ed){this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:t});e=null}}this.lastTapTime=e}cancel(){this.clearLongPress();Yt(this.handlers);this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer);this.longPressTimer=0;this.moved=false}destroy(){const t=this.startListener;if(t){this.startListener=null;this.eElement.removeEventListener("touchstart",t)}this.cancel();this.eElement=null;this.eventSvc=null}};var rd=class{constructor(t){this.tickingInterval=null;this.onScrollCallback=null;this.scrollContainer=t.scrollContainer;this.scrollHorizontally=t.scrollAxis.includes("x");this.scrollVertically=t.scrollAxis.includes("y");this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20;if(t.onScrollCallback){this.onScrollCallback=t.onScrollCallback}if(this.scrollVertically){this.getVerticalPosition=t.getVerticalPosition;this.setVerticalPosition=t.setVerticalPosition}if(this.scrollHorizontally){this.getHorizontalPosition=t.getHorizontalPosition;this.setHorizontalPosition=t.setHorizontalPosition}this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>false);this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>false)}get scrolling(){return this.tickingInterval!==null}check(t,e=false){const i=e||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll()){return}const s=this.scrollContainer.getBoundingClientRect();const n=this.scrollByTick;this.tickLeft=t.clientX<s.left+n;this.tickRight=t.clientX>s.right-n;this.tickUp=t.clientY<s.top+n&&!i;this.tickDown=t.clientY>s.bottom-n&&!i;if(this.tickLeft||this.tickRight||this.tickUp||this.tickDown){this.ensureTickingStarted()}else{this.ensureCleared()}}ensureTickingStarted(){if(this.tickingInterval===null){this.tickingInterval=window.setInterval(this.doTick.bind(this),100);this.tickCount=0}}doTick(){this.tickCount++;const t=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const e=this.getVerticalPosition();if(this.tickUp){this.setVerticalPosition(e-t)}if(this.tickDown){this.setVerticalPosition(e+t)}}if(this.scrollHorizontally){const e=this.getHorizontalPosition();if(this.tickLeft){this.setHorizontalPosition(e-t)}if(this.tickRight){this.setHorizontalPosition(e+t)}}if(this.onScrollCallback){this.onScrollCallback()}}ensureCleared(){if(this.tickingInterval){window.clearInterval(this.tickingInterval);this.tickingInterval=null}}};var ld=class{constructor(t="javascript"){this.frameworkName=t;this.renderingEngine="vanilla";this.batchFrameworkComps=false;this.wrapIncoming=t=>t();this.wrapOutgoing=t=>t();this.baseDocLink=`${Re}/${this.frameworkName}-data-grid`;Xe(this.baseDocLink)}frameworkComponent(t){return null}isFrameworkComponent(t){return false}getDocLink(t){return this.baseDocLink+(t?"/"+t:"")}};function ad(t){return{beanName:"gridApi",bean:t.getBean("apiFunctionSvc").api}}var hd=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"];var cd=Object.fromEntries(hd.map(((t,e)=>[t,e])));function ud(t,e){const i=(t.beanName?cd[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;const s=(e.beanName?cd[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function dd(t,e){if(t?.beanName==="gridDestroySvc"){return-1}if(e?.beanName==="gridDestroySvc"){return 1}return 0}var fd={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"};var gd={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"};var pd={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]};var md=class extends Sn{constructor(t){super();this.eCenterContainer=vn;this.headerRowComps={};this.rowCompsList=[];this.pinned=t}postConstruct(){this.selectAndSetTemplate();const t={setDisplayed:t=>this.setDisplayed(t),setCtrls:t=>this.setCtrls(t),setCenterWidth:t=>this.eCenterContainer.style.width=t,setViewportScrollLeft:t=>this.getGui().scrollLeft=t,setPinnedContainerWidth:t=>{const e=this.getGui();e.style.width=t;e.style.maxWidth=t;e.style.minWidth=t}};const e=this.createManagedBean(new nu(this.pinned));e.setComp(t,this.getGui())}selectAndSetTemplate(){const t=this.pinned=="left";const e=this.pinned=="right";const i=t?fd:e?gd:pd;this.setTemplate(i);this.eRowContainer=this.eCenterContainer!==vn?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]);super.destroy()}destroyRowComp(t){this.destroyBean(t);t.getGui().remove()}setCtrls(t){const e=this.headerRowComps;this.headerRowComps={};this.rowCompsList=[];let i;const s=t=>{const e=t.getGui();const s=e.parentElement!=this.eRowContainer;if(s){this.eRowContainer.appendChild(e)}if(i){vt(this.eRowContainer,e,i)}i=e};for(const i of t){const t=i.instanceId;const n=e[t];delete e[t];const o=n?n:this.createBean(new Zc(i));this.headerRowComps[t]=o;this.rowCompsList.push(o);s(o)}for(const t of Object.values(e)){this.destroyRowComp(t)}}};var vd={tag:"div",cls:"ag-header",role:"presentation"};var wd=class extends Sn{constructor(){super(vd)}postConstruct(){const t={toggleCss:(t,e)=>this.toggleCss(t,e),setHeightAndMinHeight:t=>{this.getGui().style.height=t;this.getGui().style.minHeight=t}};const e=this.createManagedBean(new zc);e.setComp(t,this.getGui(),this.getFocusableElement());const i=t=>{this.createManagedBean(t);this.appendChild(t)};i(new md("left"));i(new md(null));i(new md("right"))}};var Cd={selector:"AG-HEADER-ROOT",component:wd};var bd=class extends Sn{constructor(t,e,i,s,n){super();this.cellCtrl=e;this.rendererVersion=0;this.editorVersion=0;this.beans=t;this.gos=t.gos;this.column=e.column;this.rowNode=e.rowNode;this.eRow=s;const o=Ma({tag:"div",role:e.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":e.column.colIdSanitised}});this.eCell=o;let r;if(e.isCellSpanning()){r=Ma({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"});r.appendChild(o);this.setTemplateFromElement(r)}else{this.setTemplateFromElement(o)}this.cellCssManager=new Cn((()=>o));this.forceWrapper=e.isForceWrapper();this.refreshWrapper(false);const l={toggleCss:(t,e)=>this.cellCssManager.toggleCss(t,e),setUserStyles:t=>bt(o,t),getFocusableElement:()=>o,setIncludeSelection:t=>this.includeSelection=t,setIncludeRowDrag:t=>this.includeRowDrag=t,setIncludeDndSource:t=>this.includeDndSource=t,setRenderDetails:(t,e,i)=>this.setRenderDetails(t,e,i),setEditDetails:(t,e,i)=>this.setEditDetails(t,e,i),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(t,e)=>this.refreshEditStyles(t,e)};e.setComp(l,o,r,this.eCellWrapper,i,n,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(t,e,i){const s=this.cellEditor&&!this.cellEditorPopupWrapper;if(s){return}this.firstRender=this.firstRender==null;const n=this.refreshWrapper(false);this.refreshEditStyles(false);if(t){const e=i||n;const s=e?false:this.refreshCellRenderer(t);if(!s){this.destroyRenderer();this.createCellRendererInstance(t)}}else{this.destroyRenderer();this.insertValueWithoutCellRenderer(e)}this.rowDraggingComp?.refreshVisibility()}setEditDetails(t,e,i){if(t){this.createCellEditorInstance(t,e,i)}else{this.destroyEditor()}}removeControls(){const t=this.beans.context;this.checkboxSelectionComp=t.destroyBean(this.checkboxSelectionComp);this.dndSourceComp=t.destroyBean(this.dndSourceComp);this.rowDraggingComp=t.destroyBean(this.rowDraggingComp)}refreshWrapper(t){const e=this.includeRowDrag||this.includeDndSource||this.includeSelection;const i=e||this.forceWrapper;const s=i&&this.eCellWrapper==null;if(s){this.eCellWrapper=Ma({tag:"div",cls:"ag-cell-wrapper",role:"presentation"});this.eCell.appendChild(this.eCellWrapper)}const n=!i&&this.eCellWrapper!=null;if(n){ft(this.eCellWrapper);this.eCellWrapper=void 0}this.cellCssManager.toggleCss("ag-cell-value",!i);const o=!t&&i;const r=o&&this.eCellValue==null;if(r){const t=this.cellCtrl.getCellValueClass();this.eCellValue=Ma({tag:"span",cls:t,role:"presentation"});this.eCellWrapper.appendChild(this.eCellValue)}const l=!o&&this.eCellValue!=null;if(l){ft(this.eCellValue);this.eCellValue=void 0}const a=s||n||r||l;if(a){this.removeControls()}if(!t&&e){this.addControls()}return a}addControls(){const{cellCtrl:t,eCellWrapper:e,eCellValue:i,includeRowDrag:s,includeDndSource:n,includeSelection:o}=this;const r=t=>{if(t){e.insertBefore(t.getGui(),i)}};if(s&&this.rowDraggingComp==null){this.rowDraggingComp=t.createRowDragComp();r(this.rowDraggingComp)}if(n&&this.dndSourceComp==null){this.dndSourceComp=t.createDndSource();r(this.dndSourceComp)}if(o&&this.checkboxSelectionComp==null){this.checkboxSelectionComp=t.createSelectionCheckbox();r(this.checkboxSelectionComp)}}createCellEditorInstance(t,e,i){const n=this.editorVersion;const o=t.newAgStackInstance();const{params:r}=t;o.then((t=>this.afterCellEditorCreated(n,t,r,e,i)));const l=s(this.cellEditor);if(l&&r.cellStartedEdit){this.cellCtrl.focusCell(true)}}insertValueWithoutCellRenderer(t){const e=this.getParentOfValue();dt(e);const i=h(t);if(i!=null){e.textContent=i}}destroyRenderer(){const{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer);ft(this.cellRendererGui);this.cellRendererGui=null;this.rendererVersion++}destroyEditor(){const{context:t}=this.beans;const e=this.cellEditorPopupWrapper?.getGui().contains(d(this.beans))||this.cellCtrl.hasBrowserFocus();if(e){this.eCell.focus({preventScroll:true})}this.hideEditorPopup?.();this.hideEditorPopup=void 0;this.cellEditor=t.destroyBean(this.cellEditor);this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper);ft(this.cellEditorGui);this.cellCtrl.disableEditorTooltipFeature();this.cellEditorGui=null;this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer?.refresh==null){return false}if(this.cellRendererClass!==t.componentClass){return false}const e=this.cellRenderer.refresh(t.params);return e===true||e===void 0}createCellRendererInstance(t){const e=this.rendererVersion;const i=t=>i=>{const s=this.rendererVersion!==e||!this.isAlive();if(s){return}const n=t.newAgStackInstance();const o=this.afterCellRendererCreated.bind(this,e,t.componentClass);n?.then(o)};const{animationFrameSvc:s}=this.beans;let n;if(s?.active&&this.firstRender){n=(t,e=false)=>{s.createTask(i(t),this.rowNode.rowIndex,"p2",t.componentFromFramework,e)}}else{n=t=>i(t)()}if(t.params?.deferRender&&!this.cellCtrl.rowNode.group){const{loadingComp:e,onReady:i}=this.cellCtrl.getDeferLoadingCellRenderer();if(e){n(e);i.then((()=>n(t,true)))}}else{n(t)}}afterCellRendererCreated(t,e,i){const s=!this.isAlive()||t!==this.rendererVersion;if(s){this.beans.context.destroyBean(i);return}this.cellRenderer=i;this.cellRendererClass=e;const n=i.getGui();this.cellRendererGui=n;if(n!=null){const t=this.getParentOfValue();dt(t);t.appendChild(n)}}afterCellEditorCreated(t,e,i,s,n){const o=t!==this.editorVersion;const{context:r}=this.beans;if(o){r.destroyBean(e);return}const l=e.isCancelBeforeStart?.();if(l){r.destroyBean(e);this.cellCtrl.stopEditing(true);return}if(!e.getGui){hi(97,{colId:this.column.getId()});r.destroyBean(e);return}this.cellEditor=e;this.cellEditorGui=e.getGui();const a=s||e.isPopup?.();if(a){this.addPopupCellEditor(i,n)}else{this.addInCellEditor()}this.refreshEditStyles(true,a);e.afterGuiAttached?.();this.cellCtrl.enableEditorTooltipFeature(e);this.cellCtrl.cellEditorAttached()}refreshEditStyles(t,e){const{cellCssManager:i}=this;i.toggleCss("ag-cell-inline-editing",t&&!e);i.toggleCss("ag-cell-popup-editing",t&&!!e);i.toggleCss("ag-cell-not-inline-editing",!t||!!e)}addInCellEditor(){const{eCell:t}=this;if(t.contains(d(this.beans))){t.focus()}this.destroyRenderer();this.refreshWrapper(true);dt(this.getParentOfValue());if(this.cellEditorGui){const t=this.getParentOfValue();t.appendChild(this.cellEditorGui)}}addPopupCellEditor(t,e){const{gos:i,context:s,popupSvc:n,editSvc:o}=this.beans;if(i.get("editType")==="fullRow"){hi(98)}const r=this.cellEditorPopupWrapper=s.createBean(o.createPopupEditorWrapper(t));const{cellEditor:l,cellEditorGui:a,eCell:h,rowNode:c,column:u,cellCtrl:d}=this;const f=r.getGui();if(a){f.appendChild(a)}const g=i.get("stopEditingWhenCellsLoseFocus");const p=e!=null?e:l.getPopupPosition?.()??"over";const m=i.get("enableRtl");const v={ePopup:f,column:u,rowNode:c,type:"popupCellEditor",eventSource:h,position:p,alignSide:m?"right":"left",keepWithinBounds:true};const w=n.positionPopupByComponent.bind(n,v);const C=n.addPopup({modal:g,eChild:f,closeOnEsc:true,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:h,positionCallback:w,ariaOwns:h});if(C){this.hideEditorPopup=C.hideFunc}}detach(){this.getGui().remove()}destroy(){this.destroyRenderer();this.destroyEditor();this.removeControls();super.destroy()}};var yd=class extends Sn{constructor(t,e,i){super();this.cellComps=new Map;this.beans=e;this.rowCtrl=t;const s=Ma({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(s,i);this.setTemplateFromElement(s);const n=s.style;this.domOrder=this.rowCtrl.getDomOrder();const o={setDomOrder:t=>this.domOrder=t,setCellCtrls:t=>this.setCellCtrls(t),showFullWidth:t=>this.showFullWidth(t),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(t,e)=>this.toggleCss(t,e),setUserStyles:t=>bt(s,t),setTop:t=>n.top=t,setTransform:t=>n.transform=t,setRowIndex:t=>s.setAttribute("row-index",t),setRowId:t=>s.setAttribute("row-id",t),setRowBusinessKey:t=>s.setAttribute("row-business-key",t),refreshFullWidth:t=>{const e=t();this.fullWidthCellRendererParams=e;return this.fullWidthCellRenderer?.refresh?.(e)??false}};t.setComp(o,this.getGui(),i,void 0);this.addDestroyFunc((()=>{t.unsetComp(i)}))}setInitialStyle(t,e){const i=this.rowCtrl.getInitialTransform(e);if(i){t.style.setProperty("transform",i)}else{const i=this.rowCtrl.getInitialRowTop(e);if(i){t.style.setProperty("top",i)}}}showFullWidth(t){const e=e=>{if(this.isAlive()){const i=e.getGui();this.getGui().appendChild(i);this.rowCtrl.setupDetailRowAutoHeight(i);this.setFullWidthRowComp(e,t.params)}else{this.beans.context.destroyBean(e)}};const i=t.newAgStackInstance();i.then(e)}setCellCtrls(t){const e=new Map(this.cellComps);for(const i of t){const t=i.instanceId;if(!this.cellComps.has(t)){this.newCellComp(i)}else{e.delete(t)}}this.destroyCells(e);this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder){return}const e=[];for(const i of t){const t=this.cellComps.get(i.instanceId);if(t){e.push(t.getGui())}}wt(this.getGui(),e)}newCellComp(t){const e=this.beans.editSvc?.isEditing(t,{withOpenEditor:true})??false;const i=new bd(this.beans,t,this.rowCtrl.printLayout,this.getGui(),e);this.cellComps.set(t.instanceId,i);this.getGui().appendChild(i.getGui())}destroy(){super.destroy();this.destroyCells(this.cellComps)}setFullWidthRowComp(t,e){this.fullWidthCellRenderer=t;this.fullWidthCellRendererParams=e;this.addDestroyFunc((()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer);this.fullWidthCellRendererParams=void 0}))}destroyCells(t){for(const e of t.values()){if(!e){return}const t=e.cellCtrl.instanceId;if(this.cellComps.get(t)!==e){return}e.detach();e.destroy();this.cellComps.delete(t)}}};function Sd(t,e,i){const s=!!i.gos.get("enableCellSpan")&&!!e.getSpannedRowCtrls;const n={tag:"div",ref:"eContainer",cls:Kh(t),role:"rowgroup"};if(e.type==="center"||s){const e={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${qh(t)}`,role:"presentation"};n.role="presentation";return{tag:"div",ref:"eViewport",cls:`ag-viewport ${jh(t)}`,role:"rowgroup",children:[n,s?e:null]}}return n}var xd=class extends Sn{constructor(t){super();this.eViewport=vn;this.eContainer=vn;this.eSpannedContainer=vn;this.rowCompsNoSpan={};this.rowCompsWithSpan={};this.name=t?.name;this.options=_h(this.name)}postConstruct(){this.setTemplate(Sd(this.name,this.options,this.beans));const t={setHorizontalScroll:t=>this.eViewport.scrollLeft=t,setViewportHeight:t=>this.eViewport.style.height=t,setRowCtrls:({rowCtrls:t})=>this.setRowCtrls(t),setSpannedRowCtrls:t=>this.setRowCtrls(t,true),setDomOrder:t=>{this.domOrder=t},setContainerWidth:t=>{this.eContainer.style.width=t;if(this.eSpannedContainer){this.eSpannedContainer.style.width=t}},setOffsetTop:t=>{const e=`translateY(${t})`;this.eContainer.style.transform=e;if(this.eSpannedContainer){this.eSpannedContainer.style.transform=e}}};const e=this.createManagedBean(new rc(this.name));e.setComp(t,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]);this.setRowCtrls([],true);super.destroy();this.lastPlacedElement=null}setRowCtrls(t,e){const{beans:i,options:s}=this;const n=e?this.eSpannedContainer:this.eContainer;const o=e?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan};const r={};if(e){this.rowCompsWithSpan=r}else{this.rowCompsNoSpan=r}this.lastPlacedElement=null;const l=[];for(const e of t){const t=e.instanceId;const n=o[t];let a;if(n){a=n;delete o[t]}else{if(!e.rowNode.displayed){continue}a=new yd(e,i,s.type)}r[t]=a;l.push([a,!n])}this.removeOldRows(Object.values(o));this.addRowNodes(l,n)}addRowNodes(t,e){const{domOrder:i}=this;for(const[s,n]of t){const t=s.getGui();if(!i){if(n){e.appendChild(t)}}else{this.ensureDomOrder(t,e)}}}removeOldRows(t){for(const e of t){e.getGui().remove();e.destroy()}}ensureDomOrder(t,e){vt(e,t,this.lastPlacedElement);this.lastPlacedElement=t}};var Rd={selector:"AG-ROW-CONTAINER",component:xd};function Fd(t,e){return e.map((e=>{const i=`e${e[0].toUpperCase()+e.substring(1)}RowContainer`;t[i]={name:e};return{tag:"ag-row-container",ref:i,attrs:{name:e}}}))}function kd(t){const e={};const i={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:Fd(e,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:Fd(e,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:Fd(e,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:Fd(e,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:Fd(e,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},t?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:e,elementParams:i}}var Pd=class extends Sn{constructor(){super(...arguments);this.eGridRoot=vn;this.eBodyViewport=vn;this.eStickyTop=vn;this.eStickyBottom=vn;this.eTop=vn;this.eBottom=vn;this.eBody=vn}postConstruct(){const{overlays:t,rangeSvc:e}=this.beans;const i=t?.getOverlayWrapperSelector();const{paramsMap:s,elementParams:n}=kd(!!i);this.setTemplate(n,[...i?[i]:[],mc,Cc,Cd,Rd],s);const o=(t,e)=>{const i=`${t}px`;e.style.minHeight=i;e.style.height=i};const r={setRowAnimationCssOnBodyViewport:(t,e)=>this.setRowAnimationCssOnBodyViewport(t,e),setColumnCount:t=>z(this.getGui(),t),setRowCount:t=>G(this.getGui(),t),setTopHeight:t=>o(t,this.eTop),setBottomHeight:t=>o(t,this.eBottom),setTopInvisible:t=>this.eTop.classList.toggle("ag-invisible",t),setBottomInvisible:t=>this.eBottom.classList.toggle("ag-invisible",t),setStickyTopHeight:t=>this.eStickyTop.style.height=t,setStickyTopTop:t=>this.eStickyTop.style.top=t,setStickyTopWidth:t=>this.eStickyTop.style.width=t,setStickyBottomHeight:t=>{this.eStickyBottom.style.height=t;this.eStickyBottom.classList.toggle("ag-invisible",t==="0px")},setStickyBottomBottom:t=>this.eStickyBottom.style.bottom=t,setStickyBottomWidth:t=>this.eStickyBottom.style.width=t,setColumnMovingCss:(t,e)=>this.toggleCss(t,e),updateLayoutClasses:(t,e)=>{const i=[this.eBodyViewport.classList,this.eBody.classList];for(const t of i){t.toggle(lh.AUTO_HEIGHT,e.autoHeight);t.toggle(lh.NORMAL,e.normal);t.toggle(lh.PRINT,e.print)}this.toggleCss(lh.AUTO_HEIGHT,e.autoHeight);this.toggleCss(lh.NORMAL,e.normal);this.toggleCss(lh.PRINT,e.print)},setAlwaysVerticalScrollClass:(t,e)=>this.eBodyViewport.classList.toggle(lc,e),registerBodyViewportResizeListener:t=>{const e=Tt(this.beans,this.eBodyViewport,t);this.addDestroyFunc((()=>e()))},setPinnedTopBottomOverflowY:t=>this.eTop.style.overflowY=this.eBottom.style.overflowY=t,setCellSelectableCss:(t,e)=>{for(const i of[this.eTop,this.eBodyViewport,this.eBottom]){i.classList.toggle(t,e)}},setBodyViewportWidth:t=>this.eBodyViewport.style.width=t,setGridRootRole:t=>x(this.eGridRoot,t)};this.ctrl=this.createManagedBean(new cc);this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom);if(e&&$i(this.gos)||_i(this.gos)){B(this.getGui(),true)}}setRowAnimationCssOnBodyViewport(t,e){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",e);i.toggle("ag-row-no-animation",!e)}};var Dd={selector:"AG-GRID-BODY",component:Pd};var Md=class extends re{constructor(){super(...arguments);this.additionalFocusableContainers=new Set}setComp(t,e,i){this.view=t;this.eGridHostDiv=e;this.eGui=i;this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:s,ctrlsSvc:n}=this.beans;s?.registerGridDropTarget((()=>this.eGui),this);this.createManagedBean(new ah(this.view));this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Tt(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>o()));n.register("gridCtrl",this)}isDetailGrid(){const t=rr(this.getGui());return t?.getAttribute("row-id")?.startsWith("detail")||false}getOptionalSelectors(){const t=this.beans;return{paginationSelector:t.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:t.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:t.sideBar?.getSelector(),statusBarSelector:t.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:t.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){const{view:e}=this;if(t===false){e.setCursor(null)}else{const i=t===1?"ew-resize":"ns-resize";e.setCursor(i)}}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){const e=this.getFocusableContainers();const{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(e,t);if(s<0||s>=e.length){return false}if(s===0){if(i>0){const{visibleCols:t,focusSvc:e}=this.beans;const i=t.allCols;const s=vs(i);if(e.focusGridView({column:s,backwards:true})){return true}}return false}return this.focusContainer(e[s],t)}focusInnerElement(t){const e=this.gos.getCallback("focusGridInnerElement");if(e?.({fromBottom:!!t})){return true}const i=this.getFocusableContainers();const{focusSvc:s,visibleCols:n}=this.beans;const o=n.allCols;if(t){if(i.length>1){return this.focusContainer(vs(i),t)}const e=vs(o);if(s.focusGridView({column:e,backwards:t})){return true}}if(this.gos.get("headerHeight")===0||Dc(this.beans)){if(s.focusGridView({column:o[0],backwards:t})){return true}for(let e=1;e<i.length;e++){if(nr(i[e].getGui(),t)){return true}}return false}return s.focusFirstHeader()}forceFocusOutOfContainer(t=false){this.view.forceFocusOutOfContainer(t)}addFocusableContainer(t){this.additionalFocusableContainers.add(t)}removeFocusableContainer(t){this.additionalFocusableContainers.delete(t)}allowFocusForNextCoreContainer(t){const e=this.view.getFocusableContainers();const{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(e,t);if(s===-1||i<0||i>=e.length){return}const n=e[i];n.setAllowFocus?.(true);setTimeout((()=>{n.setAllowFocus?.(false)}))}isFocusable(){const t=this.beans;return!Mc(t)||!Dc(t)||!!t.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(t,e){const i=d(this.beans);const s=t.findIndex((t=>t.getGui().contains(i)));const n=s+(e?-1:1);return{indexWithFocus:s,nextIndex:n}}focusContainer(t,e){t.setAllowFocus?.(true);const i=nr(t.getGui(),e,false,true);t.setAllowFocus?.(false);return i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear();super.destroy()}};var Td=class extends td{constructor(t){super();this.gridBody=vn;this.sideBar=vn;this.pagination=vn;this.rootWrapperBody=vn;this.eGridDiv=t}postConstruct(){const t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:t=>this.addCss(t),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:t=>{this.getGui().style.userSelect=t!=null?t:"";this.getGui().style.webkitUserSelect=t!=null?t:""},setCursor:t=>{this.getGui().style.cursor=t!=null?t:""}};const e=this.createManagedBean(new Md);const i=e.getOptionalSelectors();const s=this.createTemplate(i);const n=[Dd,...Object.values(i).filter((t=>!!t))];this.setTemplate(s,n);e.setComp(t,this.eGridDiv,this.getGui());this.insertGridIntoDom();this.initialiseTabGuard({onTabKeyDown:()=>void 0,focusInnerElement:t=>e.focusInnerElement(t),forceFocusOutWhenTabGuardsAreEmpty:true,isEmpty:()=>!e.isFocusable()})}insertGridIntoDom(){const t=this.getGui();this.eGridDiv.appendChild(t);this.addDestroyFunc((()=>{t.remove();Fe(this.gos,"Grid removed from DOM")}))}updateLayoutClasses(t,e){const i=this.rootWrapperBody.classList;const{AUTO_HEIGHT:s,NORMAL:n,PRINT:o}=lh;const{autoHeight:r,normal:l,print:a}=e;i.toggle(s,r);i.toggle(n,l);i.toggle(o,a);this.toggleCss(s,r);this.toggleCss(n,l);this.toggleCss(o,a)}createTemplate(t){const e=t.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null;const i=t.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null;const s=t.statusBarSelector?{tag:"ag-status-bar"}:null;const n=t.watermarkSelector?{tag:"ag-watermark"}:null;const o=t.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[e,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},i]},s,o,n]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(t=false){if(!t&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(t);return}super.forceFocusOutOfContainer(t)}getFocusableContainers(){const t=[this.gridBody];for(const e of[this.sideBar,this.pagination]){if(e){t.push(e)}}return t.filter((t=>pt(t.getGui())))}};var Ed=(t,e)=>{for(const i of Object.keys(e)){e[i]=t}return e};var Ad={dispatchEvent:"CommunityCore",...Ed("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...Ed("GridState",{getState:0,setState:0}),...Ed("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Ed("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Ed("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Ed("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Ed("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Ed("ValueCache",{expireValueCache:0}),...Ed("CellApi",{getCellValue:0}),...Ed("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Ed("Sort",{onSortChanged:0}),...Ed("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...Ed("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Ed("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Ed("HighlightChanges",{flashCells:0}),...Ed("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...Ed("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Ed("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Ed("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Ed("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Ed("ColumnResize",{setColumnWidths:0}),...Ed("ColumnHover",{isColumnHovered:0}),...Ed("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...Ed("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...Ed("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Ed("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Ed("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...Ed("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Ed("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...Ed("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Ed("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...Ed("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Ed("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...Ed("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Ed("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Ed("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Ed("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Ed("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Ed("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Ed("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Ed("ContextMenu",{showContextMenu:0}),...Ed("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Ed("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Ed("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Ed("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Ed("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Ed("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...Ed("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Ed("StatusBar",{getStatusPanel:0}),...Ed("AiToolkit",{getStructuredSchema:0})};var Id={isDestroyed:()=>true,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}};var Hd=(t,e)=>t.eventSvc.dispatchEvent(e);var Od=class{};Reflect.defineProperty(Od,"name",{value:"GridApi"});var Nd=class extends re{constructor(){super();this.beanName="apiFunctionSvc";this.api=new Od;this.fns={...Id,dispatchEvent:Hd};this.preDestroyLink="";const{api:t}=this;for(const e of Object.keys(Ad)){t[e]=this.makeApi(e)[e]}}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(t,e){const{fns:i,beans:s}=this;if(i!==Id){i[t]=s?.validation?.validateApiFunction(t,e)??e}}makeApi(t){return{[t]:(...e)=>{const{beans:i,fns:{[t]:s}}=this;return s?s(i,...e):this.apiNotFound(t)}}}apiNotFound(t){const{beans:e,gos:i,preDestroyLink:s}=this;if(!e){hi(26,{fnName:t,preDestroyLink:s})}else{const e=Ad[t];if(i.assertModuleRegistered(e,`api.${t}`)){hi(27,{fnName:t,module:e})}}}destroy(){super.destroy();this.fns=Id;this.beans=null}};function Bd(t){return t.context.getId()}function Gd(t){t.gridDestroySvc.destroy()}function Vd(t){return t.gridDestroySvc.destroyCalled}function Ld(t,e){return t.gos.get(e)}function zd(t,e,i){$d(t,{[e]:i})}function $d(t,e){t.gos.updateGridOptions({options:e})}function Wd(t,e){const i=e.replace(/Module$/,"");return t.gos.isModuleRegistered(i)}var Ud={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}};var jd=class extends Sn{constructor(t,e,i){super(Ud);this.rowNode=t;this.column=e;this.eCell=i}postConstruct(){const t=this.getGui();t.appendChild(pu("rowDrag",this.beans,null));this.addGuiEventListener("mousedown",(t=>{t.stopPropagation()}));this.addDragSource();this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){const{rowNode:e,column:i,eCell:s,gos:n}=this;const o=i.getColDef().dndSourceOnRowDrag;const r=t.dataTransfer;r.setDragImage(s,0,0);if(o){const i=os(n,{rowNode:e,dragEvent:t});o(i)}else{try{const t=JSON.stringify(e.data);r.setData("application/json",t);r.setData("text/plain",t)}catch(t){}}}checkVisibility(){const t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}};function Kd(t,e){t.rowDragSvc?.rowDragFeature?.addRowDropZone(e)}function qd(t,e){const i=t.dragAndDrop?.findExternalZone(e.getContainer());if(i){t.dragAndDrop?.removeDropTarget(i)}}function _d(t,e){return t.rowDragSvc?.rowDragFeature?.getRowDropZone(e)}function Zd(t){const e=t.rowDropHighlightSvc;return e?{row:e.row,dropIndicatorPosition:e.position}:{row:null,dropIndicatorPosition:"none"}}function Yd(t,e){const i=t.rowDropHighlightSvc;if(!i){return}const s=e?.row;let n=e?.dropIndicatorPosition;if(n!=="above"&&n!=="below"&&n!=="inside"){n="none"}const o=s?.rowIndex;if(o===null||o===void 0||n==="none"){i.clear()}else{i.set(s,n)}}var Qd=class extends sa{shouldPreventMouseEvent(t){const e=this.gos.get("enableCellTextSelection");return e&&super.shouldPreventMouseEvent(t)}};var Jd=class extends re{constructor(){super(...arguments);this.beanName="horizontalResizeSvc"}addResizeBar(t){const e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),onDragCancel:this.onDragStop.bind(this,t),includeTouch:true,stopPropagationForTouch:true};const{dragSvc:i}=this.beans;i.addDragSource(e);const s=()=>i.removeDragSource(e);return s}onDragStart(t,e){this.dragStartX=e.clientX;this.setResizeIcons();const i=e instanceof MouseEvent&&e.shiftKey===true;t.onResizeStart(i)}setResizeIcons(){const t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(1);t.disableUserSelect(true)}onDragStop(t){t.onResizeEnd(this.resizeAmount);this.resetIcons()}resetIcons(){const t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(false);t.disableUserSelect(false)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX;t.onResizing(this.resizeAmount)}};var Xd={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}};var tf=class extends Sn{constructor(t,e,i,s,n,o=false){super();this.cellValueFn=t;this.rowNode=e;this.column=i;this.customGui=s;this.dragStartPixels=n;this.alwaysVisible=o;this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:t,customGui:e}=this;if(e){this.setDragElement(e,this.dragStartPixels)}else{this.setTemplate(Xd);this.getGui().appendChild(pu("rowDrag",t,null));this.addDragSource()}if(!this.alwaysVisible){this.initCellDrag()}}initCellDrag(){const{beans:t,gos:e,rowNode:i}=this;const s=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",s);this.addManagedListeners(i,{dataChanged:s,cellChanged:s});this.addManagedListeners(t.eventSvc,e.get("rowDragManaged")?{sortChanged:s,filterChanged:s,columnRowGroupChanged:s,newColumnsLoaded:s}:{newColumnsLoaded:s})}setDragElement(t,e){this.setTemplateFromElement(t,void 0,void 0,true);this.addDragSource(e)}refreshVisibility(){if(this.alwaysVisible){return}const t={skipAriaHidden:true};if(this.isNeverDisplayed()){this.setDisplayed(false,t);return}const e=this.column;let i=typeof e?.getColDef().rowDrag==="function";let s=!e||this.isCustomGui()||e.isRowDrag(this.rowNode);if(s&&this.rowNode.footer&&this.gos.get("rowDragManaged")){s=false;i=true}this.setDisplayed(i||s,t);this.setVisible(s,t)}isNeverDisplayed(){const{gos:t,beans:e}=this;if(t.get("suppressRowDrag")){return true}if(t.get("rowDragManaged")&&!!e.rowDragSvc.rowDragFeature?.shouldPreventRowMove()&&!e.dragAndDrop?.hasExternalDropZones()){return true}return false}getSelectedNodes(){const t=this.rowNode;const e=this.gos.get("rowDragMultiRow");if(!e){return[t]}const i=this.beans.selectionSvc?.getSelectedNodes()??[];return i.indexOf(t)!==-1?i:[t]}getDragItem(){const{column:t,rowNode:e}=this;return{rowNode:e,rowNodes:this.getSelectedNodes(),columns:t?[t]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){const e=t.getColDef();if(e.rowDragText){return e.rowDragText}}return this.gos.get("rowDragText")}addDragSource(t=4){if(this.dragSource){this.removeDragSource()}if(this.gos.get("rowDragManaged")&&this.rowNode.footer){return}const e=this.getGui();if(this.gos.get("enableCellTextSelection")){this.removeMouseDownListener();this.mouseDownListener=this.addManagedElementListeners(e,{mousedown:t=>{t?.preventDefault()}})[0]}const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:e,dragItemName:t=>{const e=t?.dragItem||this.getDragItem();const s=(t?.dropTarget?.rows.length??e.rowNodes?.length)||1;const n=this.getRowDragText(this.column);if(n){return n(e,s)}return s===1?this.cellValueFn():`${s} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()};this.beans.dragAndDrop.addDragSource(this.dragSource,true)}destroy(){this.removeDragSource();this.removeMouseDownListener();super.destroy()}removeDragSource(){if(!this.dragSource){return}this.beans.dragAndDrop.removeDragSource(this.dragSource);this.dragSource=null}removeMouseDownListener(){if(!this.mouseDownListener){return}this.mouseDownListener();this.mouseDownListener=void 0}};var ef=class{constructor(){this.reordered=false;this.removals=new Set;this.updates=new Set;this.adds=new Set}};function sf(t){const{rowIndex:e,rowPinned:i,column:s}=t;return`${e}.${i==null?"null":i}.${s.getId()}`}function nf(t,e){const i=t.column===e.column;const s=t.rowPinned===e.rowPinned;const n=t.rowIndex===e.rowIndex;return i&&s&&n}function of(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top"){return true}break;case"bottom":if(e.rowPinned!=="bottom"){return false}break;default:if(i(e.rowPinned)){return e.rowPinned!=="top"}break}return t.rowIndex<e.rowIndex}function rf(t,e){if(!t&&!e){return true}if(t&&!e||!t&&e){return false}return t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}function lf(t){let e=0;let i;const{pinnedRowModel:s,rowModel:n,pageBounds:o}=t;if(s?.getPinnedTopRowCount()){i="top"}else if(n.getRowCount()){i=null;e=o.getFirstRow()}else if(s?.getPinnedBottomRowCount()){i="bottom"}return i===void 0?null:{rowIndex:e,rowPinned:i}}function af(t){let e;let i=null;const{pinnedRowModel:s,pageBounds:n}=t;const o=s?.getPinnedBottomRowCount();const r=s?.getPinnedTopRowCount();if(o){i="bottom";e=o-1}else if(t.rowModel.getRowCount()){e=n.getLastRow()}else if(r){i="top";e=r-1}return e===void 0?null:{rowIndex:e,rowPinned:i}}function hf(t,e){switch(e.rowPinned){case"top":return t.pinnedRowModel?.getPinnedTopRow(e.rowIndex);case"bottom":return t.pinnedRowModel?.getPinnedBottomRow(e.rowIndex);default:return t.rowModel.getRow(e.rowIndex)}}function cf(t,e){const i=t.spannedRowRenderer?.getCellByPosition(e);if(i){return i}const s=t.rowRenderer.getRowByPosition(e);if(!s){return null}return s.getCellCtrl(e.column)}function uf(t,e,i){const{rowModel:s,pinnedRowModel:n}=t;let o;o??(o=s?.getRowNode(e));if(i){o??(o=n?.getPinnedRowById(e,i))}else{o??(o=n?.getPinnedRowById(e,"top"));o??(o=n?.getPinnedRowById(e,"bottom"))}return o}function df(t,e,i=false){const{rowIndex:s,rowPinned:n}=e;const{pageBounds:o,pinnedRowModel:r,rowModel:l}=t;if(s===0){if(n==="top"){return null}if(n==="bottom"&&l.isRowsToRender()){return{rowIndex:o.getLastRow(),rowPinned:null}}return r?.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null}if(i){const e=n?void 0:l.getRow(s);return gf(t,e,true)??{rowIndex:s-1,rowPinned:n}}return{rowIndex:s-1,rowPinned:n}}function ff(t,e,i=false){const{rowIndex:s,rowPinned:n}=e;const{pageBounds:o,pinnedRowModel:r,rowModel:l}=t;if(pf(t,e)){if(n==="bottom"){return null}if(n==="top"&&l.isRowsToRender()){return{rowIndex:o.getFirstRow(),rowPinned:null}}return r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}if(i){const e=n?void 0:l.getRow(s);return gf(t,e)??{rowIndex:s+1,rowPinned:n}}return{rowIndex:s+1,rowPinned:n}}function gf(t,e,i=false){const{gos:s,rowRenderer:n}=t;if(!e?.sticky||!Di(s)){return}const o=n.getStickyTopRowCtrls();const r=n.getStickyBottomRowCtrls();const l=!r.some((t=>t.rowNode.rowIndex===e.rowIndex));const a=l?o:r;const h=(i?-1:1)*(l?-1:1);let c;for(let t=0;t<a.length;t++){if(a[t].rowNode.rowIndex===e.rowIndex){c=a[t+h];break}}return c?{rowIndex:c.rowNode.rowIndex,rowPinned:null}:void 0}function pf(t,e){const{rowPinned:i,rowIndex:s}=e;const{pinnedRowModel:n,pageBounds:o}=t;if(i==="top"){const t=(n?.getPinnedTopRowCount()??0)-1;return t<=s}if(i==="bottom"){const t=(n?.getPinnedBottomRowCount()??0)-1;return t<=s}const r=o.getLastRow();return r<=s}var mf=class{constructor(t,e){this.active=true;this.nodeIdsToColumns={};this.mapToItems={};this.keepingColumns=t;this.pathRoot={rowNode:e,children:null};this.mapToItems[e.id]=this.pathRoot}depthFirstSearchChangedPath(t,e){const{rowNode:i,children:s}=t;if(s){for(let t=0;t<s.length;++t){this.depthFirstSearchChangedPath(s[t],e)}}e(i)}depthFirstSearchEverything(t,e,i){const s=t.childrenAfterGroup;if(s){for(let t=0,n=s.length;t<n;++t){const n=s[t];if(n.childrenAfterGroup){this.depthFirstSearchEverything(n,e,i)}else if(i){e(n)}}}e(t)}forEachChangedNodeDepthFirst(t,e=false,i=false){if(this.active&&!i){this.depthFirstSearchChangedPath(this.pathRoot,t)}else{this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t;let i=0;while(!this.mapToItems[e.id]){const t={rowNode:e,children:null};this.mapToItems[e.id]=t;i++;e=e.parent}return i}populateColumnsMap(t,e){if(!this.keepingColumns||!e){return}let i=t;while(i){if(!this.nodeIdsToColumns[i.id]){this.nodeIdsToColumns[i.id]={}}for(const t of e){this.nodeIdsToColumns[i.id][t.getId()]=true}i=i.parent}}linkPathItems(t,e){let i=t;for(let t=0;t<e;t++){const t=this.mapToItems[i.id];const e=this.mapToItems[i.parent.id];if(!e.children){e.children=[]}e.children.push(t);i=i.parent}}addParentNode(t,e){if(!t||t.isRowPinned()){return}const i=this.createPathItems(t);this.linkPathItems(t,i);this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns){return e}const i=this.nodeIdsToColumns[t.id];const s=e.filter((t=>i[t.getId()]));return s}getNotValueColumnsForNode(t,e){if(!this.keepingColumns){return null}const i=this.nodeIdsToColumns[t.id];const s=e.filter((t=>!i[t.getId()]));return s}};var vf=class{constructor(t,e){this.beans=t;this.groupThrottled=false;this.scrollChanged=false;this.scrollChanging=false;this.oldVScroll=null;this.groupTimer=null;this.groupTarget=null;this.onGroupThrottle=()=>{this.groupTimer=null;this.groupThrottled=true;this.beans.dragAndDrop?.nudge()};const i=()=>e.scrollFeature.getVScrollPosition().top;this.autoScroll=new rd({scrollContainer:e.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:t=>e.scrollFeature.setVerticalScrollPosition(t),onScrollCallback:()=>{const t=i();if(this.oldVScroll!==t){this.oldVScroll=t;this.scrollChanging=true;return}const e=this.scrollChanging;this.scrollChanged=e;this.scrollChanging=false;if(e){this.beans.dragAndDrop?.nudge();this.scrollChanged=false}}})}updateGroup(t,e){if(this.groupTarget&&this.groupTarget!==t){this.clearGroup()}if(t){if(e&&this.groupThrottled&&!t.expanded&&t.childrenAfterSort?.length&&t.isExpandable()){t.setExpanded(true,void 0,true)}if(t.expanded&&t.childrenAfterSort?.length){this.groupThrottled=true;this.groupTarget=t}}}startGroup(t){this.groupTarget=t;if(this.groupTimer===null){this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay"))}}clearGroup(){this.groupThrottled=false;this.groupTarget=null;const t=this.groupTimer;if(t!==null){this.groupTimer=null;window.clearTimeout(t)}}clear(){this.clearGroup();this.autoScroll.ensureCleared();this.oldVScroll=null;this.scrollChanged=false;this.scrollChanging=false}};var wf=class extends re{constructor(t){super();this.eContainer=t;this.lastDraggingEvent=null;this.nudger=null}postConstruct(){const t=this.beans;t.ctrlsSvc.whenReady(this,(e=>{this.nudger=new vf(t,e.gridBodyCtrl)}))}destroy(){super.destroy();this.nudger?.clear();this.nudger=null;this.lastDraggingEvent=null;this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(t){if(t?.dropTarget?.allowed===false){return"notAllowed"}if(this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()){return"notAllowed"}return"move"}shouldPreventRowMove(){const{rowGroupColsSvc:t,filterManager:e,sortSvc:i}=this.beans;const s=t?.columns??[];if(s.length){return true}const n=e?.isAnyFilterPresent();if(n){return true}const o=i?.isSortActive();if(o){return true}return false}getRowNodes(t){if(!this.isFromThisGrid(t)){return t.dragItem.rowNodes||[]}const e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const t=this.beans.selectionSvc?.getSelectedNodes();if(t&&t.indexOf(e)>=0){return t.slice().sort(Ff)}}return[e]}onDragEnter(t){this.dragging(t,true)}onDragging(t){this.dragging(t,false)}dragging(t,e){const{lastDraggingEvent:i,beans:s}=this;if(e){const e=this.getRowNodes(t);t.dragItem.rowNodes=e;kf(e,true)}this.lastDraggingEvent=t;const n=t.fromNudge;const o=this.makeRowsDrop(i,t,n,false);s.rowDropHighlightSvc?.fromDrag(t);if(e){this.dispatchGridEvent("rowDragEnter",t)}this.dispatchGridEvent("rowDragMove",t);if(o?.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!n&&!this.nudger?.autoScroll.scrolling||this.nudger?.scrollChanged)){this.dropRows(o)}this.nudger?.autoScroll.check(t.event)}isFromThisGrid(t){return t.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(t,e,i,s){const{beans:n,gos:o}=this;const r=this.newRowsDrop(e,s);const l=n.rowModel;e.dropTarget=r;e.changed=false;if(!r){return null}let{sameGrid:a,rootNode:h,source:c,target:u,rows:d}=r;u??(u=l.getRow(l.getRowCount()-1)??null);const f=!!this.beans.groupStage?.treeData&&a;let g=null;if(u?.footer){const t=Cf(l,-1,u)??Cf(l,1,u);g=u.sibling??h;u=t??null}if(u?.detail){u=u.parent}r.moved&&(r.moved=c!==u);let p=.5;if(u){if(a&&r.moved&&(g||!f)){p=c.rowIndex>u.rowIndex?-.5:.5}else{p=(r.y-u.rowTop-u.rowHeight/2)/u.rowHeight||0}}if(!f&&a&&u&&r.moved&&pi(o)){const t=Pf(l,r);if(t){p=c.rowIndex>t.rowIndex?-.5:.5;u=t;r.moved&&(r.moved=c!==u)}}const m=this.nudger;m?.updateGroup(u,i);if(f&&!g&&m){if(!u||p>=.5&&u.rowIndex===n.pageBounds.getLastRow()){g=h}else if(r.moved&&this.targetShouldBeParent(u,p,d)){if(m.groupThrottled){g=u}if(!i&&(!g||u&&!u.expanded&&!!u.childrenAfterSort?.length)){m.startGroup(u)}}g??(g=u?.parent??h)}let v=false;if(g){if(g===u&&g!==h){const t=g.expanded?Cf(l,1,u):null;if(t?.parent===g){u=t;p=-.5}else{v=true}}if(u&&!v){let t=u;while(t&&t!==h&&t!==g){u=t;t=t.parent}}}r.target=u;r.newParent=g;r.moved&&(r.moved=c!==u);const w=p<0?"above":"below";r.position=r.moved?v?"inside":w:"none";this.validateRowsDrop(r,f,w,s);e.changed||(e.changed=Rf(t?.dropTarget,r));return r}newRowsDrop(t,e){const{beans:i,gos:s}=this;const n=i.rowModel.rootNode;const o=pi(s)?s.get("rowDragManaged"):false;const r=s.get("suppressMoveWhenRowDragging");const l=this.isFromThisGrid(t);let{rowNode:a,rowNodes:h}=t.dragItem;h||(h=a?[a]:[]);a||(a=h[0]);if(!a||!n){return null}const c=this.beans.dragAndDrop.isDropZoneWithinThisGrid(t);let u=true;if(o&&(!h.length||this.shouldPreventRowMove()||(r||!l)&&!c)){u=false}const d=dc(i,t).y;const f=this.getOverNode(d);return{api:i.gridApi,context:i.gridOptions.context,draggingEvent:t,rowDragManaged:o,suppressMoveWhenRowDragging:r,sameGrid:l,withinGrid:c,rootNode:n,moved:a!==f,y:d,overNode:f,overIndex:f?.rowIndex??-1,position:"none",source:a,target:f??null,newParent:null,rows:h,allowed:u,highlight:!e&&o&&r&&(c||!l)}}validateRowsDrop(t,e,i,s){const{rowDragManaged:n,suppressMoveWhenRowDragging:o}=t;if(!e){t.newParent=null}if(o&&!t.moved){t.allowed=false}const r=(!n||t.allowed)&&this.gos.get("isRowValidDropPosition");if(r){if(e&&t.newParent&&yf(t.rows,t.newParent)){t.newParent=null}const i=r(t);if(!i){t.allowed=false}else if(typeof i==="object"){if(i.rows!==void 0){t.rows=i.rows??[]}if(e&&i.newParent!==void 0){t.newParent=i.newParent}if(i.target!==void 0){t.target=i.target}if(i.position){t.position=i.position}if(i.allowed!==void 0){t.allowed=i.allowed}else if(!n){t.allowed=true}const o=t.draggingEvent;if(i.changed&&o){o.changed=true}if(!s&&i.highlight!==void 0){t.highlight=i.highlight}}}if(n){t.rows=this.filterRows(t)}if(e&&t.newParent&&yf(t.rows,t.newParent)){t.newParent=null}if(o&&(!t.rows.length||t.position==="none")){t.allowed=false}if((!t.allowed||!t.newParent)&&t.position==="inside"){t.position=i}}targetShouldBeParent(t,e,i){const s=t.rowIndex;const n=.25;if(e<-.5+n){return false}if(e<.5-n){return true}let o;let r=s+1;const l=this.beans.rowModel;do{o=l.getRow(r++)}while(o?.footer);const a=t.childrenAfterGroup;if(o&&o.parent===t&&a?.length){const t=new Set(i);for(const e of a){if(e.rowIndex!==null&&!t.has(e)){return true}}}return false}addRowDropZone(t){if(!t.getContainer()){hi(55);return}const e=this.beans.dragAndDrop;if(e.findExternalZone(t.getContainer())){hi(56);return}const i=t.fromGrid?t:{getContainer:t.getContainer,onDragEnter:t.onDragEnter&&(e=>t.onDragEnter(this.rowDragEvent("rowDragEnter",e))),onDragLeave:t.onDragLeave&&(e=>t.onDragLeave(this.rowDragEvent("rowDragLeave",e))),onDragging:t.onDragging&&(e=>t.onDragging(this.rowDragEvent("rowDragMove",e))),onDragStop:t.onDragStop&&(e=>t.onDragStop(this.rowDragEvent("rowDragEnd",e))),onDragCancel:t.onDragCancel&&(e=>t.onDragCancel(this.rowDragEvent("rowDragCancel",e)))};const s={isInterestedIn:t=>t===2,getIconName:()=>"move",external:true,...i};e.addDropTarget(s);this.addDestroyFunc((()=>e.removeDropTarget(s)))}getRowDropZone(t){const e={getContainer:this.getContainer.bind(this),onDragEnter:e=>{this.onDragEnter(e);t?.onDragEnter?.(this.rowDragEvent("rowDragEnter",e))},onDragLeave:e=>{this.onDragLeave(e);t?.onDragLeave?.(this.rowDragEvent("rowDragLeave",e))},onDragging:e=>{this.onDragging(e);t?.onDragging?.(this.rowDragEvent("rowDragMove",e))},onDragStop:e=>{this.onDragStop(e);t?.onDragStop?.(this.rowDragEvent("rowDragEnd",e))},onDragCancel:e=>{this.onDragCancel(e);t?.onDragCancel?.(this.rowDragEvent("rowDragCancel",e))},fromGrid:true};return e}getOverNode(t){const{pageBounds:e,rowModel:i}=this.beans;const s=t>e.getCurrentPagePixelRange().pageLastPixel;const n=s?-1:i.getRowIndexAtPixel(t);return n>=0?i.getRow(n):void 0}rowDragEvent(t,e){const i=this.beans;const{dragItem:s,dropTarget:n,event:o,vDirection:r}=e;const l=n?.rootNode===i.rowModel.rootNode;const a=l?n.y:dc(i,e).y;const h=l?n.overNode:this.getOverNode(a);const c=l?n.overIndex:h?.rowIndex??-1;return{api:i.gridApi,context:i.gridOptions.context,type:t,event:o,node:s.rowNode,nodes:s.rowNodes,overIndex:c,overNode:h,y:a,vDirection:r,rowsDrop:n}}dispatchGridEvent(t,e){const i=this.rowDragEvent(t,e);this.eventSvc.dispatchEvent(i)}onDragLeave(t){this.dispatchGridEvent("rowDragLeave",t);this.stopDragging(t)}onDragStop(t){const e=this.makeRowsDrop(this.lastDraggingEvent,t,false,true);this.dispatchGridEvent("rowDragEnd",t);if(e?.allowed&&e.rowDragManaged&&(e.suppressMoveWhenRowDragging||!e.sameGrid||this.nudger?.autoScroll.scrolling)){this.dropRows(e)}this.stopDragging(t)}onDragCancel(t){this.dispatchGridEvent("rowDragCancel",t);this.stopDragging(t)}stopDragging(t){this.nudger?.clear();this.beans.rowDropHighlightSvc?.fromDrag(null);kf(t.dragItem.rowNodes,false)}dropRows(t){return t.sameGrid?this.csrmMoveRows(t):this.csrmAddRows(t)}csrmAddRows({position:t,target:e,rows:i}){const s=Hi(this.gos);const n=this.beans.rowModel;const o=i.filter((({data:t,rowPinned:e})=>!n.getRowNode(s?.({data:t,level:0,rowPinned:e})??t.id))).map((({data:t})=>t));if(o.length===0){return false}const r=e?Sf(e)+(t==="above"?0:1):void 0;n.updateRowData({add:o,addIndex:r});return true}filterRows({newParent:t,rows:e}){let i;for(let s=0,n=e.length;s<n;++s){let n=true;const o=e[s];if(!o||o.footer||o.rowTop===null&&o!==this.beans.rowModel.getRowNode(o.id)||t&&o.parent!==t&&bf(o,t)||!xf(o)){n=false}if(n){i?.push(o)}else{i??(i=e.slice(0,s))}}return i??e}csrmMoveRows({position:t,target:e,rows:i,newParent:s,rootNode:n}){let o=false;const r=new Set;for(const t of i){if(s&&t.parent!==s){t.treeParent=s;o=true}const e=xf(t);if(e){r.add(e)}}if(!o&&r.size===0){return false}const l=this.beans.focusSvc;const a=l.getFocusedCell();const h=a&&cf(this.beans,a);if(r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,e,t==="above"))){o=true}if(!o){return false}const c=this.beans.rowModel;const u=new ef;u.reordered=true;c.refreshModel({step:"group",keepRenderedRows:true,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new mf(false,n),changedRowNodes:u});if(h){h.focusCell()}else{l.clearFocusedCell()}return true}getMoveRowsBounds(t,e,i){const s=this.beans.rowModel.rootNode?._leafs?.length??0;let n=e?Sf(e):-1;if(n<0||n>=s){n=s}else if(!i){++n}let o=n;let r=Math.min(n,s-1);for(const e of t){const t=e.sourceRowIndex;if(t<o){o=t}if(t>r){r=t}}return[o,n,r]}reorderLeafChildren(t,e,i,s){let n=false;const o=this.beans.rowModel.rootNode?._leafs;if(!t.size||!o){return false}let r=e;for(let s=e;s<i;++s){const e=o[s];if(!t.has(e)){if(e.sourceRowIndex!==r){e.sourceRowIndex=r;o[r]=e;n=true}++r}}let l=s;for(let e=s;e>=i;--e){const i=o[e];if(!t.has(i)){if(i.sourceRowIndex!==l){i.sourceRowIndex=l;o[l]=i;n=true}--l}}for(const e of t){if(e.sourceRowIndex!==r){e.sourceRowIndex=r;o[r]=e;n=true}++r}return n}};var Cf=(t,e,i)=>{if(i){const s=t.getRowCount();let n=i.rowIndex+e;while(n>=0&&n<s){const i=t.getRow(n);if(!i||!i.footer&&!i.detail){return i}n+=e}}return void 0};var bf=(t,e)=>{let i=e;while(i){if(i===t){return true}i=i.parent}return false};var yf=(t,e)=>{for(let i=0,s=t.length;i<s;++i){if(t[i].parent!==e){return false}}return true};var Sf=t=>{const e=xf(t);return e!==void 0?e.sourceRowIndex:-1};var xf=t=>t.data?t:ba(t.childrenAfterGroup);var Rf=(t,e)=>t!==e&&(!t||t.sameGrid!==e.sameGrid||t.allowed!==e.allowed||t.position!==e.position||t.target!==e.target||t.source!==e.source||t.newParent!==e.newParent||!ws(t.rows,e.rows));var Ff=({rowIndex:t},{rowIndex:e})=>t!==null&&e!==null?t-e:0;var kf=(t,e)=>{for(let i=0,s=t?.length||0;i<s;++i){const s=t[i];if(s.dragging!==e){s.dragging=e;s.dispatchRowEvent("draggingChanged")}}};var Pf=(t,e)=>{let i=null;let s=e.target;if(s&&e.rows.indexOf(s)<0){return null}const n=e.source;if(!s||!n){return null}let o=s.rowIndex-n.rowIndex;const r=o<0?-1:1;o=e.suppressMoveWhenRowDragging?Math.abs(o):1;const l=new Set(e.rows);do{const e=Cf(t,r,s);if(!e){break}if(!l.has(e)){i=e;--o}s=e}while(o>0);return i};var Df=class extends re{constructor(){super(...arguments);this.beanName="rowDragSvc"}setupRowDrag(t,e){const i=e.createManagedBean(new wf(t));const s=this.beans.dragAndDrop;s.addDropTarget(i);e.addDestroyFunc((()=>s.removeDropTarget(i)));this.rowDragFeature=i}createRowDragComp(t,e,i,s,n,o){return new tf(t,e,i,s,n,o)}createRowDragCompForRow(t,e){if($i(this.gos)){return void 0}const i=this.getLocaleTextFunc();return this.createRowDragComp((()=>`1 ${i("rowDragRow","row")}`),t,void 0,e,void 0,true)}createRowDragCompForCell(t,e,i,s,n,o){const r=this.gos;if(r.get("rowDragManaged")){if(!pi(r)||r.get("pagination")){return void 0}}const l=this.createRowDragComp(i,t,e,s,n,o);return l}};var Mf=class extends re{constructor(){super(...arguments);this.beanName="rowDropHighlightSvc";this.uiLevel=0;this.dragging=false;this.row=null;this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const t=this.row;const e=this.dragging;if(!t||t?.rowIndex===null||this.position==="none"){this.clear()}else{this.set(t,this.position)}this.dragging=e}destroy(){this.clear();super.destroy()}clear(){const t=this.row;this.dragging=false;if(t){this.uiLevel=0;this.position="none";this.row=null;t.dispatchRowEvent("rowHighlightChanged")}}set(t,e){const i=t!==this.row;const s=t.uiLevel;const n=e!==this.position;const o=s!==this.uiLevel;this.dragging=false;if(i||n||o){if(i){this.clear()}this.uiLevel=s;this.position=e;this.row=t;t.dispatchRowEvent("rowHighlightChanged")}}fromDrag(t){const e=t?.dropTarget;if(e){const{highlight:t,target:i,position:s}=e;if(t&&i&&s!=="none"){this.set(i,s);this.dragging=true;return}}if(this.dragging){this.clear()}}};var Tf={moduleName:"Drag",version:Ke,beans:[Qd]};var Ef={moduleName:"DragAndDrop",version:Ke,dynamicBeans:{dndSourceComp:jd},icons:{rowDrag:"grip"}};var Af={moduleName:"SharedDragAndDrop",version:Ke,beans:[aa],dependsOn:[Tf],userComponents:{agDragAndDropImage:wu},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}};var If={moduleName:"RowDrag",version:Ke,beans:[Mf,Df],apiFunctions:{addRowDropZone:Kd,removeRowDropZone:qd,getRowDropZoneParams:_d,getRowDropPositionIndicator:Zd,setRowDropPositionIndicator:Yd},dependsOn:[Af]};var Hf={moduleName:"HorizontalResize",version:Ke,beans:[Jd],dependsOn:[Tf]};var Of=`:where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}`;var Nf=class extends re{constructor(){super(...arguments);this.beanName="colAnimation";this.executeNextFuncs=[];this.executeLaterFuncs=[];this.active=false;this.activeNext=false;this.suppressAnimation=false;this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>this.gridBodyCtrl=t.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){if(this.active){return}const{gos:t}=this;if(t.get("suppressColumnMoveAnimation")){return}if(t.get("enableRtl")){return}this.ensureAnimationCssClassPresent();this.active=true;this.activeNext=true}finish(){if(!this.active){return}this.flush((()=>this.activeNext=false),(()=>this.active=false))}executeNextVMTurn(t){if(this.activeNext){this.executeNextFuncs.push(t)}else{t()}}executeLaterVMTurn(t){if(this.active){this.executeLaterFuncs.push(t)}else{t()}}ensureAnimationCssClassPresent(){this.animationThreadCount++;const t=this.animationThreadCount;const{gridBodyCtrl:e}=this;e.setColumnMovingCss(true);this.executeLaterFuncs.push((()=>{if(this.animationThreadCount===t){e.setColumnMovingCss(false)}}))}flush(t,e){const{executeNextFuncs:i,executeLaterFuncs:s}=this;if(i.length===0&&s.length===0){t();e();return}const n=t=>{while(t.length){const e=t.pop();if(e){e()}}};this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{t();n(i)}),0);window.setTimeout((()=>{e();n(s)}),200)}))}};function Bf(t,e,i){t.colMoves?.moveColumnByIndex(e,i,"api")}function Gf(t,e,i){t.colMoves?.moveColumns(e,i,"api")}var Vf=class extends re{constructor(t){super();this.pinned=t;this.columnsToAggregate=[];this.columnsToGroup=[];this.columnsToPivot=[]}onDragEnter(t){this.clearColumnsList();if(this.gos.get("functionsReadOnly")){return}const e=t.dragItem.columns;if(!e){return}for(const t of e){if(!t.isPrimary()){continue}if(t.isAnyFunctionActive()){continue}if(t.isAllowValue()){this.columnsToAggregate.push(t)}else if(t.isAllowRowGroup()){this.columnsToGroup.push(t)}else if(t.isAllowPivot()){this.columnsToPivot.push(t)}}}getIconName(){const t=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;if(t>0){return this.pinned?"pinned":"move"}return null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0;this.columnsToGroup.length=0;this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){const{valueColsSvc:e,rowGroupColsSvc:i,pivotColsSvc:s}=this.beans;if(this.columnsToAggregate.length>0){e?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")}if(this.columnsToGroup.length>0){i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")}if(this.columnsToPivot.length>0){s?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}}onDragCancel(){this.clearColumnsList()}};function Lf(t,e){if(!e||e.length<=1){return}const i=e.filter((e=>t.indexOf(e)<0)).length>0;if(i){return}e.sort(((e,i)=>{const s=t.indexOf(e);const n=t.indexOf(i);return s-n}))}function zf(t){const e=[...t];for(const i of t){let t=null;let s=i.getParent();while(s!=null&&s.getDisplayedLeafColumns().length===1){t=s;s=s.getParent()}if(t!=null){const i=!!t.getColGroupDef()?.marryChildren;const s=i?t.getProvidedColumnGroup().getLeafColumns():t.getLeafColumns();for(const t of s){if(!e.includes(t)){e.push(t)}}}}return e}function $f(t,e,i,s){const n=s.allCols;let o=null;let r=null;for(let s=0;s<t.length;s++){const l=t[s];const a=i.getProposedColumnOrder(e,l);if(!i.doesOrderPassRules(a)){continue}const h=a.filter((t=>n.includes(t)));if(r===null){r=h}else if(!ws(h,r)){break}const c=Kf(a);if(o===null||c<o.fragCount){o={move:l,fragCount:c}}}return o}function Wf(t){const{isFromHeader:e,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:l,colModel:a,colMoves:h,visibleCols:c}=t;let{allMovingColumns:u}=t;if(e){u=zf(u)}const d=u.slice();Lf(a.getCols(),d);const f=_f({movingCols:d,draggingRight:i,xPosition:s,pinned:r,gos:l,colModel:a,visibleCols:c});const g=jf(d,a);if(f.length===0){return}const p=f[0];const m=g!==null&&(e||!n);if(m&&!o){if(!i&&p>=g){return}if(i&&p<=g){return}}const v=$f(f,d,h,c);if(!v){return}const w=v.move;if(w>a.getCols().length-d.length){return}return{columns:d,toIndex:w}}function Uf(t){const{columns:e,toIndex:i}=Wf(t)||{};const{finished:s,colMoves:n}=t;if(!e||i==null){return null}n.moveColumns(e,i,"uiColumnMoved",s);return s?null:{columns:e,toIndex:i}}function jf(t,e){const i=e.getCols();const s=t.map((t=>i.indexOf(t))).sort(((t,e)=>t-e));const n=s[0];const o=vs(s);const r=o-n;const l=r!==s.length-1;return l?null:n}function Kf(t){function e(t){const e=[];let i=t.getOriginalParent();while(i!=null){e.push(i);i=i.getOriginalParent()}return e}let i=0;for(let s=0;s<t.length-1;s++){let n=e(t[s]);let o=e(t[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n];for(const t of n){if(o.indexOf(t)===-1){i++}}}return i}function qf(t,e){switch(e){case"left":return t.leftCols;case"right":return t.rightCols;default:return t.centerCols}}function _f(t){const{movingCols:e,draggingRight:i,xPosition:s,pinned:n,gos:o,colModel:r,visibleCols:l}=t;const a=o.get("suppressMovableColumns")||e.some((t=>t.getColDef().suppressMovable));if(a){return[]}const h=qf(l,n);const c=r.getCols();const u=h.filter((t=>e.includes(t)));const d=h.filter((t=>!e.includes(t)));const f=c.filter((t=>!e.includes(t)));let g=0;let p=s;if(i){let t=0;for(const e of u){t+=e.getActualWidth()}p-=t}if(p>0){for(let t=0;t<d.length;t++){const e=d[t];p-=e.getActualWidth();if(p<0){break}g++}if(i){g++}}let m;if(g>0){const t=d[g-1];m=f.indexOf(t)+1}else{m=f.indexOf(d[0]);if(m===-1){m=0}}const v=[m];const w=(t,e)=>t-e;if(i){let t=m+1;const e=c.length-1;while(t<=e){v.push(t);t++}v.sort(w)}else{let t=m;const e=c.length-1;let i=c[t];while(t<=e&&h.indexOf(i)<0){t++;v.push(t);i=c[t]}t=m-1;const s=0;while(t>=s){v.push(t);t--}v.sort(w).reverse()}return v}function Zf(t){const{pinned:e,fromKeyboard:i,gos:s,ctrlsSvc:n,useHeaderRow:o,skipScrollPadding:r}=t;let l=n.getHeaderRowContainerCtrl(e)?.eViewport;let{x:a}=t;if(!l){return 0}if(i){a-=l.getBoundingClientRect().left}if(s.get("enableRtl")){if(o){l=l.querySelector(".ag-header-row")}a=l.clientWidth-a}if(e==null&&!r){a+=n.get("center").getCenterViewportScrollLeft()}return a}function Yf(t,e){for(const i of t){i.moving=e;i.dispatchColEvent("movingChanged","uiColumnMoved")}}var Qf=7;var Jf=100;var Xf=Jf/2;var tg=5;var eg=100;var ig=class extends re{constructor(t){super();this.pinned=t;this.needToMoveLeft=false;this.needToMoveRight=false;this.lastMovedInfo=null;this.isCenterContainer=!i(t)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCon=t.gridBodyCtrl}))}getIconName(){const{pinned:t,lastDraggingEvent:e}=this;const{dragItem:i}=e||{};const s=i?.columns??[];for(const e of s){const s=e.getPinned();if(e.getColDef().lockPinned){if(s==t){return"move"}continue}const n=i?.containerType;if(n===t||!t){return"move"}if(t&&(!s||n!==t)){return"pinned"}}return"notAllowed"}onDragEnter(t){const e=t.dragItem;const i=e.columns;const s=t.dragSource.type===0;if(s){this.setColumnsVisible(i,true,"uiColumnDragged")}else{const t=e.visibleState;const s=(i||[]).filter((e=>t[e.getId()]&&!e.isVisible()));this.setColumnsVisible(s,true,"uiColumnDragged")}if(!this.gos.get("suppressMoveWhenColumnDragging")){this.attemptToPinColumns(i,this.pinned)}this.onDragging(t,true,true)}onDragging(t=this.lastDraggingEvent,e=false,i=false,n=false){const{gos:o,ctrlsSvc:r}=this.beans;const l=o.get("suppressMoveWhenColumnDragging");if(n&&!l){this.finishColumnMoving();return}this.lastDraggingEvent=t;if(!t||!n&&s(t.hDirection)){return}const a=Zf({x:t.x,pinned:this.pinned,gos:o,ctrlsSvc:r});if(!e){this.checkCenterForScrolling(a)}if(l){this.handleColumnDragWhileSuppressingMovement(t,e,i,a,n)}else{this.handleColumnDragWhileAllowingMovement(t,e,i,a,n)}}onDragLeave(){this.ensureIntervalCleared();this.clearHighlighted();this.updateDragItemContainerType();this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,false,true,true);this.ensureIntervalCleared();this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted();this.ensureIntervalCleared();this.lastMovedInfo=null}setColumnsVisible(t,e,i){if(!t?.length){return}const s=t.filter((t=>!t.getColDef().lockVisible));if(!s.length){return}this.beans.colModel.setColsVisible(s,e,i)}finishColumnMoving(){this.clearHighlighted();const t=this.lastMovedInfo;if(!t){return}const{columns:e,toIndex:i}=t;this.beans.colMoves.moveColumns(e,i,"uiColumnMoved",true)}updateDragItemContainerType(){const{lastDraggingEvent:t}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!t){return}const e=t.dragItem;if(!e){return}e.containerType=this.pinned}handleColumnDragWhileSuppressingMovement(t,e,i,s,n){const o=this.getAllMovingColumns(t,true);if(n){const t=this.isAttemptingToPin(o);if(t){this.attemptToPinColumns(o,void 0,true)}const{fromLeft:s,xPosition:n}=this.getNormalisedXPositionInfo(o,t)||{};if(s==null||n==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:n,fromEnter:e,fakeEvent:i,fromLeft:s})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(t)){return}this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(t,e,i,s,n){const o=this.getAllMovingColumns(t);const r=this.normaliseDirection(t.hDirection)==="right";const l=t.dragSource.type===1;const a=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:l,xPosition:s,fromLeft:r,fromEnter:e,fakeEvent:i});const h=Uf({...a,finished:n});if(h){this.lastMovedInfo=h}}getAllMovingColumns(t,e=false){const i=t.dragSource.getDragItem();let s=null;if(e){s=i.columnsInSplit;if(!s){s=i.columns}}else{s=i.columns}const n=t=>t.getColDef().lockPinned?t.getPinned()==this.pinned:true;if(!s){return[]}return s.filter(n)}getMoveColumnParams(t){const{allMovingColumns:e,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=t;const{gos:l,colModel:a,colMoves:h,visibleCols:c}=this.beans;return{allMovingColumns:e,isFromHeader:i,fromLeft:n,xPosition:s,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:l,colModel:a,colMoves:h,visibleCols:c}}highlightHoveredColumn(t,e){const{gos:i,colModel:s}=this.beans;const n=i.get("enableRtl");const o=s.getCols().filter((t=>t.isVisible()&&t.getPinned()===this.pinned));let r=null;let l=null;let a=null;for(const t of o){l=t.getActualWidth();r=this.getNormalisedColumnLeft(t,0,n);if(r!=null){const i=r+l;if(r<=e&&i>=e){a=t;break}}r=null;l=null}if(!a){for(let t=o.length-1;t>=0;t--){const e=o[t];const i=o[t].getParent();if(!i){a=e;break}const s=i?.getDisplayedLeafColumns();if(s.length){a=vs(s);break}}if(!a){return}r=this.getNormalisedColumnLeft(a,0,n);l=a.getActualWidth()}else if(t.indexOf(a)!==-1){a=null}if(this.lastHighlightedColumn?.column!==a){this.clearHighlighted()}if(a==null||r==null||l==null){return}let h;if(e-r<l/2!==n){h=0}else{h=1}sg(a,h);this.lastHighlightedColumn={column:a,position:h}}getNormalisedXPositionInfo(t,e){const{gos:i,visibleCols:s}=this.beans;const n=i.get("enableRtl");const{firstMovingCol:o,column:r,position:l}=this.getColumnMoveAndTargetInfo(t,e,n);if(!o||!r||l==null){return}const a=s.allCols;const h=a.indexOf(o);const c=a.indexOf(r);const u=l===0!==n;const d=h<c||h===c&&!u;let f=0;if(u){if(d){f-=1}}else if(!d){f+=1}if(c+f===h){return}const g=a[c+f];if(!g){return}const p=this.getNormalisedColumnLeft(g,20,n);return{fromLeft:d,xPosition:p}}getColumnMoveAndTargetInfo(t,e,i){const s=this.lastHighlightedColumn||{};const{firstMovingCol:n,lastMovingCol:o}=ng(t);if(!n||!o||s.column||!e){return{firstMovingCol:n,...s}}const r=this.getPinDirection();const l=r==="left";return{firstMovingCol:n,position:l?1:0,column:l!==i?n:o}}normaliseDirection(t){if(this.gos.get("enableRtl")){switch(t){case"left":return"right";case"right":return"left"}}return t}getNormalisedColumnLeft(t,e,i){const{gos:s,ctrlsSvc:n}=this.beans;const o=t.getLeft();if(o==null){return null}const r=t.getActualWidth();return Zf({x:i?o+r-e:o+e,pinned:t.getPinned(),useHeaderRow:i,skipScrollPadding:true,gos:s,ctrlsSvc:n})}isAttemptingToPin(t){const e=this.needToMoveLeft||this.needToMoveRight;const i=this.failedMoveAttempts>Qf;return e&&i||t.some((t=>t.getPinned()!==this.pinned))}moveColumnsAfterHighlight(t){const{allMovingColumns:e,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=t;const r=this.getMoveColumnParams({allMovingColumns:e,isFromHeader:true,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n});const{columns:l,toIndex:a}=Wf(r)||{};if(l&&a!=null){this.lastMovedInfo={columns:l,toIndex:a}}this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:t}=this;if(!t){return}sg(t.column,null);this.lastHighlightedColumn=null}checkCenterForScrolling(t){if(!this.isCenterContainer){return}const e=this.beans.ctrlsSvc.get("center");const i=e.getCenterViewportScrollLeft();const s=i+e.getCenterWidth();let n;let o;if(this.gos.get("enableRtl")){n=t<i+Xf;o=t>s-Xf}else{o=t<i+Xf;n=t>s-Xf}this.needToMoveRight=n;this.needToMoveLeft=o;if(o||n){this.ensureIntervalStarted()}else{this.ensureIntervalCleared()}}ensureIntervalStarted(){if(this.movingIntervalId){return}this.intervalCount=0;this.failedMoveAttempts=0;this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),eg);this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",true)}ensureIntervalCleared(){if(!this.movingIntervalId){return}window.clearInterval(this.movingIntervalId);this.movingIntervalId=null;this.failedMoveAttempts=0;this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName())}moveInterval(){let t;this.intervalCount++;t=10+this.intervalCount*tg;if(t>Jf){t=Jf}let e=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft){e=i.scrollHorizontally(-t)}else if(this.needToMoveRight){e=i.scrollHorizontally(t)}if(e!==0){this.onDragging(this.lastDraggingEvent);this.failedMoveAttempts=0}else{this.failedMoveAttempts++;const{pinnedCols:t,dragAndDrop:e,gos:i}=this.beans;if(this.failedMoveAttempts<=Qf+1||!t){return}e.setDragImageCompIcon("pinned");if(!i.get("suppressMoveWhenColumnDragging")){const t=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(t,void 0,true)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left"){return"left"}if(this.needToMoveRight||this.pinned==="right"){return"right"}}attemptToPinColumns(t,e,i=false){const s=(t||[]).filter((t=>!t.getColDef().lockPinned));if(!s.length){return 0}if(i){e=this.getPinDirection()}const{pinnedCols:n,dragAndDrop:o}=this.beans;n?.setColsPinned(s,e,"uiColumnDragged");if(i){o.nudge()}return s.length}destroy(){super.destroy();this.lastDraggingEvent=null;this.clearHighlighted();this.lastMovedInfo=null}};function sg(t,e){if(t.highlighted===e){return}t.highlighted=e;t.dispatchColEvent("headerHighlightChanged","uiColumnMoved")}function ng(t){const e=t.length;let i;let s;for(let n=0;n<e;n++){if(!i){const e=t[n];if(e.getLeft()!=null){i=e}}if(!s){const i=t[e-1-n];if(i.getLeft()!=null){s=i}}if(i&&s){break}}return{firstMovingCol:i,lastMovingCol:s}}var og=class extends re{constructor(t,e){super();this.pinned=t;this.eContainer=e}postConstruct(){const{ctrlsSvc:t,dragAndDrop:e}=this.beans;const i=this.pinned;t.whenReady(this,(t=>{let e;const s=t.gridBodyCtrl.eBodyViewport;switch(i){case"left":e=[[s,t.left.eContainer],[t.bottomLeft.eContainer],[t.topLeft.eContainer]];break;case"right":e=[[s,t.right.eContainer],[t.bottomRight.eContainer],[t.topRight.eContainer]];break;default:e=[[s,t.center.eViewport],[t.bottomCenter.eViewport],[t.topCenter.eViewport]];break}this.eSecondaryContainers=e}));this.moveColumnFeature=this.createManagedBean(new ig(i));this.bodyDropPivotTarget=this.createManagedBean(new Vf(i));e.addDropTarget(this);this.addDestroyFunc((()=>e.removeDropTarget(this)))}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.beans.colModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature;this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}onDragCancel(){this.currentDropListener.onDragCancel()}};var rg=class extends re{constructor(){super(...arguments);this.beanName="colMoves"}moveColumnByIndex(t,e,i){const s=this.beans.colModel.getCols();if(!s){return}const n=s[t];this.moveColumns([n],e,i)}moveColumns(t,e,i,s=true){const{colModel:n,colAnimation:o,visibleCols:r,eventSvc:l}=this.beans;const a=n.getCols();if(!a){return}if(e>a.length-t.length){hi(30,{toIndex:e});return}o?.start();const h=n.getColsForKeys(t);if(this.doesMovePassRules(h,e)){ys(n.getCols(),h,e);r.refresh(i);l.dispatchEvent({type:"columnMoved",columns:h,column:h.length===1?h[0]:null,toIndex:e,finished:s,source:i})}o?.finish()}doesMovePassRules(t,e){const i=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(i)}doesOrderPassRules(t){const{colModel:e,gos:i}=this.beans;if(!Js(t,e.getColTree())){return false}const s=t=>{const e=t=>{if(!t){return 0}return t==="left"||t===true?-1:1};const s=i.get("enableRtl");let n=s?1:-1;let o=true;for(const i of t){const t=e(i.getColDef().lockPosition);if(s){if(t>n){o=false}}else if(t<n){o=false}n=t}return o};if(!s(t)){return false}return true}getProposedColumnOrder(t,e){const i=this.beans.colModel.getCols();const s=i.slice();ys(s,t,e);return s}createBodyDropTarget(t,e){return new og(t,e)}moveHeader(t,e,i,s,n){const{ctrlsSvc:o,gos:r,colModel:l,visibleCols:a,focusSvc:h}=this.beans;const c=e.getBoundingClientRect();const u=c.left;const d=ca(i);const f=d?c.width:i.getActualWidth();const g=t==="left"!==r.get("enableRtl");const p=Zf({x:g?u-20:u+f+20,pinned:s,fromKeyboard:true,gos:r,ctrlsSvc:o});const m=h.focusedHeader;Uf({allMovingColumns:d?i.getLeafColumns():[i],isFromHeader:true,fromLeft:t==="right",xPosition:p,pinned:s,fromEnter:false,fakeEvent:false,gos:r,colModel:l,colMoves:this,visibleCols:a,finished:true});let v;if(d){const t=i.getDisplayedLeafColumns();v=g?t[0]:vs(t)}else{v=i}o.getScrollFeature().ensureColumnVisible(v,"auto");if((!n.isAlive()||r.get("ensureDomOrder"))&&m){let t;if(d){const e=i.getGroupId();const s=i.getLeafColumns();if(!s.length){return}const n=s[0].getParent();if(!n){return}t=lg(n,e)}else{t=i}if(t){h.focusHeaderPosition({headerPosition:{...m,column:t}})}}}setDragSourceForHeader(t,e,i){const{gos:s,colModel:n,dragAndDrop:o,visibleCols:r}=this.beans;let l=!s.get("suppressDragLeaveHidesColumns");const a=ca(e);const h=a?e.getProvidedColumnGroup().getLeafColumns():[e];const c=a?()=>hg(e,r.allCols):()=>ag(e);const u={type:1,eElement:t,getDefaultIconName:()=>l?"hide":"notAllowed",getDragItem:c,dragItemName:i,onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns");Yf(h,true)},onDragStopped:()=>Yf(h,false),onDragCancelled:()=>Yf(h,false),onGridEnter:t=>{if(l){const{columns:e=[],visibleState:i}=t??{};const s=a?t=>!i||i[t.getColId()]:()=>true;const o=e.filter((t=>!t.getColDef().lockVisible&&s(t)));n.setColsVisible(o,true,"uiColumnMoved")}},onGridExit:t=>{if(l){const e=t?.columns?.filter((t=>!t.getColDef().lockVisible))||[];n.setColsVisible(e,false,"uiColumnMoved")}}};o.addDragSource(u,true);return u}};function lg(t,e){while(t){if(t.getGroupId()===e){return t}t=t.getParent()}return void 0}function ag(t){const e={};e[t.getId()]=t.isVisible();return{columns:[t],visibleState:e,containerType:t.pinned}}function hg(t,e){const i=t.getProvidedColumnGroup().getLeafColumns();const s={};for(const t of i){s[t.getId()]=t.isVisible()}const n=[];for(const t of e){if(i.indexOf(t)>=0){n.push(t);bs(i,t)}}for(const t of i){n.push(t)}const o=[];const r=t.getLeafColumns();for(const t of n){if(r.indexOf(t)!==-1){o.push(t)}}return{columns:n,columnsInSplit:o,visibleState:s,containerType:o[0]?.pinned}}var cg={moduleName:"ColumnMove",version:Ke,beans:[rg,Nf],apiFunctions:{moveColumnByIndex:Bf,moveColumns:Gf},dependsOn:[Af],css:[Of]};var ug=class extends re{constructor(){super(...arguments);this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.centerRowContainerCtrl=t.center}))}getPreferredWidthForColumn(t,e){const i=this.getHeaderCellForColumn(t);if(!i){return-1}const s=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(t);if(!e){s.push(i)}return this.getPreferredWidthForElements(s)}getPreferredWidthForColumnGroup(t){const e=this.getHeaderCellForColumn(t);if(!e){return-1}return this.getPreferredWidthForElements([e])}getPreferredWidthForElements(t,e){const i=document.createElement("form");i.style.position="fixed";const s=this.centerRowContainerCtrl.eContainer;for(const e of t){this.cloneItemIntoDummy(e,i)}s.appendChild(i);const n=i.offsetWidth;i.remove();e=e??this.gos.get("autoSizePadding");return n+e}getHeaderCellForColumn(t){let e=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const s=i.getHtmlElementForColumnHeader(t);if(s!=null){e=s}}return e}cloneItemIntoDummy(t,e){const i=t.cloneNode(true);i.style.width="";i.style.position="static";i.style.left="";const s=document.createElement("div");const n=s.classList;const o=["ag-header-cell","ag-header-group-cell"].some((t=>i.classList.contains(t)));if(o){n.add("ag-header","ag-header-row");s.style.position="static"}else{n.add("ag-row")}let r=t.parentElement;while(r){const t=["ag-header-row","ag-row"].some((t=>r.classList.contains(t)));if(t){for(let t=0;t<r.classList.length;t++){const e=r.classList[t];if(e!="ag-row-position-absolute"){n.add(e)}}break}r=r.parentElement}s.appendChild(i);e.appendChild(s)}};var dg={moduleName:"AutoWidth",version:Ke,beans:[ug]};function fg(t,e,i=true,s="api"){t.colResize?.setColumnWidths(e,false,i,s)}var gg=class extends re{constructor(t,e,i,s){super();this.comp=t;this.eResize=e;this.pinned=i;this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(false);return}const{horizontalResizeSvc:t,gos:e,colAutosize:i}=this.beans;const s=t.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,false),onResizeEnd:this.onResizing.bind(this,true)});this.addDestroyFunc(s);if(!e.get("suppressAutoSize")&&i){this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,(()=>this.resizeLeafColumnsToFit("uiColumnResized"))))}}onResizeStart(t){const{columnsToResize:e,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(t);this.resizeCols=e;this.resizeStartWidth=i;this.resizeRatios=s;this.resizeTakeFromCols=n;this.resizeTakeFromStartWidth=o;this.resizeTakeFromRatios=r;this.toggleColumnResizing(true)}onResizing(t,e,i="uiColumnResized"){const s=this.normaliseDragChange(e);const n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,t)}getInitialValues(t){const e=t=>t.reduce(((t,e)=>t+e.getActualWidth()),0);const i=(t,e)=>t.map((t=>t.getActualWidth()/e));const s=this.getColumnsToResize();const n=e(s);const o=i(s,n);const r={columnsToResize:s,resizeStartWidth:n,resizeRatios:o};let l=null;if(t){l=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null}if(l){const t=l.getDisplayedLeafColumns();const s=r.groupAfterColumns=t.filter((t=>t.isResizable()));const n=r.groupAfterStartWidth=e(s);r.groupAfterRatios=i(s,n)}else{r.groupAfterColumns=void 0;r.groupAfterStartWidth=void 0;r.groupAfterRatios=void 0}return r}resizeLeafColumnsToFit(t){const e=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup);const i=this.getInitialValues();if(e>i.resizeStartWidth){this.resizeColumns(i,e,t,true)}}resizeColumnsFromLocalValues(t,e,i=true){if(!this.resizeCols||!this.resizeRatios){return}const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(s,t,e,i)}resizeColumns(t,e,i,s=true){const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:l,groupAfterStartWidth:a,groupAfterRatios:h}=t;const c=[];c.push({columns:n,ratios:r,width:e});if(l){const t=e-o;c.push({columns:l,ratios:h,width:a-t})}this.beans.colResize?.resizeColumnSets({resizeSets:c,finished:s,source:i});if(s){this.toggleColumnResizing(false)}}toggleColumnResizing(t){this.comp.toggleCss("ag-column-resizing",t)}getColumnsToResize(){const t=this.columnGroup.getDisplayedLeafColumns();return t.filter((t=>t.isResizable()))}normaliseDragChange(t){let e=t;if(this.gos.get("enableRtl")){if(this.pinned!=="left"){e*=-1}}else if(this.pinned==="right"){e*=-1}return e}destroy(){super.destroy();this.resizeCols=void 0;this.resizeRatios=void 0;this.resizeTakeFromCols=void 0;this.resizeTakeFromRatios=void 0}};var pg=class extends re{constructor(t,e,i,s,n){super();this.pinned=t;this.column=e;this.eResize=i;this.comp=s;this.ctrl=n}postConstruct(){const t=[];let e;let i;const s=()=>{tt(this.eResize,e);if(!e){return}const{horizontalResizeSvc:s,colAutosize:n}=this.beans;const o=s.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,false),onResizeEnd:this.onResizing.bind(this,true)});t.push(o);if(i&&n){t.push(n.addColumnAutosizeListeners(this.eResize,this.column))}};const n=()=>{for(const e of t){e()}t.length=0};const o=()=>{const t=this.column.isResizable();const o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;const r=t!==e||o!==i;if(r){e=t;i=o;n();s()}};o();this.addDestroyFunc(n);this.ctrl.setRefreshFunction("resize",o)}onResizing(t,e){const{column:i,lastResizeAmount:s,resizeStartWidth:n,beans:o}=this;const r=this.normaliseResizeAmount(e);const l=n+r;const a=[{key:i,newWidth:l}];const{pinnedCols:h,ctrlsSvc:c,colResize:u}=o;if(this.column.getPinned()){const t=h?.leftWidth??0;const e=h?.rightWidth??0;const i=rt(c.getGridBodyCtrl().eBodyViewport)-50;if(t+e+(r-s)>i){return}}this.lastResizeAmount=r;u?.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized");if(t){this.toggleColumnResizing(false)}}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth();this.lastResizeAmount=0;this.resizeWithShiftKey=t;this.toggleColumnResizing(true)}toggleColumnResizing(t){this.column.resizing=t;this.comp.toggleCss("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t;const i=this.pinned!=="left";const s=this.pinned==="right";if(this.gos.get("enableRtl")){if(i){e*=-1}}else if(s){e*=-1}return e}};var mg=class extends re{constructor(){super(...arguments);this.beanName="colResize"}setColumnWidths(t,e,i,s){const n=[];const{colModel:o,gos:r,visibleCols:l}=this.beans;for(const i of t){const t=o.getColDefCol(i.key)||o.getCol(i.key);if(!t){continue}n.push({width:i.newWidth,ratios:[1],columns:[t]});const s=r.get("colResizeDefault")==="shift";if(s){e=!e}if(e){const e=l.getColAfter(t);if(!e){continue}const s=t.getActualWidth()-i.newWidth;const o=e.getActualWidth()+s;n.push({width:o,ratios:[1],columns:[e]})}}if(n.length===0){return}this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(t){const{resizeSets:e,finished:i,source:s}=t;const n=!e||e.every((t=>vg(t)));if(!n){if(i){const t=e&&e.length>0?e[0].columns:null;nn(this.eventSvc,t,i,s)}return}const o=[];const r=[];for(const t of e){const{width:e,columns:i,ratios:n}=t;const l={};const a={};for(const t of i){r.push(t)}let h=true;let c=0;while(h){c++;if(c>1e3){ci(31);break}h=false;const t=[];let s=0;let o=e;i.forEach(((e,i)=>{const r=a[e.getId()];if(r){o-=l[e.getId()]}else{t.push(e);const o=n[i];s+=o}}));const r=1/s;t.forEach(((i,s)=>{const c=s===t.length-1;let u;if(c){u=o}else{u=Math.round(n[s]*e*r);o-=u}const d=i.getMinWidth();const f=i.getMaxWidth();if(u<d){u=d;a[i.getId()]=true;h=true}else if(f>0&&u>f){u=f;a[i.getId()]=true;h=true}l[i.getId()]=u}))}for(const t of i){const e=l[t.getId()];const i=t.getActualWidth();if(i!==e){t.setActualWidth(e,s);o.push(t)}}}const l=o.length>0;let a=[];if(l){const{colFlex:t,visibleCols:e,colViewport:i}=this.beans;a=t?.refreshFlexedColumns({resizingCols:r,skipSetLeft:true})??[];e.setLeftValues(s);e.updateBodyWidths();i.checkViewportColumns()}const h=r.concat(a);if(l||i){nn(this.eventSvc,h,i,s,a)}}resizeHeader(t,e,i){if(!t.isResizable()){return}const s=t.getActualWidth();const n=t.getMinWidth();const o=t.getMaxWidth();const r=Math.min(Math.max(s+e,n),o);this.setColumnWidths([{key:t,newWidth:r}],i,true,"uiColumnResized")}createResizeFeature(t,e,i,s,n){return new pg(t,e,i,s,n)}createGroupResizeFeature(t,e,i,s){return new gg(t,e,i,s)}};function vg(t){const{columns:e,width:i}=t;let s=0;let n=0;let o=true;for(const t of e){const e=t.getMinWidth();s+=e||0;const i=t.getMaxWidth();if(i>0){n+=i}else{o=false}}const r=i>=s;const l=!o||i<=n;return r&&l}var wg={moduleName:"ColumnResize",version:Ke,beans:[mg],apiFunctions:{setColumnWidths:fg},dependsOn:[Hf,dg]};var Cg=class extends re{constructor(t,e){super();this.removeChildListenersFuncs=[];this.columnGroup=e;this.comp=t}postConstruct(){this.addListenersToChildrenColumns();this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)});this.onWidthChanged();this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const t=this.onWidthChanged.bind(this);for(const e of this.columnGroup.getLeafColumns()){e.__addEventListener("widthChanged",t);e.__addEventListener("visibleChanged",t);this.removeChildListenersFuncs.push((()=>{e.__removeEventListener("widthChanged",t);e.__removeEventListener("visibleChanged",t)}))}}removeListenersOnChildrenColumns(){for(const t of this.removeChildListenersFuncs){t()}this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns();this.onWidthChanged()}onWidthChanged(){const t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`);this.comp.toggleCss("ag-hidden",t===0)}};var bg=class extends Xc{constructor(){super(...arguments);this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving()){this.removeDragSource()}else if(!this.dragSource){this.setDragSource(this.eGui)}}}wireComp(t,e,i,s,n){const{column:o,beans:r}=this;const{context:l,colNames:a,colHover:h,rangeSvc:c,colResize:u}=r;this.comp=t;n=mn(this,l,n);this.setGui(e,n);this.displayName=a.getDisplayNameForColumnGroup(o,"header");this.refreshHeaderStyles();this.addClasses();this.setupMovingCss(n);this.setupExpandable(n);this.setupTooltip();this.setupAutoHeight({wrapperElement:s,compBean:n});this.setupUserComp();this.addHeaderMouseListeners(n);this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this));this.refreshMaxHeaderHeight();const d=this.rowCtrl.pinned;const f=o.getProvidedColumnGroup().getLeafColumns();h?.createHoverFeature(n,f,e);c?.createRangeHighlightFeature(n,o,t);n.createManagedBean(new Yc(o,e,r));n.createManagedBean(new Cg(t,o));if(u){this.resizeFeature=n.createManagedBean(u.createGroupResizeFeature(t,i,d,o))}else{t.setResizableDisplayed(false)}n.createManagedBean(new sh(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>void 0,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}));this.addHighlightListeners(n,f);n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange);this.addResizeAndMoveKeyboardListeners(n);n.addDestroyFunc((()=>this.clearComponent()))}getHeaderClassParams(){const{column:t,beans:e}=this;const i=t.getDefinition();return os(e.gos,{colDef:i,columnGroup:t,floatingFilter:false})}refreshMaxHeaderHeight(){const{gos:t,comp:e}=this;const i=t.get("groupHeaderHeight");if(i!=null){if(i===0){e.setHeaderWrapperHidden(true)}else{e.setHeaderWrapperMaxHeight(i)}}else{e.setHeaderWrapperHidden(false);e.setHeaderWrapperMaxHeight(null)}}addHighlightListeners(t,e){if(!this.beans.gos.get("suppressMoveWhenColumnDragging")){return}for(const i of e){t.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}}onLeafColumnHighlightChanged(t){const e=this.column.getDisplayedLeafColumns();const i=e[0]===t;const s=vs(e)===t;if(!i&&!s){return}const n=t.getHighlighted();const o=!!this.rowCtrl.getHeaderCellCtrls().find((t=>t.column.isMoving()));let r=false;let l=false;if(o){const t=this.beans.gos.get("enableRtl");const e=n===1;const o=n===0;if(i){if(t){l=e}else{r=o}}if(s){if(t){r=o}else{l=e}}}this.comp.toggleCss("ag-header-highlight-before",r);this.comp.toggleCss("ag-header-highlight-after",l)}resizeHeader(t,e){const{resizeFeature:i}=this;if(!i){return}const s=i.getInitialValues(e);i.resizeColumns(s,s.resizeStartWidth+t,"uiColumnResized",true)}resizeLeafColumnsToFit(t){this.resizeFeature?.resizeLeafColumnsToFit(t)}setupUserComp(){const{colGroupSvc:t,userCompFactory:e,gos:i,enterpriseMenuFactory:s}=this.beans;const n=this.column;const o=n.getProvidedColumnGroup();const r=os(i,{displayName:this.displayName,columnGroup:n,setExpanded:e=>{t.setColumnGroupOpened(o,e,"gridInitializing")},setTooltip:(t,e)=>{i.assertModuleRegistered("Tooltip",3);this.setupTooltip(t,e)},showColumnMenu:(t,e)=>s?.showMenuAfterButtonClick(o,t,"columnMenu",e),showColumnMenuAfterMouseClick:(t,e)=>s?.showMenuAfterMouseEvent(o,t,"columnMenu",e),eGridHeader:this.eGui});const l=Yn(e,r);if(l){this.comp.setUserCompDetails(l)}}addHeaderMouseListeners(t){const e=t=>this.handleMouseOverChange(t.type==="mouseenter");const i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup());const s=t=>this.handleContextMenuMouseEvent(t,void 0,this.column.getProvidedColumnGroup());t.addManagedListeners(this.eGui,{mouseenter:e,mouseleave:e,click:i,contextmenu:s})}handleMouseOverChange(t){this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,t,e)}setupExpandable(t){const e=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);t.addManagedListeners(e,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:t}=this;this.expandable=t.isExpandable();const e=t.isExpanded();if(this.expandable){this.comp.setAriaExpanded(e?"true":"false")}else{this.comp.setAriaExpanded(void 0)}this.refreshHeaderStyles()}addClasses(){const{column:t}=this;const e=t.getColGroupDef();const i=Sc(e,this.gos,null,t);if(t.isPadding()){i.push("ag-header-group-cell-no-group");const e=t.getLeafColumns();if(e.every((t=>t.isSpanHeaderHeight()))){i.push("ag-header-span-height")}}else{i.push("ag-header-group-cell-with-group");if(e?.wrapHeaderText){i.push("ag-header-cell-wrap-text")}}for(const t of i){this.comp.toggleCss(t,true)}}setupMovingCss(t){const{column:e}=this;const i=e.getProvidedColumnGroup();const s=i.getLeafColumns();const n=()=>this.comp.toggleCss("ag-header-cell-moving",e.isMoving());for(const e of s){t.addManagedListeners(e,{movingChanged:n})}n()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){this.focusThis()}}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();if(!this.expandable||!e){return}if(t.key===mo.ENTER){const t=this.column;const e=!t.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(t.getProvidedColumnGroup(),e,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()){return}this.removeDragSource();if(!t){return}this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some((t=>t.getColDef().suppressMovable||t.getColDef().lockPosition))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature);super.destroy()}};function yg(t,e,i){t.colGroupSvc?.setColumnGroupOpened(e,i,"api")}function Sg(t,e,i){return t.colGroupSvc?.getColumnGroup(e,i)??null}function xg(t,e){return t.colGroupSvc?.getProvidedColGroup(e)??null}function Rg(t,e,i){return t.colNames.getDisplayNameForColumnGroup(e,i)||""}function Fg(t){return t.colGroupSvc?.getColumnGroupState()??[]}function kg(t,e){t.colGroupSvc?.setColumnGroupState(e,"api")}function Pg(t){t.colGroupSvc?.resetColumnGroupState("api")}function Dg(t){return t.visibleCols.treeLeft}function Mg(t){return t.visibleCols.treeCenter}function Tg(t){return t.visibleCols.treeRight}function Eg(t){return t.visibleCols.getAllTrees()}function Ag(t,e){for(let i=0;i<e.length;i++){const s=t.indexOf(e[i]);if(s>=0){t[s]=t[t.length-1];t.pop()}}}var Ig=class extends re{constructor(){super(...arguments);this.beanName="visibleCols";this.colsAndGroupsMap={};this.leftCols=[];this.rightCols=[];this.centerCols=[];this.allCols=[];this.headerGroupRowCount=0;this.bodyWidth=0;this.leftWidth=0;this.rightWidth=0;this.isBodyWidthDirty=true}refresh(t,e=false){const{colFlex:i,colModel:s,colGroupSvc:n,colViewport:o,selectionColSvc:r}=this.beans;if(!e){this.buildTrees(s,n)}n?.updateOpenClosedVisibility();this.leftCols=Og(this.treeLeft);this.centerCols=Og(this.treeCenter);this.rightCols=Og(this.treeRight);r?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols);this.joinColsAriaOrder(s);this.joinCols();this.headerGroupRowCount=this.getHeaderRowCount();this.setLeftValues(t);this.autoHeightCols=this.allCols.filter((t=>t.isAutoHeight()));i?.refreshFlexedColumns();this.updateBodyWidths();this.setFirstRightAndLastLeftPinned(s,this.leftCols,this.rightCols,t);o.checkViewportColumns(false);this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:t})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows")){return this.beans.colModel.cols.treeDepth}let t=0;for(const e of this.allCols){let i=e.getParent();while(i){if(!i.isPadding()){const e=i.getProvidedColumnGroup().getLevel()+1;if(e>t){t=e}break}i=i.getParent()}}return t}updateBodyWidths(){const t=ks(this.centerCols);const e=ks(this.leftCols);const i=ks(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==t;const s=this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==i;if(s){this.bodyWidth=t;this.leftWidth=e;this.rightWidth=i;this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"});this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"})}}setLeftValues(t){this.setLeftValuesOfCols(t);this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(t,e,i,s){let n;let o;if(this.gos.get("enableRtl")){n=e?e[0]:null;o=i?vs(i):null}else{n=e?vs(e):null;o=i?i[0]:null}for(const e of t.getCols()){e.setLastLeftPinned(e===n,s);e.setFirstRightPinned(e===o,s)}}buildTrees(t,e){const i=t.getColsToShow();const s=i.filter((t=>t.getPinned()=="left"));const n=i.filter((t=>t.getPinned()=="right"));const o=i.filter((t=>t.getPinned()!="left"&&t.getPinned()!="right"));const r=new pn;const l=t=>e?e.createColumnGroups(t):t.columns;this.treeLeft=l({columns:s,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft});this.treeRight=l({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight});this.treeCenter=l({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter});this.updateColsAndGroupsMap()}clear(){this.leftCols=[];this.rightCols=[];this.centerCols=[];this.allCols=[];this.ariaOrderColumns=[]}joinColsAriaOrder(t){const e=t.getCols();const i=[];const s=[];const n=[];for(const t of e){const e=t.getPinned();if(!e){s.push(t)}else if(e===true||e==="left"){i.push(t)}else{n.push(t)}}this.ariaOrderColumns=i.concat(s).concat(n)}getAriaColIndex(t){let e;if(ca(t)){e=t.getLeafColumns()[0]}else{e=t}return this.ariaOrderColumns.indexOf(e)+1}setLeftValuesOfGroups(){for(const t of[this.treeLeft,this.treeRight,this.treeCenter]){for(const e of t){if(ca(e)){const t=e;t.checkLeft()}}}}setLeftValuesOfCols(t){const{colModel:e}=this.beans;const i=e.getColDefCols();if(!i){return}const s=e.getCols().slice(0);const n=this.gos.get("enableRtl");for(const e of[this.leftCols,this.rightCols,this.centerCols]){if(n){let i=ks(e);for(const s of e){i-=s.getActualWidth();s.setLeft(i,t)}}else{let i=0;for(const s of e){s.setLeft(i,t);i+=s.getActualWidth()}}Ag(s,e)}for(const e of s){e.setLeft(null,t)}}joinCols(){if(this.gos.get("enableRtl")){this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols)}else{this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}}getAllTrees(){if(this.treeLeft&&this.treeRight&&this.treeCenter){return this.treeLeft.concat(this.treeCenter).concat(this.treeRight)}return null}isColDisplayed(t){return this.allCols.indexOf(t)>=0}getLeftColsForRow(t){const{leftCols:e,beans:{colModel:i}}=this;const s=i.colSpanActive;if(!s){return e}return this.getColsForRow(t,e)}getRightColsForRow(t){const{rightCols:e,beans:{colModel:i}}=this;const s=i.colSpanActive;if(!s){return e}return this.getColsForRow(t,e)}getColsForRow(t,e,i,s){const n=[];let o=null;for(let r=0;r<e.length;r++){const l=e[r];const a=e.length-r;const h=Math.min(l.getColSpan(t),a);const c=[l];if(h>1){const t=h-1;for(let i=1;i<=t;i++){c.push(e[r+i])}r+=t}let u;if(i){u=false;for(const t of c){if(i(t)){u=true}}}else{u=true}if(u){if(n.length===0&&o){const t=s?s(l):false;if(t){n.push(o)}}n.push(l)}o=l}return n}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(t){const e=this.allCols;const i=e.indexOf(t);if(i>0){return e[i-1]}return null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const t=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Hg(this.treeCenter,false,t);Hg(this.treeLeft,false,t);Hg(this.treeRight,false,t)}isVisible(t){const e=this.colsAndGroupsMap[t.getUniqueId()];return e===t}getFirstColumn(){const t=this.gos.get("enableRtl");const e=["leftCols","centerCols","rightCols"];if(t){e.reverse()}for(let i=0;i<e.length;i++){const s=this[e[i]];if(s.length){return t?vs(s):s[0]}}return null}getColAfter(t){const e=this.allCols;const i=e.indexOf(t);if(i<e.length-1){return e[i+1]}return null}getColsLeftWidth(){return ks(this.leftCols)}getDisplayedColumnsRightWidth(){return ks(this.rightCols)}isColAtEdge(t,e){const i=this.allCols;if(!i.length){return false}const s=e==="first";let n;if(ca(t)){const e=t.getDisplayedLeafColumns();if(!e.length){return false}n=s?e[0]:vs(e)}else{n=t}return(s?i[0]:vs(i))===n}};function Hg(t,e,i){if(!t){return}for(let s=0;s<t.length;s++){const n=t[s];if(ca(n)){const t=e?n.getDisplayedChildren():n.getChildren();Hg(t,e,i)}i(n)}}function Og(t){const e=[];Hg(t,true,(t=>{if(cs(t)){e.push(t)}}));return e}var Ng=class extends re{constructor(){super(...arguments);this.beanName="colGroupSvc"}getColumnGroupState(){const t=[];const e=this.beans.colModel.getColTree();Ys(null,e,(e=>{if(ds(e)){t.push({groupId:e.getGroupId(),open:e.isExpanded()})}}));return t}resetColumnGroupState(t){const e=this.beans.colModel.getColDefColTree();if(!e){return}const i=[];Ys(null,e,(t=>{if(ds(t)){const e=t.getColGroupDef();const s={groupId:t.getGroupId(),open:!e?void 0:e.openByDefault};i.push(s)}}));this.setColumnGroupState(i,t)}setColumnGroupState(t,e){const{colModel:i,colAnimation:s,visibleCols:n,eventSvc:o}=this.beans;const r=i.getColTree();if(!r.length){return}s?.start();const l=[];for(const e of t){const t=e.groupId;const i=e.open;const s=this.getProvidedColGroup(t);if(!s){continue}if(s.isExpanded()===i){continue}s.setExpanded(i);l.push(s)}n.refresh(e,true);if(l.length){o.dispatchEvent({type:"columnGroupOpened",columnGroup:l.length===1?l[0]:void 0,columnGroups:l})}s?.finish()}setColumnGroupOpened(t,e,i){let s;if(ds(t)){s=t.getId()}else{s=t||""}this.setColumnGroupState([{groupId:s,open:e}],i)}getProvidedColGroup(t){let e=null;Ys(null,this.beans.colModel.getColTree(),(i=>{if(ds(i)){if(i.getId()===t){e=i}}}));return e}getGroupAtDirection(t,e){const i=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel();const s=t.getDisplayedLeafColumns();const n=e==="After"?vs(s):s[0];const o=`getCol${e}`;while(true){const e=this.beans.visibleCols[o](n);if(!e){return null}const s=this.getColGroupAtLevel(e,i);if(s!==t){return s}}}getColGroupAtLevel(t,e){let i=t.getParent();let s;let n;while(true){const t=i.getProvidedColumnGroup();s=t.getLevel();n=i.getPaddingLevel();if(s+n<=e){break}i=i.getParent()}return i}updateOpenClosedVisibility(){const t=this.beans.visibleCols.getAllTrees();Hg(t,false,(t=>{if(ca(t)){t.calculateDisplayedColumns()}}))}getColumnGroup(t,e){if(!t){return null}if(ca(t)){return t}const i=this.beans.visibleCols.getAllTrees();const s=typeof e==="number";let n=null;Hg(i,false,(i=>{if(ca(i)){const o=i;let r;if(s){r=t===o.getGroupId()&&e===o.getPartId()}else{r=t===o.getGroupId()}if(r){n=o}}}));return n}createColumnGroups(t){const{columns:e,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=t;const r=this.mapOldGroupsById(n);const l=[];let a=e;while(a.length){const t=a;a=[];let e=0;const n=n=>{const h=e;e=n;const c=t[h];const u=ca(c)?c.getProvidedColumnGroup():c;const d=u.getOriginalParent();if(d==null){for(let e=h;e<n;e++){l.push(t[e])}return}const f=this.createColumnGroup(d,i,r,s,o);for(let e=h;e<n;e++){f.addChild(t[e])}a.push(f)};for(let i=1;i<t.length;i++){const s=t[i];const o=ca(s)?s.getProvidedColumnGroup():s;const r=o.getOriginalParent();const l=t[e];const a=ca(l)?l.getProvidedColumnGroup():l;const h=a.getOriginalParent();if(r!==h){n(i)}}if(e<t.length){n(t.length)}}if(!o){this.setupParentsIntoCols(l,null)}return l}createProvidedColumnGroup(t,e,i,s,n,o,r){const l=n.getUniqueKey(e.groupId||null,null);const a=ps(this.beans,e,l);const h=new fs(a,l,false,i);this.createBean(h);const c=this.findExistingGroup(e,o);if(c){o.splice(c.idx,1)}const u=c?.group;if(u){h.setExpanded(u.isExpanded())}const d=zs(this.beans,a.children,i+1,t,s,n,o,r);h.setChildren(d);return h}balanceColumnTree(t,e,i,s){const n=[];for(let o=0;o<t.length;o++){const r=t[o];if(ds(r)){const t=r;const o=this.balanceColumnTree(t.getChildren(),e+1,i,s);t.setChildren(o);n.push(t)}else{let o;let l;for(let t=e;t<i;t++){const e=s.getUniqueKey(null,null);const i=ps(this.beans,null,e);const n=new fs(i,e,true,t);this.createBean(n);if(l){l.setChildren([n])}l=n;if(!o){o=l}}if(o&&l){n.push(o);const e=t.some((t=>ds(t)));if(e){l.setChildren([r]);continue}else{l.setChildren(t);break}}n.push(r)}}return n}findDepth(t){let e=0;let i=t;while(i?.[0]&&ds(i[0])){e++;i=i[0].getChildren()}return e}findMaxDepth(t,e){let i=e;for(let s=0;s<t.length;s++){const n=t[s];if(ds(n)){const t=n;const s=this.findMaxDepth(t.getChildren(),e+1);if(i<s){i=s}}}return i}balanceTreeForAutoCols(t,e){const i=[];for(const s of t){let t=s;for(let i=e-1;i>=0;i--){const e=new fs(null,`FAKE_PATH_${s.getId()}}_${i}`,true,i);this.createBean(e);e.setChildren([t]);t.originalParent=e;t=e}if(e===0){s.originalParent=null}i.push(t)}return i}findExistingGroup(t,e){const i=t.groupId!=null;if(!i){return void 0}for(let i=0;i<e.length;i++){const s=e[i];const n=s.getColGroupDef();if(!n){continue}if(s.getId()===t.groupId){return{idx:i,group:s}}}return void 0}createColumnGroup(t,e,s,n,o){const r=t.getGroupId();const l=e.getInstanceIdForKey(r);const a=ha(r,l);let h=s[a];if(h&&h.getProvidedColumnGroup()!==t){h=null}if(i(h)){h.reset()}else{h=new ua(t,r,l,n);if(!o){this.createBean(h)}}return h}mapOldGroupsById(t){const e={};const i=t=>{for(const s of t){if(ca(s)){const t=s;e[s.getUniqueId()]=t;i(t.getChildren())}}};if(t){i(t)}return e}setupParentsIntoCols(t,e){for(const i of t??[]){if(i.parent!==e){this.beans.colViewport.colsWithinViewportHash=""}i.parent=e;if(ca(i)){const t=i;this.setupParentsIntoCols(t.getChildren(),t)}}}};var Bg={moduleName:"ColumnGroup",version:Ke,dynamicBeans:{headerGroupCellCtrl:bg},beans:[Ng],apiFunctions:{getAllDisplayedColumnGroups:Eg,getCenterDisplayedColumnGroups:Mg,getColumnGroup:Sg,getColumnGroupState:Fg,getDisplayNameForColumnGroup:Rg,getLeftDisplayedColumnGroups:Dg,getProvidedColumnGroup:xg,getRightDisplayedColumnGroups:Tg,resetColumnGroupState:Pg,setColumnGroupOpened:yg,setColumnGroupState:kg}};var Gg={tag:"div",cls:"ag-skeleton-container"};var Vg=class extends Sn{constructor(){super(Gg)}init(t){const e=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",e);this.addDestroyFunc((()=>P(t.eParentOfValue)));P(t.eParentOfValue,e);if(t.deferRender){this.setupLoading(t)}else{t.node.failedLoad?this.setupFailed():this.setupLoading(t)}}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const e=t("ariaSkeletonCellLoadingFailed","Row failed to load");k(this.getGui(),e)}setupLoading(t){const e=Ma({tag:"div",cls:"ag-skeleton-effect"});const i=t.node.rowIndex;if(i!=null){const t=75+25*(i%2===0?Math.sin(i):Math.cos(i));e.style.width=`${t}%`}this.getGui().appendChild(e);const s=this.getLocaleTextFunc();const n=t.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");k(this.getGui(),n)}refresh(t){return false}};var Lg={moduleName:"CheckboxCellRenderer",version:Ke,userComponents:{agCheckboxCellRenderer:yu}};var zg={moduleName:"SkeletonCellRenderer",version:Ke,userComponents:{agSkeletonCellRenderer:Vg}};function $g(t,e){const i=t.colModel.getColDefCol(e);if(i){return i.getColDef()}return null}function Wg(t){return t.colModel.getColumnDefs(true)}function Ug(t,e,i){return t.colNames.getDisplayNameForColumn(e,i)||""}function jg(t,e){return t.colModel.getColDefCol(e)}function Kg(t){return t.colModel.getColDefCols()}function qg(t,e){return on(t,e,"api")}function _g(t){return an(t)}function Zg(t){rn(t,"api")}function Yg(t){return t.visibleCols.isPinningLeft()||t.visibleCols.isPinningRight()}function Qg(t){return t.visibleCols.isPinningLeft()}function Jg(t){return t.visibleCols.isPinningRight()}function Xg(t,e){return t.visibleCols.getColAfter(e)}function tp(t,e){return t.visibleCols.getColBefore(e)}function ep(t,e,i){t.colModel.setColsVisible(e,i,"api")}function ip(t,e,i){t.pinnedCols?.setColsPinned(e,i,"api")}function sp(t){return t.colModel.getCols()}function np(t){return t.visibleCols.leftCols}function op(t){return t.visibleCols.centerCols}function rp(t){return t.visibleCols.rightCols}function lp(t){return t.visibleCols.allCols}function ap(t){return t.colViewport.getViewportColumns()}function hp(t,e){if(!t){return}const i=t;const s={};for(const t of Object.keys(i)){if(e&&e.indexOf(t)>=0||pe.has(t)){continue}const n=i[t];const o=typeof n==="object"&&n!==null&&n.constructor===Object;if(o){s[t]=hp(n)}else{s[t]=n}}return s}var cp=class extends re{constructor(){super(...arguments);this.beanName="colDefFactory"}wireBeans(t){this.rowGroupColsSvc=t.rowGroupColsSvc;this.pivotColsSvc=t.pivotColsSvc}getColumnDefs(t,e,i,s,n=false){const o=t.slice();if(e){o.sort(((t,e)=>i.indexOf(t)-i.indexOf(e)))}else if(i||n){o.sort(((t,e)=>s.indexOf(t)-s.indexOf(e)))}const r=this.rowGroupColsSvc?.columns;const l=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,r,l)}buildColumnDefs(t,e=[],i=[]){const s=[];const n={};for(const o of t){const t=this.createDefFromColumn(o,e,i);let r=true;let l=t;let a=o.getOriginalParent();let h=null;while(a){let t=null;if(a.isPadding()){a=a.getOriginalParent();continue}const e=n[a.getGroupId()];if(e){e.children.push(l);r=false;break}t=this.createDefFromGroup(a);if(t){t.children=[l];n[t.groupId]=t;l=t;a=a.getOriginalParent()}if(a!=null&&h===a){r=false;break}h=a}if(r){s.push(l)}}return s}createDefFromGroup(t){const e=hp(t.getColGroupDef(),["children"]);if(e){e.groupId=t.getGroupId()}return e}createDefFromColumn(t,e,i){const s=hp(t.getColDef());s.colId=t.getColId();s.width=t.getActualWidth();s.rowGroup=t.isRowGroupActive();s.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null;s.pivot=t.isPivotActive();s.pivotIndex=t.isPivotActive()?i.indexOf(t):null;s.aggFunc=t.isValueActive()?t.getAggFunc():null;s.hide=t.isVisible()?void 0:true;s.pinned=t.isPinned()?t.getPinned():null;s.sort=t.getSort()?t.getSort():null;s.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null;return s}};var up=class extends re{constructor(){super(...arguments);this.beanName="colFlex";this.columnsHidden=false}refreshFlexedColumns(t={}){const e=t.source??"flex";if(t.viewportWidth!=null){this.flexViewportWidth=t.viewportWidth}const i=this.flexViewportWidth;const{visibleCols:s,colDelayRenderSvc:n}=this.beans;const o=s.centerCols;let r=-1;if(t.resizingCols){const e=new Set(t.resizingCols);for(let t=o.length-1;t>=0;t--){if(e.has(o[t])){r=t;break}}}let l=false;const a=o.map(((t,e)=>{const i=t.getFlex();const s=i!=null&&i>0&&e>r;l||(l=s);return{col:t,isFlex:s,flex:Math.max(0,i??0),initialSize:t.getActualWidth(),min:t.getMinWidth(),max:t.getMaxWidth(),targetSize:0}}));if(l){n?.hideColumns("colFlex");this.columnsHidden=true}else if(this.columnsHidden){this.revealColumns(n)}if(!i||!l){return[]}let h=a.length;let c=a.reduce(((t,e)=>t+e.flex),0);let u=i;const d=(t,i)=>{t.frozenSize=i;t.col.setActualWidth(i,e);u-=i;c-=t.flex;h-=1};const f=t=>t.frozenSize!=null;for(const t of a){if(!t.isFlex){d(t,t.initialSize)}}while(h>0){const t=Math.round(c<1?u*c:u);let e;let i=0;let s=0;for(const n of a){if(f(n)){continue}e=n;s+=t*(n.flex/c);const o=s-i;const r=Math.round(o);n.targetSize=r;i+=r}if(e){e.targetSize+=t-i}let n=0;for(const t of a){if(f(t)){continue}const e=t.targetSize;const i=Math.min(Math.max(e,t.min),t.max);n+=i-e;t.violationType=i===e?void 0:i<e?"max":"min";t.targetSize=i}const o=n===0?"all":n>0?"min":"max";for(const t of a){if(f(t)){continue}if(o==="all"||t.violationType===o){d(t,t.targetSize)}}}if(!t.skipSetLeft){s.setLeftValues(e)}if(t.updateBodyWidths){s.updateBodyWidths()}const g=a.filter((t=>t.isFlex&&!t.violationType)).map((t=>t.col));if(t.fireResizedEvent){const t=a.filter((t=>t.initialSize!==t.frozenSize)).map((t=>t.col));const i=a.filter((t=>t.flex)).map((t=>t.col));nn(this.eventSvc,t,true,e,i)}this.revealColumns(n);return g}revealColumns(t){if(this.columnsHidden){t?.revealColumns("colFlex");this.columnsHidden=false}}initCol(t){const{flex:e,initialFlex:i}=t.colDef;if(e!==void 0){t.flex=e}else if(i!==void 0){t.flex=i}}setColFlex(t,e){t.flex=e??null;t.dispatchStateUpdatedEvent("flex")}};function dp(t,e,i){if(!e||!t){return}if(!i){return t[e]}const s=e.split(".");let n=t;for(let t=0;t<s.length;t++){if(n==null){return void 0}n=n[s[t]]}return n}var fp=["dateTimeString","dateString","text","number","boolean","date"];var gp=class extends re{constructor(){super(...arguments);this.beanName="dataTypeSvc";this.dataTypeDefinitions={};this.isPendingInference=false;this.isColumnTypeOverrideInDataTypeDefinitions=false;this.columnStateUpdatesPendingInference={};this.columnStateUpdateListenerDestroyFuncs=[];this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:t=>!!t.colDef.editable&&t.event.key===mo.SPACE}},date({formatValue:t}){return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString({formatValue:t}){return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(t){return this.date(t)},dateTimeString(t){return this.dateString(t)},object({formatValue:t,colModel:e,colId:i}){return{cellEditorParams:{useFormatter:true},comparator:(s,n)=>{const o=e.getColDefCol(i);const r=o?.getColDef();if(!o||!r){return 0}const l=s==null?"":t({column:o,node:null,value:s});const a=n==null?"":t({column:o,node:null,value:n});if(l===a){return 0}return l>a?1:-1},keyCreator:t}},text(){return{}}}}wireBeans(t){this.colModel=t.colModel}postConstruct(){this.processDataTypeDefinitions();this.addManagedPropertyListener("dataTypeDefinitions",(t=>{this.processDataTypeDefinitions();this.colModel.recreateColumnDefs(t)}))}processDataTypeDefinitions(){const t=this.getDefaultDataTypes();const e={};const i={};const s=t=>e=>{const{column:i,node:s,value:n}=e;let o=i.getColDef().valueFormatter;if(o===t.groupSafeValueFormatter){o=t.valueFormatter}return this.beans.valueSvc.formatValue(i,s,n,o)};for(const n of Object.keys(t)){const o=t[n];const r={...o,groupSafeValueFormatter:vp(o,this.gos)};e[n]=r;i[n]=s(r)}const n=this.gos.get("dataTypeDefinitions")??{};const o={};for(const r of Object.keys(n)){const l=n[r];const a=this.processDataTypeDefinition(l,n,[r],t);if(a){e[r]=a;if(l.dataTypeMatcher){o[r]=l.dataTypeMatcher}i[r]=s(a)}}const{valueParser:r,valueFormatter:l}=t.object;const{valueParser:a,valueFormatter:h}=e.object;this.hasObjectValueParser=a!==r;this.hasObjectValueFormatter=h!==l;this.formatValueFuncs=i;this.dataTypeDefinitions=e;this.dataTypeMatchers=this.sortKeysInMatchers(o,t)}sortKeysInMatchers(t,e){const i={...t};for(const s of fp){delete i[s];i[s]=t[s]??e[s].dataTypeMatcher}return i}processDataTypeDefinition(t,e,i,s){let n;const o=t.extendsDataType;if(t.columnTypes){this.isColumnTypeOverrideInDataTypeDefinitions=true}if(t.extendsDataType===t.baseDataType){let i=s[o];const r=e[o];if(i&&r){i=r}if(!mp(t,i,o)){return void 0}n=pp(i,t)}else{if(i.includes(o)){hi(44);return void 0}const r=e[o];if(!mp(t,r,o)){return void 0}const l=this.processDataTypeDefinition(r,e,[...i,o],s);if(!l){return void 0}n=pp(l,t)}return{...n,groupSafeValueFormatter:vp(n,this.gos)}}updateColDefAndGetColumnType(t,e,i){let{cellDataType:s}=e;const{field:n}=e;if(s===void 0){s=t.cellDataType}if(s==null||s===true){s=this.canInferCellDataType(t,e)?this.inferCellDataType(n,i):false}if(!s){t.cellDataType=false;return void 0}const o=this.dataTypeDefinitions[s];if(!o){hi(47,{cellDataType:s});return void 0}t.cellDataType=s;if(o.groupSafeValueFormatter){t.valueFormatter=o.groupSafeValueFormatter}if(o.valueParser){t.valueParser=o.valueParser}if(!o.suppressDefaultProperties){this.setColDefPropertiesForBaseDataType(t,s,o,i)}return o.columnTypes}addColumnListeners(t){if(!this.isPendingInference){return}const e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e){return}const i=t=>{e.add(t.key)};t.__addEventListener("columnStateUpdated",i);this.columnStateUpdateListenerDestroyFuncs.push((()=>t.__removeEventListener("columnStateUpdated",i)))}canInferCellDataType(t,e){const{gos:i}=this;if(!pi(i)){return false}const s={cellRenderer:true,valueGetter:true,valueParser:true,refData:true};if(Cp(e,s)){return false}const n=e.type===null?t.type:e.type;if(n){const t=i.get("columnTypes")??{};const e=As(n).some((e=>{const i=t[e.trim()];return i&&Cp(i,s)}));if(e){return false}}return!Cp(t,s)}inferCellDataType(t,e){if(!t){return void 0}let i;const s=this.getInitialData();if(s){const e=t.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=dp(s,t,e)}else{this.initWaitForRowData(e)}if(i==null){return void 0}const n=Object.keys(this.dataTypeMatchers).find((t=>this.dataTypeMatchers[t](i)));return n??"object"}getInitialData(){const t=this.gos.get("rowData");if(t?.length){return t[0]}else if(this.initialData){return this.initialData}else{const t=this.beans.rowModel.rootNode?._leafs;if(t?.length){return t[0].data}}return null}initWaitForRowData(t){this.columnStateUpdatesPendingInference[t]=new Set;if(this.isPendingInference){return}this.isPendingInference=true;const e=this.isColumnTypeOverrideInDataTypeDefinitions;const{colAutosize:i,eventSvc:s}=this.beans;if(e&&i){i.shouldQueueResizeOperations=true}const[n]=this.addManagedEventListeners({rowDataUpdateStarted:t=>{const{firstRowData:o}=t;if(!o){return}n?.();this.isPendingInference=false;this.processColumnsPendingInference(o,e);this.columnStateUpdatesPendingInference={};if(e){i?.processResizeOperations()}s.dispatchEvent({type:"dataTypesInferred"})}})}processColumnsPendingInference(t,e){this.initialData=t;const i=[];this.destroyColumnStateUpdateListeners();const s={};const n={};for(const t of Object.keys(this.columnStateUpdatesPendingInference)){const o=this.columnStateUpdatesPendingInference[t];const r=this.colModel.getCol(t);if(!r){return}const l=r.getColDef();if(!this.resetColDefIntoCol(r,"cellDataTypeInferred")){return}const a=r.getColDef();if(e&&a.type&&a.type!==l.type){const e=bp(r,o);if(e.rowGroup&&e.rowGroupIndex==null){s[t]=e}if(e.pivot&&e.pivotIndex==null){n[t]=e}i.push(e)}}if(e){i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(s,n))}if(i.length){on(this.beans,{state:i},"cellDataTypeInferred")}this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(t,e){const i={};const{rowGroupColsSvc:s,pivotColsSvc:n}=this.beans;s?.restoreColumnOrder(i,t);n?.restoreColumnOrder(i,e);return Object.values(i)}resetColDefIntoCol(t,e){const i=t.getUserProvidedColDef();if(!i){return false}const s=Ks(this.beans,i,t.getColId());t.setColDef(s,i,e);return true}getDateStringTypeDefinition(t){const{dateString:e}=this.dataTypeDefinitions;if(!t){return e}return this.getDataTypeDefinition(t)??e}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDateIncludesTimeFlag(t){return t==="dateTime"||t==="dateTimeString"}getDataTypeDefinition(t){const e=t.getColDef();if(!e.cellDataType){return void 0}return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){return this.getDataTypeDefinition(t)?.baseDataType}checkType(t,e){if(e==null){return true}const i=this.getDataTypeDefinition(t)?.dataTypeMatcher;if(!i){return true}return i(e)}validateColDef(t){const e=t=>hi(48,{property:t});if(t.cellDataType==="object"){const{object:i}=this.dataTypeDefinitions;if(t.valueFormatter===i.groupSafeValueFormatter&&!this.hasObjectValueFormatter){e("Formatter")}if(t.editable&&t.valueParser===i.valueParser&&!this.hasObjectValueParser){e("Parser")}}}postProcess(t){const e=t.cellDataType;if(!e||typeof e!=="string"){return}const{dataTypeDefinitions:i,beans:s,formatValueFuncs:n}=this;const o=i[e];if(!o){return}s.colFilter?.setColDefPropsForDataType(t,o,n[e])}getFormatValue(t){return this.formatValueFuncs[t]}isColPendingInference(t){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[t]}setColDefPropertiesForBaseDataType(t,e,i,s){const n=this.formatValueFuncs[e];const o=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:t,cellDataType:e,colModel:this.colModel,dataTypeDefinition:i,colId:s,formatValue:n});Object.assign(t,o)}getDateObjectTypeDef(t){const e=this.getLocaleTextFunc();const i=this.getDateIncludesTimeFlag(t);return{baseDataType:t,valueParser:t=>Ko(t.newValue&&String(t.newValue)),valueFormatter:t=>{if(t.value==null){return""}if(!(t.value instanceof Date)||isNaN(t.value.getTime())){return e("invalidDate","Invalid Date")}return Go(t.value,i)??""},dataTypeMatcher:t=>t instanceof Date}}getDateStringTypeDef(t){const e=this.getDateIncludesTimeFlag(t);return{baseDataType:t,dateParser:t=>Ko(t)??void 0,dateFormatter:t=>Go(t??null,e)??void 0,valueParser:t=>Uo(String(t.newValue))?t.newValue:null,valueFormatter:t=>Uo(String(t.value))?String(t.value):"",dataTypeMatcher:t=>typeof t==="string"&&Uo(t)}}getDefaultDataTypes(){const t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:e=>{if(e.value==null){return""}if(typeof e.value!=="number"||isNaN(e.value)){return t("invalidNumber","Invalid Number")}return String(e.value)},dataTypeMatcher:t=>typeof t==="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:n(t.newValue),dataTypeMatcher:t=>typeof t==="string"},boolean:{baseDataType:"boolean",valueParser:t=>{if(t.newValue==null){return t.newValue}return t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t==="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t==="string"&&jo(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>n(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const t of this.columnStateUpdateListenerDestroyFuncs){t()}this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={};this.dataTypeMatchers={};this.formatValueFuncs={};this.columnStateUpdatesPendingInference={};this.destroyColumnStateUpdateListeners();super.destroy()}};function pp(t,e){const i={...t,...e};if(t.columnTypes&&e.columnTypes&&e.appendColumnTypes){i.columnTypes=[...As(t.columnTypes),...As(e.columnTypes)]}return i}function mp(t,e,i){if(!e){hi(45,{parentCellDataType:i});return false}if(e.baseDataType!==t.baseDataType){hi(46);return false}return true}function vp(t,e){if(!t.valueFormatter){return void 0}return i=>{if(i.node?.group){const e=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(e){if(e==="first"||e==="last"){return t.valueFormatter(i)}if(t.baseDataType==="number"&&e!=="count"){if(typeof i.value==="number"){return t.valueFormatter(i)}if(typeof i.value==="object"){if(!i.value){return void 0}if("toNumber"in i.value){return t.valueFormatter({...i,value:i.value.toNumber()})}if("value"in i.value){return t.valueFormatter({...i,value:i.value.value})}}}return void 0}}else if(e.get("groupHideOpenParents")&&i.column.isRowGroupActive()){if(typeof i.value==="string"&&!t.dataTypeMatcher?.(i.value)){return void 0}}return t.valueFormatter(i)}}function wp(t,e,i,s){if(!e[i]){return false}const n=t[i];if(n===null){e[i]=false;return false}else{return s===void 0?!!n:n===s}}function Cp(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((([i,s])=>wp(t,e,i,s)))}function bp(t,e){const i=hn(t);for(const t of e){delete i[t];if(t==="rowGroup"){delete i.rowGroupIndex}else if(t==="pivot"){delete i.pivotIndex}}return i}var yp={moduleName:"DataType",version:Ke,beans:[gp],dependsOn:[Lg]};var Sp={moduleName:"ColumnFlex",version:Ke,beans:[up]};var xp={moduleName:"ColumnApi",version:Ke,beans:[cp],apiFunctions:{getColumnDef:$g,getDisplayNameForColumn:Ug,getColumn:jg,getColumns:Kg,applyColumnState:qg,getColumnState:_g,resetColumnState:Zg,isPinning:Yg,isPinningLeft:Qg,isPinningRight:Jg,getDisplayedColAfter:Xg,getDisplayedColBefore:tp,setColumnsVisible:ep,setColumnsPinned:ip,getAllGridColumns:sp,getDisplayedLeftColumns:np,getDisplayedCenterColumns:op,getDisplayedRightColumns:rp,getAllDisplayedColumns:lp,getAllDisplayedVirtualColumns:ap,getColumnDefs:Wg}};function Rp(t){if(!t||t==null){return null}const e=/([a-z])([A-Z])/g;const i=/([A-Z]+)([A-Z])([a-z])/g;const s=t.replace(e,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ");return s.map((t=>t.substring(0,1).toUpperCase()+(t.length>1?t.substring(1,t.length):""))).join(" ")}var Fp=class extends re{constructor(){super(...arguments);this.beanName="colNames"}getDisplayNameForColumn(t,e,i=false){if(!t){return null}const s=this.getHeaderName(t.getColDef(),t,null,null,e);const{aggColNameSvc:n}=this.beans;if(i&&n){return n.getHeaderName(t,s)}return s}getDisplayNameForProvidedColumnGroup(t,e,i){const s=e?.getColGroupDef();if(s){return this.getHeaderName(s,null,t,e,i)}return null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,i,s,n){const o=t.headerValueGetter;if(o){const r=os(this.gos,{colDef:t,column:e,columnGroup:i,providedColumnGroup:s,location:n});if(typeof o==="function"){return o(r)}else if(typeof o==="string"){return this.beans.expressionSvc?.evaluate(o,r)??null}return""}else if(t.headerName!=null){return t.headerName}else if(t.field){return Rp(t.field)}return""}};var kp=class extends re{constructor(){super(...arguments);this.beanName="colViewport";this.colsWithinViewport=[];this.headerColsWithinViewport=[];this.colsWithinViewportHash="";this.rowsOfHeadersToRenderLeft={};this.rowsOfHeadersToRenderRight={};this.rowsOfHeadersToRenderCenter={};this.columnsToRenderLeft=[];this.columnsToRenderRight=[];this.columnsToRenderCenter=[]}wireBeans(t){this.visibleCols=t.visibleCols;this.colModel=t.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(t,e,i=false){const{visibleCols:s}=this;const n=s.isBodyWidthDirty;const o=t===this.scrollWidth&&e===this.scrollPosition&&!n;if(o){return}this.scrollWidth=t;this.scrollPosition=e;s.isBodyWidthDirty=true;if(this.gos.get("enableRtl")){const i=s.bodyWidth;this.viewportLeft=i-e-t;this.viewportRight=i-e}else{this.viewportLeft=e;this.viewportRight=t+e}if(this.colModel.ready){this.checkViewportColumns(i)}}getColumnHeadersToRender(t){switch(t){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(t,e){let i;switch(t){case"left":i=this.rowsOfHeadersToRenderLeft[e];break;case"right":i=this.rowsOfHeadersToRenderRight[e];break;default:i=this.rowsOfHeadersToRenderCenter[e];break}return i??[]}extractViewportColumns(){const t=this.visibleCols.centerCols;if(this.isColumnVirtualisationSuppressed()){this.colsWithinViewport=t;this.headerColsWithinViewport=t}else{this.colsWithinViewport=t.filter(this.isColumnInRowViewport.bind(this));this.headerColsWithinViewport=t.filter(this.isColumnInHeaderViewport.bind(this))}}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={};this.rowsOfHeadersToRenderRight={};this.rowsOfHeadersToRenderCenter={};this.colsWithinViewportHash=""}isColumnInHeaderViewport(t){if(t.isAutoHeaderHeight()||Pp(t)){return true}return this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight()){return true}const e=t.getLeft()||0;const i=e+t.getActualWidth();const s=this.viewportLeft-200;const n=this.viewportRight+200;const o=e<s&&i<s;const r=e>n&&i>n;return!o&&!r}getViewportColumns(){const{leftCols:t,rightCols:e}=this.visibleCols;const i=this.colsWithinViewport.concat(t).concat(e);return i}getColsWithinViewport(t){if(!this.colModel.colSpanActive){return this.colsWithinViewport}const e=t=>{const e=t.getLeft();return i(e)&&e>this.viewportLeft};const s=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this);const{visibleCols:n}=this;const o=n.centerCols;return n.getColsForRow(t,o,s,e)}checkViewportColumns(t=false){const e=this.extractViewport();if(e){this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:t})}}calculateHeaderRows(){const{leftCols:t,rightCols:e}=this.visibleCols;this.columnsToRenderLeft=t;this.columnsToRenderRight=e;this.columnsToRenderCenter=this.colsWithinViewport;const i=t=>{const e=new Set;const i={};for(const s of t){let t=s.getParent();const n=s.isSpanHeaderHeight();while(t){if(e.has(t)){break}const s=n&&t.isPadding();if(s){t=t.getParent();continue}const o=t.getProvidedColumnGroup().getLevel();i[o]??(i[o]=[]);i[o].push(t);e.add(t);t=t.getParent()}}return i};this.rowsOfHeadersToRenderLeft=i(t);this.rowsOfHeadersToRenderRight=i(e);this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){const t=t=>`${t.getId()}-${t.getPinned()||"normal"}`;this.extractViewportColumns();const e=this.getViewportColumns().map(t).join("#");const i=this.colsWithinViewportHash!==e;if(i){this.colsWithinViewportHash=e;this.calculateHeaderRows()}return i}};function Pp(t){while(t){if(t.isAutoHeaderHeight()){return true}t=t.getParent()}return false}var Dp=class extends re{constructor(){super(...arguments);this.beanName="agCompUtils"}adaptFunction(t,e){if(!t.cellRenderer){return null}class i{refresh(){return false}getGui(){return this.eGui}init(t){const i=e(t);const s=typeof i;if(s==="string"||s==="number"||s==="boolean"){this.eGui=mt("<span>"+i+"</span>");return}if(i==null){this.eGui=Ma({tag:"span"});return}this.eGui=i}}return i}};var Mp={moduleName:"CellRendererFunction",version:Ke,beans:[Dp]};var Tp=class extends Ol{constructor(){super(...arguments);this.agGridDefaults={};this.agGridDefaultOverrides={};this.jsComps={};this.selectors={};this.icons={}}postConstruct(){const t=this.gos.get("components");if(t!=null){for(const e of Object.keys(t)){this.jsComps[e]=t[e]}}}registerModule(t){const{icons:e,userComponents:i,dynamicBeans:s,selectors:n}=t;if(i){const t=(t,e,i,s)=>{this.agGridDefaults[t]=e;if(i||s){this.agGridDefaultOverrides[t]={params:i,processParams:s}}};for(const e of Object.keys(i)){let s=i[e];if(po(s)){s=s.getComp(this.beans)}if(typeof s==="object"){const{classImp:i,params:n,processParams:o}=s;t(e,i,n,o)}else{t(e,s)}}}this.registerDynamicBeans(s);for(const t of n??[]){this.selectors[t.selector]=t}if(e){for(const t of Object.keys(e)){this.icons[t]=e[t]}}}getUserComponent(t,e){const i=(t,e,i,s)=>({componentFromFramework:e,component:t,params:i,processParams:s});const{frameworkOverrides:s}=this.beans;const n=s.frameworkComponent(e,this.gos.get("components"));if(n!=null){return i(n,true)}const o=this.jsComps[e];if(o){const t=s.isFrameworkComponent(o);return i(o,t)}const r=this.agGridDefaults[e];if(r){const t=this.agGridDefaultOverrides[e];return i(r,false,t?.params,t?.processParams)}this.beans.validation?.missingUserComponent(t,e,this.agGridDefaults,this.jsComps);return null}getSelector(t){return this.selectors[t]}getIcon(t){return this.icons[t]}getDynamicError(t,e){if(e){return fi(279,{name:t})}return this.beans.validation?.missingDynamicBean(t)??fi(256)}};var Ep=23;var Ap=class extends re{constructor(){super(...arguments);this.beanName="ctrlsSvc";this.params={};this.ready=false;this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",(()=>{this.updateReady();if(this.ready){for(const t of this.readyCallbacks){t(this.params)}this.readyCallbacks.length=0}}),this.beans.frameworkOverrides.runWhenReadyAsync?.()??false)}updateReady(){const t=Object.values(this.params);this.ready=t.length===Ep&&t.every((t=>t?.isAlive()??false))}whenReady(t,e){if(this.ready){e(this.params)}else{this.readyCallbacks.push(e)}t.addDestroyFunc((()=>{const t=this.readyCallbacks.indexOf(e);if(t>=0){this.readyCallbacks.splice(t,1)}}))}register(t,e){this.params[t]=e;this.updateReady();if(this.ready){this.dispatchLocalEvent({type:"ready"})}e.addDestroyFunc((()=>{this.updateReady()}))}get(t){return this.params[t]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:t,centerHeader:e,rightHeader:i}=this.params;return[t,i,e]}getHeaderRowContainerCtrl(t){const e=this.params;switch(t){case"left":return e.leftHeader;case"right":return e.rightHeader;default:return e.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}};var Ip=`.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}`;var Hp={wrapperBorder:true,rowBorder:true,headerRowBorder:true,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:false,headerColumnBorderHeight:"100%",pinnedColumnBorder:true,pinnedRowBorder:true,sidePanelBorder:true,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:el,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:true,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:sl,rangeSelectionBackgroundColor:Qr(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Qr(.5),rangeHeaderHighlightColor:tl(.08),rowNumbersSelectedColor:Qr(.5),rowHoverColor:Qr(.08),columnHoverColor:Qr(.05),selectedRowBackgroundColor:Qr(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:el,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:Jr(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Jr(.1),iconButtonActiveColor:sl,iconButtonActiveBackgroundColor:Qr(.28),iconButtonActiveIndicatorColor:sl,menuBorder:{color:Jr(.2)},menuBackgroundColor:Xr(.03),menuTextColor:Xr(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Jr(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:sl},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Jr(.2)},panelBackgroundColor:el,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:true,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:true,columnDropCellBackgroundColor:Jr(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Jr(.13)},selectCellBackgroundColor:Jr(.07),selectCellBorder:{color:Jr(.13)},advancedFilterBuilderButtonBarBorder:true,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:el,filterPanelApplyButtonBackgroundColor:sl,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:il,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:il,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Jr(.15),statusBarLabelColor:il,statusBarLabelFontWeight:500,statusBarValueColor:il,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}};var Op=`.ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}`;var Np={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}};var Bp={...Np,cellBatchEditTextColor:"#f3d0b3"};var Gp=()=>$r({feature:"batchEditStyle",params:Np,css:Op});var Vp=Gp();var Lp=`:where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}`;var zp={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:false,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};var $p=()=>$r({feature:"buttonStyle",params:{...zp,buttonBackgroundColor:el,buttonBorder:true,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:sl}},css:Lp});var Wp=$p();var Up=`.ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}`;var jp=()=>$r({feature:"columnDropStyle",css:Up});var Kp=jp();var qp={warn:(...t)=>{hi(t[0],t[1])},error:(...t)=>{ci(t[0],t[1])},preInitErr:(...t)=>{ui(t[0],t[2],t[1])}};var _p=()=>xl(qp).withParams(Hp).withPart(Wp).withPart(Kp).withPart(Vp);var Zp=`.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}`;var Yp=()=>$r({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:el,checkboxUncheckedBorderColor:Xr(.3),checkboxCheckedBackgroundColor:sl,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:el,checkboxIndeterminateBackgroundColor:Xr(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:el,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:Zp});var Qp=Yp();var Jp=()=>({...nl,...Bp,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Xr(.05),rowHoverColor:Qr(.15),selectedRowBackgroundColor:Qr(.2),menuBackgroundColor:Xr(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:il,findMatchColor:el,findActiveMatchColor:el,checkboxUncheckedBorderColor:Xr(.4),toggleButtonOffBackgroundColor:Xr(.4),rowBatchEditBackgroundColor:Xr(.1)});var Xp=()=>({...Jp(),backgroundColor:"#1f2836"});var tm=()=>$r({feature:"colorScheme",params:nl,modeParams:{light:nl,dark:Jp(),"dark-blue":Xp()}});var em=tm();var im={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'};var sm={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'};var nm=(t={})=>{let e="";for(const i of[...Object.keys(im),...Object.keys(sm)]){const s=om(i,t.strokeWidth);e+=`.ag-icon-${i}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(s)}'); }\n`}return e};var om=(t,e=1.5)=>{const i=sm[t];if(i){return i}const s=im[t];if(!s){throw new Error(`Missing icon data for ${t}`)}return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${e}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+s+"</svg>"};var rm=(t={})=>$r({feature:"iconSet",css:()=>nm(t)});var lm=rm();var am=`:where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}`;var hm=`.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}`;var cm={inputBackgroundColor:"transparent",inputBorder:false,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:false,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:false,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4};var um=()=>$r({feature:"inputStyle",params:{...cm,inputBackgroundColor:el,inputBorder:true,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:sl},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Xr(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:true,pickerListBorder:true},css:()=>am+hm});var dm=um();var fm=`.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}`;var gm={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:false};var pm=()=>$r({feature:"tabStyle",params:{...gm,tabBarBorder:true,tabBarBackgroundColor:Jr(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:el},css:fm});var mm=pm();var vm=()=>_p().withPart(Qp).withPart(em).withPart(lm).withPart(mm).withPart(dm).withPart(Kp).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]});var wm=vm();var Cm={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16};var bm={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:true,cacheDefault:true};var ym={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0};var Sm={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42};var xm={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48};var Rm={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24};var Fm={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:true};var km={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:true};function Pm(t,e){for(const i of e.sort(((t,e)=>t.moduleName.localeCompare(e.moduleName)))){const e=i.css;if(e){t.set(`module-${i.moduleName}`,e)}}}var Dm=class extends Hl{constructor(){super(...arguments);this.sizeEls=new Map;this.lastKnownValues=new Map;this.sizesMeasured=false}initVariables(){this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable()));this.getSizeEl(Sm);this.getSizeEl(xm);this.getSizeEl(Rm);this.getSizeEl(Fm);this.getSizeEl(km);this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(km)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Fm)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Sm)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(xm)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Cm)}getCellPaddingLeft(){const t=this.getDefaultCellHorizontalPadding();const e=this.getCSSVariablePixelValue(bm);const i=this.getCSSVariablePixelValue(ym);return t-1+i*e}getCellPadding(){const t=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+t}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Rm)}refreshRowHeightVariable(){const{eRootDiv:t}=this;const e=t.style.getPropertyValue("--ag-line-height").trim();const i=this.gos.get("rowHeight");if(i==null||isNaN(i)||!isFinite(i)){if(e!==null){t.style.setProperty("--ag-line-height",null)}return-1}const s=`${i}px`;if(e!=s){t.style.setProperty("--ag-line-height",s);return i}return e!=""?Number.parseFloat(e):-1}getCSSVariablePixelValue(t){const e=this.lastKnownValues.get(t);if(e!=null){return e}const i=this.measureSizeEl(t);if(i==="detached"||i==="no-styles"){if(t.cacheDefault){this.lastKnownValues.set(t,t.defaultValue)}return t.defaultValue}this.lastKnownValues.set(t,i);return i}measureSizeEl(t){const e=this.getSizeEl(t);if(e.offsetParent==null){return"detached"}const i=e.offsetWidth;if(i===Mm){return"no-styles"}this.sizesMeasured=true;return i}getMeasurementContainer(){let t=this.eMeasurementContainer;if(!t){t=this.eMeasurementContainer=Ma({tag:"div",cls:"ag-measurement-container"});this.eRootDiv.appendChild(t)}return t}getSizeEl(t){let e=this.sizeEls.get(t);if(e){return e}const i=this.getMeasurementContainer();e=Ma({tag:"div"});const{border:s,noWarn:n}=t;if(s){e.className="ag-measurement-element-border";e.style.setProperty("--ag-internal-measurement-border",`var(${t.cssName}, solid ${Mm}px)`)}else{e.style.width=`var(${t.cssName}, ${Mm}px)`}i.appendChild(e);this.sizeEls.set(t,e);let o=this.measureSizeEl(t);if(o==="no-styles"&&!n){hi(9,{variable:t})}const r=Tt(this.beans,e,(()=>{const e=this.measureSizeEl(t);if(e==="detached"||e==="no-styles"){return}this.lastKnownValues.set(t,e);if(e!==o){o=e;this.fireStylesChangedEvent(t.changeKey)}}));this.addDestroyFunc((()=>r()));return e}fireStylesChangedEvent(t){if(t==="rowBorderWidthChanged"){this.refreshRowBorderWidthVariable()}this.eventSvc.dispatchEvent({type:"gridStylesChanged",[t]:true})}refreshRowBorderWidthVariable(){const t=this.getCSSVariablePixelValue(Fm);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${t}px`)}postProcessThemeChange(t,e){if(t&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")){if(e){ci(106)}else{ci(239)}}}getAdditionalCss(){const t=new Map;t.set("core",[Ip]);Pm(t,Array.from($e()));return t}getDefaultTheme(){return wm}themeError(t){ci(240,{theme:t})}};var Mm=15538;var Tm=class extends Nl{postConstruct(){const{globalListener:t,globalSyncListener:e}=this.beans;if(t){this.addGlobalListener(t,true)}if(e){this.addGlobalListener(e,false)}}};function Em(t,e,i){const s=t.visibleCols.headerGroupRowCount;if(i>=s){return{column:e,headerRowIndex:i}}let n=e.getParent();while(n&&n.getProvidedColumnGroup().getLevel()>i){n=n.getParent()}const o=e.isSpanHeaderHeight();if(!n||o&&n.isPadding()){return{column:e,headerRowIndex:s}}return{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var Am=class extends re{constructor(){super(...arguments);this.beanName="headerNavigation";this.currentHeaderRowWithoutSpan=-1}postConstruct(){const t=this.beans;t.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCon=t.gridBodyCtrl}));const e=f(t);this.addManagedElementListeners(e,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(t,e){let i;const{colModel:s,colGroupSvc:n,ctrlsSvc:o}=this.beans;if(typeof t==="string"){i=s.getCol(t);if(!i){i=n?.getColumnGroup(t)??null}}else{i=t}if(!i){return null}const r=o.getHeaderRowContainerCtrl();const l=r?.getAllCtrls();const a=vs(l||[]).type==="filter";const h=Ec(this.beans)-1;let c=-1;let u=i;while(u){c++;u=u.getParent()}let d=c;if(e&&a&&d===h-1){d++}return d===-1?null:{headerRowIndex:d,column:i}}navigateVertically(t,e){const{focusSvc:i,visibleCols:s}=this.beans;const{focusedHeader:n}=i;if(!n){return false}const{headerRowIndex:o}=n;const r=n.column;const l=Ec(this.beans);const a=this.getHeaderRowType(o);const h=s.headerGroupRowCount;let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:d}=t==="UP"?Im(a,r,o):Hm(r,o,h);let f=false;if(c<0){c=0;u=r;f=true}if(c>=l){c=-1;this.currentHeaderRowWithoutSpan=-1}else if(d!==void 0){this.currentHeaderRowWithoutSpan=d}if(!f&&!u){return false}return i.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:true,event:e})}navigateHorizontally(t,e=false,i){const{focusSvc:s,gos:n}=this.beans;const o={...s.focusedHeader};let r;let l;if(this.currentHeaderRowWithoutSpan!==-1){o.headerRowIndex=this.currentHeaderRowWithoutSpan}else{this.currentHeaderRowWithoutSpan=o.headerRowIndex}if(t==="LEFT"!==n.get("enableRtl")){l="Before";r=this.findHeader(o,l)}else{l="After";r=this.findHeader(o,l)}const a=n.getCallback("tabToNextHeader");if(e&&a){const t=s.focusHeaderPositionFromUserFunc({userFunc:a,headerPosition:r,direction:l});if(t){const{headerRowIndex:t}=s.focusedHeader||{};if(t!=null&&t!=o.headerRowIndex){this.currentHeaderRowWithoutSpan=t}}return t}if(r||!e){return s.focusHeaderPosition({headerPosition:r,direction:l,fromTab:e,allowUserOverride:true,event:i})}return this.focusNextHeaderRow(o,l,i)}focusNextHeaderRow(t,e,i){const s=this.beans;const n=t.headerRowIndex;let o=null;let r;const l=Ec(s);const a=this.beans.visibleCols.allCols;if(e==="Before"){if(n<=0){return false}o=vs(a);r=n-1;this.currentHeaderRowWithoutSpan-=1}else{o=a[0];r=n+1;if(this.currentHeaderRowWithoutSpan<l){this.currentHeaderRowWithoutSpan+=1}else{this.currentHeaderRowWithoutSpan=-1}}let{column:h,headerRowIndex:c}=Em(this.beans,o,r);if(c>=l){c=-1}return s.focusSvc.focusHeaderPosition({headerPosition:{column:h,headerRowIndex:c},direction:e,fromTab:true,allowUserOverride:true,event:i})}scrollToColumn(t,e="After"){if(t.getPinned()){return}let i;if(ca(t)){const s=t.getDisplayedLeafColumns();i=e==="Before"?vs(s):s[0]}else{i=t}this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(t,e){const{colGroupSvc:i,visibleCols:s}=this.beans;let n=t.column;if(n instanceof ua){const t=n.getDisplayedLeafColumns();n=e==="Before"?t[0]:t[t.length-1]}const o=e==="Before"?s.getColBefore(n):s.getColAfter(n);if(!o){return void 0}const r=s.headerGroupRowCount;if(t.headerRowIndex>=r){return{headerRowIndex:t.headerRowIndex,column:o}}const l=i?.getColGroupAtLevel(o,t.headerRowIndex);if(!l){const e=o instanceof us&&o.isSpanHeaderHeight();return{headerRowIndex:e?s.headerGroupRowCount:t.headerRowIndex,column:o}}if(l.isPadding()&&o.isSpanHeaderHeight()){return{headerRowIndex:s.headerGroupRowCount,column:o}}return{headerRowIndex:t.headerRowIndex,column:l??o}}getHeaderRowType(t){const e=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(e){return e.getRowType(t)}}};function Im(t,e,i){const s=i-1;if(t!=="filter"){const t=e instanceof us&&e.isSpanHeaderHeight();let i=e.getParent();while(i&&(i.getProvidedColumnGroup().getLevel()>s||t&&i.isPadding())){i=i.getParent()}if(i){if(t){return{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:s}}else{return{column:i,headerRowIndex:s,headerRowIndexWithoutSpan:s}}}}return{column:e,headerRowIndex:s,headerRowIndexWithoutSpan:s}}function Hm(t,e,i){const s=e+1;const n={column:t,headerRowIndex:s,headerRowIndexWithoutSpan:s};if(t instanceof ua){if(s>=i){return{column:t.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:s}}const e=t.getDisplayedChildren();let o=e[0];if(o instanceof ua&&o.isPadding()){const t=o.getDisplayedLeafColumns()[0];if(t.isSpanHeaderHeight()){o=t}}n.column=o;const r=o instanceof us&&o.isSpanHeaderHeight();if(r){n.headerRowIndex=i;n.headerRowIndexWithoutSpan=s}}return n}var Om=class extends re{constructor(){super(...arguments);this.beanName="focusSvc";this.focusFallbackTimeout=null;this.needsFocusRestored=false}wireBeans(t){this.colModel=t.colModel;this.visibleCols=t.visibleCols;this.rowRenderer=t.rowRenderer;this.navigation=t.navigation;this.filterManager=t.filterManager;this.overlays=t.overlays}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t});this.addDestroyFunc(er(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=true;if(this.focusFallbackTimeout!=null){clearTimeout(this.focusFallbackTimeout)}this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=false;if(this.focusFallbackTimeout!=null){clearTimeout(this.focusFallbackTimeout);this.focusFallbackTimeout=null}}shouldTakeFocus(){if(this.gos.get("suppressFocusAfterRefresh")){this.setFocusRecovered();return false}if(this.needsFocusRestored){this.setFocusRecovered();return true}return this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell){return}const t=this.focusedCell.column;const e=this.colModel.getCol(t.getId());if(t!==e){this.clearFocusedCell()}}getFocusCellToUseAfterRefresh(){const{gos:t,focusedCell:e}=this;if(t.get("suppressFocusAfterRefresh")||t.get("suppressCellFocus")||!e){return null}if(!this.doesRowOrCellHaveBrowserFocus()){return null}return e}getFocusHeaderToUseAfterRefresh(){if(this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader){return null}if(!this.isDomDataPresentInHierarchy(d(this.beans),Jc)){return null}return this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const t=d(this.beans);if(this.isDomDataPresentInHierarchy(t,yh)){return true}return this.isDomDataPresentInHierarchy(t,xh)}isDomDataPresentInHierarchy(t,e){let i=t;while(i){const t=Fi(this.gos,i,e);if(t){return true}i=i.parentNode}return false}getFocusedCell(){return this.focusedCell}getFocusEventParams(t){const{rowIndex:e,rowPinned:i,column:s}=t;const n={rowIndex:e,rowPinned:i,column:s,isFullWidthCell:false};const o=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:i});if(o){n.isFullWidthCell=o.isFullWidth()}return n}clearFocusedCell(){if(this.focusedCell==null){return}const t=this.getFocusEventParams(this.focusedCell);this.focusedCell=null;this.eventSvc.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){this.setFocusRecovered();const{column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:o=false,preventScrollOnBrowserFocus:r=false,sourceEvent:l}=t;const a=this.colModel.getCol(i);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:s,rowPinned:e(n),column:a};const h=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...h,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:o,preventScrollOnBrowserFocus:r,sourceEvent:l});this.previousCellFocusParams=h}isCellFocused(t){if(this.focusedCell==null){return false}return nf(t,this.focusedCell)}isHeaderWrapperFocused(t){if(this.focusedHeader==null){return false}const{column:e,rowCtrl:{rowIndex:i,pinned:s}}=t;const{column:n,headerRowIndex:o}=this.focusedHeader;return e===n&&i===o&&s==n.getPinned()}focusHeaderPosition(t){this.setFocusRecovered();if(Dc(this.beans)){return false}const{direction:e,fromTab:i,allowUserOverride:s,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:l=true}=t;let{headerPosition:a}=t;if(o&&this.filterManager?.isAdvFilterHeaderActive()){return this.focusAdvancedFilter(a)}if(s){const t=this.focusedHeader;const s=Ec(this.beans);if(i){const i=this.gos.getCallback("tabToNextHeader");if(i){a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:e,currentPosition:t,headerPosition:a,headerRowCount:s})}}else{const e=this.gos.getCallback("navigateToNextHeader");if(e&&n){const i={key:n.key,previousHeaderPosition:t,nextHeaderPosition:a,headerRowCount:s,event:n};a=e(i)}}}if(!a){return false}return this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:l})}focusHeaderPositionFromUserFunc(t){if(Dc(this.beans)){return false}const{userFunc:e,headerPosition:i,direction:s,event:n}=t;const o=this.focusedHeader;const r=Ec(this.beans);const l=this.getHeaderPositionFromUserFunc({userFunc:e,direction:s,currentPosition:o,headerPosition:i,headerRowCount:r});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:n})}getHeaderPositionFromUserFunc(t){const{userFunc:e,direction:i,currentPosition:s,headerPosition:n,headerRowCount:o}=t;const r={backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:n,headerRowCount:o};const l=e(r);if(l===true){return s}if(l===false){return null}return l}focusProvidedHeaderPosition(t){const{headerPosition:e,direction:i,fromCell:s,rowWithoutSpanValue:n,event:o,scroll:r=true}=t;const{column:l,headerRowIndex:a}=e;const{filterManager:h,ctrlsSvc:c,headerNavigation:u}=this.beans;if(this.focusedHeader&&Lc(t.headerPosition,this.focusedHeader)){return false}if(a===-1){if(h?.isAdvFilterHeaderActive()){return this.focusAdvancedFilter(e)}return this.focusGridView({column:l,event:o})}if(r){u?.scrollToColumn(l,i)}const d=c.getHeaderRowContainerCtrl(l.getPinned());const f=d?.focusHeader(e.headerRowIndex,l,o)||false;if(u&&f&&(n!=null||s)){u.currentHeaderRowWithoutSpan=n??-1}return f}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay()){return true}const t=this.visibleCols.allCols[0];if(!t){return false}const e=Em(this.beans,t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlays?.isExclusive()&&this.focusOverlay(true)){return true}const e=Ec(this.beans)-1;const i=vs(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){if(this.filterManager?.isAdvFilterHeaderActive()){return this.focusAdvancedFilter(null)}return this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(t,i){if(this.focusedCell==null){return false}return this.focusedCell.rowIndex===t&&this.focusedCell.rowPinned===e(i)}focusOverlay(t){const e=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!e&&nr(e,t)}focusGridView(t){const{backwards:i=false,canFocusOverlay:s=true,event:n}=t;if(this.overlays?.isExclusive()){return s&&this.focusOverlay(i)}if(Mc(this.beans)){if(i){if(!Dc(this.beans)){return this.focusLastHeader()}}if(s&&this.focusOverlay(i)){return true}if(i){return false}return Tc(this.beans,i)}const o=i?af(this.beans):lf(this.beans);if(o){const s=t.column??this.focusedHeader?.column;const{rowIndex:r,rowPinned:l}=o;const a=hf(this.beans,o);if(!s||!a||r==null){return false}if(s.isSuppressNavigable(a)){const t=this.gos.get("enableRtl");let e;if(!n||n.key===mo.TAB){e=t?mo.LEFT:mo.RIGHT}else{e=n.key}this.beans.navigation?.navigateToNextCell(null,e,{rowIndex:r,column:s,rowPinned:l||null},true);return true}this.navigation?.ensureCellVisible({rowIndex:r,column:s,rowPinned:l});if(i){const t=this.rowRenderer.getRowByPosition(o);if(t?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(o,i)){return true}}this.setFocusedCell({rowIndex:r,column:s,rowPinned:e(l),forceBrowserFocus:true});this.beans.rangeSvc?.setRangeToCell({rowIndex:r,rowPinned:l,column:s});return true}if(s&&this.focusOverlay(i)){return true}if(i&&this.focusLastHeader()){return true}return false}focusAdvancedFilter(t){this.advFilterFocusColumn=t?.column;return this.beans.advancedFilter?.getCtrl().focusHeaderComp()??false}focusNextFromAdvancedFilter(t,e){const i=(e?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];if(t){return this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:Ec(this.beans)-1}})}else{return this.focusGridView({column:i})}}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}};var Nm=class extends re{constructor(){super(...arguments);this.beanName="scrollVisibleSvc"}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc;this.colAnimation=t.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===true;this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===true;this.getScrollbarWidth();this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:t}=this;if(t?.isActive()){t.executeLaterVMTurn((()=>{t.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))}))}else{this.updateScrollVisibleImpl()}}updateScrollVisibleImpl(){const t=this.ctrlsSvc.get("center");if(!t||this.colAnimation?.isActive()){return}const e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(e);this.updateScrollGap()}updateScrollGap(){const t=this.ctrlsSvc.get("center");const e=t.hasHorizontalScrollGap();const i=t.hasVerticalScrollGap();const s=this.horizontalScrollGap!==e||this.verticalScrollGap!==i;if(s){this.horizontalScrollGap=e;this.verticalScrollGap=i;this.eventSvc.dispatchEvent({type:"scrollGapChanged"})}}setScrollsVisible(t){const e=this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing;if(e){this.horizontalScrollShowing=t.horizontalScrollShowing;this.verticalScrollShowing=t.verticalScrollShowing;this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"})}}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=this.gos.get("scrollbarWidth");const e=typeof t==="number"&&t>=0;const i=e?t:Eo();if(i!=null){this.scrollbarWidth=i;this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"})}}return this.scrollbarWidth}};var Bm=class extends re{constructor(){super(...arguments);this.beanName="gridDestroySvc";this.destroyCalled=false}destroy(){if(this.destroyCalled){return}const{stateSvc:t,ctrlsSvc:e,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:t?.getState()??{}});this.destroyCalled=true;e.get("gridCtrl")?.destroyGridUi();i.destroy();super.destroy()}};var Gm=new Set(["gridPreDestroyed","fillStart","pasteStart"]);var Vm=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"];var Lm=Vm.reduce(((t,e)=>{t[e]=ns(e);return t}),{});var zm=(t,e)=>({tag:"span",ref:`eSort${t}`,cls:`ag-sort-indicator-icon ag-sort-${e} ag-hidden`,attrs:{"aria-hidden":"true"}});var $m={tag:"span",cls:"ag-sort-indicator-container",children:[zm("Order","order"),zm("Asc","ascending-icon"),zm("Desc","descending-icon"),zm("Mixed","mixed-icon"),zm("None","none-icon")]};var Wm=class extends Sn{constructor(t){super();this.eSortOrder=vn;this.eSortAsc=vn;this.eSortDesc=vn;this.eSortMixed=vn;this.eSortNone=vn;if(!t){this.setTemplate($m)}}attachCustomElements(t,e,i,s,n){this.eSortOrder=t;this.eSortAsc=e;this.eSortDesc=i;this.eSortMixed=s;this.eSortNone=n}setupSort(t,e=false){this.column=t;this.suppressOrder=e;this.setupMultiSortIndicator();if(!t.isSortable()&&!t.getColDef().showRowGroup){return}this.addInIcon("sortAscending",this.eSortAsc,t);this.addInIcon("sortDescending",this.eSortDesc,t);this.addInIcon("sortUnSort",this.eSortNone,t);const i=this.updateIcons.bind(this);const s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i);this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s});this.onSortChanged()}addInIcon(t,e,i){if(e==null){return}const s=pu(t,this.beans,i);if(s){e.appendChild(s)}}onSortChanged(){this.updateIcons();if(!this.suppressOrder){this.updateSortOrder()}}updateIcons(){const{eSortAsc:t,eSortDesc:e,eSortNone:i,column:s,gos:n,beans:o}=this;const r=o.sortSvc.getDisplaySortForColumn(s);if(t){const e=r==="asc";tt(t,e,{skipAriaHidden:true})}if(e){const t=r==="desc";tt(e,t,{skipAriaHidden:true})}if(i){const t=!s.getColDef().unSortIcon&&!n.get("unSortIcon");const e=r===null||r===void 0;tt(i,!t&&e,{skipAriaHidden:true})}}setupMultiSortIndicator(){const{eSortMixed:t,column:e,gos:i}=this;this.addInIcon("sortUnSort",t,e);const s=e.getColDef().showRowGroup;const n=Mi(i);if(n&&s){this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)});this.updateMultiSortIndicator()}}updateMultiSortIndicator(){const{eSortMixed:t,beans:e,column:i}=this;if(t){const s=e.sortSvc.getDisplaySortForColumn(i)==="mixed";tt(t,s,{skipAriaHidden:true})}}updateSortOrder(){const{eSortOrder:t,column:e,beans:{sortSvc:i}}=this;if(!t){return}const s=i.getColumnsWithSortingOrdered();const n=i.getDisplaySortIndexForColumn(e)??-1;const o=s.some((t=>i.getDisplaySortIndexForColumn(t)??-1>=1));const r=n>=0&&o;tt(t,r,{skipAriaHidden:true});if(n>=0){t.textContent=(n+1).toString()}else{dt(t)}}};var Um={selector:"AG-SORT-INDICATOR",component:Wm};var jm=["asc","desc",null];var Km=class extends re{constructor(){super(...arguments);this.beanName="sortSvc"}progressSort(t,e,i){const s=this.getNextSortDirection(t);this.setSortForColumn(t,s,e,i)}progressSortFromEvent(t,e){const i=this.gos.get("multiSortKey")==="ctrl";const s=i?e.ctrlKey||e.metaKey:e.shiftKey;this.progressSort(t,s,"uiColumnSorted")}setSortForColumn(t,e,i,s){if(e!=="asc"&&e!=="desc"){e=null}const{gos:n,showRowGroupCols:o}=this.beans;const r=Mi(n);let l=[t];if(r){if(t.getColDef().showRowGroup){const e=o?.getSourceColumnsForGroupColumn?.(t);const i=e?.filter((t=>t.isSortable()));if(i){l=[t,...i]}}}for(const t of l){this.setColSort(t,e,s)}const a=(i||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort");const h=[];if(!a){const t=this.clearSortBarTheseColumns(l,s);h.push(...t)}this.updateSortIndex(t);h.push(...l);this.dispatchSortChangedEvents(s,h)}updateSortIndex(t){const{gos:e,colModel:i,showRowGroupCols:s}=this.beans;const n=Mi(e);const o=s?.getShowRowGroupCol(t.getId());const r=n?o||t:t;const l=this.getColumnsWithSortingOrdered();i.forAllCols((t=>this.setColSortIndex(t,null)));const a=l.filter((t=>{if(n&&t.getColDef().showRowGroup){return false}return t!==r}));const h=r.getSort()?[...a,r]:a;h.forEach(((t,e)=>this.setColSortIndex(t,e)))}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let t=false;this.beans.colModel.forAllCols((e=>{if(e.getSort()){t=true}}));return t}dispatchSortChangedEvents(t,e){const i={type:"sortChanged",source:t};if(e){i.columns=e}this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(t,e){const i=[];this.beans.colModel.forAllCols((s=>{if(!t.includes(s)){if(s.getSort()){i.push(s)}this.setColSort(s,void 0,e)}}));return i}getNextSortDirection(t){const e=t.getColDef().sortingOrder??this.gos.get("sortingOrder")??jm;const i=e.indexOf(t.getSort());const s=i<0;const n=i==e.length-1;return s||n?e[0]:e[i+1]}getIndexedSortMap(){const{gos:t,colModel:e,showRowGroupCols:i,rowGroupColsSvc:s}=this.beans;let n=[];e.forAllCols((t=>{if(t.getSort()){n.push(t)}}));if(e.isPivotMode()){const e=Mi(t);n=n.filter((t=>{const s=!!t.getAggFunc();const n=!t.isPrimary();const o=e?i?.getShowRowGroupCol(t.getId()):t.getColDef().showRowGroup;return s||n||o}))}const o=s?.columns.filter((t=>!!t.getSort()))??[];const r={};n.forEach(((t,e)=>r[t.getId()]=e));n.sort(((t,e)=>{const i=t.getSortIndex();const s=e.getSortIndex();if(i!=null&&s!=null){return i-s}else if(i==null&&s==null){const i=r[t.getId()];const s=r[e.getId()];return i>s?1:-1}else if(s==null){return-1}else{return 1}}));const l=Mi(t)&&!!o.length;if(l){n=[...new Set(n.map((t=>i?.getShowRowGroupCol(t.getId())??t)))]}const a=new Map;n.forEach(((t,e)=>a.set(t,e)));if(l){for(const t of o){const e=i.getShowRowGroupCol(t.getId());a.set(t,a.get(e))}}return a}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort((([,t],[,e])=>t-e)).map((([t])=>t))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((t=>t.getSort())).map((t=>({sort:t.getSort(),colId:t.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((t=>t.getSort())).map((t=>({sort:t.getSort(),column:t})))}canColumnDisplayMixedSort(t){const e=Mi(this.gos);const i=!!t.getColDef().showRowGroup;return e&&i}getDisplaySortForColumn(t){const e=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length){return t.getSort()}const i=t.getColDef().field!=null||!!t.getColDef().valueGetter;const s=i?[t,...e]:e;const n=s[0].getSort();const o=s.every((t=>t.getSort()==n));if(!o){return"mixed"}return n}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}setupHeader(t,e,i){let s=0;t.addManagedListeners(e,{movingChanged:()=>{s=Date.now()}});if(i){t.addManagedElementListeners(i,{click:t=>{const i=e.isMoving();const n=Date.now();const o=n-s<50;const r=i||o;if(!r){this.progressSortFromEvent(e,t)}}})}const n=()=>{const i=e.getSort();t.toggleCss("ag-header-cell-sorted-asc",i==="asc");t.toggleCss("ag-header-cell-sorted-desc",i==="desc");t.toggleCss("ag-header-cell-sorted-none",!i);if(e.getColDef().showRowGroup){const i=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);const s=i?.every((t=>e.getSort()==t.getSort()));const n=!s;t.toggleCss("ag-header-cell-sorted-mixed",n)}};t.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(t){const{sort:e,initialSort:i,sortIndex:s,initialSortIndex:n}=t.colDef;if(e!==void 0){if(e==="asc"||e==="desc"){t.sort=e}}else if(i==="asc"||i==="desc"){t.sort=i}if(s!==void 0){if(s!==null){t.sortIndex=s}}else if(n!==null){t.sortIndex=n}}updateColSort(t,e,i){if(e!==void 0){if(e==="desc"||e==="asc"){this.setColSort(t,e,i)}else{this.setColSort(t,void 0,i)}}}setColSort(t,e,i){if(t.sort!==e){t.sort=e;t.dispatchColEvent("sortChanged",i)}t.dispatchStateUpdatedEvent("sort")}setColSortIndex(t,e){t.sortIndex=e;t.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(t){return new Wm(t)}getSortIndicatorSelector(){return Um}};var qm={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function _m(t){return`"${t}"`}var Zm=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}});var Ym={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:t,editable:e})=>{if(!e){return null}if(typeof t==="string"){return qm[t]??"CustomEditor"}return"CustomEditor"},cellRenderer:({cellRenderer:t})=>{if(typeof t!=="string"){return null}return qm[t]},cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:t,cellEditor:e})=>{if(t&&!e){return"TextEditor"}return null},enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:t})=>{if(t&&typeof t!=="string"&&typeof t!=="boolean"){return"CustomFilter"}if(typeof t==="string"){return qm[t]??"ColumnFilter"}return"ColumnFilter"},floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:t=>{const e=["columnsMenuTab","generalMenuTab"];if(t.menuTabs?.some((t=>e.includes(t)))){return"ColumnMenu"}return null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"};var Qm=()=>{const t={autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:e})=>{if(e){return"colDef.autoHeight is not supported with paginationAutoPageSize."}return null}},cellRendererParams:{validate:t=>{const e=t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer";if(e&&"checkbox"in t.cellRendererParams){return'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'}return null}},flex:{validate:(t,e)=>{if(e.autoSizeStrategy){return"colDef.flex is not supported with gridOptions.autoSizeStrategy"}return null}},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const e=t.headerValueGetter;if(typeof e==="function"||typeof e==="string"){return null}return"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t["smallDown"]){return fi(262)}if(t["smallLeft"]){return fi(263)}if(t["smallRight"]){return fi(264)}}return null}},sortingOrder:{validate:t=>{const e=t.sortingOrder;if(Array.isArray(e)&&e.length>0){const t=e.filter((t=>!jm.includes(t)));if(t.length>0){return`sortingOrder must be an array with elements from [${jm.map(ni).join()}], currently it includes [${t.map(ni).join()}]`}}else if(!Array.isArray(e)||e.length<=0){return`sortingOrder must be an array with at least one element, currently it's ${e}`}return null}},type:{validate:t=>{const e=t.type;if(e instanceof Array){const t=e.some((t=>typeof t!=="string"));if(t){return"if colDef.type is supplied an array it should be of type 'string[]'"}return null}if(typeof e==="string"){return null}return"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:e})=>{if(!e){return"colDef.rowSpan requires suppressRowTransform to be enabled."}return null}},spanRows:{dependencies:{editable:{required:[false,void 0]},rowDrag:{required:[false,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:e,cellSelection:i,suppressRowTransform:s,enableCellSpan:n,rowDragEntireRow:o,enableCellTextSelection:r})=>{if(typeof e==="object"){if(e?.mode==="singleRow"&&e?.enableClickSelection){return"colDef.spanRows is not supported with rowSelection.clickSelection"}}if(i){return"colDef.spanRows is not supported with cellSelection."}if(s){return"colDef.spanRows is not supported with suppressRowTransform."}if(!n){return"colDef.spanRows requires enableCellSpan to be enabled."}if(o){return"colDef.spanRows is not supported with rowDragEntireRow."}if(r){return"colDef.spanRows is not supported with enableCellTextSelection."}return null}},groupHierarchy:{validate(t,{groupHierarchyConfig:e={}},i){const s=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]);const n=[];for(const o of t.groupHierarchy??[]){if(typeof o==="object"){i.validation?.validateColDef(o);continue}if(!s.has(o)&&!(o in e)){n.push(_m(o))}}if(n.length>0){const t=`The following parts of colDef.groupHierarchy are not recognised: ${n.join(", ")}.`;const e=`Choose one of ${[...s].map(_m).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${t}\n${e}`}return null}}};return t};var Jm={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0};var Xm=()=>Object.keys(Jm);var tv=()=>({objectName:"colDef",allProperties:Xm(),docsUrl:"column-properties/",deprecations:Zm(),validations:Qm()});var ev=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"];var iv=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"];var sv=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];var nv=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"];var ov=["theme","rowSelection"];var rv=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"];var lv=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"];var av=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"];var hv=()=>[...sv,...iv,...ev,...nv,...av,...lv,...rv,...ov];var cv=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function uv(t,e,i){if(typeof e==="number"||e==null){if(e==null){return null}return e>=i?null:`${t}: value should be greater than or equal to ${i}`}return`${t}: value should be a number`}var dv={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"};var fv=()=>{const t={autoSizePadding:{validate({autoSizePadding:t}){return uv("autoSizePadding",t,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:t}){return uv("cacheBlockSize",t,1)}},cacheOverflowSize:{validate({cacheOverflowSize:t}){return uv("cacheOverflowSize",t,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:t=>{const e=t.domLayout;const i=["autoHeight","normal","print"];if(e&&!i.includes(e)){return`domLayout must be one of [${i.join()}], currently it's ${e}`}return null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[true]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[true]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[false,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:t,pinnedTopRowData:e,pinnedBottomRowData:i}){if(t&&(e||i)){return"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`."}return null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:t,isRowPinnable:e,pinnedTopRowData:i,pinnedBottomRowData:s}){if(e&&(i||s)){return"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`."}if(!t&&e){return"`isRowPinnable` requires `enableRowPinning` to be set."}return null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:t,isRowPinned:e,pinnedTopRowData:i,pinnedBottomRowData:s}){if(e&&(i||s)){return"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`."}if(!t&&e){return"`isRowPinned` requires `enableRowPinning` to be set."}return null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,false],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,false]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,false]},groupRemoveSingleChildren:{required:[void 0,false]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,false]},groupRemoveLowestSingleChildren:{required:[void 0,false]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:t={}},e,i){for(const e of Object.keys(t)){i.validation?.validateColDef(t[e])}return null}},icons:{validate:({icons:t})=>{if(t){if(t["smallDown"]){return fi(262)}if(t["smallLeft"]){return fi(263)}if(t["smallRight"]){return fi(264)}}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:t}){return uv("infiniteInitialRowCount",t,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:t=>{if(typeof t.ssrmExpandAllAffectsAllRows==="boolean"){if(t.rowModelType!=="serverSide"){return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model."}if(t.ssrmExpandAllAffectsAllRows&&typeof t.getRowId!=="function"){return`'getRowId' callback must be provided for Server Side Row Model grouping to work correctly.`}}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:t}){return uv("keepDetailRowsCount",t,1)}},paginationPageSize:{validate({paginationPageSize:t}){return uv("paginationPageSize",t,1)}},paginationPageSizeSelector:{validate:t=>{const e=t.paginationPageSizeSelector;if(typeof e==="boolean"||e==null){return null}if(!e.length){return`'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}return null}},pivotMode:{dependencies:{treeData:{required:[false,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:t}){return uv("rowBuffer",t,0)}},rowClass:{validate:t=>{const e=t.rowClass;if(typeof e==="function"){return"rowClass should not be a function, please use getRowClass instead"}return null}},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[false,void 0]}}},rowSelection:{validate({rowSelection:t}){if(t&&typeof t==="string"){return'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.'}if(t&&typeof t!=="object"){return"Expected `RowSelectionOptions` object for the `rowSelection` property."}if(t&&t.mode!=="multiRow"&&t.mode!=="singleRow"){return`Selection mode "${t.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`}return null}},rowStyle:{validate:t=>{const e=t.rowStyle;if(e&&typeof e==="function"){return"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead"}return null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:t}){return uv("serverSideInitialRowCount",t,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:t=>{const e=t.sortingOrder;if(Array.isArray(e)&&e.length>0){const t=e.filter((t=>!jm.includes(t)));if(t.length>0){return`sortingOrder must be an array with elements from [${jm.map(ni).join()}], currently it includes [${t.map(ni).join()}]`}}else if(!Array.isArray(e)||e.length<=0){return`sortingOrder must be an array with at least one element, currently it's ${e}`}return null}},tooltipHideDelay:{validate:t=>{if(t.tooltipHideDelay&&t.tooltipHideDelay<0){return"tooltipHideDelay should not be lower than 0"}return null}},tooltipShowDelay:{validate:t=>{if(t.tooltipShowDelay&&t.tooltipShowDelay<0){return"tooltipShowDelay should not be lower than 0"}return null}},treeData:{supportedRowModels:["clientSide","serverSide"],validate:t=>{const e=t.rowModelType??"clientSide";switch(e){case"clientSide":{const{treeDataChildrenField:e,treeDataParentIdField:i,getDataPath:s,getRowId:n}=t;if(!e&&!i&&!s){return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model."}if(e){if(s){return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time."}if(i){return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}}if(i){if(!n){return"getRowId callback not provided, tree data with parent id cannot be built."}if(s){return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}}return null}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${e} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:i}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:t}){return uv("viewportRowModelBufferSize",t,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:t}){return uv("viewportRowModelPageSize",t,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:t,showOpenedGroup:e}){if(t?.field&&e){return"autoGroupColumnDef.field and showOpenedGroup are not supported when used together."}if(t?.valueGetter&&e){return"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together."}return null}},renderingMode:{validate:t=>{const e=t.renderingMode;const i=["default","legacy"];if(e&&!i.includes(e)){return`renderingMode must be one of [${i.join()}], currently it's ${e}`}return null}},autoSizeStrategy:{validate:({autoSizeStrategy:t})=>{if(!t){return null}const e=["fitCellContents","fitGridWidth","fitProvidedWidth"];const i=t.type;if(i!=="fitCellContents"&&i!=="fitGridWidth"&&i!=="fitProvidedWidth"){return`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${e.map((t=>'"'+t+'"')).join(", ")}, currently it's ${i}`}if(i==="fitProvidedWidth"&&typeof t.width!="number"){return`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${t.width}`}return null}}};const e={};for(const t of lv){e[t]={expectedType:"boolean"}}for(const t of nv){e[t]={expectedType:"number"}}ve(e,t);return e};var gv=()=>({objectName:"gridOptions",allProperties:[...hv(),...Object.values(Lm)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:cv(),validations:fv()});var pv=0;var mv=0;var vv="__ag_grid_instance";var wv=class extends re{constructor(){super(...arguments);this.beanName="gos";this.domDataKey="__AG_"+Math.random().toString();this.instanceId=mv++;this.gridReadyFired=false;this.queueEvents=[];this.propEventSvc=new t;this.globalEventHandlerFactory=t=>(e,i)=>{if(!this.isAlive()){return}const s=Gm.has(e);if(s&&!t||!s&&t){return}if(!Cv(e)){return}const n=(t,e)=>{const i=Lm[t];const s=this.gridOptions[i];if(typeof s==="function"){this.beans.frameworkOverrides.wrapOutgoing((()=>s(e)))}};if(this.gridReadyFired){n(e,i)}else if(e==="gridReady"){n(e,i);this.gridReadyFired=true;for(const t of this.queueEvents){n(t.eventName,t.event)}this.queueEvents=[]}else{this.queueEvents.push({eventName:e,event:i})}}}wireBeans(t){this.gridOptions=t.gridOptions;this.validation=t.validation;this.api=t.gridApi;this.gridId=t.context.getId()}get gridOptionsContext(){return this.gridOptions["context"]}postConstruct(){this.validateGridOptions(this.gridOptions);this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),true);this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(true).bind(this),false);this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides);this.addManagedEventListeners({gridOptionsChanged:({options:t})=>{this.updateGridOptions({options:t,force:true,source:"optionsUpdated"})}})}destroy(){super.destroy();this.queueEvents=[]}get(t){return this.gridOptions[t]??xe[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return i(this.gridOptions[t])}mergeGridCommonParams(t){if(t){const e=e=>t(this.addCommon(e));return e}return t}updateGridOptions({options:t,force:e,source:i="api"}){const s={id:pv++,properties:[]};const n=[];const{gridOptions:o,validation:r}=this;for(const l of Object.keys(t)){const a=be.applyGlobalGridOption(l,t[l]);r?.warnOnInitialPropertyUpdate(i,l);const h=e||typeof a==="object"&&i==="api";const c=o[l];if(h||c!==a){o[l]=a;const t={type:l,currentValue:a,previousValue:c,changeSet:s,source:i};n.push(t)}}this.validateGridOptions(this.gridOptions);s.properties=n.map((t=>t.type));for(const t of n){Fe(this,`Updated property ${t.type} from`,t.previousValue,` to `,t.currentValue);this.propEventSvc.dispatchEvent(t)}}addPropertyEventListener(t,e){this.propEventSvc.addEventListener(t,e)}removePropertyEventListener(t,e){this.propEventSvc.removeEventListener(t,e)}getDomDataKey(){return this.domDataKey}addCommon(t){t.api=this.api;t.context=this.gridOptionsContext;return t}validateOptions(t,e){for(const i of Object.keys(t)){const s=t[i];if(s==null||s===false){continue}let n=e[i];if(typeof n==="function"){n=n(t,this.gridOptions,this.beans)}if(n){this.assertModuleRegistered(n,i)}}}validateGridOptions(t){this.validateOptions(t,dv);this.validation?.processGridOptions(t)}validateColDef(t,e,i){if(i||!this.beans.dataTypeSvc?.isColPendingInference(e)){this.validateOptions(t,Ym);this.validation?.validateColDef(t)}}assertModuleRegistered(t,e){const i=Array.isArray(t)?t.some((t=>this.isModuleRegistered(t))):this.isModuleRegistered(t);if(!i){ci(200,{...this.getModuleErrorParams(),moduleName:t,reasonOrId:e})}return i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Le(),rowModelType:this.get("rowModelType"),isUmd:Ue()}}isModuleRegistered(t){return Ve(t,this.gridId,this.get("rowModelType"))}setInstanceDomData(t){t[vv]=this.instanceId}isElementInThisInstance(t){let e=t;while(e){const t=e[vv];if(i(t)){const e=t===this.instanceId;return e}e=e.parentElement}return false}};function Cv(t){return!!Lm[t]}function bv(t){const e={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:e},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:e},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:e},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var yv=bv(true);var Sv=bv(false);var xv=class extends Sn{constructor(){super(...arguments);this.eFilter=vn;this.eFilterButton=vn;this.eSortIndicator=vn;this.eMenu=vn;this.eLabel=vn;this.eText=vn;this.eSortOrder=vn;this.eSortAsc=vn;this.eSortDesc=vn;this.eSortMixed=vn;this.eSortNone=vn;this.isLoadingInnerComponent=false}refresh(t){const e=this.params;this.params=t;if(this.workOutTemplate(t,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||t.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||e.enableFilterButton!=t.enableFilterButton||e.enableFilterIcon!=t.enableFilterIcon){return false}if(this.innerHeaderComponent){const e={...t};ve(e,t.innerHeaderComponentParams);this.innerHeaderComponent.refresh?.(e)}else{this.setDisplayName(t)}return true}workOutTemplate(t,e){const i=t.template;if(i){return i?.trim?i.trim():i}else{return e?yv:Sv}}init(t){this.params=t;const{sortSvc:e,touchSvc:i,rowNumbersSvc:s,userCompFactory:n}=this.beans;const o=e?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(t,!!o);this.setTemplate(this.currentTemplate,o?[o]:void 0);i?.setupForHeader(this);this.setMenu();this.setupSort();s?.setupForHeader(this);this.setupFilterIcon();this.setupFilterButton();this.workOutInnerHeaderComponent(n,t);this.setDisplayName(t)}workOutInnerHeaderComponent(t,e){const i=Zn(t,e,e);if(!i){return}this.isLoadingInnerComponent=true;i.newAgStackInstance().then((t=>{this.isLoadingInnerComponent=false;if(!t){return}if(this.isAlive()){this.innerHeaderComponent=t;if(this.eText){this.eText.appendChild(t.getGui())}}else{this.destroyBean(t)}}))}setDisplayName(t){const{displayName:e}=t;const i=this.currentDisplayName;this.currentDisplayName=e;if(!this.eText||i===e||this.innerHeaderComponent||this.isLoadingInnerComponent){return}this.eText.textContent=h(e)}addInIcon(t,e,i){const s=pu(t,this.beans,i);if(s){e.appendChild(s)}}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu){return}this.currentShowMenu=this.workOutShowMenu();if(!this.currentShowMenu){ft(this.eMenu);this.eMenu=void 0;return}const{gos:t,eMenu:e,params:i}=this;const s=is(t);this.addInIcon(s?"menu":"menuAlt",e,i.column);e.classList.toggle("ag-header-menu-icon",!s);const n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n;this.addManagedElementListeners(e,{click:()=>this.showColumnMenu(this.eMenu)});this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(t){this.eMenu?.classList.toggle("ag-header-menu-always-show",t)}showColumnMenu(t){const{currentSuppressMenuHide:e,params:i}=this;if(!e){this.toggleMenuAlwaysShow(true)}i.showColumnMenu(t,(()=>{if(!e){this.toggleMenuAlwaysShow(false)}}))}onMenuKeyboardShortcut(t){const{params:e,gos:i,beans:s,eMenu:n,eFilterButton:o}=this;const r=e.column;const l=is(i);if(t&&!l){if(s.menuSvc?.isFilterMenuInHeaderEnabled(r)){e.showFilter(o??n??this.getGui());return true}}else if(e.enableMenu){this.showColumnMenu(n??o??this.getGui());return true}return false}setupSort(){const{sortSvc:t}=this.beans;if(!t){return}const{enableSorting:e,column:i}=this.params;this.currentSort=e;if(!this.eSortIndicator){this.eSortIndicator=this.createBean(t.createSortIndicator(true));const{eSortIndicator:e,eSortOrder:i,eSortAsc:s,eSortDesc:n,eSortMixed:o,eSortNone:r}=this;e.attachCustomElements(i,s,n,o,r)}this.eSortIndicator.setupSort(i);if(!this.currentSort){return}t.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:t,params:e}=this;if(!t){return}const i=()=>{const i=e.column.isFilterActive();tt(t,i,{skipAriaHidden:true})};this.configureFilter(e.enableFilterIcon,t,i,"filterActive")}setupFilterButton(){const{eFilterButton:t,params:e}=this;if(!t){return}const i=this.configureFilter(e.enableFilterButton,t,this.onFilterChangedButton.bind(this),"filter");if(i){this.addManagedElementListeners(t,{click:()=>e.showFilter(t)})}else{this.eFilterButton=void 0}}configureFilter(t,e,i,s){if(!t){ft(e);return false}const n=this.params.column;this.addInIcon(s,e,n);this.addManagedListeners(n,{filterChanged:i});i();return true}onFilterChangedButton(){const t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){const{eFilterButton:e,eMenu:i}=this;if(t){return e??i??this.getGui()}return i??e??this.getGui()}destroy(){super.destroy();if(this.innerHeaderComponent){this.destroyBean(this.innerHeaderComponent);this.innerHeaderComponent=void 0}}};var Rv={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:`ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded`},{tag:"span",ref:"agClosed",cls:`ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed`}]};var Fv=class extends Sn{constructor(){super(Rv);this.agOpened=vn;this.agClosed=vn;this.agLabel=vn;this.isLoadingInnerComponent=false}init(t){const{userCompFactory:e,touchSvc:i}=this.beans;this.params=t;this.checkWarnings();this.workOutInnerHeaderGroupComponent(e,t);this.setupLabel(t);this.addGroupExpandIcon(t);this.setupExpandIcons();i?.setupForHeaderGroup(this)}checkWarnings(){const t=this.params;if(t.template){hi(89)}}workOutInnerHeaderGroupComponent(t,e){const i=Qn(t,e,e);if(!i){return}this.isLoadingInnerComponent=true;i.newAgStackInstance().then((t=>{this.isLoadingInnerComponent=false;if(!t){return}if(this.isAlive()){this.innerHeaderGroupComponent=t;this.agLabel.appendChild(t.getGui())}else{this.destroyBean(t)}}))}setupExpandIcons(){const{agOpened:t,agClosed:e,params:{columnGroup:i},beans:s}=this;this.addInIcon("columnGroupOpened",t);this.addInIcon("columnGroupClosed",e);const n=t=>{if(eh(t)){return}const e=!i.isExpanded();s.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),e,"uiColumnExpanded")};this.addTouchAndClickListeners(s,e,n);this.addTouchAndClickListeners(s,t,n);const o=t=>{th(t)};this.addManagedElementListeners(e,{dblclick:o});this.addManagedElementListeners(t,{dblclick:o});this.addManagedElementListeners(this.getGui(),{dblclick:n});this.updateIconVisibility();const r=i.getProvidedColumnGroup();const l=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:l,expandableChanged:l})}addTouchAndClickListeners(t,e,i){t.touchSvc?.setupForHeaderGroupElement(this,e,i);this.addManagedElementListeners(e,{click:i})}updateIconVisibility(){const{agOpened:t,agClosed:e,params:{columnGroup:i}}=this;if(i.isExpandable()){const s=i.isExpanded();tt(t,s);tt(e,!s)}else{tt(t,false);tt(e,false)}}addInIcon(t,e){const i=pu(t,this.beans,null);if(i){e.appendChild(i)}}addGroupExpandIcon(t){if(!t.columnGroup.isExpandable()){const{agOpened:t,agClosed:e}=this;tt(t,false);tt(e,false)}}setupLabel(t){const{displayName:e,columnGroup:s}=t;const n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if(i(e)&&!n){this.agLabel.textContent=h(e)}this.toggleCss("ag-sticky-label",!s.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy();if(this.innerHeaderGroupComponent){this.destroyBean(this.innerHeaderGroupComponent);this.innerHeaderGroupComponent=void 0}}};var kv={moduleName:"ColumnHeaderComp",version:Ke,userComponents:{agColumnHeader:xv},icons:{menu:"menu",menuAlt:"menu-alt"}};var Pv={moduleName:"ColumnGroupHeaderComp",version:Ke,userComponents:{agColumnGroupHeader:Fv},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}};var Dv=class extends re{constructor(){super(...arguments);this.beanName="animationFrameSvc";this.p1={list:[],sorted:false};this.p2={list:[],sorted:false};this.f1={list:[],sorted:false};this.destroyTasks=[];this.ticking=false;this.scrollGoingDown=true;this.lastScrollTop=0;this.taskCount=0}setScrollTop(t){this.scrollGoingDown=t>=this.lastScrollTop;if(t===0){this.scrollGoingDown=true}this.lastScrollTop=t}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame");this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){if(this.active===false){hi(92)}}createTask(t,e,i,s,n=false){this.verify();let o=i;if(s&&this.batchFrameworkComps){o="f1"}const r={task:t,index:e,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[o],r);this.schedule()}addTaskToList(t,e){t.list.push(e);t.sorted=false}sortTaskList(t){if(t.sorted){return}const e=this.scrollGoingDown?1:-1;t.list.sort(((t,i)=>{if(t.deferred!==i.deferred){return t.deferred?-1:1}if(t.index!==i.index){return e*(i.index-t.index)}return i.createOrder-t.createOrder}));t.sorted=true}addDestroyTask(t){this.verify();this.destroyTasks.push(t);this.schedule()}executeFrame(t){const{p1:e,p2:i,f1:s,destroyTasks:n,beans:o}=this;const{ctrlsSvc:r,frameworkOverrides:l}=o;const a=e.list;const h=i.list;const c=s.list;const u=Date.now();let d=0;const f=t<=0;const g=r.getScrollFeature();while(f||d<t){const o=g.scrollGridIfNeeded();if(!o){let o;if(a.length){this.sortTaskList(e);o=a.pop().task}else if(h.length){this.sortTaskList(i);o=h.pop().task}else if(c.length){l.wrapOutgoing((()=>{while(f||d<t){const t=g.scrollGridIfNeeded();if(!t){if(c.length){this.sortTaskList(s);o=c.pop().task;o()}else{break}}else{break}d=Date.now()-u}}));o=()=>{}}else if(n.length){o=n.pop()}else{break}o()}d=Date.now()-u}if(a.length||h.length||c.length||n.length){this.requestFrame()}else{this.ticking=false}}flushAllFrames(){if(!this.active){return}this.executeFrame(-1)}schedule(){if(!this.active){return}if(!this.ticking){this.ticking=true;this.requestFrame()}}requestFrame(){const t=this.executeFrame.bind(this,60);Et(this.beans,t)}isQueueEmpty(){return!this.ticking}};var Mv={moduleName:"AnimationFrame",version:Ke,beans:[Dv]};var Tv=class extends re{constructor(){super(...arguments);this.beanName="iconSvc"}createIconNoSpan(t,e){return pu(t,this.beans,e?.column)}};var Ev=class extends re{constructor(){super(...arguments);this.beanName="touchSvc"}mockBodyContextMenu(t,e){this.mockContextMenu(t,t.eBodyViewport,e)}mockHeaderContextMenu(t,e){this.mockContextMenu(t,t.eGui,e)}mockRowContextMenu(t){if(!Do()){return}const e=(e,i,s)=>{const{rowCtrl:n,cellCtrl:o}=t.getControlsForEventTarget(s?.target??null);if(o?.column){o.dispatchCellContextMenuEvent(s??null)}this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,n,o)};this.mockContextMenu(t,t.element,e)}handleCellDoubleClick(t,e){const i=()=>{if(!Do()||Vt("dblclick")){return false}const e=Date.now();const i=e-t.lastIPadMouseClickEvent<200;t.lastIPadMouseClickEvent=e;return i};if(i()){t.onCellDoubleClicked(e);e.preventDefault();return true}return false}setupForHeader(t){const{gos:e,sortSvc:s,menuSvc:n}=this.beans;if(e.get("suppressTouch")){return}const{params:o,eMenu:r,eFilterButton:l}=t;const a=new od(t.getGui(),true);t.addDestroyFunc((()=>a.destroy()));const h=t.shouldSuppressMenuHide();const c=h&&i(r)&&o.enableMenu;let u=a;if(c){u=new od(r,true);t.addDestroyFunc((()=>u.destroy()))}if(o.enableMenu||n?.isHeaderContextMenuEnabled(o.column)){const e=c?"tap":"longTap";const i=t=>o.showColumnMenuAfterMouseClick(t.touchStart);t.addManagedListeners(u,{[e]:i});t.addManagedListeners(a,{longTap:i})}if(o.enableSorting){const e=t=>{const e=t.touchStart.target;if(h&&(r?.contains(e)||l?.contains(e))){return}s?.progressSort(o.column,false,"uiColumnSorted")};t.addManagedListeners(a,{tap:e})}if(o.enableFilterButton&&l){const e=new od(l,true);t.addManagedListeners(e,{tap:()=>o.showFilter(l)});t.addDestroyFunc((()=>e.destroy()))}}setupForHeaderGroup(t){const e=t.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(e.columnGroup.getProvidedColumnGroup())){const i=new od(e.eGridHeader,true);const s=t=>e.showColumnMenuAfterMouseClick(t.touchStart);t.addManagedListeners(i,{longTap:s});t.addDestroyFunc((()=>i.destroy()))}}setupForHeaderGroupElement(t,e,i){const s=new od(e,true);t.addManagedListeners(s,{tap:i});t.addDestroyFunc((()=>s.destroy()))}mockContextMenu(t,e,i){if(!Do()){return}const s=new od(e);const n=t=>{if(!qt(this.beans,t.touchEvent)){return}i(void 0,t.touchStart,t.touchEvent)};t.addManagedListeners(s,{longTap:n});t.addDestroyFunc((()=>s.destroy()))}};var Av={moduleName:"Touch",version:Ke,beans:[Ev]};var Iv=class extends re{constructor(){super(...arguments);this.beanName="cellNavigation"}wireBeans(t){this.rowSpanSvc=t.rowSpanSvc}getNextCellToFocus(t,e,i=false){if(i){return this.getNextCellToFocusWithCtrlPressed(t,e)}return this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){const i=t===mo.UP;const s=t===mo.DOWN;const n=t===mo.LEFT;let o;let r;const{pageBounds:l,gos:a,visibleCols:h,pinnedRowModel:c}=this.beans;const{rowPinned:u}=e;if(i||s){if(u&&c){if(i){r=0}else{r=u==="top"?c.getPinnedTopRowCount()-1:c.getPinnedBottomRowCount()-1}}else{r=i?l.getFirstRow():l.getLastRow()}o=e.column}else{const t=a.get("enableRtl");r=e.rowIndex;const i=n!==t?h.allCols:[...h.allCols].reverse();o=i.find((t=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:t})))}return o?{rowIndex:r,rowPinned:u,column:o}:null}getNextCellToFocusWithoutCtrlPressed(t,e){let i=e;let s=false;while(!s){switch(t){case mo.UP:i=this.getCellAbove(i);break;case mo.DOWN:i=this.getCellBelow(i);break;case mo.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case mo.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null;hi(8,{key:t});break}if(i){s=this.isCellGoodToFocusOn(i)}else{s=true}}return i}isCellGoodToFocusOn(t){const e=t.column;let i;const{pinnedRowModel:s,rowModel:n}=this.beans;switch(t.rowPinned){case"top":i=s?.getPinnedTopRow(t.rowIndex);break;case"bottom":i=s?.getPinnedBottomRow(t.rowIndex);break;default:i=n.getRow(t.rowIndex);break}if(!i){return false}const o=this.isSuppressNavigable(e,i);return!o}getCellToLeft(t){if(!t){return null}const e=this.beans.visibleCols.getColBefore(t.column);if(!e){return null}return{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}}getCellToRight(t){if(!t){return null}const e=this.beans.visibleCols.getColAfter(t.column);if(!e){return null}return{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}}getCellBelow(t){if(!t){return null}const e=this.rowSpanSvc?.getCellEnd(t)??t;const i=ff(this.beans,e,true);if(i){return{rowIndex:i.rowIndex,column:t.column,rowPinned:i.rowPinned}}return null}getCellAbove(t){if(!t){return null}const e=this.rowSpanSvc?.getCellStart(t)??t;const i=df(this.beans,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},true);if(i){return{rowIndex:i.rowIndex,column:t.column,rowPinned:i.rowPinned}}return null}getNextTabbedCell(t,e){if(e){return this.getNextTabbedCellBackwards(t)}return this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){const{visibleCols:e,pagination:i}=this.beans;const n=e.allCols;let o=t.rowIndex;let r=t.rowPinned;let l=e.getColAfter(t.column);if(!l){l=n[0];const e=ff(this.beans,t,true);if(s(e)){return null}if(!e.rowPinned&&!(i?.isRowInPage(e.rowIndex)??true)){return null}o=e?e.rowIndex:null;r=e?e.rowPinned:null}return{rowIndex:o,column:l,rowPinned:r}}getNextTabbedCellBackwards(t){const{beans:e}=this;const{visibleCols:i,pagination:n}=e;const o=i.allCols;let r=t.rowIndex;let l=t.rowPinned;let a=i.getColBefore(t.column);if(!a){a=vs(o);const i=df(e,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},true);if(s(i)){return null}if(!i.rowPinned&&!(n?.isRowInPage(i.rowIndex)??true)){return null}r=i?i.rowIndex:null;l=i?i.rowPinned:null}return{rowIndex:r,column:a,rowPinned:l}}isSuppressNavigable(t,e){const{suppressNavigable:i}=t.colDef;if(typeof i==="boolean"){return i}if(typeof i==="function"){const s=t.createColumnFunctionCallbackParams(e);const n=i;return n(s)}return false}};function Hv(t){return t.focusSvc.getFocusedCell()}function Ov(t){return t.focusSvc.clearFocusedCell()}function Nv(t,e,i,s){t.focusSvc.setFocusedCell({rowIndex:e,column:i,rowPinned:s,forceBrowserFocus:true})}function Bv(t,e){return t.navigation?.tabToNextCell(false,e)??false}function Gv(t,e){return t.navigation?.tabToNextCell(true,e)??false}function Vv(t,e,i=false){const s=t.headerNavigation?.getHeaderPositionForColumn(e,i);if(!s){return}t.focusSvc.focusHeaderPosition({headerPosition:s})}var Lv=class extends re{constructor(){super(...arguments);this.beanName="editModelSvc";this.edits=new Map;this.cellValidations=new zv;this.rowValidations=new $v;this.suspendEdits=false}suspend(t){this.suspendEdits=t}removeEdits({rowNode:t,column:e}){if(!this.hasEdits({rowNode:t})||!t){return}const i=this.getEditRow(t);if(e){i.delete(e)}else{i.clear()}if(i.size===0){this.edits.delete(t)}}getEditRow(t,e={}){if(this.suspendEdits){return void 0}if(this.edits.size===0){return void 0}const i=t&&this.edits.get(t);if(i){return i}if(e.checkSiblings){const e=t.pinnedSibling;if(e){return this.getEditRow(e)}}return void 0}getEditRowDataValue(t,{checkSiblings:e}={}){if(!t||this.edits.size===0){return void 0}const i=this.getEditRow(t);const s=t.pinnedSibling;const n=e&&s&&this.getEditRow(s);if(!i&&!n){return void 0}const o=Object.assign({},t.data);const r=(t,e)=>t.forEach((({pendingValue:t},i)=>{if(t!==_v){e[i.getColId()]=t}}));if(i){r(i,o)}if(n){r(n,o)}return o}getEdit(t,e){const i=this._getEdit(t);return e&&i?{...i}:i}_getEdit(t){if(this.suspendEdits){return void 0}if(this.edits.size===0){return void 0}return t.rowNode&&t.column&&this.getEditRow(t.rowNode)?.get(t.column)}getEditMap(t=true){if(this.suspendEdits||this.edits.size===0){return new Map}if(!t){return this.edits}const e=new Map;this.edits.forEach(((t,i)=>{const s=new Map;t.forEach((({editorState:t,...e},i)=>s.set(i,{...e})));e.set(i,s)}));return e}setEditMap(t){this.edits.clear();t.forEach(((t,e)=>{const i=new Map;t.forEach(((t,e)=>i.set(e,{...t})));this.edits.set(e,i)}))}setEdit(t,e){(this.edits.size===0||!this.edits.has(t.rowNode))&&this.edits.set(t.rowNode,new Map);const i=this._getEdit(t);const s=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...i,...e});this.getEditRow(t.rowNode).set(t.column,s);return s}clearEditValue(t){const{rowNode:e,column:i}=t;if(e){if(i){const e=this._getEdit(t);if(e){e.editorValue=void 0;e.pendingValue=e.sourceValue;e.state="changed"}}else{this.getEditRow(e)?.forEach((t=>{t.editorValue=void 0;t.pendingValue=t.sourceValue;t.state="changed"}))}}}getState(t){if(this.suspendEdits){return void 0}return this.getEdit(t)?.state}getEditPositions(t){if(this.suspendEdits||(t??this.edits).size===0){return[]}const e=[];(t??this.edits).forEach(((t,i)=>{for(const s of t.keys()){const{editorState:n,...o}=t.get(s);e.push({rowNode:i,column:s,...o})}}));return e}hasRowEdits(t,e){if(this.suspendEdits){return false}if(this.edits.size===0){return false}const i=this.getEditRow(t,e);return!!i}hasEdits(t={},e={}){if(this.suspendEdits){return false}if(this.edits.size===0){return false}const{rowNode:i,column:s}=t;const{withOpenEditor:n}=e;if(i){const o=this.getEditRow(i,e);if(!o){return false}if(s){if(n){return this.getEdit(t)?.state==="editing"}return o.has(s)??false}if(o.size!==0){if(n){return Array.from(o.values()).some((({state:t})=>t==="editing"))}return true}return false}if(n){return this.getEditPositions().some((({state:t})=>t==="editing"))}return this.edits.size>0}start(t){const e=this.getEditRow(t.rowNode)??new Map;const{rowNode:i,column:s}=t;if(s&&!e.has(s)){e.set(s,{editorValue:void 0,pendingValue:_v,sourceValue:this.beans.valueSvc.getValue(s,i,false,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.edits.set(i,e)}stop(t){if(!this.hasEdits(t)){return}if(t){this.removeEdits(t)}else{this.clear()}}clear(){for(const t of this.edits.values()){t.clear()}this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(t){this.cellValidations=t}setRowValidationModel(t){this.rowValidations=t}destroy(){super.destroy();this.clear()}};var zv=class{constructor(){this.cellValidations=new Map}getCellValidation(t){const{rowNode:e,column:i}=t||{};return this.cellValidations?.get(e)?.get(i)}hasCellValidation(t){if(!t?.rowNode||!t.column){return this.cellValidations.size>0}return!!this.getCellValidation(t)}setCellValidation(t,e){const{rowNode:i,column:s}=t;if(!this.cellValidations.has(i)){this.cellValidations.set(i,new Map)}this.cellValidations.get(i).set(s,e)}clearCellValidation(t){const{rowNode:e,column:i}=t;this.cellValidations.get(e)?.delete(i)}setCellValidationMap(t){this.cellValidations=t}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}};var $v=class{constructor(){this.rowValidations=new Map}getRowValidation(t){const{rowNode:e}=t||{};return this.rowValidations.get(e)}hasRowValidation(t){if(!t?.rowNode){return this.rowValidations.size>0}return!!this.getRowValidation(t)}setRowValidation({rowNode:t},e){this.rowValidations.set(t,e)}clearRowValidation({rowNode:t}){this.rowValidations.delete(t)}setRowValidationMap(t){this.rowValidations=t}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Wv(t,e={}){const{rowIndex:i,rowId:s,rowCtrl:n,rowPinned:o}=e;if(n){return n}const{rowModel:r,rowRenderer:l}=t;let{rowNode:a}=e;if(!a){if(s){a=uf(t,s,o)}else if(i!=null){a=r.getRow(i)}}return l.getRowCtrls(a?[a]:[])?.[0]}function Uv(t,e={}){const{cellCtrl:i,colId:s,columnId:n,column:o}=e;if(i){return i}const r=t.colModel.getCol(s??n??qv(o));const l=e.rowCtrl??Wv(t,e);const a=l?.getCellCtrl(r)??void 0;if(a){return a}const h=e.rowNode??l?.rowNode;if(h){return t.rowRenderer.getCellCtrls([h],[r])?.[0]}return void 0}function jv(t){const{editSvc:e}=t;if(e?.isBatchEditing()){aw(t)}else{e?.stopEditing(void 0,{source:"api"})}}function Kv(t,e,i){const{gos:s,popupSvc:n}=e;if(!s.get("stopEditingWhenCellsLoseFocus")){return}const o=t=>{const o=t.relatedTarget;if(Mo(o)===null){jv(e);return}let r=i.some((t=>t.contains(o)))&&s.isElementInThisInstance(o);if(!r){r=!!n&&(n.getActivePopups().some((t=>t.contains(o)))||n.isElementWithinCustomPopup(o))}if(!r){jv(e)}};for(const e of i){t.addManagedElementListeners(e,{focusout:o})}}function qv(t){if(!t){return void 0}if(typeof t==="string"){return t}return t.getColId()}var _v=Symbol("unedited");function Zv(t,e={}){const i=[];const s=t.rowRenderer.getCellCtrls(e.rowNodes,e.columns);for(const t of s){const e=t.comp?.getCellEditor();if(e){i.push({ctrl:t,editor:go(e)})}}return i}var Yv=(t,e={})=>Zv(t,e).map((t=>t.editor));function Qv(t,e,i,s,n,o){if(e.length===0&&i?.rowNode&&i?.column){Xv(t,i,{key:s,event:n,cellStartedEdit:o})}const{valueSvc:r,editSvc:l,editModelSvc:a}=t;const{rowNode:h,column:c}=i??{};for(const u of e){const{rowNode:e,column:d}=u;const f=Uv(t,u);if(!f){if(e&&d){const t=r.getValue(d,e,void 0,"api");const n=i?.rowNode===e&&i?.column===d;const o=n&&s||void 0;const h=o??l?.getCellDataValue(u,false)??r.getValueForDisplay(d,e)?.value??t??_v;a?.setEdit(u,{pendingValue:h,sourceValue:t,state:"editing"})}continue}const g=o&&h===f.rowNode&&f.column===c;Xv(t,{rowNode:h,column:f.column},{key:g?s:null,event:g?n:null,cellStartedEdit:g&&o})}}function Jv({pendingValue:t,sourceValue:e}){if(t===_v){t=e}return t!==e}function Xv(t,e,i){const s=t.gos.get("enableGroupEdit");const{key:n,event:o,cellStartedEdit:r,silent:l}=i??{};const a=Uv(t,e);const h=a?.comp?.getCellEditor();const c=ew(t,e,n,r&&!l);const u=t.editModelSvc?.getEdit(e);let d=c.value;if(d===void 0){d=u?.sourceValue}t.editModelSvc?.setEdit(e,{editorValue:d,state:"editing"});if(h){h.refresh?.(c);return}const f=e.column.getColDef();const g=no(t.userCompFactory,f,c);const p=g?.popupFromSelector!=null?g.popupFromSelector:!!f.cellEditorPopup;const m=g?.popupPositionFromSelector!=null?g.popupPositionFromSelector:f.cellEditorPopupPosition;nw(g.params,o);if(a){a.editCompDetails=g;a.onEditorAttachedFuncs.push((()=>a.rangeFeature?.unsetComp()));a.comp?.setEditDetails(g,p,m,t.gos.get("reactiveCustomComponents"));a?.rowCtrl?.refreshRow({suppressFlash:true});const i=t.editModelSvc?.getEdit(e,true);if(!l&&!i?.editorState?.cellStartedEditing){t.editSvc?.dispatchCellEvent(e,o,"cellEditingStarted",s?{value:d}:{});t.editModelSvc?.setEdit(e,{editorState:{cellStartedEditing:true}})}}}function tw(t,e,i){const s={editorValueExists:false};if(dw(t)){const t=e.getValidationErrors?.();if((t?.length??0)>0){return s}}if(i?.isCancelling){return s}if(i?.isStopping){const t=e?.isCancelAfterEnd?.();if(t){return{...s,isCancelAfterEnd:t}}}const n=e.getValue();return{editorValue:n,editorValueExists:true}}function ew(t,e,i,s){const{valueSvc:n,gos:o,editSvc:r}=t;const l=t.gos.get("enableGroupEdit");const a=Uv(t,e);const h=e.rowNode?.rowIndex??void 0;const c=r?.isBatchEditing();const u=t.colModel.getCol(e.column.getId());const{rowNode:d,column:f}=e;const g=a.comp?.getCellEditor();const p=r?.getCellDataValue(e,false);const m=p===void 0?g?tw(t,g)?.editorValue:void 0:p;const v=m===_v?n.getValueForDisplay(u,d)?.value:m;return os(o,{value:l?m:v,eventKey:i??null,column:f,colDef:f.getColDef(),rowIndex:h,node:d,data:d.data,cellStartedEdit:s??false,onKeyDown:a?.onKeyDown.bind(a),stopEditing:i=>{r.stopEditing(e,{source:c?"ui":"api",suppressNavigateAfterEdit:i});hw(t,e)},eGridCell:a?.eGui,parseValue:t=>n.parseValue(u,d,t,a?.value),formatValue:a?.formatValue.bind(a),validate:()=>{r?.validateEdit()}})}function iw(t,e){const{editModelSvc:i}=t;i?.getEditMap().forEach(((t,s)=>{t.forEach(((t,n)=>{if(!e&&(t.state==="editing"||t.pendingValue===_v)){return}if(!Jv(t)&&(t.state!=="editing"||e)){i?.removeEdits({rowNode:s,column:n})}}))}))}function sw(t,e){const i=e.comp?.getCellEditor();if(!i?.refresh){return}const{eventKey:s,cellStartedEdit:n}=e.editCompDetails.params;const{column:o}=e;const r=ew(t,e,s,n);const l=o.getColDef();const a=no(t.userCompFactory,l,r);i.refresh(nw(a.params,s))}function nw(t,e){if(e instanceof KeyboardEvent&&t.column.getColDef().cellEditor==="agNumberCellEditor"){t.suppressPreventDefault=["-","+",".","e"].includes(e?.key??"")||t.suppressPreventDefault}else{e?.preventDefault?.()}return t}function ow(t,e){for(const i of t.editModelSvc?.getEditPositions()??[]){const s=Uv(t,i);if(!s){continue}const n=s.comp?.getCellEditor();if(!n){continue}const{editorValue:o,editorValueExists:r,isCancelAfterEnd:l}=tw(t,n,e);if(l){t.editModelSvc?.setEdit(i,{editorState:{isCancelAfterEnd:l}})}rw(t,i,o,void 0,!r,e)}}function rw(t,e,i,s,n,o){const{editModelSvc:r,valueSvc:l}=t;if(!r){return}const{rowNode:a,column:h}=e;if(!(a&&h)){return}let c=r.getEdit(e,true);if(!c?.sourceValue){c=r.setEdit(e,{sourceValue:l.getValue(h,a,void 0,"api"),pendingValue:c?c.editorValue:_v})}r.setEdit(e,{editorValue:n?c.sourceValue:i});if(o?.persist){lw(t,e)}}function lw(t,e){const{editModelSvc:i}=t;const s=i?.getEdit(e,true);i?.setEdit(e,{pendingValue:s?.editorValue})}function aw(t,e,i){if(!e){e=t.editModelSvc?.getEditPositions()}for(const s of e??[]){hw(t,s,i)}}function hw(t,e,i){const s=t.gos.get("enableGroupEdit");const{editModelSvc:n}=t;const o=Uv(t,e);const r=n?.getEdit(e,true);if(!o){if(r){n?.setEdit(e,{state:"changed"})}return}const{comp:l}=o;if(l&&!l.getCellEditor()){o?.refreshCell();if(r){n?.setEdit(e,{state:"changed"});const o=s?cw(i,r):{valueChanged:false,newValue:void 0,oldValue:r.sourceValue};uw(t,e,o,i)}return}if(dw(t)){const t=l?.getCellEditor()?.getValidationErrors?.();const i=n?.getCellValidationModel();if(t?.length){i?.setCellValidation(e,{errorMessages:t})}else{i?.clearCellValidation(e)}}n?.setEdit(e,{state:"changed"});l?.setEditDetails();l?.refreshEditStyles(false,false);o?.refreshCell({force:true,suppressFlash:true});const a=n?.getEdit(e);if(a&&a.state==="changed"){const n=s?cw(i,a):{valueChanged:Jv(a)&&!i?.cancel,newValue:i?.cancel||a.editorState.isCancelAfterEnd?void 0:a?.editorValue??r?.pendingValue,oldValue:a?.sourceValue};uw(t,e,n,i)}}function cw(t,e){return t?.cancel?{valueChanged:false,oldValue:e.sourceValue,newValue:void 0,value:e.sourceValue}:{valueChanged:false,oldValue:e.sourceValue,newValue:e.pendingValue,value:e.sourceValue}}function uw(t,e,i,{silent:s,event:n}={}){const{editSvc:o,editModelSvc:r}=t;const l=r?.getEdit(e);const{editorState:a}=l||{};const{isCancelBeforeStart:h}=a||{};if(!s&&!h){o?.dispatchCellEvent(e,n,"cellEditingStopped",i);r?.setEdit(e,{editorState:{cellStoppedEditing:true}})}}function dw(t){const{gos:e,colModel:i}=t;const s=!!e.get("getFullRowEditValidationErrors");const n=i.getColumnDefs()?.filter((t=>t.editable)).some((({cellEditorParams:t})=>{const{minLength:e,maxLength:i,getValidationErrors:s,min:n,max:o}=t||{};return e!==void 0||i!==void 0||s!==void 0||n!==void 0||o!==void 0}));const o=t.gridApi.getCellEditorInstances().some((t=>t.getValidationElement||t.getValidationErrors));return n||s||o}function fw(t,e){if(!(e||dw(t))){return}const i=Zv(t);const s=new zv;const{ariaAnnounce:n,localeSvc:o,editModelSvc:r,gos:l}=t;const a=l.get("editType")==="fullRow";const h=Xt(o);const c=h("ariaValidationErrorPrefix","Cell Editor Validation");for(const t of i){const{ctrl:e,editor:i}=t;const{rowNode:o,column:r}=e;const l=i.getValidationErrors?.()??[];const a=i.getValidationElement?.(false)||!i.isPopup?.()&&e.eGui;if(a){const t=l!=null&&l.length>0;const e=t?l.join(". "):"";E(a,t);if(t){n.announceValue(`${c} ${l}`,"editorValidation")}if(a instanceof HTMLInputElement){a.setCustomValidity(e)}else{a.classList.toggle("invalid",t)}}if(l?.length>0){s.setCellValidation({rowNode:o,column:r},{errorMessages:l})}}ow(t,{persist:false});r?.setCellValidationModel(s);const u=new Set;for(const{ctrl:t}of i){u.add(t.rowCtrl)}if(a){const e=gw(t);r?.setRowValidationModel(e)}for(const t of u.values()){t.rowEditStyleFeature?.applyRowStyles();for(const e of t.getAllCellCtrls()){e.tooltipFeature?.refreshTooltip(true);e.editorTooltipFeature?.refreshTooltip(true);e.editStyleFeature?.applyCellStyles?.()}}}var gw=t=>{const e=new $v;const i=t.gos.get("getFullRowEditValidationErrors");const s=t.editModelSvc?.getEditMap();if(!s){return e}for(const t of s.keys()){const n=s.get(t);if(!n){continue}const o=[];const{rowIndex:r,rowPinned:l}=t;for(const t of n.keys()){const e=n.get(t);if(!e){continue}const{editorValue:i,pendingValue:s,sourceValue:a}=e;const h=i??(s===_v?void 0:s)??a;o.push({column:t,colId:t.getColId(),rowIndex:r,rowPinned:l,oldValue:a,newValue:h})}const a=i?.({editorsState:o})??[];if(a.length>0){e.setRowValidation({rowNode:t},{errorMessages:a})}}return e};function pw(t){fw(t,true);const e=t.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!e){return null}const i=[];e.forEach(((t,e)=>{t.forEach((({errorMessages:t},s)=>{i.push({column:s,rowIndex:e.rowIndex,rowPinned:e.rowPinned,messages:t??null})}))}));return i}function mw(t,e,i,{rowNode:s,column:n},o){const r=os(t.gos,{type:i,node:s,data:s.data,value:o,column:n,colDef:n.getColDef(),rowPinned:s.rowPinned,event:e,rowIndex:s.rowIndex});return r}function vw(t,e=false){if(t===mo.DELETE){return true}if(!e&&t===mo.BACKSPACE){return Po()}return false}var ww=class extends re{constructor(t,e,i,s){super();this.cellCtrl=t;this.rowNode=i;this.rowCtrl=s;this.beans=e}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(t){const e=t.key;switch(e){case mo.ENTER:this.onEnterKeyDown(t);break;case mo.F2:this.onF2KeyDown(t);break;case mo.ESCAPE:this.onEscapeKeyDown(t);break;case mo.TAB:this.onTabKeyDown(t);break;case mo.BACKSPACE:case mo.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case mo.DOWN:case mo.UP:case mo.RIGHT:case mo.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){const{cellCtrl:i,beans:s}=this;if(s.editSvc?.isEditing(i,{withOpenEditor:true})){return}if(t.shiftKey&&i.isRangeSelectionEnabled()){this.onShiftRangeSelect(t)}else{const n=i.getFocusedCellPosition();s.navigation?.navigateToNextCell(t,e,n,true)}t.preventDefault()}onShiftRangeSelect(t){const{rangeSvc:e,navigation:i}=this.beans;if(!e){return}const s=e.extendLatestRangeInDirection(t);if(!s){return}if(t.key===mo.LEFT||t.key===mo.RIGHT){i?.ensureColumnVisible(s.column)}else{i?.ensureRowVisible(s.rowIndex)}}onTabKeyDown(t){this.beans.navigation?.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){const{cellCtrl:i,beans:s,rowNode:n}=this;const{gos:o,rangeSvc:r,eventSvc:l,editSvc:a}=s;l.dispatchEvent({type:"keyShortcutChangedCellStart"});if(vw(t,o.get("enableCellEditingOnBackspace"))&&!a?.isEditing(i,{withOpenEditor:true})){if(r&&$i(o)){r.clearCellRangeCellValues({dispatchWrapperEvents:true,wrapperEventSource:"deleteKey"})}else if(i.isCellEditable()){const{column:t}=i;const e=this.beans.valueSvc.getDeleteValue(t,n);n.setDataValue(t,e,"cellClear")}}else if(!a?.isEditing(i,{withOpenEditor:true})){s.editSvc?.startEditing(i,{startedEdit:true,event:e})}l.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(t){const{cellCtrl:e,beans:i}=this;const{editSvc:s,navigation:n}=i;const o=s?.isEditing(e,{withOpenEditor:true});const r=e.rowNode;const l=s?.isRowEditing(r,{withOpenEditor:true});const a=e=>{const i=s?.startEditing(e,{startedEdit:true,event:t,source:"edit"});if(i){t.preventDefault()}};if(o||l){if(this.isCtrlEnter(t)){s?.applyBulkEdit(e,i?.rangeSvc?.getCellRanges()||[]);return}fw(i);if(s?.checkNavWithValidation(void 0,t)==="block-stop"){return}if(s?.isEditing(e,{withOpenEditor:true})){s?.stopEditing(e,{event:t,source:"edit"})}else if(l&&!e.isCellEditable()){s?.stopEditing({rowNode:r},{event:t,source:"edit"})}else{a(e)}}else if(i.gos.get("enterNavigatesVertically")){const i=t.shiftKey?mo.UP:mo.DOWN;n?.navigateToNextCell(null,i,e.cellPosition,false)}else{if(s?.hasValidationErrors()){return}if(s?.hasValidationErrors(e)){s.revertSingleCellEdit(e,true)}a(e)}}isCtrlEnter(t){return(t.ctrlKey||t.metaKey)&&t.key===mo.ENTER}onF2KeyDown(t){const{cellCtrl:e,beans:{editSvc:i}}=this;const s=i?.isEditing();if(s){fw(this.beans);if(i?.checkNavWithValidation(void 0,t)==="block-stop"){return}}i?.startEditing(e,{startedEdit:true,event:t})}onEscapeKeyDown(t){const{cellCtrl:e,beans:{editSvc:i}}=this;if(i?.checkNavWithValidation(e,t)==="block-stop"){i.revertSingleCellEdit(e)}i?.stopEditing(e,{event:t,cancel:true})}processCharacter(t){const e=t.target;const i=e!==this.eGui;const{beans:{editSvc:s},cellCtrl:n}=this;if(i){return}if(s?.isEditing(n,{withOpenEditor:true})){return}const o=t.key;if(o===mo.SPACE){this.onSpaceKeyDown(t)}else if(s?.isCellEditable(n,"ui")){if(s?.hasValidationErrors()&&!s?.hasValidationErrors(n)){return}s?.startEditing(n,{startedEdit:true,event:t,source:"api"});const e=n.editCompDetails;const i=!e?.params?.suppressPreventDefault;if(i){t.preventDefault()}}}onSpaceKeyDown(t){const{gos:e,editSvc:i}=this.beans;const{rowNode:s}=this.cellCtrl;if(!i?.isEditing(this.cellCtrl,{withOpenEditor:true})&&wi(e)){this.beans.selectionSvc?.handleSelectionEvent(t,s,"spaceKey")}t.preventDefault()}};var Cw=class extends re{constructor(t,e,i){super();this.cellCtrl=t;this.column=i;this.beans=e}onMouseEvent(t,e){if(eh(e)){return}switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.beans.touchSvc?.handleCellDoubleClick(this,t)){return}const{eventSvc:e,rangeSvc:i,editSvc:s,editModelSvc:n,frameworkOverrides:o,gos:r}=this.beans;const l=t.ctrlKey||t.metaKey;const{cellCtrl:a}=this;const{column:h,cellPosition:c,rowNode:u}=a;const d=vh(r,h,u,t);if(i&&l&&!d){if(i.getCellRangeCount(c)>1){i.intersectLastRange(true)}}const f=a.createEvent(t,"cellClicked");f.isEventHandlingSuppressed=d;e.dispatchEvent(f);const g=h.getColDef();if(g.onCellClicked){window.setTimeout((()=>{o.wrapOutgoing((()=>{g.onCellClicked(f)}))}),0)}if(d){return}if(n?.getState(a)!=="editing"){const e=s?.isEditing();const i=n?.getCellValidationModel().getCellValidationMap().size??0;const o=n?.getRowValidationModel().getRowValidationMap().size??0;if(e&&(i>0||o>0)){return}if(s?.shouldStartEditing(a,t)){s?.startEditing(a,{event:t})}else if(s?.shouldStopEditing(a,t)){if(this.beans.gos.get("editType")==="fullRow"){s?.stopEditing(a,{event:t,source:"edit"})}else{s?.stopEditing(void 0,{event:t,source:"edit"})}}}}onCellDoubleClicked(t){const{column:e,beans:i,cellCtrl:s}=this;const{eventSvc:n,frameworkOverrides:o,editSvc:r,editModelSvc:l,gos:a}=i;const h=vh(a,s.column,s.rowNode,t);const c=e.getColDef();const u=s.createEvent(t,"cellDoubleClicked");u.isEventHandlingSuppressed=h;n.dispatchEvent(u);if(typeof c.onCellDoubleClicked==="function"){window.setTimeout((()=>{o.wrapOutgoing((()=>{c.onCellDoubleClicked(u)}))}),0)}if(h){return}if(r?.shouldStartEditing(s,t)&&l?.getState(s)!=="editing"){const e=r?.isEditing();const i=l?.getCellValidationModel().getCellValidationMap().size??0;const n=l?.getRowValidationModel().getRowValidationMap().size??0;if(e&&(i>0||n>0)){return}r?.startEditing(s,{event:t})}}onMouseDown(t){const{ctrlKey:e,metaKey:i,shiftKey:s}=t;const n=t.target;const{cellCtrl:o,beans:r}=this;const{eventSvc:l,rangeSvc:a,rowNumbersSvc:h,focusSvc:c,gos:u,editSvc:d}=r;const{column:f,rowNode:g,cellPosition:p}=o;const m=vh(u,f,g,t);const v=()=>{const e=o.createEvent(t,"cellMouseDown");e.isEventHandlingSuppressed=m;l.dispatchEvent(e)};if(m){v();return}if(this.isRightClickInExistingRange(t)){return}const w=a&&!a.isEmpty();const C=this.containsWidget(n);const b=Ts(f);if(h&&b&&!h.handleMouseDownOnCell(p,t)){if(a){t.preventDefault()}t.stopImmediatePropagation();return}if(!s||!w){const e=d?.isEditing(o);const i=u.get("enableCellTextSelection");const s=i&&t.defaultPrevented;const r=(Fo()||s)&&!e&&!X(n)&&!C;o.focusCell(r,t)}if(s&&w&&!c.isCellFocused(p)){t.preventDefault();const e=c.getFocusedCell();if(e){const{column:i,rowIndex:s,rowPinned:n}=e;if(d?.isEditing(e)){d?.stopEditing(e)}c.setFocusedCell({column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:true,preventScrollOnBrowserFocus:true,sourceEvent:t})}}if(C){return}if(a){if(b){t.preventDefault()}const n=rs(r,t)&&b;if(s){a.extendLatestRangeToCell(p)}else if(!n){const t=e||i;a.setRangeToCell(p,t)}}v()}isRightClickInExistingRange(t){const{rangeSvc:e}=this.beans;if(e){const i=e.isCellInAnyRange(this.cellCtrl.cellPosition);const s=rs(this.beans,t);if(i&&s){return true}}return false}containsWidget(t){return st(t,"ag-selection-checkbox",3)||st(t,"ag-drag-handle",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t)){return}const{eventSvc:e,colHover:i}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOut"));i?.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t)){return}const{eventSvc:e,colHover:i}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOver"));i?.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget){return false}const e=this.cellCtrl.eGui;const i=e.contains(t.target);const s=e.contains(t.relatedTarget);return i&&s}};var bw=class extends re{constructor(t,e){super();this.cellCtrl=t;this.beans=e;this.column=t.column;this.rowNode=t.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode);this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement();this.eContent=this.cellCtrl.eGui;const t=this.cellCtrl.getCellSpan();if(!t){this.setupColSpan();this.setupRowSpan()}this.onLeftChanged();this.onWidthChanged();if(!t){this._legacyApplyRowSpan()}if(t){const e=this.refreshSpanHeight.bind(this,t);e();this.addManagedListeners(this.beans.eventSvc,{paginationChanged:e,recalculateRowBounds:e,pinnedHeightChanged:e})}}refreshSpanHeight(t){const e=t.getCellHeight();if(e!=null){this.eContent.style.height=`${e}px`}}onNewColumnsLoaded(){const t=this.column.getRowSpan(this.rowNode);if(this.rowSpan===t){return}this.rowSpan=t;this._legacyApplyRowSpan(true)}onDisplayColumnsChanged(){const t=this.getColSpanningList();if(!ws(this.colsSpanning,t)){this.colsSpanning=t;this.onWidthChanged();this.onLeftChanged()}}setupColSpan(){if(this.column.getColDef().colSpan==null){return}this.colsSpanning=this.getColSpanningList();this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)})}onWidthChanged(){if(!this.eContent){return}const t=this.getCellWidth();this.eContent.style.width=`${t}px`}getCellWidth(){if(!this.colsSpanning){return this.column.getActualWidth()}return this.colsSpanning.reduce(((t,e)=>t+e.getActualWidth()),0)}getColSpanningList(){const{column:t,rowNode:e}=this;const i=t.getColSpan(e);const n=[];if(i===1){n.push(t)}else{let e=t;const o=t.getPinned();for(let t=0;e&&t<i;t++){n.push(e);e=this.beans.visibleCols.getColAfter(e);if(!e||s(e)){break}if(o!==e.getPinned()){break}}}return n}onLeftChanged(){if(!this.eSetLeft){return}const t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=t+"px"}getCellLeft(){let t;if(this.beans.gos.get("enableRtl")&&this.colsSpanning){t=vs(this.colsSpanning)}else{t=this.column}return t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left"){return t}const{visibleCols:e}=this.beans;const i=e.getColsLeftWidth();if(this.column.getPinned()==="right"){const s=e.bodyWidth;return i+s+(t||0)}return i+(t||0)}_legacyApplyRowSpan(t){if(this.rowSpan===1&&!t){return}const e=xi(this.beans);const i=e*this.rowSpan;this.eContent.style.height=`${i}px`;this.eContent.style.zIndex="1"}destroy(){super.destroy()}};var yw="ag-cell";var Sw="ag-cell-auto-height";var xw="ag-cell-normal-height";var Rw="ag-cell-focus";var Fw="ag-cell-first-right-pinned";var kw="ag-cell-last-left-pinned";var Pw="ag-cell-not-inline-editing";var Dw="ag-cell-wrap-text";var Mw=0;var Tw=class extends re{constructor(t,e,i,s){super();this.column=t;this.rowNode=e;this.rowCtrl=s;this.rangeFeature=void 0;this.rowResizeFeature=void 0;this.positionFeature=void 0;this.customStyleFeature=void 0;this.editStyleFeature=void 0;this.mouseListener=void 0;this.keyboardListener=void 0;this.suppressRefreshCell=false;this.onCompAttachedFuncs=[];this.onEditorAttachedFuncs=[];this.focusEventWhileNotReady=null;this.hasBeenFocused=false;this.hasEdit=false;this.tooltipFeature=void 0;this.editorTooltipFeature=void 0;this.beans=i;this.gos=i.gos;this.editSvc=i.editSvc;this.hasEdit=!!i.editSvc;const{colId:n}=t;this.instanceId=n+"-"+Mw++;this.createCellPosition();this.updateAndFormatValue(false)}addFeatures(){const{beans:t}=this;this.positionFeature=new bw(this,t);this.customStyleFeature=t.cellStyles?.createCellCustomStyleFeature(this,t);this.editStyleFeature=t.editSvc?.createCellStyleFeature(this,t);this.mouseListener=new Cw(this,t,this.column);this.keyboardListener=new ww(this,t,this.rowNode,this.rowCtrl);this.enableTooltipFeature();const{rangeSvc:e}=t;const i=e&&$i(t.gos);if(i){this.rangeFeature=e.createCellRangeFeature(t,this)}if(Ts(this.column)){this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(t,this)}}isCellSpanning(){return false}getCellSpan(){return void 0}removeFeatures(){const t=this.beans.context;this.positionFeature=t.destroyBean(this.positionFeature);this.editorTooltipFeature=t.destroyBean(this.editorTooltipFeature);this.customStyleFeature=t.destroyBean(this.customStyleFeature);this.editStyleFeature=t.destroyBean(this.editStyleFeature);this.mouseListener=t.destroyBean(this.mouseListener);this.keyboardListener=t.destroyBean(this.keyboardListener);this.rangeFeature=t.destroyBean(this.rangeFeature);this.rowResizeFeature=t.destroyBean(this.rowResizeFeature);this.disableTooltipFeature()}enableTooltipFeature(t,e){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,t,e)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(t){if(this.editorTooltipFeature){this.disableEditorTooltipFeature()}this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,t);fw(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(t,e,i,s,n,o,r){this.comp=t;this.eGui=e;this.printLayout=n;r??(r=this);this.addDomData(r);this.addFeatures();r.addDestroyFunc((()=>this.removeFeatures()));this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus"));this.setupFocus();this.applyStaticCssClasses();this.setWrapText();this.onFirstRightPinnedChanged();this.onLastLeftPinnedChanged();this.onColumnHover();this.setupControlComps();this.setupAutoHeight(s,r);this.refreshFirstAndLastStyles();this.refreshAriaColIndex();this.positionFeature?.init();this.customStyleFeature?.setComp(t);this.editStyleFeature?.setComp(t);this.tooltipFeature?.refreshTooltip();this.keyboardListener?.init();this.rangeFeature?.setComp(t);this.rowResizeFeature?.refreshRowResizer();if(o&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:true})){this.editSvc?.startEditing(this,{startedEdit:false,source:"api",silent:true,continueEditing:true})}else{this.showValue(false,true)}if(this.onCompAttachedFuncs.length){for(const t of this.onCompAttachedFuncs){t()}this.onCompAttachedFuncs=[]}}setupAutoHeight(t,e){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,t,e)??false}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:t,column:e}=this;const{userCompFactory:i,ctrlsSvc:s,eventSvc:n}=t;const o=e.getColDef();const r=this.createCellRendererParams();r.deferRender=true;const l=so(i,o,r);if(s.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let t;const e=new Fn((e=>{t=e}));const[i]=this.addManagedListeners(n,{bodyScrollEnd:()=>{t();i()}});return{loadingComp:l,onReady:e}}return{loadingComp:l,onReady:Fn.resolve()}}showValue(t,e){const{beans:i,column:s,rowNode:n,rangeFeature:o}=this;const{userCompFactory:r}=i;let l=this.getValueToDisplay();let a;const h=n.stub&&n.groupData?.[s.getId()]==null;const c=s.getColDef();if(h||this.isCellRenderer()){const t=this.createCellRendererParams();if(!h||Ts(s)){a=io(r,c,t)}else{a=so(r,c,t)}}if(!a&&!h&&i.findSvc?.isMatch(n,s)){const t=this.createCellRendererParams();a=io(r,{...s.getColDef(),cellRenderer:"agFindCellRenderer"},t)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(n,{checkSiblings:true})){const t=this.editSvc.prepDetailsDuringBatch(this,{compDetails:a,valueToDisplay:l});if(t){if(t.compDetails){a=t.compDetails}else if(t.valueToDisplay){l=t.valueToDisplay}}}this.comp.setRenderDetails(a,l,t);this.customRowDragComp?.refreshVisibility();if(!e&&o){Et(i,(()=>o?.refreshHandle()))}this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t),true);this.includeRowDrag=this.isIncludeControl(t.rowDrag);this.includeDndSource=this.isIncludeControl(t.dndSource);this.comp.setIncludeSelection(this.includeSelection);this.comp.setIncludeDndSource(this.includeDndSource);this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const t="ag-cell-value";const e=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let i="";if(e){i=" ag-allow-overflow"}return`${t}${i}`}isIncludeControl(t,e=false){const i=this.rowNode.rowPinned==null;return(i||e&&Wu(this.rowNode))&&!!t}isCheckboxSelection(t){const{rowSelection:e,groupDisplayType:i}=this.beans.gridOptions;const s=Vi(e);const n=Ms(this.column);if(i==="custom"&&s!=="selectionColumn"&&n){return false}return t.checkboxSelection||n&&typeof e==="object"&&Bi(e)}refreshShouldDestroy(){const t=this.column.getColDef();const e=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t),true);const i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag);const s=this.includeDndSource!=this.isIncludeControl(t.dndSource);const n=this.isAutoHeight!=this.column.isAutoHeight();return e||i||s||n}onPopupEditorClosed(){const{editSvc:t}=this.beans;if(!t?.isEditing(this,{withOpenEditor:true})){return}t?.stopEditing(this,{source:t?.isBatchEditing()?"ui":"api"})}stopEditing(t=false){const{editSvc:e}=this.beans;return e?.stopEditing(this,{cancel:t,source:e?.isBatchEditing()?"ui":"api"})??false}createCellRendererParams(){const{value:t,valueFormatted:e,column:i,rowNode:s,comp:n,eGui:o,beans:{valueSvc:r,gos:l,editSvc:a}}=this;const h=os(l,{value:t,valueFormatted:e,getValue:()=>r.getValueForDisplay(i,s).value,setValue:t=>a?.setDataValue({rowNode:s,column:i},t)||s.setDataValue(i,t),formatValue:this.formatValue.bind(this),data:s.data,node:s,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:n.getParentOfValue(),registerRowDragger:(t,e,i,s)=>this.registerRowDragger(t,e,s),setTooltip:(t,e)=>{l.assertModuleRegistered("Tooltip",3);if(this.tooltipFeature){this.disableTooltipFeature()}this.enableTooltipFeature(t,e);this.tooltipFeature?.refreshTooltip()}});return h}onCellChanged(t){const e=t.column===this.column;if(e){this.refreshCell({})}}refreshOrDestroyCell(t){if(this.refreshShouldDestroy()){this.rowCtrl?.recreateCell(this)}else{this.refreshCell(t)}if(this.hasEdit&&this.editCompDetails){const{editSvc:t,comp:e}=this;if(!e?.getCellEditor()&&t.isEditing(this,{withOpenEditor:true})){t.startEditing(this,{startedEdit:false,source:"api",silent:true})}}}refreshCell({force:t,suppressFlash:e,newData:i}={}){const{editStyleFeature:s,customStyleFeature:n,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:r,filterManager:l},column:a,comp:h,suppressRefreshCell:c,tooltipFeature:u}=this;if(c){return}const{field:d,valueGetter:f,showRowGroup:g,enableCellChangeFlash:p}=a.getColDef();const m=d==null&&f==null&&g==null;const v=t||m||i;const w=!!h;const C=this.updateAndFormatValue(w);const b=v||C;if(!w){return}if(b){this.showValue(!!i,false);const t=l?.isSuppressFlashingCellsBecauseFiltering();const a=!e&&!t&&p;if(a){r?.flashCell(this)}s?.applyCellStyles?.();n?.applyUserStyles();n?.applyClassesFromColDef();o?.applyRowStyles()}u?.refreshTooltip();n?.applyCellClassRules()}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueSvc.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const e=this.value;const i=this.valueFormatted;const{value:s,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,true);this.value=s;this.valueFormatted=n;if(t){return!this.valuesAreEqual(e,this.value)||this.valueFormatted!=i}return true}valuesAreEqual(t,e){const i=this.column.getColDef();return i.equals?i.equals(t,e):t===e}addDomData(t){const e=this.eGui;ki(this.beans.gos,e,yh,this);t.addDestroyFunc((()=>ki(this.beans.gos,e,yh,null)))}createEvent(t,e){const{rowNode:i,column:s,value:n,beans:o}=this;return mw(o,t,e,{rowNode:i,column:s},n)}processCharacter(t){this.keyboardListener?.processCharacter(t)}onKeyDown(t){this.keyboardListener?.onKeyDown(t)}onMouseEvent(t,e){this.mouseListener?.onMouseEvent(t,e)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){if(!this.comp){return}this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){if(!this.eGui){return}this.refreshAriaColIndex();this.refreshFirstAndLastStyles()}refreshFirstAndLastStyles(){const{comp:t,column:e,beans:i}=this;xc(t,e,i.visibleCols)}refreshAriaColIndex(){const t=this.beans.visibleCols.getAriaColIndex(this.column);$(this.eGui,t)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:t,rowPinned:e}=this.cellPosition;return{rowIndex:t,rowPinned:e}}updateRangeBordersIfRangeCount(){if(!this.comp){return}this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){if(!this.comp){return}this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(t=false,e){const i=this.editSvc?.allowedFocusTargetOnValidation(this);if(i&&i!==this){return}this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:t,sourceEvent:e})}restoreFocus(t=false){const{beans:{editSvc:e,focusSvc:i},comp:s}=this;if(!s||e?.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus()){return}const n=()=>{if(!this.isAlive()){return}const t=s.getFocusableElement();if(this.isCellFocused()){t.focus({preventScroll:true})}};if(t){setTimeout(n,0);return}n()}onRowIndexChanged(){this.createCellPosition();this.onCellFocused();this.restoreFocus();this.rangeFeature?.onCellSelectionChanged();this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(t){const e=this.eGui;if(!e){return}if(Ts(this.column)){t=true}Mt(e,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.comp){return}const t=this.column.isFirstRightPinned();this.comp.toggleCss(Fw,t)}onLastLeftPinnedChanged(){if(!this.comp){return}const t=this.column.isLastLeftPinned();this.comp.toggleCss(kw,t)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const t=this.checkCellFocused();this.hasBeenFocused||(this.hasBeenFocused=t);return t}setupFocus(){this.restoreFocus(true);this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(t){const{beans:e}=this;if(Mc(e)){return}if(!this.comp){if(t){this.focusEventWhileNotReady=t}return}const i=this.isCellFocused();const s=e.editSvc?.isEditing(this)??false;this.comp.toggleCss(Rw,i);if(i&&t?.forceBrowserFocus){let e=this.comp.getFocusableElement();if(s){const t=sr(e,null,true);if(t.length){e=t[0]}}e.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}if(i&&t){this.rowCtrl.announceDescription()}}createCellPosition(){const{rowIndex:t,rowPinned:i}=this.rowNode;this.cellPosition={rowIndex:t,rowPinned:e(i),column:this.column}}applyStaticCssClasses(){const{comp:t}=this;t.toggleCss(yw,true);t.toggleCss(Pw,true);const e=this.column.isAutoHeight()==true;t.toggleCss(Sw,e);t.toggleCss(xw,!e)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){if(!this.comp){return}if(this.column.isTooltipEnabled()){this.disableTooltipFeature();this.enableTooltipFeature()}else{this.disableTooltipFeature()}this.setWrapText();if(this.editSvc?.isEditing(this)){this.editSvc?.handleColDefChanged(this)}else{this.refreshOrDestroyCell({force:true,suppressFlash:true})}}setWrapText(){const t=this.column.getColDef().wrapText==true;this.comp.toggleCss(Dw,t)}dispatchCellContextMenuEvent(t){const e=this.column.getColDef();const i=this.createEvent(t,"cellContextMenu");const{beans:s}=this;s.eventSvc.dispatchEvent(i);if(e.onCellContextMenu){window.setTimeout((()=>{s.frameworkOverrides.wrapOutgoing((()=>{e.onCellContextMenu(i)}))}),0)}}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[];this.onEditorAttachedFuncs=[];if(this.isCellFocused()&&this.hasBrowserFocus()){this.beans.focusSvc.attemptToRecoverFocus()}super.destroy()}hasBrowserFocus(){return this.eGui?.contains(d(this.beans))??false}createSelectionCheckbox(){const t=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(!t){return void 0}this.beans.context.createBean(t);t.init({rowNode:this.rowNode,column:this.column});return t}createDndSource(){const t=this.beans.registry.createDynamicBean("dndSourceComp",false,this.rowNode,this.column,this.eGui);if(t){this.beans.context.createBean(t)}return t}registerRowDragger(t,e,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,e);return}const s=this.createRowDragComp(t,e,i);if(s){this.customRowDragComp=s;this.addDestroyFunc((()=>{this.beans.context.destroyBean(s);this.customRowDragComp=null}));s.refreshVisibility()}}createRowDragComp(t,e,i){const s=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,(()=>this.value),t,e,i);if(!s){return void 0}this.beans.context.createBean(s);return s}cellEditorAttached(){for(const t of this.onEditorAttachedFuncs){t()}this.onEditorAttachedFuncs=[]}setFocusedCellPosition(t){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function Ew(t,e,i,s,n,o){if(i==null&&e==null){return}const r={};const l={};const a=(t,e)=>{for(const i of t.split(" ")){if(i.trim()==""){continue}e(i)}};if(i){const e=Object.keys(i);for(let n=0;n<e.length;n++){const o=e[n];const h=i[o];let c;if(typeof h==="string"){c=t?t.evaluate(h,s):true}else if(typeof h==="function"){c=h(s)}a(o,(t=>{c?r[t]=true:l[t]=true}))}}if(e&&o){for(const t of Object.keys(e)){a(t,(t=>{if(!r[t]){l[t]=true}}))}}if(o){Object.keys(l).forEach(o)}Object.keys(r).forEach(n)}function Aw(t){if(t.group){return t.level}const e=t.parent;return e?e.level+1:0}var Iw=class extends re{constructor(){super(...arguments);this.beanName="rowStyleSvc"}processClassesFromGridOptions(t,e){const i=this.gos;const s=e=>{if(typeof e==="string"){t.push(e)}else if(Array.isArray(e)){for(const i of e){t.push(i)}}};const n=i.get("rowClass");if(n){s(n)}const o=i.getCallback("getRowClass");if(o){const t={data:e.data,node:e,rowIndex:e.rowIndex};const i=o(t);s(i)}}preProcessRowClassRules(t,e){this.processRowClassRules(e,(e=>{t.push(e)}),(()=>{}))}processRowClassRules(t,e,i){const{gos:s,expressionSvc:n}=this.beans;const o=os(s,{data:t.data,node:t,rowIndex:t.rowIndex});Ew(n,void 0,s.get("rowClassRules"),o,e,i)}processStylesFromGridOptions(t){const e=this.gos;const i=e.get("rowStyle");const s=e.getCallback("getRowStyle");let n;if(s){const e={data:t.data,node:t,rowIndex:t.rowIndex};n=s(e)}if(n||i){return Object.assign({},i,n)}return void 0}};var Hw=0;var Ow=class extends re{constructor(t,e,i,s,n){super();this.rowNode=t;this.useAnimationFrameForCreate=s;this.printLayout=n;this.allRowGuis=[];this.active=true;this.centerCellCtrls={list:[],map:{}};this.leftCellCtrls={list:[],map:{}};this.rightCellCtrls={list:[],map:{}};this.slideInAnimation={left:false,center:false,right:false,fullWidth:false};this.fadeInAnimation={left:false,center:false,right:false,fullWidth:false};this.rowDragComps=[];this.lastMouseDownOnDragger=false;this.emptyStyle={};this.updateColumnListsPending=false;this.rowId=null;this.businessKey=null;this.beans=e;this.gos=e.gos;this.paginationPage=e.pagination?.getCurrentPage()??0;this.suppressRowTransform=this.gos.get("suppressRowTransform");this.instanceId=t.id+"-"+Hw++;this.rowId=c(t.id);this.initRowBusinessKey();this.rowFocused=e.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);this.rowLevel=Aw(this.rowNode);this.setRowType();this.setAnimateFlags(i);this.rowStyles=this.processStylesFromGridOptions();this.rowEditStyleFeature=e.editSvc?.createRowStyleFeature(this,e);this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode");this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!=="function"){return}const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=c(t)}updateGui(t,e){if(t==="left"){this.leftGui=e}else if(t==="right"){this.rightGui=e}else if(t==="fullWidth"){this.fullWidthGui=e}else{this.centerGui=e}}setComp(t,e,i,s){const{context:n,focusSvc:o}=this.beans;s=mn(this,n,s);const r={rowComp:t,element:e,containerType:i,compBean:s};this.allRowGuis.push(r);this.updateGui(i,r);this.initialiseRowComp(r);const l=this.rowNode;const a=this.rowType==="FullWidthLoading"||l.stub;const h=!l.data&&this.beans.rowModel.getType()==="infinite";if(!a&&!h&&!l.rowPinned){this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}const c=this.fullWidthGui?.element;if(c){const t=this.beans.editSvc?.isEditing(this);if(!t&&o.isRowFocused(l.rowIndex,l.rowPinned)&&o.shouldTakeFocus()){setTimeout((()=>c.focus({preventScroll:true})),0)}}}unsetComp(t){this.allRowGuis=this.allRowGuis.filter((e=>e.containerType!==t));this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const e=t?"none":"";for(const t of this.allRowGuis){t.element.style.display=e}}initialiseRowComp(t){const e=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus"));this.listenOnDomOrder(t);this.onRowHeightChanged(t);this.updateRowIndexes(t);this.setFocusedClasses(t);this.setStylesFromGridOptions(false,t);if(wi(e)&&this.rowNode.selectable){this.onRowSelected(t)}this.updateColumnLists(!this.useAnimationFrameForCreate);const i=t.rowComp;const s=this.getInitialRowClasses(t.containerType);for(const t of s){i.toggleCss(t,true)}this.executeSlideAndFadeAnimations(t);if(this.rowNode.group){H(t.element,this.rowNode.expanded==true)}this.setRowCompRowId(i);this.setRowCompRowBusinessKey(i);ki(e,t.element,xh,this);t.compBean.addDestroyFunc((()=>ki(e,t.element,xh,null)));if(this.useAnimationFrameForCreate){this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"p2",false)}else{this.addHoverFunctionality(t)}if(this.isFullWidth()){this.setupFullWidth(t)}if(e.get("rowDragEntireRow")){this.addRowDraggerToRow(t)}if(this.useAnimationFrameForCreate){this.beans.animationFrameSvc.addDestroyTask((()=>{if(!this.isAlive()){return}t.rowComp.toggleCss("ag-after-created",true)}))}this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){if(this.businessKey==null){return}t.setRowBusinessKey(this.businessKey)}setRowCompRowId(t){const e=c(this.rowNode.id);this.rowId=e;if(e==null){return}t.setRowId(e)}executeSlideAndFadeAnimations(t){const{containerType:e}=t;const i=this.slideInAnimation[e];if(i){ue((()=>{this.onTopChanged()}));this.slideInAnimation[e]=false}const s=this.fadeInAnimation[e];if(s){ue((()=>{t.rowComp.toggleCss("ag-opacity-zero",false)}));this.fadeInAnimation[e]=false}}addRowDraggerToRow(t){const e=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,t.element);if(!e){return}const i=this.createBean(e,this.beans.context);this.rowDragComps.push(i);t.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((t=>t!==i));this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context);this.destroyBean(i,this.beans.context)}))}setupFullWidth(t){const e=this.getPinnedForContainer(t.containerType);const i=this.createFullWidthCompDetails(t.element,e);t.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){if(this.gos.get("embedFullWidthRows")){return this.allRowGuis.map((t=>t?.rowComp?.getFullWidthCellRenderer()))}return[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady()){return}const e={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(e)}areAllContainersReady(){const{leftGui:t,centerGui:e,rightGui:i,beans:{visibleCols:s}}=this;const n=!!t||!s.isPinningLeft();const o=!!e;const r=!!i||!s.isPinningRight();return n&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail){return true}const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):false}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents");const e=this.isNodeFullWidthCell();const i=this.gos.get("masterDetail")&&this.rowNode.detail;const s=this.beans.colModel.isPivotMode();const n=Ii(this.gos,this.rowNode,s);if(t){this.rowType="FullWidthLoading"}else if(i){this.rowType="FullWidthDetail"}else if(e){this.rowType="FullWidth"}else if(n){this.rowType="FullWidthGroup"}else{this.rowType="Normal"}}updateColumnLists(t=false,e=false){if(this.isFullWidth()){return}const{animationFrameSvc:i}=this.beans;const s=!i?.active||t||this.printLayout;if(s){this.updateColumnListsImpl(e);return}if(this.updateColumnListsPending){return}i.createTask((()=>{if(!this.active){return}this.updateColumnListsImpl(true)}),this.rowNode.rowIndex,"p1",false);this.updateColumnListsPending=true}getNewCellCtrl(t){const e=this.beans.rowSpanSvc?.isCellSpanning(t,this.rowNode);if(e){return void 0}return new Tw(t,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(t){return!this.beans.rowSpanSvc?.isCellSpanning(t.column,this.rowNode)}createCellCtrls(t,e,i=null){const s={list:[],map:{}};const n=(t,e,i)=>{if(i!=null){s.list.splice(i,0,e)}else{s.list.push(e)}s.map[t]=e};const o=[];for(const i of e){const e=i.getInstanceId();let s=t.map[e];if(s&&!this.isCorrectCtrlForSpan(s)){s.destroy();s=void 0}if(!s){s=this.getNewCellCtrl(i)}if(!s){continue}n(e,s)}for(const e of t.list){const t=e.column.getInstanceId();const n=s.map[t]!=null;if(n){continue}const r=!this.isCellEligibleToBeRemoved(e,i);if(r){o.push([t,e])}else{e.destroy()}}if(o.length){for(const[t,e]of o){const i=s.list.findIndex((t=>t.column.getLeft()>e.column.getLeft()));const o=i===-1?void 0:Math.max(i-1,0);n(t,e,o)}}const{focusSvc:r,visibleCols:l}=this.beans;const a=r.getFocusedCell();if(a&&a.column.getPinned()==i){const t=a.column.getInstanceId();const e=s.map[t];if(!e&&l.allCols.includes(a.column)){const e=this.createFocusedCellCtrl();if(e){const i=s.list.findIndex((t=>t.column.getLeft()>e.column.getLeft()));const o=i===-1?void 0:Math.max(i-1,0);n(t,e,o)}}}return s}createFocusedCellCtrl(){const{focusSvc:t,rowSpanSvc:e}=this.beans;const i=t.getFocusedCell();if(!i){return void 0}const s=e?.getCellSpan(i.column,this.rowNode);if(s){if(s.firstNode!==this.rowNode||!s.doesSpanContain(i)){return void 0}}else if(!t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)){return void 0}return this.getNewCellCtrl(i.column)}updateColumnListsImpl(t){this.updateColumnListsPending=false;this.createAllCellCtrls();this.setCellCtrls(t)}setCellCtrls(t){for(const e of this.allRowGuis){const i=this.getCellCtrlsForContainer(e.containerType);e.rowComp.setCellCtrls(i,t)}}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.colViewport;const e=this.beans.visibleCols;if(this.printLayout){this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.allCols);this.leftCellCtrls={list:[],map:{}};this.rightCellCtrls={list:[],map:{}}}else{const i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=e.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=e.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(t,e){const i=true;const s=false;const{column:n}=t;if(n.getPinned()!=e){return i}if(!this.isCorrectCtrlForSpan(t)){return i}const{visibleCols:o,editSvc:r}=this.beans;const l=r?.isEditing(t);const a=t.isCellFocused();const h=l||a;if(h){const t=o.allCols;const e=t.indexOf(n)>=0;return e?s:i}return i}getDomOrder(){const t=this.gos.get("ensureDomOrder");return t||vi(this.gos,"print")}listenOnDomOrder(t){const e=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],e)}setAnimateFlags(t){if(this.rowNode.sticky||!t){return}const e=i(this.rowNode.oldRowTop);const{visibleCols:s}=this.beans;const n=s.isPinningLeft();const o=s.isPinningRight();if(e){const{slideInAnimation:t}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){t.fullWidth=true;return}t.center=true;t.left=n;t.right=o}else{const{fadeInAnimation:t}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){t.fullWidth=true;return}t.center=true;t.left=n;t.right=o}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(t,e)=>{if(!t){return true}return t.rowComp.refreshFullWidth((()=>{const i=this.createFullWidthCompDetails(t.element,e);return i.params}))};const e=t(this.fullWidthGui,null);const i=t(this.centerGui,null);const s=t(this.leftGui,"left");const n=t(this.rightGui,"right");const o=e&&i&&s&&n;return o}addListeners(){const{beans:t,gos:e,rowNode:i}=this;const{expansionSvc:s,eventSvc:n,context:o,rowSpanSvc:r}=t;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...s?.getRowExpandedListeners(this)??{}});if(i.detail){this.addManagedListeners(i.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)})}this.addManagedListeners(i,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)});this.addManagedListeners(n,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()});if(r){this.addManagedListeners(r,{spannedCellsUpdated:({pinned:t})=>{if(t&&!i.rowPinned){return}this.updateColumnLists()}})}this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o);this.tooltipFeature=this.destroyBean(this.tooltipFeature,o);this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}));this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this));this.addManagedPropertyListener("rowDragEntireRow",(()=>{const t=e.get("rowDragEntireRow");if(t){for(const t of this.allRowGuis){this.addRowDraggerToRow(t)}return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}));this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const t of this.getAllCellCtrls()){t.onRowIndexChanged()}},cellChanged:t=>{for(const e of this.getAllCellCtrls()){e.onCellChanged(t)}}})}onRowPinned(){for(const t of this.allRowGuis){t.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}}onRowNodeDataChanged(t){this.refreshRow({suppressFlash:!t.update,newData:!t.update})}refreshRow(t){const e=this.isFullWidth()!==!!this.isNodeFullWidthCell();if(e){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){const t=this.refreshFullWidth();if(!t){this.beans.rowRenderer.redrawRow(this.rowNode)}return}for(const e of this.getAllCellCtrls()){e.refreshCell(t)}for(const t of this.allRowGuis){this.setRowCompRowId(t.rowComp);this.updateRowBusinessKey();this.setRowCompRowBusinessKey(t.rowComp)}this.onRowSelected();this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(true);this.postProcessClassesFromGridOptions();this.postProcessRowClassRules();this.rowEditStyleFeature?.applyRowStyles();this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.beans.rowDropHighlightSvc;const e=t?.row===this.rowNode?t.position:"none";const i=e==="above";const s=e==="inside";const n=e==="below";const o=this.gos.get("treeData");const r=o&&(n||i);const l=this.rowNode.uiLevel.toString();for(const t of this.allRowGuis){const e=t.rowComp;e.toggleCss("ag-row-highlight-above",i);e.toggleCss("ag-row-highlight-inside",s);e.toggleCss("ag-row-highlight-below",n);e.toggleCss("ag-row-highlight-indent",r);if(r){t.element.style.setProperty("--ag-row-highlight-level",l)}else{t.element.style.removeProperty("--ag-row-highlight-level")}}}postProcessRowDragging(){const t=this.rowNode.dragging;for(const e of this.allRowGuis){e.rowComp.toggleCss("ag-row-dragging",t)}}onDisplayedColumnsChanged(){this.updateColumnLists(true);this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(false,true)}getRowPosition(){return{rowPinned:e(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const e=this.findFullWidthInfoForEvent(t);if(!e){return}const{rowGui:i,column:s}=e;const n=i.element;const o=n===t.target;if(!o){return}const r=this.rowNode;const{focusSvc:l,navigation:a}=this.beans;const h=l.getFocusedCell();const c={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:h?.column??s};a?.navigateToNextCell(t,t.key,c,true);t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||eh(t)){return}const e=this.allRowGuis.find((e=>e.element.contains(t.target)));const i=e?e.element:null;const s=i===t.target;const n=d(this.beans);let o=false;if(i&&n){o=i.contains(n)&&n.classList.contains("ag-cell")}let r=null;if(!s&&!o){r=or(this.beans,i,false,t.shiftKey)}if(this.isFullWidth()&&s||!r){this.beans.navigation?.onTabKeyDown(this,t)}}getFullWidthElement(){if(this.fullWidthGui){return this.fullWidthGui.element}return null}getRowYPosition(){const t=this.allRowGuis.find((t=>pt(t.element)))?.element;if(t){return t.getBoundingClientRect().top}return 0}onSuppressCellFocusChanged(t){const e=this.isFullWidth()&&t?void 0:this.gos.get("tabIndex");for(const t of this.allRowGuis){Mt(t.element,"tabindex",e)}}onFullWidthRowFocused(t){const e=this.rowNode;const i=!t?false:this.isFullWidth()&&t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned;let s;if(this.fullWidthGui){s=this.fullWidthGui.element}else{const e=this.beans.colModel.getCol(t?.column);const i=e?.pinned;if(i){s=i==="right"?this.rightGui?.element:this.leftGui?.element}else{s=this.centerGui?.element}}if(!s){return}s.classList.toggle("ag-full-width-focus",i);if(i&&t?.forceBrowserFocus){s.focus({preventScroll:true})}}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t);this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t);this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t);t.destroy();this.updateColumnLists()}removeCellCtrl(t,e){const i={list:[],map:{}};for(const s of t.list){if(s===e){continue}i.list.push(s);i.map[s.column.getInstanceId()]=s}return i}onMouseEvent(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"touchstart":case"mousedown":this.onRowMouseDown(e);break}}createRowEvent(t,e){const{rowNode:i}=this;return os(this.gos,{type:t,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:e})}createRowEventWithSource(t,e){const i=this.createRowEvent(t,e);i.source=this;return i}onRowDblClick(t){if(eh(t)){return}const e=this.createRowEventWithSource("rowDoubleClicked",t);e.isEventHandlingSuppressed=this.isSuppressMouseEvent(t);this.beans.eventSvc.dispatchEvent(e)}findFullWidthInfoForEvent(t){if(!t){return}const e=this.findFullWidthRowGui(t.target);const i=this.getColumnForFullWidth(e);if(!e||!i){return}return{rowGui:e,column:i}}findFullWidthRowGui(t){return this.allRowGuis.find((e=>e.element.contains(t)))}getColumnForFullWidth(t){const{visibleCols:e}=this.beans;switch(t?.containerType){case"center":return e.centerCols[0];case"left":return e.leftCols[0];case"right":return e.rightCols[0];default:return e.allCols[0]}}onRowMouseDown(t){this.lastMouseDownOnDragger=st(t.target,"ag-row-drag",3);if(!this.isFullWidth()||this.isSuppressMouseEvent(t)){return}const{rangeSvc:e,focusSvc:i}=this.beans;e?.removeAllCellRanges();const s=this.findFullWidthInfoForEvent(t);if(!s){return}const{rowGui:n,column:o}=s;const r=n.element;const l=t.target;const a=this.rowNode;let h=t.defaultPrevented||Fo();if(r&&r.contains(l)&&X(l)){h=false}i.setFocusedCell({rowIndex:a.rowIndex,column:o,rowPinned:a.rowPinned,forceBrowserFocus:h})}isSuppressMouseEvent(t){const{gos:e,rowNode:i}=this;if(this.isFullWidth()){const s=this.findFullWidthRowGui(t.target);return wh(e,s?.rowComp.getFullWidthCellRendererParams(),i,t)}const s=Sh(e,t.target);return s!=null&&vh(e,s.column,i,t)}onRowClick(t){const e=eh(t)||this.lastMouseDownOnDragger;if(e){return}const i=this.isSuppressMouseEvent(t);const{eventSvc:s,selectionSvc:n}=this.beans;const o=this.createRowEventWithSource("rowClicked",t);o.isEventHandlingSuppressed=i;s.dispatchEvent(o);if(i){return}n?.handleSelectionEvent(t,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"){return}this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,t)}createFullWidthCompDetails(t,e){const{gos:i,rowNode:s}=this;const n=os(i,{fullWidth:true,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(t,e,i,s)=>this.addFullWidthRowDragging(t,e,i,s),setTooltip:(t,e)=>{i.assertModuleRegistered("Tooltip",3);this.setupFullWidthRowTooltip(t,e)}});const o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return eo(o,n);case"FullWidthGroup":{const{value:t,valueFormatted:e}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,true);n.value=t;n.valueFormatted=e;return to(o,n)}case"FullWidthLoading":return Xn(o,n);default:return Jn(o,n)}}setupFullWidthRowTooltip(t,e){if(!this.fullWidthGui){return}this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,t,e)}addFullWidthRowDragging(t,e,i="",s){const{rowDragSvc:n,context:o}=this.beans;if(!n||!this.isFullWidth()){return}const r=n.createRowDragComp((()=>i),this.rowNode,void 0,t,e,s);this.createBean(r,o);this.addDestroyFunc((()=>{this.destroyBean(r,o)}))}onUiLevelChanged(){const t=Aw(this.rowNode);if(this.rowLevel!=t){const e="ag-row-level-"+t;const i="ag-row-level-"+this.rowLevel;for(const t of this.allRowGuis){t.rowComp.toggleCss(e,true);t.rowComp.toggleCss(i,false)}}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage();const e=this.isLastRowOnPage();if(this.firstRowOnPage!==t){this.firstRowOnPage=t;for(const e of this.allRowGuis){e.rowComp.toggleCss("ag-row-first",t)}}if(this.lastRowOnPage!==e){this.lastRowOnPage=e;for(const t of this.allRowGuis){t.rowComp.toggleCss("ag-row-last",e)}}}getAllCellCtrls(){if(this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0){return this.centerCellCtrls.list}const t=[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list];return t}postProcessClassesFromGridOptions(){const t=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(t,this.rowNode);if(!t.length){return}for(const e of t){for(const t of this.allRowGuis){t.rowComp.toggleCss(e,true)}}}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,(t=>{for(const e of this.allRowGuis){e.rowComp.toggleCss(t,true)}}),(t=>{for(const e of this.allRowGuis){e.rowComp.toggleCss(t,false)}}))}setStylesFromGridOptions(t,e){if(t){this.rowStyles=this.processStylesFromGridOptions()}this.forEachGui(e,(t=>t.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(t){if(t==="left"||t==="right"){return t}return null}getInitialRowClasses(t){const e=this.getPinnedForContainer(t);const i=this.isFullWidth();const{rowNode:s,beans:n}=this;const o=[];o.push("ag-row");o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus");if(this.fadeInAnimation[t]){o.push("ag-opacity-zero")}o.push(s.rowIndex%2===0?"ag-row-even":"ag-row-odd");if(s.isRowPinned()){o.push("ag-row-pinned");if(n.pinnedRowModel?.isManual()){o.push("ag-row-pinned-manual")}}if(!s.isRowPinned()&&s.pinnedSibling){o.push("ag-row-pinned-source")}if(s.isSelected()){o.push("ag-row-selected")}if(s.footer){o.push("ag-row-footer")}o.push("ag-row-level-"+this.rowLevel);if(s.stub){o.push("ag-row-loading")}if(i){o.push("ag-full-width-row")}n.expansionSvc?.addExpandedCss(o,s);if(s.dragging){o.push("ag-row-dragging")}const{rowStyleSvc:r}=n;if(r){r.processClassesFromGridOptions(o,s);r.preProcessRowClassRules(o,s)}o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute");if(this.isFirstRowOnPage()){o.push("ag-row-first")}if(this.isLastRowOnPage()){o.push("ag-row-last")}if(i){if(e==="left"){o.push("ag-cell-last-left-pinned")}if(e==="right"){o.push("ag-cell-first-right-pinned")}}return o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(t){this.beans.selectionSvc?.onRowCtrlSelected(this,(t=>{if(t===this.centerGui||t===this.fullWidthGui){this.announceDescription()}}),t)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(t){if(!this.active){return}const{element:e,compBean:i}=t;const{rowNode:s,beans:n,gos:o}=this;i.addManagedListeners(e,{pointerenter:t=>{if(t.pointerType==="mouse"){s.dispatchRowEvent("mouseEnter")}},pointerleave:t=>{if(t.pointerType==="mouse"){s.dispatchRowEvent("mouseLeave")}}});i.addManagedListeners(s,{mouseEnter:()=>{if(!n.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")){e.classList.add("ag-row-hover");s.setHovered(true)}},mouseLeave:()=>{this.resetHoveredStatus(e)}})}resetHoveredStatus(t){const e=t?[t]:this.allRowGuis.map((t=>t.element));for(const t of e){t.classList.remove("ag-row-hover")}this.rowNode.setHovered(false)}roundRowTopToBounds(t){const e=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition();const i=this.applyPaginationOffset(e.top,true)-100;const s=this.applyPaginationOffset(e.bottom,true)+100;return Math.min(Math.max(i,t),s)}forEachGui(t,e){if(t){e(t)}else{for(const t of this.allRowGuis){e(t)}}}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(t){if(this.rowNode.rowHeight==null){return}const e=this.rowNode.rowHeight;const i=this.beans.environment.getDefaultRowHeight();const s=Ci(this.gos);const n=s?yi(this.beans,this.rowNode).height:void 0;const o=n?`${Math.min(i,n)-2}px`:void 0;this.forEachGui(t,(t=>{t.element.style.height=`${e}px`;if(o){t.element.style.setProperty("--ag-line-height",o)}}))}destroyFirstPass(t=false){this.active=false;const{rowNode:e}=this;if(!t&&Pi(this.gos)&&!e.sticky){const t=e.rowTop!=null;if(t){const t=this.roundRowTopToBounds(e.rowTop);this.setRowTop(t)}else{for(const t of this.allRowGuis){t.rowComp.toggleCss("ag-opacity-zero",true)}}}if(this.fullWidthGui?.element.contains(d(this.beans))){this.beans.focusSvc.attemptToRecoverFocus()}e.setHovered(false);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i);this.beans.eventSvc.dispatchEvent(i);super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const t=t=>{for(const e of t.list){e.destroy()}return{list:[],map:{}}};this.centerCellCtrls=t(this.centerCellCtrls);this.leftCellCtrls=t(this.leftCellCtrls);this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,(t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused);t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const{focusSvc:t}=this.beans;const e=t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);if(e!==this.rowFocused){this.rowFocused=e;this.setFocusedClasses()}}onPaginationChanged(){const t=this.beans.pagination?.getCurrentPage()??0;if(this.paginationPage!==t){this.paginationPage=t;this.onTopChanged()}this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,e=false){if(this.rowNode.isRowPinned()||this.rowNode.sticky){return t}const i=this.beans.pageBounds.getPixelOffset();const s=e?1:-1;return t+i*s}setRowTop(t){if(this.printLayout){return}if(i(t)){const e=this.applyPaginationOffset(t);const i=this.rowNode.isRowPinned()||this.rowNode.sticky;const s=i?e:this.beans.rowContainerHeight.getRealPixelPosition(e);const n=`${s}px`;this.setRowTopStyle(n)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout){return""}const e=this.rowNode;let i;if(e.sticky){i=e.stickyRowTop}else{const s=this.slideInAnimation[t]?this.roundRowTopToBounds(e.oldRowTop):e.rowTop;const n=this.applyPaginationOffset(s);i=e.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(t){for(const e of this.allRowGuis){this.suppressRowTransform?e.rowComp.setTop(t):e.rowComp.setTransform(`translateY(${t})`)}}getCellCtrl(t,e=false){let i=null;for(const e of this.getAllCellCtrls()){if(e.column==t){i=e}}if(i!=null||e){return i}for(const e of this.getAllCellCtrls()){if(e?.getColSpanningList().indexOf(t)>=0){i=e}}return i}onRowIndexChanged(){if(this.rowNode.rowIndex!=null){this.onCellFocusChanged();this.updateRowIndexes();this.postProcessCss()}}updateRowIndexes(t){const e=this.rowNode.getRowIndexString();if(e===null){return}const i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0);const s=this.rowNode.rowIndex%2===0;const n=i+this.rowNode.rowIndex+1;this.forEachGui(t,(t=>{t.rowComp.setRowIndex(e);t.rowComp.toggleCss("ag-row-even",s);t.rowComp.toggleCss("ag-row-odd",!s);V(t.element,n)}))}};var Nw=class extends re{constructor(){super();this.beanName="navigation";this.onPageDown=fe(this.onPageDown,100);this.onPageUp=fe(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCon=t.gridBodyCtrl}))}handlePageScrollingKey(t,e=false){const i=t.key;const s=t.altKey;const n=t.ctrlKey||t.metaKey;const o=!!this.beans.rangeSvc&&t.shiftKey;const r=uc(this.gos,t);let l=false;switch(i){case mo.PAGE_HOME:case mo.PAGE_END:if(!n&&!s){this.onHomeOrEndKey(i);l=true}break;case mo.LEFT:case mo.RIGHT:case mo.UP:case mo.DOWN:if(!r){return false}if(n&&!s&&!o){this.onCtrlUpDownLeftRight(i,r);l=true}break;case mo.PAGE_DOWN:case mo.PAGE_UP:if(!n&&!s){l=this.handlePageUpDown(i,r,e)}break}if(l){t.preventDefault()}return l}handlePageUpDown(t,e,i){if(i){e=this.beans.focusSvc.getFocusedCell()}if(!e){return false}if(t===mo.PAGE_UP){this.onPageUp(e)}else{this.onPageDown(e)}return true}navigateTo({scrollIndex:t,scrollType:e,scrollColumn:s,focusIndex:n,focusColumn:o,isAsync:r,rowPinned:l}){const{scrollFeature:a}=this.gridBodyCon;if(i(s)&&!s.isPinned()){a.ensureColumnVisible(s)}if(i(t)){a.ensureIndexVisible(t,e)}if(!r){a.ensureIndexVisible(n)}const{focusSvc:h,rangeSvc:c}=this.beans;h.setFocusedCell({rowIndex:n,column:o,rowPinned:l,forceBrowserFocus:true});c?.setRangeToCell({rowIndex:n,rowPinned:l,column:o})}onPageDown(t){const e=this.beans;const i=Bw(e);const s=this.getViewportHeight();const{pageBounds:n,rowModel:o,rowAutoHeight:r}=e;const l=n.getPixelOffset();const a=i.top+s;const h=o.getRowIndexAtPixel(a+l);if(r?.active){this.navigateToNextPageWithAutoHeight(t,h)}else{this.navigateToNextPage(t,h)}}onPageUp(t){const e=this.beans;const i=Bw(e);const{pageBounds:s,rowModel:n,rowAutoHeight:o}=e;const r=s.getPixelOffset();const l=i.top;const a=n.getRowIndexAtPixel(l+r);if(o?.active){this.navigateToNextPageWithAutoHeight(t,a,true)}else{this.navigateToNextPage(t,a,true)}}navigateToNextPage(t,e,i=false){const{pageBounds:s,rowModel:n}=this.beans;const o=this.getViewportHeight();const r=s.getFirstRow();const l=s.getLastRow();const a=s.getPixelOffset();const h=n.getRow(t.rowIndex);const c=i?h?.rowHeight-o-a:o-a;const u=h?.rowTop+c;let d=n.getRowIndexAtPixel(u+a);if(d===t.rowIndex){const s=i?-1:1;e=d=t.rowIndex+s}let f;if(i){f="bottom";if(d<r){d=r}if(e<r){e=r}}else{f="top";if(d>l){d=l}if(e>l){e=l}}if(this.isRowTallerThanView(n.getRow(d))){e=d;f="top"}this.navigateTo({scrollIndex:e,scrollType:f,scrollColumn:null,focusIndex:d,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,i=false){this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column});setTimeout((()=>{const s=this.getNextFocusIndexForAutoHeight(t,i);this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:t.column,isAsync:true})}),50)}getNextFocusIndexForAutoHeight(t,e=false){const i=e?-1:1;const s=this.getViewportHeight();const{pageBounds:n,rowModel:o}=this.beans;const r=n.getLastRow();let l=0;let a=t.rowIndex;while(a>=0&&a<=r){const t=o.getRow(a);if(t){const e=t.rowHeight??0;if(l+e>s){break}l+=e}a+=i}return Math.max(0,Math.min(a,r))}getViewportHeight(){const t=this.beans;const e=Bw(t);const i=this.beans.scrollVisibleSvc.getScrollbarWidth();let s=e.bottom-e.top;if(t.ctrlsSvc.get("center").isHorizontalScrollShowing()){s-=i}return s}isRowTallerThanView(t){if(!t){return false}const e=t.rowHeight;if(typeof e!=="number"){return false}return e>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){const i=this.beans.cellNavigation.getNextCellToFocus(t,e,true);const s=this.getNormalisedPosition(i);const{rowIndex:n,rowPinned:o,column:r}=s??i;const l=r;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:l,focusIndex:n,focusColumn:l,rowPinned:o})}onHomeOrEndKey(t){const e=t===mo.PAGE_HOME;const{visibleCols:i,pageBounds:s,rowModel:n}=this.beans;const o=i.allCols;const r=e?s.getFirstRow():s.getLastRow();const l=n.getRow(r);if(!l){return}const a=(e?o:[...o].reverse()).find((t=>!t.isSuppressNavigable(l)));if(!a){return}this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:a,focusIndex:r,focusColumn:a})}onTabKeyDown(t,e){const i=e.shiftKey;const s=this.tabToNextCellCommon(t,i,e);const n=this.beans;const{ctrlsSvc:o,pageBounds:r,focusSvc:l,gos:a}=n;if(s!==false){if(s){e.preventDefault()}else if(s===null){o.get("gridCtrl").allowFocusForNextCoreContainer(i)}return}if(i){const{rowIndex:i,rowPinned:s}=t.getRowPosition();const o=s?i===0:i===r.getFirstRow();if(o){if(a.get("headerHeight")===0||Dc(n)){Tc(n,true,true)}else{e.preventDefault();l.focusPreviousFromFirstCell(e)}}}else{if(t instanceof Tw){t.focusCell(true)}if(l.focusOverlay(false)||Tc(n,i)){e.preventDefault()}}}tabToNextCell(t,e){const i=this.beans;const{focusSvc:s,rowRenderer:n}=i;const o=s.getFocusedCell();if(!o){return false}let r=cf(i,o);if(!r){r=n.getRowByPosition(o);if(!r?.isFullWidth()){return false}}return!!this.tabToNextCellCommon(r,t,e,"api")}tabToNextCellCommon(t,e,i,s="ui"){const{editSvc:n,focusSvc:o}=this.beans;let r=void 0;const l=t instanceof Tw?t:t.getAllCellCtrls()?.[0];if(n?.isEditing()){r=n?.moveToNextCell(l,e,i,s)}else{r=this.moveToNextCellNotEditing(t,e,i)}if(r===null){return r}return r||!!o.focusedHeader}moveToNextCellNotEditing(t,e,s){const n=this.beans.visibleCols.allCols;let o;if(t instanceof Ow){o={...t.getRowPosition(),column:e?n[0]:vs(n)};if(this.gos.get("embedFullWidthRows")&&s){const e=t.findFullWidthInfoForEvent(s);if(e){o.column=e.column}}}else{o=t.getFocusedCellPosition()}const r=this.findNextCellToFocusOn(o,{backwards:e,startEditing:false});if(r===false){return null}if(r instanceof Tw){r.focusCell(true)}else if(r){return this.tryToFocusFullWidthRow(r,e)}return i(r)}findNextCellToFocusOn(t,{backwards:e,startEditing:s,skipToNextEditableCell:n}){let o=t;const r=this.beans;const{cellNavigation:l,gos:a,focusSvc:h,rowRenderer:c,rangeSvc:u}=r;while(true){if(t!==o){t=o}if(!e){o=this.getLastCellOfColSpan(o)}o=l.getNextTabbedCell(o,e);const d=a.getCallback("tabToNextCell");if(i(d)){const i={backwards:e,editing:s,previousCellPosition:t,nextCellPosition:o?o:null};const n=d(i);if(n===true){o=t}else if(n===false){return false}else{o={rowIndex:n.rowIndex,column:n.column,rowPinned:n.rowPinned}}}if(!o){return null}if(o.rowIndex<0){const t=Ec(r);h.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:o.column},fromCell:true});return null}const f=a.get("editType")==="fullRow";if(s&&(!f||n)){const t=this.isCellEditable(o);if(!t){continue}}this.ensureCellVisible(o);const g=cf(r,o);if(!g){const t=c.getRowByPosition(o);if(!t||!t.isFullWidth()||s){continue}return{...t.getRowPosition(),column:o?.column}}if(l.isSuppressNavigable(g.column,g.rowNode)){continue}g.setFocusedCellPosition(o);u?.setRangeToCell(o);return g}}isCellEditable(t){const e=this.lookupRowNodeForCell(t);if(e){return t.column.isCellEditable(e)}return false}lookupRowNodeForCell({rowIndex:t,rowPinned:e}){const{pinnedRowModel:i,rowModel:s}=this.beans;if(e==="top"){return i?.getPinnedTopRow(t)}if(e==="bottom"){return i?.getPinnedBottomRow(t)}return s.getRow(t)}navigateToNextCell(t,e,n,o){let r=n;let l=false;const a=this.beans;const{cellNavigation:h,focusSvc:c,gos:u}=a;while(r&&(r===n||!this.isValidNavigateCell(r))){if(u.get("enableRtl")){if(e===mo.LEFT){r=this.getLastCellOfColSpan(r)}}else if(e===mo.RIGHT){r=this.getLastCellOfColSpan(r)}r=h.getNextCellToFocus(e,r);l=s(r)}if(l&&t&&t.key===mo.UP){r={rowIndex:-1,rowPinned:null,column:n.column}}if(o){const s=u.getCallback("navigateToNextCell");if(i(s)){const o={key:e,previousCellPosition:n,nextCellPosition:r?r:null,event:t};const l=s(o);if(i(l)){r={rowPinned:l.rowPinned,rowIndex:l.rowIndex,column:l.column}}else{r=null}}}if(!r){return}if(r.rowIndex<0){const e=Ec(a);c.focusHeaderPosition({headerPosition:{headerRowIndex:e+r.rowIndex,column:n.column},event:t||void 0,fromCell:true});return}const d=this.getNormalisedPosition(r);if(d){this.focusPosition(d)}else{this.tryToFocusFullWidthRow(r)}}getNormalisedPosition(t){const e=!!this.beans.spannedRowRenderer?.getCellByPosition(t);if(e){return t}this.ensureCellVisible(t);const i=cf(this.beans,t);if(!i){return null}t=i.getFocusedCellPosition();this.ensureCellVisible(t);return t}tryToFocusFullWidthRow(t,e){const{visibleCols:i,rowRenderer:s,focusSvc:n,eventSvc:o}=this.beans;const r=i.allCols;const l=s.getRowByPosition(t);if(!l?.isFullWidth()){return false}const a=n.getFocusedCell();const h={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?vs(r):r[0])};this.focusPosition(h);const c=e==null?a!=null&&of(h,a):e;o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:h.column,isFullWidthCell:true,fromBelow:c});return true}focusPosition(t){const{focusSvc:e,rangeSvc:i}=this.beans;e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:true});i?.setRangeToCell(t)}isValidNavigateCell(t){const e=hf(this.beans,t);return!!e}getLastCellOfColSpan(t){const e=cf(this.beans,t);if(!e){return t}const i=e.getColSpanningList();if(i.length===1){return t}return{rowIndex:t.rowIndex,column:vs(i),rowPinned:t.rowPinned}}ensureCellVisible(t){const e=Di(this.gos);const i=this.beans.rowModel.getRow(t.rowIndex);const n=e&&i?.sticky;const{scrollFeature:o}=this.gridBodyCon;if(!n&&s(t.rowPinned)){o.ensureIndexVisible(t.rowIndex)}if(!t.column.isPinned()){o.ensureColumnVisible(t.column)}}ensureColumnVisible(t){const e=this.gridBodyCon.scrollFeature;if(!t.isPinned()){e.ensureColumnVisible(t)}}ensureRowVisible(t){const e=this.gridBodyCon.scrollFeature;e.ensureIndexVisible(t)}};function Bw(t){return t.ctrlsSvc.getScrollFeature().getVScrollPosition()}var Gw={moduleName:"KeyboardNavigation",version:Ke,beans:[Nw,Iv,Am],apiFunctions:{getFocusedCell:Hv,clearFocusedCell:Ov,setFocusedCell:Nv,setFocusedHeader:Vv,tabToNextCell:Bv,tabToPreviousCell:Gv}};var Vw=class extends re{constructor(){super(...arguments);this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)});this.onModelUpdated()}onModelUpdated(t){this.calculatePages();this.eventSvc.dispatchEvent({type:"paginationChanged",animate:t?.animate??false,newData:t?.newData??false,newPage:t?.newPage??false,newPageSize:t?.newPageSize??false,keepRenderedRows:t?.keepRenderedRows??false})}calculatePages(){const{pageBounds:t,pagination:e,rowModel:i}=this.beans;if(e){e.calculatePages()}else{t.calculateBounds(0,i.getRowCount()-1)}}};var Lw=class extends re{constructor(){super(...arguments);this.beanName="pageBounds";this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:t,bottomRowBounds:e}=this;if(!t||!e){return 0}return Math.max(e.rowTop+e.rowHeight-t.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:t,bottomRowBounds:e}=this;const i=t?.rowTop??0;const s=e?e.rowTop+e.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:s}}calculateBounds(t,e){const{rowModel:i}=this.beans;const s=i.getRowBounds(t);if(s){s.rowIndex=t}this.topRowBounds=s;const n=i.getRowBounds(e);if(n){n.rowIndex=e}this.bottomRowBounds=n;this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const t=this.topRowBounds?.rowTop??0;if(this.pixelOffset===t){return}this.pixelOffset=t;this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"})}};var zw=`.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}`;var $w=class extends re{constructor(t,e){super();this.isLeft=t;this.elements=e;this.getWidth=t?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const t=this.getWidth();const e=t>0;for(const i of this.elements){if(i){tt(i,e);Ft(i,t)}}}};var Ww=class extends re{constructor(){super(...arguments);this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCtrl=t.gridBodyCtrl}));const t=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t});this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){const{gos:t,visibleCols:e,eventSvc:i}=this.beans;const s=vi(t,"print");const n=s?0:e.getColsLeftWidth();const o=s?0:e.getDisplayedColumnsRightWidth();if(n!=this.leftWidth){this.leftWidth=n;i.dispatchEvent({type:"leftPinnedWidthChanged"})}if(o!=this.rightWidth){this.rightWidth=o;i.dispatchEvent({type:"rightPinnedWidthChanged"})}}keepPinnedColumnsNarrowerThanViewport(){const t=this.gridBodyCtrl.eBodyViewport;const e=rt(t);if(e<=50){return}const i=this.getPinnedColumnsOverflowingViewport(e-50);const s=this.gos.getCallback("processUnpinnedColumns");const{columns:n,hasLockedPinned:o}=i;let r=n;if(!r.length&&!o){return}if(s){const t={columns:r,viewportWidth:e};r=s(t)}if(!r?.length){return}r=r.filter((t=>!Ts(t)));this.setColsPinned(r,null,"viewportSizeFeature")}createPinnedWidthFeature(t,...e){return new $w(t,e)}setColsPinned(t,e,i){const{colModel:s,colAnimation:n,visibleCols:o,gos:r}=this.beans;if(!s.cols){return}if(!t?.length){return}if(vi(r,"print")){hi(37);return}n?.start();let l;if(e===true||e==="left"){l="left"}else if(e==="right"){l="right"}else{l=null}const a=[];for(const e of t){if(!e){continue}const t=s.getCol(e);if(!t){continue}if(t.getPinned()!==l){this.setColPinned(t,l);a.push(t)}}if(a.length){o.refresh(i);tn(this.eventSvc,a,i)}n?.finish()}initCol(t){const{pinned:e,initialPinned:i}=t.colDef;if(e!==void 0){this.setColPinned(t,e)}else{this.setColPinned(t,i)}}setColPinned(t,e){if(e===true||e==="left"){t.pinned="left"}else if(e==="right"){t.pinned="right"}else{t.pinned=null}t.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(t){const{scrollVisibleSvc:e}=this.beans;if(t.pinned==null){return}const i=t.pinned==="left";const s=t.pinned==="right";t.hidden=true;const n=()=>{const n=i?this.leftWidth:this.rightWidth;if(n==null){return}const o=n==0;const r=t.hidden!==o;const l=this.gos.get("enableRtl");const a=e.getScrollbarWidth();const h=e.verticalScrollShowing&&(l&&i||!l&&s);const c=h?n+a:n;t.comp.setPinnedContainerWidth(`${c}px`);t.comp.setDisplayed(!o);if(r){t.hidden=o;t.refresh()}};t.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(t,e){const i=e.getPinned();if(i){const{leftWidth:e,rightWidth:i}=this;const s=rt(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(e+i+t>s){if(s>e+i){t=s-e-i}else{return 0}}}return t}getPinnedColumnsOverflowingViewport(t){const e=this.rightWidth??0;const i=this.leftWidth??0;const s=e+i;let n=false;if(s<t){return{columns:[],hasLockedPinned:n}}const{visibleCols:o}=this.beans;const r=[...o.leftCols];const l=[...o.rightCols];let a=0;let h=0;const c=0;const u=[];let d=s-c-t;while((h<r.length||a<l.length)&&d>0){if(a<l.length){const t=l[a++];if(t.colDef.lockPinned){n=true;continue}d-=t.getActualWidth();u.push(t)}if(h<r.length&&d>0){const t=r[h++];if(t.colDef.lockPinned){n=true;continue}d-=t.getActualWidth();u.push(t)}}return{columns:u,hasLockedPinned:n}}};var Uw={moduleName:"PinnedColumn",version:Ke,beans:[Ww],css:[zw]};var jw=class extends re{constructor(){super();this.beanName="ariaAnnounce";this.descriptionContainer=null;this.pendingAnnouncements=new Map;this.lastAnnouncement="";this.updateAnnouncement=de(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const t=this.beans;const e=f(t);const i=this.descriptionContainer=e.createElement("div");i.classList.add("ag-aria-description-container");D(i,"polite");T(i,"additions text");M(i,true);t.eGridDiv.appendChild(i)}announceValue(t,e){this.pendingAnnouncements.set(e,t);this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer){return}const t=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear();this.descriptionContainer.textContent="";setTimeout((()=>{this.handleAnnouncementUpdate(t)}),50)}handleAnnouncementUpdate(t){if(!this.isAlive()||!this.descriptionContainer){return}let e=t;if(e==null||e.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}if(this.lastAnnouncement===e){e=`${e}`}this.lastAnnouncement=e;this.descriptionContainer.textContent=e}destroy(){super.destroy();const{descriptionContainer:t}=this;if(t){dt(t);t.remove()}this.descriptionContainer=null;this.pendingAnnouncements.clear()}};var Kw={moduleName:"Aria",version:Ke,beans:[jw]};var qw=`:where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}`;var _w="ag-delay-render";var Zw=class extends re{constructor(){super(...arguments);this.beanName="colDelayRenderSvc";this.hideRequested=false;this.alreadyRevealed=false;this.timesRetried=0;this.requesters=new Set}hideColumns(t){if(this.alreadyRevealed||this.requesters.has(t)){return}this.requesters.add(t);if(!this.hideRequested){this.beans.ctrlsSvc.whenReady(this,(t=>{t.gridBodyCtrl.eGridBody.classList.add(_w)}));this.hideRequested=true}}revealColumns(t){if(this.alreadyRevealed||!this.isAlive()){return}this.requesters.delete(t);if(this.requesters.size>0){return}const{renderStatus:e,ctrlsSvc:i}=this.beans;if(e){if(!e.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++;setTimeout((()=>this.revealColumns(t)));return}this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(_w);this.alreadyRevealed=true}};var Yw={moduleName:"ColumnDelayRender",version:Ke,beans:[Zw],css:[qw]};function Qw(t){t.overlays?.showLoadingOverlay()}function Jw(t){t.overlays?.showNoRowsOverlay()}function Xw(t){t.overlays?.hideOverlay()}var tC=`.ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}`;var eC={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]};var iC=class extends Sn{constructor(){super(eC);this.eOverlayWrapper=vn;this.activePromise=null;this.activeOverlay=null;this.updateListenerDestroyFunc=null;this.activeCssClass=null;this.elToFocusAfter=null;this.registerCSS(tC)}handleKeyDown(t){if(t.key!==mo.TAB||t.defaultPrevented||eh(t)){return}const e=this.beans;const i=or(e,this.eOverlayWrapper,false,t.shiftKey);if(i){return}let s=false;if(t.shiftKey){s=e.focusSvc.focusGridView({column:vs(e.visibleCols.allCols),backwards:true,canFocusOverlay:false})}else{s=Tc(e,false)}if(s){t.preventDefault()}}updateLayoutClasses(t,e){const i=this.eOverlayWrapper.classList;const{AUTO_HEIGHT:s,NORMAL:n,PRINT:o}=lh;i.toggle(s,e.autoHeight);i.toggle(n,e.normal);i.toggle(o,e.print)}postConstruct(){this.createManagedBean(new ah(this));this.setDisplayed(false,{skipAriaHidden:true});this.beans.overlays.setOverlayWrapperComp(this);this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(t){const e=this.eOverlayWrapper.classList;if(this.activeCssClass){e.toggle(this.activeCssClass,false)}this.activeCssClass=t;e.toggle(t,true)}showOverlay(t,e,i,s){this.setWrapperTypeClass(e);this.destroyActiveOverlay();this.elToFocusAfter=null;this.activePromise=t;if(!t){return}this.setDisplayed(true,{skipAriaHidden:true});if(i&&this.isGridFocused()){const t=d(this.beans);if(t&&!g(this.beans)){this.elToFocusAfter=t}}t.then((e=>{if(this.activePromise!==t){if(this.activeOverlay!==e){this.destroyBean(e);e=null}return}this.activePromise=null;if(!e){return}if(this.activeOverlay!==e){this.eOverlayWrapper.appendChild(e.getGui());this.activeOverlay=e;if(s){const t=e;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,(({currentValue:e})=>{t.refresh?.(os(this.gos,{...e??{}}))}))}}if(i&&this.isGridFocused()){nr(this.eOverlayWrapper)}}))}updateOverlayWrapperPaddingTop(t){this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`)}destroyActiveOverlay(){this.activePromise=null;const t=this.activeOverlay;if(!t){return}let e=this.elToFocusAfter;this.activeOverlay=null;this.elToFocusAfter=null;if(e&&!this.isGridFocused()){e=null}const i=this.updateListenerDestroyFunc;if(i){i();this.updateListenerDestroyFunc=null}this.destroyBean(t);dt(this.eOverlayWrapper);e?.focus?.({preventScroll:true})}hideOverlay(){this.destroyActiveOverlay();this.setDisplayed(false,{skipAriaHidden:true})}isGridFocused(){const t=d(this.beans);return!!t&&this.beans.eGridDiv.contains(t)}destroy(){this.elToFocusAfter=null;this.destroyActiveOverlay();this.beans.overlays.setOverlayWrapperComp(void 0);super.destroy()}};var sC={selector:"AG-OVERLAY-WRAPPER",component:iC};var nC=class extends re{constructor(){super(...arguments);this.beanName="overlays";this.state=0;this.showInitialOverlay=true;this.wrapperPadding=0}postConstruct(){this.isClientSide=pi(this.gos);this.isServerSide=!this.isClientSide&&mi(this.gos);const t=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:t,rowDataUpdated:t,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=false;this.updateOverlayVisibility()}});this.addManagedPropertyListener("loading",t)}setOverlayWrapperComp(t){this.eWrapper=t;this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=false;const t=this.gos;const e=t.get("loading");if(!e&&(e!==void 0||t.get("suppressLoadingOverlay"))){return}this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=false;const t=this.gos;if(t.get("loading")||t.get("suppressNoRowsOverlay")){return}this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=false;if(this.gos.get("loading")){hi(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return sC}getOverlayWrapperCompClass(){return iC}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:t,isClientSide:e,isServerSide:i,beans:{gos:s,colModel:n,rowModel:o}}=this;let r=this.gos.get("loading");if(r!==void 0){this.showInitialOverlay=false}if(this.showInitialOverlay&&r===void 0&&!s.get("suppressLoadingOverlay")){r=!s.get("columnDefs")||!n.ready||!s.get("rowData")&&e}if(r){if(t!==1){this.doShowLoadingOverlay()}}else{this.showInitialOverlay=false;if(e&&o.isEmpty()&&!s.get("suppressNoRowsOverlay")){if(t!==2){this.doShowNoRowsOverlay()}}else if(t===1||!i&&t!==0){this.doHideOverlay()}}}doShowLoadingOverlay(){if(!this.eWrapper){return}this.state=1;this.showOverlay(lo(this.beans.userCompFactory,os(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams");this.updateExclusive()}doShowNoRowsOverlay(){if(!this.eWrapper){return}this.state=2;this.showOverlay(ao(this.beans.userCompFactory,os(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams");this.updateExclusive()}doHideOverlay(){if(!this.eWrapper){return}this.state=0;this.eWrapper.hideOverlay();this.updateExclusive()}showOverlay(t,e,i){const s=t?.newAgStackInstance()??null;this.eWrapper?.showOverlay(s,e,this.isExclusive(),i);this.refreshWrapperPadding()}updateExclusive(){const t=this.exclusive;this.exclusive=this.isExclusive();if(this.exclusive!==t){this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}}refreshWrapperPadding(){const t=this.eWrapper;if(!t){return}let e=0;if(this.state===2){const t=this.beans.ctrlsSvc.get("gridHeaderCtrl");const i=t?.headerHeight||0;e=i}if(this.wrapperPadding===e){return}this.wrapperPadding=e;t.updateOverlayWrapperPaddingTop(e)}};var oC={moduleName:"Overlay",version:Ke,userComponents:{agLoadingOverlay:uu,agNoRowsOverlay:fu},apiFunctions:{showLoadingOverlay:Qw,showNoRowsOverlay:Jw,hideOverlay:Xw},beans:[nC]};var rC=class extends re{constructor(){super(...arguments);this.beanName="rowContainerHeight";this.scrollY=0;this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)});this.maxDivHeight=To();Fe(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching){return}const t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top;const e=this.getUiBodyHeight();const i=t!==this.scrollY||e!==this.uiBodyHeight;if(i){this.scrollY=t;this.uiBodyHeight=e;this.calculateOffset()}}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight);this.pixelsToShave=this.modelHeight-this.uiContainerHeight;this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const t=this.scrollY/this.maxScrollY;const e=t*this.pixelsToShave;Fe(this.gos,`RowContainerHeightService - Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`);this.setDivStretchOffset(e)}setUiContainerHeight(t){if(t!==this.uiContainerHeight){this.uiContainerHeight=t;this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"})}}clearOffset(){this.setUiContainerHeight(this.modelHeight);this.pixelsToShave=0;this.setDivStretchOffset(0)}setDivStretchOffset(t){const e=typeof t==="number"?Math.floor(t):null;if(this.divStretchOffset===e){return}this.divStretchOffset=e;this.eventSvc.dispatchEvent({type:"heightScaleChanged"})}setModelHeight(t){this.modelHeight=t;this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight;if(this.stretching){this.calculateOffset()}else{this.clearOffset()}}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){const t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0){return t}const e=this.modelHeight-this.getUiBodyHeight();const i=t/e;const s=this.maxScrollY*i;return s}};var lC=400;var aC=class extends re{constructor(){super(...arguments);this.beanName="rowRenderer";this.destroyFuncsForColumnListeners=[];this.rowCtrlsByRowIndex={};this.zombieRowCtrls={};this.allRowCtrls=[];this.topRowCtrls=[];this.bottomRowCtrls=[];this.refreshInProgress=false;this.dataFirstRenderedFired=false;this.setupRangeSelectionListeners=()=>{const t=()=>{for(const t of this.getAllCellCtrls()){t.onCellSelectionChanged()}};const e=()=>{for(const t of this.getAllCellCtrls()){t.updateRangeBordersIfRangeCount()}};const i=()=>{this.eventSvc.addListener("cellSelectionChanged",t);this.eventSvc.addListener("columnMoved",e);this.eventSvc.addListener("columnPinned",e);this.eventSvc.addListener("columnVisible",e)};const s=()=>{this.eventSvc.removeListener("cellSelectionChanged",t);this.eventSvc.removeListener("columnMoved",e);this.eventSvc.removeListener("columnPinned",e);this.eventSvc.removeListener("columnVisible",e)};this.addDestroyFunc((()=>s()));this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{const t=$i(this.gos);if(t){i()}else{s()}}));const n=$i(this.gos);if(n){i()}}}wireBeans(t){this.pageBounds=t.pageBounds;this.colModel=t.colModel;this.pinnedRowModel=t.pinnedRowModel;this.rowModel=t.rowModel;this.focusSvc=t.focusSvc;this.rowContainerHeight=t.rowContainerHeight;this.ctrlsSvc=t.ctrlsSvc;this.editSvc=t.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,(t=>{this.gridBodyCtrl=t.gridBodyCtrl;this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})});this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged()));this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw()));this.addManagedPropertyListener("suppressCellFocus",(t=>this.onSuppressCellFocusChanged(t.currentValue)));this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows()));this.addManagedPropertyListener("cellSelection",(({currentValue:t,previousValue:e})=>{if(!e&&t||e&&!t){this.redrawRows()}}));const{stickyRowSvc:t,gos:e,showRowGroupCols:i}=this.beans;if(i){this.addManagedPropertyListener("showOpenedGroup",(()=>{const t=i.getShowRowGroupCols();if(t.length){this.refreshCells({columns:t,force:true})}}))}if(t){this.stickyRowFeature=t.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))}else{const t=this.gridBodyCtrl;t.setStickyTopHeight(0);t.setStickyBottomHeight(0)}this.registerCellEventListeners();this.initialiseCache();this.printLayout=vi(e,"print");this.embedFullWidthRows=this.printLayout||e.get("embedFullWidthRows");this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const t=this.getKeepDetailRowsCount();const e=t!=null?t:3;this.cachedRowCtrls=new hC(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const t=Object.values(this.rowCtrlsByRowIndex);const e=Object.values(this.zombieRowCtrls);const i=this.cachedRowCtrls?.getEntries()??[];if(e.length>0||i.length>0){this.allRowCtrls=[...t,...e,...i]}else{this.allRowCtrls=t}}isCellBeingRendered(t,e){const i=this.rowCtrlsByRowIndex[t];if(!e||!i){return!!i}if(i.isFullWidth()){return true}const s=this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:t,column:e,rowPinned:null});return!!s||!!i.getCellCtrl(e)||!i.isRowRendered()}updateCellFocus(t){for(const e of this.getAllCellCtrls()){e.onCellFocused(t)}for(const e of this.getFullWidthRowCtrls()){e.onFullWidthRowFocused(t)}}onCellFocusChanged(t){if(t?.rowIndex!=null&&!t.rowPinned){const e=this.beans.colModel.getCol(t.column)??void 0;if(!this.isCellBeingRendered(t.rowIndex,e)){this.redraw()}}this.updateCellFocus(t)}onSuppressCellFocusChanged(t){for(const e of this.getAllCellCtrls()){e.onSuppressCellFocusChanged(t)}for(const e of this.getFullWidthRowCtrls()){e.onSuppressCellFocusChanged(t)}}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:t=>this.onCellFocusChanged(t),cellFocusCleared:()=>this.updateCellFocus(),flashCells:t=>{const{cellFlashSvc:e}=this.beans;if(e){for(const i of this.getAllCellCtrls()){e.onFlashCells(i,t)}}},columnHoverChanged:()=>{for(const t of this.getAllCellCtrls()){t.onColumnHover()}},displayedColumnsChanged:()=>{for(const t of this.getAllCellCtrls()){t.onDisplayedColumnsChanged()}},displayedColumnsWidthChanged:()=>{if(this.printLayout){for(const t of this.getAllCellCtrls()){t.onLeftChanged()}}}});this.setupRangeSelectionListeners();this.refreshListenersToColumnsForCellComps();this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)});this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const t of this.destroyFuncsForColumnListeners){t()}this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const t=this.colModel.getCols();for(const e of t){const t=t=>{for(const i of this.getAllCellCtrls()){if(i.column===e){t(i)}}};const i=()=>{t((t=>t.onLeftChanged()))};const s=()=>{t((t=>t.onWidthChanged()))};const n=()=>{t((t=>t.onFirstRightPinnedChanged()))};const o=()=>{t((t=>t.onLastLeftPinnedChanged()))};const r=()=>{t((t=>t.onColDefChanged()))};e.__addEventListener("leftChanged",i);e.__addEventListener("widthChanged",s);e.__addEventListener("firstRightPinnedChanged",n);e.__addEventListener("lastLeftPinnedChanged",o);e.__addEventListener("colDefChanged",r);this.destroyFuncsForColumnListeners.push((()=>{e.__removeEventListener("leftChanged",i);e.__removeEventListener("widthChanged",s);e.__removeEventListener("firstRightPinnedChanged",n);e.__removeEventListener("lastLeftPinnedChanged",o);e.__removeEventListener("colDefChanged",r)}))}}onDomLayoutChanged(){const t=vi(this.gos,"print");const e=t||this.gos.get("embedFullWidthRows");const i=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t;this.embedFullWidthRows=e;if(i){this.redrawAfterModelUpdate({domLayoutChanged:true})}}datasourceChanged(){this.firstRenderedRow=0;this.lastRenderedRow=-1;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){const e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:true};this.redrawAfterModelUpdate(e)}getAllCellsNotSpanningForColumn(t){const e=[];for(const i of this.getAllRowCtrls()){const s=i.getCellCtrl(t,true)?.eGui;if(s){e.push(s)}}return e}refreshFloatingRowComps(t=true){this.refreshFloatingRows(this.topRowCtrls,"top",t);this.refreshFloatingRows(this.bottomRowCtrls,"bottom",t)}refreshFloatingRows(t,e,i){const{pinnedRowModel:s,beans:n,printLayout:o}=this;const r=Object.fromEntries(t.map((t=>[t.rowNode.id,t])));s?.forEachPinnedRow(e,((l,a)=>{const h=t[a];const c=h&&s.getPinnedRowById(h.rowNode.id,e)===void 0;if(c){h.destroyFirstPass();h.destroySecondPass()}if(l.id in r&&i){t[a]=r[l.id];delete r[l.id]}else{t[a]=new Ow(l,n,false,false,o)}}));const l=(e==="top"?s?.getPinnedTopRowCount():s?.getPinnedBottomRowCount())??0;t.length=l}onPinnedRowDataChanged(){const t={recycleRows:true};this.redrawAfterModelUpdate(t)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:true})}redrawRow(t,e=false){if(t.sticky){this.stickyRowFeature?.refreshStickyNode(t)}else if(this.cachedRowCtrls?.has(t)){this.cachedRowCtrls.removeRow(t);return}else{const e=e=>{const i=e[t.rowIndex];if(!i){return}if(i.rowNode!==t){return}i.destroyFirstPass();i.destroySecondPass();e[t.rowIndex]=this.createRowCon(t,false,false)};switch(t.rowPinned){case"top":e(this.topRowCtrls);break;case"bottom":e(this.bottomRowCtrls);break;default:e(this.rowCtrlsByRowIndex);this.updateAllRowCtrls()}}if(!e){this.dispatchDisplayedRowsChanged(false)}}redrawRows(t){const{editSvc:e}=this.beans;if(e?.isEditing()){if(e.isBatchEditing()){e.cleanupEditors()}else{e.stopEditing(void 0,{source:"api"})}}const i=t!=null;if(i){for(const e of t??[]){this.redrawRow(e,true)}this.dispatchDisplayedRowsChanged(false);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();const e=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights();this.scrollToTopIfNewData(t);const i=!t.domLayoutChanged&&!!t.recycleRows;const s=t.animate&&Pi(this.gos);const n=i?this.getRowsToRecycle():null;if(!i){this.removeAllRowComps()}this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const t=o.extraTopHeight+o.extraBottomHeight;if(t){this.updateContainerHeights(t)}}this.recycleRows(n,s);this.gridBodyCtrl.updateRowCount();if(!t.onlyBody){this.refreshFloatingRowComps(r.get("enableRowPinning")?i:void 0)}this.dispatchDisplayedRowsChanged();if(e!=null){this.restoreFocusedCell(e)}this.releaseLockOnRefresh()}scrollToTopIfNewData(t){const e=t.newData||t.newPage;const i=this.gos.get("suppressScrollOnNewData");if(e&&!i){this.gridBodyCtrl.scrollFeature.scrollToTop();this.stickyRowFeature?.resetOffsets()}}updateContainerHeights(t=0){const{rowContainerHeight:e}=this;if(this.printLayout){e.setModelHeight(null);return}let i=this.pageBounds.getCurrentPageHeight();if(i===0){i=1}e.setModelHeight(i+t)}getLockOnRefresh(){if(this.refreshInProgress){throw new Error(fi(252))}this.refreshInProgress=true;this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=false;this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){if(!t){return}const e=this.beans.focusSvc;const i=this.findPositionToFocus(t);if(!i){e.focusHeaderPosition({headerPosition:{headerRowIndex:Ec(this.beans)-1,column:t.column}});return}if(t.rowIndex!==i.rowIndex||t.rowPinned!=i.rowPinned){e.setFocusedCell({...i,preventScrollOnBrowserFocus:true,forceBrowserFocus:true});return}if(!e.doesRowOrCellHaveBrowserFocus()){this.updateCellFocus(os(this.gos,{...i,forceBrowserFocus:true,preventScrollOnBrowserFocus:true,type:"cellFocused"}))}}findPositionToFocus(t){const{pagination:e,pageBounds:i}=this.beans;let s=t;if(s.rowPinned==null&&e&&i&&!e.isRowInPage(s.rowIndex)){s={rowPinned:null,rowIndex:i.getFirstRow()}}while(s){if(s.rowPinned==null&&i){if(s.rowIndex<i.getFirstRow()){s=df(this.beans,{rowPinned:null,rowIndex:0});if(!s){return null}}else if(s.rowIndex>i.getLastRow()){s={rowPinned:null,rowIndex:i.getLastRow()}}}const e=this.getRowByPosition(s);if(e?.isAlive()){return{...e.getRowPosition(),column:t.column}}s=df(this.beans,s)}return null}getAllCellCtrls(){const t=[];const e=this.getAllRowCtrls();const i=e.length;for(let s=0;s<i;s++){const i=e[s].getAllCellCtrls();const n=i.length;for(let e=0;e<n;e++){t.push(i[e])}}return t}getAllRowCtrls(){const{spannedRowRenderer:t}=this.beans;const e=this.getStickyTopRowCtrls();const i=this.getStickyBottomRowCtrls();const s=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...i,...t?.getCtrls("top")??[],...t?.getCtrls("bottom")??[],...t?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)];return s}addRenderedRowListener(t,e,i){const s=this.rowCtrlsByRowIndex[e];if(s){s.addEventListener(t,i)}}refreshCells({rowNodes:t,columns:e,force:i,suppressFlash:s}={}){const n={force:i,newData:false,suppressFlash:s};for(const i of this.getCellCtrls(t,e)){i.refreshOrDestroyCell(n)}this.refreshFullWidth(t)}refreshRows(t={}){for(const e of this.getRowCtrls(t.rowNodes)){e.refreshRow(t)}this.refreshFullWidth(t.rowNodes)}refreshFullWidth(t){if(!t){return}let e=false;for(const i of this.getRowCtrls(t)){if(!i.isFullWidth()){continue}const t=i.refreshFullWidth();if(!t){e=true;this.redrawRow(i.rowNode,true)}}if(e){this.dispatchDisplayedRowsChanged(false)}}getRowCtrls(t){const e=cC(t);const i=this.getAllRowCtrls();if(!t||!e){return i}return i.filter((t=>{const i=t.rowNode;return uC(i,e)}))}getCellCtrls(t,e){let s;if(i(e)){s={};e.forEach((t=>{const e=this.colModel.getCol(t);if(i(e)){s[e.getId()]=true}}))}const n=[];for(const e of this.getRowCtrls(t)){for(const t of e.getAllCellCtrls()){const e=t.column.getId();const i=s&&!s[e];if(i){continue}n.push(t)}}return n}destroy(){this.removeAllRowComps(true);super.destroy()}removeAllRowComps(t=false){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e,t);this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const t=[];for(const e of Object.keys(this.rowCtrlsByRowIndex)){const i=this.rowCtrlsByRowIndex[e];const s=i.rowNode.id==null;if(s){t.push(e)}}this.removeRowCtrls(t);const e={};for(const t of Object.values(this.rowCtrlsByRowIndex)){const i=t.rowNode;e[i.id]=t}this.rowCtrlsByRowIndex={};return e}removeRowCtrls(t,e=false){for(const i of t){const t=this.rowCtrlsByRowIndex[i];if(t){t.destroyFirstPass(e);t.destroySecondPass()}delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(t){if(t.direction!=="vertical"){return}this.redraw({afterScroll:true})}redraw(t={}){const{focusSvc:e,animationFrameSvc:i}=this.beans;const{afterScroll:s}=t;let n;const o=this.stickyRowFeature;if(o){n=e?.getFocusCellToUseAfterRefresh()||void 0}const r=this.firstRenderedRow;const l=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let a=false;if(o){a=o.checkStickyRows();const t=o.extraTopHeight+o.extraBottomHeight;if(t){this.updateContainerHeights(t)}}const h=this.firstRenderedRow!==r||this.lastRenderedRow!==l;if(s&&!a&&!h){return}this.getLockOnRefresh();this.recycleRows(null,false,s);this.releaseLockOnRefresh();this.dispatchDisplayedRowsChanged(s&&!a);if(n!=null){const t=e?.getFocusCellToUseAfterRefresh();if(n!=null&&t==null){i?.flushAllFrames();this.restoreFocusedCell(n)}}}removeRowCompsNotToDraw(t,e){const i={};for(const e of t){i[e]=true}const s=Object.keys(this.rowCtrlsByRowIndex);const n=s.filter((t=>!i[t]));this.removeRowCtrls(n,e)}calculateIndexesToDraw(t){const e=[];for(let t=this.firstRenderedRow;t<=this.lastRenderedRow;t++){e.push(t)}const i=this.beans.pagination;const s=this.beans.focusSvc?.getFocusedCell()?.rowIndex;if(s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&(!i||i.isRowInPage(s))&&s<this.rowModel.getRowCount()){e.push(s)}const n=t=>{const i=t.rowNode.rowIndex;if(i==null||i===s){return}if(i<this.firstRenderedRow||i>this.lastRenderedRow){if(this.doNotUnVirtualiseRow(t)){e.push(i)}}};for(const t of Object.values(this.rowCtrlsByRowIndex)){n(t)}if(t){for(const e of Object.values(t)){n(e)}}e.sort(((t,e)=>t-e));const o=[];for(let t=0;t<e.length;t++){const i=e[t];const s=this.rowModel.getRow(i);if(s&&!s.sticky){o.push(i)}}return o}recycleRows(t,e=false,i=false){const s=this.calculateIndexesToDraw(t);if(this.printLayout||i){e=false}this.removeRowCompsNotToDraw(s,!e);for(const n of s){this.createOrUpdateRowCtrl(n,t,e,i)}if(t){const{animationFrameSvc:s}=this.beans;const n=s?.active&&i&&!this.printLayout;if(n){s.addDestroyTask((()=>{this.destroyRowCtrls(t,e);this.updateAllRowCtrls();this.dispatchDisplayedRowsChanged()}))}else{this.destroyRowCtrls(t,e)}}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=false){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:t})}onDisplayedColumnsChanged(){const{visibleCols:t}=this.beans;const e=t.isPinningLeft();const i=t.isPinningRight();const s=this.pinningLeft!==e||i!==this.pinningRight;if(s){this.pinningLeft=e;this.pinningRight=i;if(this.embedFullWidthRows){this.redrawFullWidthEmbeddedRows()}}}redrawFullWidthEmbeddedRows(){const t=[];for(const e of this.getFullWidthRowCtrls()){const i=e.rowNode.rowIndex;t.push(i.toString())}this.refreshFloatingRowComps();this.removeRowCtrls(t);this.redraw({afterScroll:true})}getFullWidthRowCtrls(t){const e=cC(t);return this.getAllRowCtrls().filter((t=>{if(!t.isFullWidth()){return false}const i=t.rowNode;if(e!=null&&!uC(i,e)){return false}return true}))}createOrUpdateRowCtrl(t,e,s,n){let o;let r=this.rowCtrlsByRowIndex[t];if(!r){o=this.rowModel.getRow(t);if(i(o)&&i(e)&&e[o.id]&&o.alreadyRendered){r=e[o.id];e[o.id]=null}}const l=!r;if(l){if(!o){o=this.rowModel.getRow(t)}if(i(o)){r=this.createRowCon(o,s,n)}else{return}}if(o){o.alreadyRendered=true}this.rowCtrlsByRowIndex[t]=r}destroyRowCtrls(t,e){const i=[];if(t){for(const s of Object.values(t)){if(!s){continue}if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);continue}s.destroyFirstPass(!e);if(e){const t=s.instanceId;this.zombieRowCtrls[t]=s;i.push((()=>{s.destroySecondPass();delete this.zombieRowCtrls[t]}))}else{s.destroySecondPass()}}}if(e){i.push((()=>{if(this.isAlive()){this.updateAllRowCtrls();this.dispatchDisplayedRowsChanged()}}));window.setTimeout((()=>{for(const t of i){t()}}),lC)}}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const t=this.getRowBuffer();const e=xi(this.beans);return t*e}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:t,pageBounds:e,rowModel:i}=this;t.updateOffset();let s;let n;if(!i.isRowsToRender()){s=0;n=-1}else if(this.printLayout){this.beans.environment.refreshRowHeightVariable();s=e.getFirstRow();n=e.getLastRow()}else{const o=this.getRowBufferInPixels();const r=this.ctrlsSvc.getScrollFeature();const l=this.gos.get("suppressRowVirtualisation");let a=false;let h;let c;do{const i=e.getPixelOffset();const{pageFirstPixel:s,pageLastPixel:n}=e.getCurrentPagePixelRange();const u=t.divStretchOffset;const d=r.getVScrollPosition();const f=d.top;const g=d.bottom;if(l){h=s+u;c=n+u}else{h=Math.max(f+i-o,s)+u;c=Math.min(g+i+o,n)+u}this.firstVisibleVPixel=Math.max(f+i,s)+u;this.lastVisibleVPixel=Math.min(g+i,n)+u;a=this.ensureAllRowsInRangeHaveHeightsCalculated(h,c)}while(a);let u=i.getRowIndexAtPixel(h);let d=i.getRowIndexAtPixel(c);const f=e.getFirstRow();const g=e.getLastRow();if(u<f){u=f}if(d>g){d=g}s=u;n=d}const o=vi(this.gos,"normal");const r=this.gos.get("suppressMaxRenderedRowRestriction");const l=Math.max(this.getRowBuffer(),500);if(o&&!r){if(n-s>l){n=s+l}}const a=s!==this.firstRenderedRow;const h=n!==this.lastRenderedRow;if(a||h){this.firstRenderedRow=s;this.lastRenderedRow=n;this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:s,lastRow:n})}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired){return}this.dataFirstRenderedFired=true;Et(this.beans,(()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(t,e){const i=this.pinnedRowModel?.ensureRowHeightsValid();const s=this.stickyRowFeature?.ensureRowHeightsValid();const{pageBounds:n,rowModel:o}=this;const r=o.ensureRowHeightsValid(t,e,n.getFirstRow(),n.getLastRow());if(r||s){this.eventSvc.dispatchEvent({type:"recalculateRowBounds"})}if(s||r||i){this.updateContainerHeights();return true}return false}doNotUnVirtualiseRow(t){const e=false;const i=true;const s=t.rowNode;const n=this.focusSvc.isRowFocused(s.rowIndex,s.rowPinned);const o=this.editSvc?.isEditing(t);const r=s.detail;const l=n||o||r;if(!l){return e}const a=this.isRowPresent(s);return a?i:e}isRowPresent(t){if(!this.rowModel.isRowPresent(t)){return false}return this.beans.pagination?.isRowInPage(t.rowIndex)??true}createRowCon(t,e,i){const s=this.cachedRowCtrls?.getRow(t)??null;if(s){return s}const n=i&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;const o=new Ow(t,this.beans,e,n,this.printLayout);return o}getRenderedNodes(){const t=Object.values(this.rowCtrlsByRowIndex).map((t=>t.rowNode));const e=this.getStickyTopRowCtrls().map((t=>t.rowNode));const i=this.getStickyBottomRowCtrls().map((t=>t.rowNode));return[...e,...t,...i]}getRowByPosition(t){let e;const{rowIndex:i}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[i];break;case"bottom":e=this.bottomRowCtrls[i];break;default:e=this.rowCtrlsByRowIndex[i];if(!e){e=this.getStickyTopRowCtrls().find((t=>t.rowNode.rowIndex===i))||null;if(!e){e=this.getStickyBottomRowCtrls().find((t=>t.rowNode.rowIndex===i))||null}}break}return e}isRangeInRenderedViewport(t,e){const i=t==null||e==null;if(i){return false}const s=t>this.lastRenderedRow;const n=e<this.firstRenderedRow;const o=!n&&!s;return o}};var hC=class{constructor(t){this.entriesMap={};this.entriesList=[];this.maxCount=t}addRow(t){this.entriesMap[t.rowNode.id]=t;this.entriesList.push(t);t.setCached(true);if(this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass();t.destroySecondPass();this.removeFromCache(t)}}getRow(t){if(t?.id==null){return null}const e=this.entriesMap[t.id];if(!e){return null}this.removeFromCache(e);e.setCached(false);const i=e.rowNode!=t;return i?null:e}has(t){return this.entriesMap[t.id]!=null}removeRow(t){const e=t.id;const i=this.entriesMap[e];delete this.entriesMap[e];bs(this.entriesList,i)}removeFromCache(t){const e=t.rowNode.id;delete this.entriesMap[e];bs(this.entriesList,t)}getEntries(){return this.entriesList}};function cC(t){if(!t){return}const e={top:{},bottom:{},normal:{}};for(const i of t){const t=i.id;switch(i.rowPinned){case"top":e.top[t]=i;break;case"bottom":e.bottom[t]=i;break;default:e.normal[t]=i;break}}return e}function uC(t,e){const i=t.id;const s=t.rowPinned;switch(s){case"top":return e.top[i]!=null;case"bottom":return e.bottom[i]!=null;default:return e.normal[i]!=null}}var dC=class extends re{constructor(){super(...arguments);this.beanName="rowNodeSorter"}postConstruct(){const{gos:t}=this;this.isAccentedSort=t.get("accentedSort");this.primaryColumnsSortGroups=Mi(t);this.addManagedPropertyListener("accentedSort",(t=>this.isAccentedSort=t.currentValue));this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=Mi(t)))}doFullSort(t,e){const i=t.map(((t,e)=>({currentPos:e,rowNode:t})));i.sort(this.compareRowNodes.bind(this,e));return i.map((t=>t.rowNode))}compareRowNodes(t,e,i){const s=e.rowNode;const n=i.rowNode;for(let e=0,i=t.length;e<i;e++){const i=t[e];const o=i.sort==="desc";const l=this.getValue(s,i.column);const a=this.getValue(n,i.column);let h;const c=this.getComparator(i,s);if(c){h=c(l,a,s,n,o)}else{h=r(l,a,this.isAccentedSort)}const u=!isNaN(h);if(u&&h!==0){return i.sort==="asc"?h:h*-1}}return e.currentPos-i.currentPos}getComparator(t,e){const i=t.column;const s=i.getColDef().comparator;if(s!=null){return s}if(!i.getColDef().showRowGroup){return}const n=!e.group&&i.getColDef().field;if(!n){return}const o=this.beans.colModel.getColDefCol(n);if(!o){return}return o.getColDef().comparator}getValue(t,e){const{valueSvc:i,colModel:s,showRowGroupCols:n,gos:o}=this.beans;if(!this.primaryColumnsSortGroups){return i.getValue(e,t,false)}const r=t.rowGroupColumn===e;if(r){const r=Ai(o,s.isPivotActive());if(r){const s=t.data?t:ba(t.childrenAfterGroup);return s&&i.getValue(e,s,false)}const l=n?.getShowRowGroupCol(e.getId());if(!l){return void 0}return t.groupData?.[l.getId()]}if(t.group&&e.getColDef().showRowGroup){return void 0}return i.getValue(e,t,false)}};function fC(t){t.sortSvc?.onSortChanged("api")}var gC={moduleName:"Sort",version:Ke,beans:[Km,dC],apiFunctions:{onSortChanged:fC},userComponents:{agSortIndicator:Wm},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}};var pC=class extends re{constructor(){super(...arguments);this.beanName="syncSvc";this.waitingForColumns=false}postConstruct(){this.addManagedPropertyListener("columnDefs",(t=>this.setColumnDefs(t)))}start(){this.beans.ctrlsSvc.whenReady(this,(()=>{const t=this.gos.get("columnDefs");if(t){this.setColumnsAndData(t)}else{this.waitingForColumns=true}this.gridReady()}))}setColumnsAndData(t){const{colModel:e,rowModel:i}=this.beans;e.setColumnDefs(t??[],"gridInitializing");i.start()}gridReady(){const{eventSvc:t,gos:e}=this;t.dispatchEvent({type:"gridReady"});Fe(e,`initialised successfully, enterprise = ${e.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(t){const e=this.gos.get("columnDefs");if(!e){return}if(this.waitingForColumns){this.waitingForColumns=false;this.setColumnsAndData(e);return}this.beans.colModel.setColumnDefs(e,Os(t.source))}};function mC(t){t.valueCache?.expire()}function vC(t,e){const{colKey:i,rowNode:n,useFormatter:o}=e;const r=t.colModel.getColDefCol(i)??t.colModel.getCol(i);if(s(r)){return null}const l=t.valueSvc.getValueForDisplay(r,n,o);if(o){return l.valueFormatted??h(l.value)}return l.value}var wC="paste";var CC=class extends re{constructor(){super(...arguments);this.beanName="changeDetectionSvc";this.clientSideRowModel=null}postConstruct(){const{gos:t,rowModel:e}=this.beans;if(pi(t)){this.clientSideRowModel=e}this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(t){const{gos:e,rowRenderer:i}=this.beans;if(t.source===wC||e.get("suppressChangeDetection")){return}const s=t.node;const n=[s];const o=this.clientSideRowModel;const r=o?.rootNode;if(r&&!s.isRowPinned()){const i=e.get("aggregateOnlyChangedColumns");const l=new mf(i,r);l.addParentNode(s.parent,[t.column]);o.doAggregate(l);l.forEachChangedNodeDepthFirst((t=>{n.push(t);if(t.sibling){n.push(t.sibling)}}))}i.refreshCells({rowNodes:n})}};var bC=class extends re{constructor(){super(...arguments);this.beanName="expressionSvc";this.cache={}}evaluate(t,e){if(typeof t==="string"){return this.evaluateExpression(t,e)}else{ci(15,{expression:t})}}evaluateExpression(t,e){try{const i=this.createExpressionFunction(t);const s=i(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.getValue,e.column,e.columnGroup);return s}catch(i){ci(16,{expression:t,params:e,e:i});return null}}createExpressionFunction(t){const e=this.cache;if(e[t]){return e[t]}const i=this.createFunctionBody(t);const s=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);e[t]=s;return s}createFunctionBody(t){if(t.includes("return")){return t}else{return"return "+t+";"}}};var yC=class extends re{constructor(){super(...arguments);this.beanName="valueCache";this.cacheVersion=0}postConstruct(){const t=this.gos;this.active=t.get("valueCache");this.neverExpires=t.get("valueCacheNeverExpires")}onDataChanged(){if(this.neverExpires){return}this.expire()}expire(){this.cacheVersion++}setValue(t,e,i){if(this.active){const s=this.cacheVersion;if(t.__cacheVersion!==s){t.__cacheVersion=s;t.__cacheData={}}t.__cacheData[e]=i}}getValue(t,e){if(!this.active||t.__cacheVersion!==this.cacheVersion){return void 0}return t.__cacheData[e]}};var SC={moduleName:"ValueCache",version:Ke,beans:[yC],apiFunctions:{expireValueCache:mC}};var xC={moduleName:"Expression",version:Ke,beans:[bC]};var RC={moduleName:"ChangeDetection",version:Ke,beans:[CC]};var FC={moduleName:"CellApi",version:Ke,apiFunctions:{getCellValue:vC}};var kC=class extends re{constructor(){super(...arguments);this.beanName="valueSvc";this.hasEditSvc=false;this.initialised=false;this.isSsrm=false}wireBeans(t){this.expressionSvc=t.expressionSvc;this.colModel=t.colModel;this.valueCache=t.valueCache;this.dataTypeSvc=t.dataTypeSvc;this.editSvc=t.editSvc;this.hasEditSvc=!!t.editSvc}postConstruct(){if(!this.initialised){this.init()}}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this);this.isSsrm=mi(this.gos);this.cellExpressions=this.gos.get("enableCellExpressions");this.isTreeData=this.gos.get("treeData");this.initialised=true;const t=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",t,true);this.addDestroyFunc((()=>this.eventSvc.removeListener("cellValueChanged",t,true)));this.addManagedPropertyListener("treeData",(t=>this.isTreeData=t.currentValue))}getValueForDisplay(t,e,i=false,s=false,n="ui"){const{showRowGroupColValueSvc:o}=this.beans;const r=!t&&e.group;const l=t?.colDef.showRowGroup;const a=!this.isTreeData||e.footer;if(o&&a&&(r||l)){const n=o.getGroupValue(e,t);if(n==null){return{value:null,valueFormatted:null}}if(!i){return{value:n.value,valueFormatted:null}}const r=o.formatAndPrefixGroupColValue(n,t,s);return{value:n.value,valueFormatted:r}}if(!t){return{value:e.key,valueFormatted:null}}const h=e.leafGroup&&this.colModel.isPivotMode();const c=e.group&&e.expanded&&!e.footer&&!h;const u=this.gos.get("groupSuppressBlankHeader")||!e.sibling;const d=c&&!u;const f=this.getValue(t,e,d,n);const g=i&&!(s&&t.colDef.useValueFormatterForExport===false);return{value:f,valueFormatted:g?this.formatValue(t,e,f):null}}getValue(t,e,i=false,s="ui"){if(!this.initialised){this.init()}if(!e){return}const n=t.getColDef();const o=n.field;const r=t.getColId();const l=e.data;if(this.hasEditSvc&&s==="ui"){const i=this.editSvc;if(i.isEditing()){const s=i.getCellDataValue({rowNode:e,column:t},true);if(s!==void 0){return s}}}let a;const h=n.showRowGroup;if(typeof h==="string"){const t=this.beans.rowGroupColsSvc?.getColumnIndex(h)??-1;if(t>e.level){return null}}const c=typeof h!=="string"||!e.group;const u=e.groupData&&r in e.groupData;const d=!i&&e.aggData&&e.aggData[r]!==void 0;const f=this.isSsrm&&i&&!!n.aggFunc;const g=this.isSsrm&&e.footer&&e.field&&(n.showRowGroup===true||n.showRowGroup===e.field);if(this.isTreeData&&d){a=e.aggData[r]}else if(this.isTreeData&&n.valueGetter){a=this.executeValueGetter(n.valueGetter,l,t,e)}else if(this.isTreeData&&o&&l){a=dp(l,o,t.isFieldContainsDots())}else if(u){a=e.groupData[r]}else if(d){a=e.aggData[r]}else if(n.valueGetter&&!f){if(!c){return a}a=this.executeValueGetter(n.valueGetter,l,t,e)}else if(g){a=dp(l,e.field,t.isFieldContainsDots())}else if(o&&l&&!f){if(!c){return a}a=dp(l,o,t.isFieldContainsDots())}if(this.cellExpressions&&typeof a==="string"&&a.indexOf("=")===0){const i=a.substring(1);a=this.executeValueGetter(i,l,t,e)}return a}parseValue(t,e,s,n){const o=t.getColDef();const r=o.valueParser;if(i(r)){const i=os(this.gos,{node:e,data:e?.data,oldValue:n,newValue:s,colDef:o,column:t});if(typeof r==="function"){return r(i)}return this.expressionSvc?.evaluate(r,i)}return s}getDeleteValue(t,e){if(i(t.getColDef().valueParser)){return this.parseValue(t,e,"",this.getValueForDisplay(t,e).value)??null}return null}formatValue(t,e,i,s,n=true){const{expressionSvc:o}=this.beans;let r=null;let l;const a=t.getColDef();if(s){l=s}else if(n){l=a.valueFormatter}if(l){const s=e?e.data:null;const n=os(this.gos,{value:i,node:e,data:s,colDef:a,column:t});if(typeof l==="function"){r=l(n)}else{r=o?o.evaluate(l,n):null}}else if(a.refData){return a.refData[i]||""}if(r==null&&Array.isArray(i)){r=i.join(", ")}return r}setValue(t,e,n,o){const r=this.colModel.getColDefCol(e);if(!t||!r){return false}if(s(t.data)){t.data={}}const{field:l,valueSetter:a}=r.getColDef();if(s(l)&&s(a)){hi(17);return false}if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(r,n)){hi(135);return false}const h=os(this.gos,{node:t,data:t.data,oldValue:this.getValue(r,t,void 0,o),newValue:n,colDef:r.getColDef(),column:r});h.newValue=n;let c;if(i(a)){if(typeof a==="function"){c=a(h)}else{c=this.expressionSvc?.evaluate(a,h)}}else{c=this.setValueUsingField(t.data,l,n,r.isFieldContainsDots())}if(c===void 0){c=true}if(!c){return false}t.resetQuickFilterAggregateText();this.valueCache?.onDataChanged();const u=this.getValue(r,t);this.dispatchCellValueChangedEvent(t,h,u,o);if(t.pinnedSibling){this.dispatchCellValueChangedEvent(t.pinnedSibling,h,u,o)}return true}dispatchCellValueChangedEvent(t,e,i,s){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e.column,colDef:e.colDef,data:t.data,node:t,oldValue:e.oldValue,newValue:i,value:i,source:s})}callColumnCellValueChangedHandler(t){const e=t.colDef.onCellValueChanged;if(typeof e==="function"){this.beans.frameworkOverrides.wrapOutgoing((()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,context:t.context})}))}}setValueUsingField(t,e,i,s){if(!e){return false}let n=false;if(!s){n=t[e]===i;if(!n){t[e]=i}}else{const s=e.split(".");let o=t;while(s.length>0&&o){const t=s.shift();if(s.length===0){n=o[t]===i;if(!n){o[t]=i}}else{o=o[t]}}}return!n}executeValueGetterWithValueCache(t,e,i,s){const n=i.getColId();const o=this.valueCache.getValue(s,n);if(o!==void 0){return o}const r=this.executeValueGetterWithoutValueCache(t,e,i,s);this.valueCache.setValue(s,n,r);return r}executeValueGetterWithoutValueCache(t,e,i,s){const n=os(this.gos,{data:e,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let o;if(typeof t==="function"){o=t(n)}else{o=this.expressionSvc?.evaluate(t,n)}return o}getValueCallback(t,e){const i=this.colModel.getColDefCol(e);if(i){return this.getValue(i,t)}return null}getKeyForNode(t,e){const i=this.getValue(t,e);const s=t.getColDef().keyCreator;let n=i;if(s){const o=os(this.gos,{value:i,colDef:t.getColDef(),column:t,node:e,data:e.data});n=s(o)}if(typeof n==="string"||n==null){return n}n=String(n);if(n==="[object Object]"){hi(121)}return n}};var PC={moduleName:"CommunityCore",version:Ke,beans:[Bm,Nd,Tp,Dn,rC,Ig,Tm,wv,gn,Lw,Vw,aC,kC,Om,Dm,Nm,Ap,pC,Fp,kp,Tv],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:Bd,destroy:Gd,isDestroyed:Vd,getGridOption:Ld,setGridOption:zd,updateGridOptions:$d,isModuleRegistered:Wd},dependsOn:[yp,cg,wg,gC,kv,Bg,Pv,oC,RC,Mv,Gw,Uw,Kw,Av,Mp,Sp,xC,zg,Yw]};var DC={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1};var MC=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"];var TC={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:MC,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...MC,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...MC,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]};var EC={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function AC(t,e){const i=[];for(const s of Array.isArray(t)?t:[t]){const t=TC[s];if(t){for(const s of t){const t=EC[s];if(!t||t===e){i.push(s)}}}else{i.push(s)}}return i}var IC=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    `;var HC=t=>{const e=t.map((t=>`import { ${OC(t)} } from '${DC[t]?"ag-grid-enterprise":"ag-grid-community"}';`));const i=t.some((t=>t==="IntegratedCharts"||t==="Sparklines"));if(i){const t=`import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';`;e.push(t)}return`import { ModuleRegistry } from 'ag-grid-community'; \n${e.join(" \n")} \n\nModuleRegistry.registerModules([ ${t.map((t=>OC(t,true))).join(", ")} ]); \n\nFor more info see: ${Qe}/modules/`};function OC(t,e=false){if(e&&(t==="IntegratedCharts"||t==="Sparklines")){return`${t}Module.with(AgChartsEnterpriseModule)`}return`${t}Module`}function NC(t,e){const i=e.filter((t=>t==="IntegratedCharts"||t==="Sparklines"));let s="";const n=globalThis?.agCharts;if(!n&&i.length>0){s=`Unable to use ${t} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.\n`}else if(e.some((t=>DC[t]))){s=s+`Unable to use ${t} as that requires the ag-grid-enterprise script to be included.\n`}return s}function BC({moduleName:t,rowModelType:e}){return`To use the ${t}Module you must set the gridOption "rowModelType='${e}'"`}var GC=({reasonOrId:t,moduleName:e,gridScoped:i,gridId:s,rowModelType:n,additionalText:o,isUmd:r})=>{const l=AC(e,n);const a=typeof t==="string"?t:WC[t];if(r){return NC(a,l)}const h=l.filter((t=>t==="IntegratedCharts"||t==="Sparklines"));const c=h.length>0?`${h.map((t=>OC(t))).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";const u=`Unable to use ${a} as ${l.length>1?"one of "+l.map((t=>OC(t))).join(", "):OC(l[0])} is not registered${i?" for gridId: "+s:""}. ${c} Check if you have registered the module:\n`;return`${u}\n${HC(l)}`+(o?` \n\n${o}`:"")};var VC=t=>`${t} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ${t} } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([${t}.with(AgChartsEnterpriseModule)]);\n    `;var LC=t=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${t}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`;var zC={1:()=>"`rowData` must be an array",2:({nodeId:t})=>`Duplicate node id '${t}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:t})=>`Could not find row id=${t}, data item was not found for this id`,5:({data:t})=>[`Could not find data item as object was not found.`,t," Consider using getRowId to help the Grid find matching row data"],6:()=>`'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'`,7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:t})=>`Unknown key for navigation ${t}`,9:({variable:t})=>`No value for ${t?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${t?.defaultValue} will be used and updated when styles load.`,10:({eventType:t})=>`As of v33, the '${t}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:t})=>["column ",t," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:t})=>`Row IDs cannot start with ${t}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:t})=>["value should be either a string or a function",t],16:({expression:t,params:e,e:i})=>["Processing of the expression failed","Expression = ",t,"Params = ",e,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>`alignedGrids contains an undefined option.`,19:()=>`alignedGrids - No api found on the linked grid.`,20:()=>`You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:t})=>`${t} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:t})=>[`The getRowId callback must return a string. The ID `,t,` is being cast to a string.`],26:({fnName:t,preDestroyLink:e})=>`Grid API function ${t}() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${e}`,27:({fnName:t,module:e})=>`API function '${t}' not registered to module '${e}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:t})=>["tried to insert columns in invalid location, toIndex = ",t,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:t})=>`the column type '${t}' is a default column type and cannot be overridden.`,35:()=>`Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.`,36:({t})=>"colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes",37:()=>`Changing the column pinning status is not allowed with domLayout='print'`,38:({iconName:t})=>`provided icon '${t}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e:t,method:e})=>`${t}\n${LC(e)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:t})=>`As of v33, icon '${t}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:t})=>`The data type definition ${t} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:t})=>`Missing data type definition - "${t}"`,48:({property:t})=>`Cell data type is "object" but no Value ${t} has been provided. Please either provide an object data type definition with a Value ${t}, or set "colDef.value${t}"`,49:({methodName:t})=>`Framework component is missing the method ${t}()`,50:({compName:t})=>`Could not find component ${t}, did you forget to configure this component?`,51:()=>`Export cancelled. Export is not allowed as per your configuration.`,52:()=>"There is no `window` associated with the current `document`",53:()=>`unknown value type during csv conversion`,54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:t})=>`setFilterModel() - no column found for colId: ${t}`,63:({colId:t})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${t}`,64:({colId:t})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${t}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:t})=>`getGui method from filter returned ${t}; it should be a DOM element.`,70:({newFilter:t})=>`Grid option quickFilterText only supports string inputs, received: ${typeof t}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:t})=>[`ignoring FilterOptionDef as it doesn't contain one of `,t],73:()=>`invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'`,74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:t})=>['Unexpected type of filter "',t,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>`Filter model is missing 'conditions'`,78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:t})=>`DateFilter ${t} is not a number`,83:()=>`DateFilter minValidYear should be <= maxValidYear`,84:()=>`DateFilter minValidDate should be <= maxValidDate`,85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:t})=>`Invalid row index for ensureIndexVisible: ${t}`,89:()=>`A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)`,90:()=>`datasource is missing getRows method`,91:()=>"Filter is missing method doesFilterPass",92:()=>`AnimationFrameService called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:t,pageSizeSet:e,pageSizesSet:i,pageSizeOptions:s})=>`'paginationPageSize=${t}'${e?"":" (default value)"}, but ${t} is not included in${i?"":" the default"} paginationPageSizeSelector=[${s?.join(", ")}].`,95:({paginationPageSizeOption:t,paginationPageSizeSelector:e})=>`Either set '${e}' to an array that includes ${t} or to 'false' to disable the page size selector.`,96:({id:t,data:e})=>["Duplicate ID",t,"found for pinned row with data",e,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:t})=>`cellEditor for column ${t} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:t,componentName:e,agGridDefaults:i,jsComps:s})=>{const n=[];const o=[...Object.keys(i??[]).filter((t=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(t))),...Object.keys(s??[]).filter((t=>!!s[t]))];const r=qo({inputValue:e,allSuggestions:o,hideIrrelevant:true,filterByPercentageOfBestMatch:.8}).values;n.push(`Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.\n`);if(r.length>0){n.push(`         Did you mean: [${r.slice(0,3)}]?\n`)}n.push(`If using a custom component check it has been registered correctly.`);return n},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:t,param:e})=>`Numeric value ${t} passed to ${e} param will be interpreted as ${t} seconds. If this is intentional use "${t}s" to silence this warning.`,105:({e:t})=>[`chart rendering failed`,t],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Qe}/theming-migration/`,107:({key:t,value:e})=>`Invalid value for theme param ${t} - ${e}`,108:({e:t})=>["chart update failed",t],109:({inputValue:t,allSuggestions:e})=>{const i=qo({inputValue:t,allSuggestions:e,hideIrrelevant:true,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${t}' aggregate function. It was configured as "aggFunc: '${t}'" but it wasn't found in the list of registered aggregations.`,i.length>0?`         Did you mean: [${i.slice(0,3)}]?`:"",`If using a custom aggregation function check it has been registered correctly.`].join("\n")},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:t})=>`Could not find component with name of ${t}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:t})=>`Unable to update chart. No active chart found with ID: ${t}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:t})=>`unable to create chart as ${t?"there are no columns in the grid":"no range is selected"}.`,128:({feature:t})=>`${t} is only available if using 'multiRow' selection mode.`,129:({feature:t,rowModel:e})=>`${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:t})=>`icon '${t}' function should return back a string or a dom object`,134:({iconName:t})=>`Did not find icon '${t}'`,135:()=>`Data type of the new value does not match the cell data type of the column`,136:()=>`Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`,137:({type:t,currentChartType:e})=>`Unable to update chart as a '${t}' update type is not permitted on a ${e}.`,138:({chartType:t})=>`invalid chart type supplied: ${t}`,139:({customThemeName:t})=>`a custom chart theme with the name ${t} has been supplied but not added to the 'chartThemes' list`,140:({name:t})=>`no stock theme exists with the name '${t}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:t})=>`'${t}' is not a valid Chart Tool Panel name`,144:({type:t})=>`Invalid charts data panel group name supplied: '${t}'`,145:({group:t})=>`As of v32, only one charts customize panel group can be expanded at a time. '${t}' will not be expanded.`,146:({comp:t})=>`Unable to instantiate component '${t}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:t})=>`Invalid charts customize panel group name supplied: '${t}'`,148:({group:t})=>`invalid chartGroupsDef config '${t}'`,149:({group:t,chartType:e})=>`invalid chartGroupsDef config '${t}.${e}'`,150:()=>`'seriesChartTypes' are required when the 'customCombo' chart type is specified.`,151:({chartType:t})=>`invalid chartType '${t}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:t})=>`no 'seriesChartType' found for colId = '${t}', defaulting to 'line'.`,153:({chartDataType:t})=>`unexpected chartDataType value '${t}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:t})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${t}`,155:({option:t})=>`'${t}' is not a valid Chart Toolbar Option`,156:({panel:t})=>`Invalid panel in chartToolPanelsDef.panels: '${t}'`,157:({unrecognisedGroupIds:t})=>["unable to find group(s) for supplied groupIds:",t],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>`Export cancelled. Export is not allowed as per your configuration.`,161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:t,dataType:e})=>`Unrecognized data type for excel export [${t}.dataType=${e}]`,163:({featureName:t})=>`Excel table export does not work with ${t}. The exported Excel file will not contain any Excel tables.\n Please turn off ${t} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:t})=>["unable to find groups for these supplied groupIds:",t],167:({unrecognisedColIds:t})=>["unable to find columns for these supplied colIds:",t],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:t})=>`invalid cellRendererParams.refreshStrategy = ${t} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:t})=>`invalid chartGroupsDef config '${t}'`,174:({group:t,chartType:e})=>`invalid chartGroupsDef config '${t}.${e}'`,175:({menuTabName:t,itemsToConsider:e})=>[`Trying to render an invalid menu item '${t}'. Check that your 'menuTabs' contains one of `,e],176:({key:t})=>`unknown menu item type ${t}`,177:()=>`valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.`,178:({colId:t})=>`column ${t} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:t,childNodeData:e})=>[`duplicate group keys for row data, keys should be unique`,[t,e]],185:({data:t})=>[`getDataPath() should not return an empty path`,[t]],186:({rowId:t,rowData:e,duplicateRowsData:i})=>[`duplicate group keys for row data, keys should be unique`,t,e,...i??[]],187:({rowId:t,firstData:e,secondData:i})=>[`Duplicate node id ${t}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",e,"second instance",i],188:t=>`getRowId callback must be provided for Server Side Row Model ${t?.feature||"selection"} to work correctly.`,189:({startRow:t})=>`invalid value ${t} for startRow, the value should be >= 0`,190:({rowGroupId:t,data:e})=>[`null and undefined values are not allowed for server side row model keys`,t?`column = ${t}`:``,`data is `,e],194:({method:t})=>`calling gridApi.${t}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:t})=>`selecting just ${t?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:t})=>`Provided ids must be of string type. Invalid id provided: ${t}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>`getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use \`api.getServerSideSelectionState()\` instead.`,200:GC,201:({rowModelType:t})=>`Could not find row model for rowModelType = ${t}`,202:()=>`\`getSelectedNodes\` and \`getSelectedRows\` functions cannot be used with \`groupSelectsChildren\` and the server-side row model. Use \`api.getServerSideSelectionState()\` instead.`,203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:t})=>`Unable to display rows as duplicate row ids (${t}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.`,209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Qe}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>`please review all your toolPanel components, it seems like at least one of them doesn't have an id`,213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:t})=>`unable to lookup Tool Panel as invalid key supplied: ${t}`,215:({key:t,defaultByKey:e})=>`the key ${t} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(e??{}).join(",")}`,216:({name:t})=>`Missing component for '${t}'`,217:({invalidColIds:t})=>["unable to find grid columns for the supplied colDef(s):",t],218:({property:t,defaultOffset:e})=>`${t} must be a number, the value you provided is not a valid number. Using the default of ${e}px.`,219:({property:t})=>`Property ${t} does not exist on the target object.`,220:({lineDash:t})=>`'${t}' is not a valid 'lineDash' option.`,221:()=>`agAggregationComponent should only be used with the client and server side row model.`,222:()=>`agFilteredRowCountComponent should only be used with the client side row model.`,223:()=>`agSelectedRowCountComponent should only be used with the client and server side row model.`,224:()=>`agTotalAndFilteredRowCountComponent should only be used with the client side row model.`,225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:t})=>`unrecognised menu item ${t}`,229:({index:t})=>["invalid row index for ensureIndexVisible: ",t],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:t})=>`Framework component is missing the method ${t}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:t})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${t}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:t})=>`AG Grid: Unable to create chart as an invalid chartType = '${t}' was supplied.`,252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:({version:t})=>["Illegal version string: ",t],254:()=>"Cannot create chart: no chart themes available.",255:({point:t})=>`Lone surrogate U+${t?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>VC("IntegratedChartsModule"),258:()=>VC("SparklinesModule"),259:({part:t})=>`the argument to theme.withPart must be a Theming API part object, received: ${t}`,260:({propName:t,compName:e,gridScoped:i,gridId:s,rowModelType:n})=>GC({reasonOrId:`AG Grid '${t}' component: ${e}`,moduleName:qm[e],gridId:s,gridScoped:i,rowModelType:n}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:t})=>`Unable to infer chart data type for column '${t}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Qe}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:t,parentId:e})=>`Cycle detected for row with id='${t}' and parent id='${e}'. Resetting the parent for row with id='${t}' and showing it as a root-level node.`,271:({id:t,parentId:e})=>`Parent row not found for row with id='${t}' and parent id='${e}'. Showing row with id='${t}' as a root-level node.`,272:()=>IC(),273:({providedId:t,usedId:e})=>`Provided column id '${t}' was already in use, ensure all column and group ids are unique. Using '${e}' instead.`,274:({prop:t})=>{let e=`Since v33, ${t} has been deprecated.`;switch(t){case"maxComponentCreationTimeMs":e+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":e+=` This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api `;break;case"children":e+=` For multiple versions AgGridReact does not support children.`;break}return e},275:BC,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:t})=>`'enableFilterHandlers' is set to true, but column '${t}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:t})=>`Unable to create filter handler for column '${t}'`,279:t=>{},280:({colId:t})=>`'name' must be provided for custom filter components for column '${t}`,281:({colId:t})=>`Filter for column '${t}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:t})=>`Row Model '${t}' is not supported with Batch Editing`,290:({rowIndex:t,rowPinned:e})=>`Row with index '${t}' and pinned state '${e}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:t})=>`The Multi Filter for column '${t}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function $C(t,e){const i=zC[t];if(!i){return[`Missing error text for error id ${t}!`]}const s=i(e);const n=li(t,e);const o=`\nSee ${n}`;return Array.isArray(s)?s.concat(o):[s,o]}var WC={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"};var UC=new WeakMap;var jC=new WeakMap;function KC(t,e,i){if(!e){ci(11);return{}}let s;{const e=Ma({tag:"div"});e.style.height="100%";t.appendChild(e);t=e;s=()=>t.remove()}const n=(new _C).create(t,e,(e=>{const i=new Td(t);e.createBean(i)}),void 0,i,s);return n}var qC=1;var _C=class{create(t,e,i,s,n,o){const r=be.applyGlobalGridOptions(e);const l=r.gridId??String(qC++);const a=this.getRegisteredModules(n,l,r.rowModelType);const h=this.createBeansList(r.rowModelType,a,l);const c=this.createProvidedBeans(t,r,n);if(!h){return void 0}const u=()=>{jC.delete(g);UC.delete(t);Ge(l);o?.()};const d={providedBeanInstances:c,beanClasses:h,id:l,beanInitComparator:ud,beanDestroyComparator:dd,derivedBeans:[ad],destroyCallback:u};const f=new Al(d);this.registerModuleFeatures(f,a);i(f);f.getBean("syncSvc").start();s?.(f);const g=f.getBean("gridApi");UC.set(t,g);jC.set(g,t);return g}getRegisteredModules(t,e,i){Be(PC,void 0,true);t?.modules?.forEach((t=>Be(t,e)));return ze(e,ZC(i))}registerModuleFeatures(t,e){const i=t.getBean("registry");const s=t.getBean("apiFunctionSvc");for(const t of e){i.registerModule(t);const e=t.apiFunctions;if(e){const t=Object.keys(e);for(const i of t){s?.addFunction(i,e[i])}}}}createProvidedBeans(t,e,i){let n=i?i.frameworkOverrides:null;if(s(n)){n=new ld}const o={gridOptions:e,eGridDiv:t,eRootDiv:t,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};if(i?.providedBeanInstances){Object.assign(o,i.providedBeanInstances)}return o}createBeansList(t,e,i){const s={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"};const n=ZC(t);const o=s[n];if(!o){ui(201,{rowModelType:n},`Unknown rowModelType ${n}.`);return}if(!We()){ui(272,void 0,IC());return}if(!t){const t=Object.entries(s).filter((([t,e])=>Ve(e,i,t)));if(t.length==1){const[e,i]=t[0];if(e!==n){const t={moduleName:i,rowModelType:e};ui(275,t,BC(t));return}}}if(!Ve(o,i,n)){ui(200,{reasonOrId:`rowModelType = '${n}'`,moduleName:o,gridScoped:Le(),gridId:i,rowModelType:n},`Missing module ${o}Module for rowModelType ${n}.`);return}const r=new Set;for(const t of e){for(const e of t.beans??[]){r.add(e)}}return Array.from(r)}};function ZC(t){return t??"clientSide"}function YC(t){const e=t.rowModel;return e.getType()==="clientSide"?e:void 0}function QC(t){const e=t.rowModel;return e.getType()==="infinite"?e:void 0}function JC(t){const e=t.rowModel;return e.getType()==="serverSide"?e:void 0}var XC=class extends re{constructor(){super(...arguments);this.beanName="localeSvc"}getLocaleTextFunc(){const t=this.gos;const e=t.getCallback("getLocaleText");if(e){return ee(e)}return ie(t.get("localeText"))}};function tb(t,e=false){const i=[];const s=[];const n=[];const o=[];const r=[];const l=[];const a=[];const h=[];const c=[];let u=0;for(let e=0;e<t.length;e++){const{colId:d,sort:f,sortIndex:g,rowGroup:p,rowGroupIndex:m,aggFunc:v,pivot:w,pivotIndex:C,pinned:b,hide:y,width:S,flex:x}=t[e];c.push(d);if(f){i[g??u++]={colId:d,sort:f}}if(p){s[m??0]=d}if(typeof v==="string"){n.push({colId:d,aggFunc:v})}if(w){o[C??0]=d}if(b){(b==="right"?l:r).push(d)}if(y){a.push(d)}if(x!=null||S){h.push({colId:d,flex:x??void 0,width:S})}}return{sort:i.length?{sortModel:eb(i)}:void 0,rowGroup:s.length?{groupColIds:eb(s)}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:o.length||e?{pivotMode:e,pivotColIds:eb(o)}:void 0,columnPinning:r.length||l.length?{leftColIds:r,rightColIds:l}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:h.length?{columnSizingModel:h}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}function eb(t){return t.filter((t=>t!=void 0))}function ib(t){const e=[];for(const{groupId:i,open:s}of t){if(s){e.push(i)}}return e.length?{openColumnGroupIds:e}:void 0}function sb(t){return t.get("tooltipShowMode")==="whenTruncated"}function nb(t,e){if(typeof t!=="number"){return""}const i=e();const s=i("thousandSeparator",",");const n=i("decimalSeparator",".");return t.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${s}`)}var ob=class extends re{getFileName(t){const e=this.getDefaultFileExtension();if(!t?.length){t=this.getDefaultFileName()}return t.includes(".")?t:`${t}.${e}`}getData(t){const e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}};var rb=class{constructor(t){const{colModel:e,rowGroupColsSvc:i,colNames:s,valueSvc:n,gos:o,processCellCallback:r,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:h}=t;this.colModel=e;this.rowGroupColsSvc=i;this.colNames=s;this.valueSvc=n;this.gos=o;this.processCellCallback=r;this.processHeaderCallback=l;this.processGroupHeaderCallback=a;this.processRowGroupCallback=h}prepare(t){}extractHeaderValue(t){const e=this.getHeaderName(this.processHeaderCallback,t);return e??""}extractRowCellValue(t,e,i,s,n){const o=e===0&&Ii(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(t.isRowGroupDisplayed(n.rowGroupColumn?.getColId()??"")||o)){return{value:this.processRowGroupCallback(os(this.gos,{column:t,node:n}))??""}}if(this.processCellCallback){return{value:this.processCellCallback(os(this.gos,{accumulatedRowIndex:i,column:t,node:n,value:this.valueSvc.getValueForDisplay(t,n,void 0,void 0).value,type:s,parseValue:e=>this.valueSvc.parseValue(t,n,e,this.valueSvc.getValue(t,n,void 0)),formatValue:e=>this.valueSvc.formatValue(t,n,e)??e}))??""}}const r=this.gos.get("treeData");const l=this.valueSvc;const a=n.level===-1&&n.footer;const h=t.colDef.showRowGroup===true&&(n.group||r);if(!a&&(o||h)){let e="";let i=n;while(i&&i.level!==-1){const{value:s,valueFormatted:n}=l.getValueForDisplay(o?void 0:t,i,true,true);e=` -> ${n??s??""}${e}`;i=i.parent}return{value:e,valueFormatted:e}}const{value:c,valueFormatted:u}=l.getValueForDisplay(t,n,true,true);return{value:c??"",valueFormatted:u}}getHeaderName(t,e){if(t){return t(os(this.gos,{column:e}))}return this.colNames.getDisplayNameForColumn(e,"csv",true)}};function lb(t,e){const i=document.defaultView||window;if(!i){hi(52);return}const s=document.createElement("a");const n=i.URL.createObjectURL(e);s.setAttribute("href",n);s.setAttribute("download",t);s.style.display="none";document.body.appendChild(s);s.dispatchEvent(new MouseEvent("click",{bubbles:false,cancelable:true,view:i}));s.remove();i.setTimeout((()=>{i.URL.revokeObjectURL(n)}),0)}var ab={enableBrowserTooltips:true,tooltipTrigger:true,tooltipMouseTrack:true,tooltipShowMode:true,tooltipInteraction:true,defaultColGroupDef:true,suppressAutoSize:true,skipHeaderOnAutoSize:true,autoSizeStrategy:true,components:true,stopEditingWhenCellsLoseFocus:true,undoRedoCellEditing:true,undoRedoCellEditingLimit:true,excelStyles:true,cacheQuickFilter:true,customChartThemes:true,chartThemeOverrides:true,chartToolPanelsDef:true,loadingCellRendererSelector:true,localeText:true,keepDetailRows:true,keepDetailRowsCount:true,detailRowHeight:true,detailRowAutoHeight:true,tabIndex:true,valueCache:true,valueCacheNeverExpires:true,enableCellExpressions:true,suppressTouch:true,suppressBrowserResizeObserver:true,suppressPropertyNamesCheck:true,debug:true,dragAndDropImageComponent:true,loadingOverlayComponent:true,suppressLoadingOverlay:true,noRowsOverlayComponent:true,paginationPageSizeSelector:true,paginateChildRows:true,pivotPanelShow:true,pivotSuppressAutoColumn:true,suppressExpandablePivotGroups:true,aggFuncs:true,allowShowChangeAfterFilter:true,ensureDomOrder:true,enableRtl:true,suppressColumnVirtualisation:true,suppressMaxRenderedRowRestriction:true,suppressRowVirtualisation:true,rowDragText:true,groupLockGroupColumns:true,suppressGroupRowsSticky:true,rowModelType:true,cacheOverflowSize:true,infiniteInitialRowCount:true,serverSideInitialRowCount:true,maxBlocksInCache:true,maxConcurrentDatasourceRequests:true,blockLoadDebounceMillis:true,serverSideOnlyRefreshFilteredGroups:true,serverSidePivotResultFieldSeparator:true,viewportRowModelPageSize:true,viewportRowModelBufferSize:true,debounceVerticalScrollbar:true,suppressAnimationFrame:true,suppressPreventDefaultOnMouseWheel:true,scrollbarWidth:true,icons:true,suppressRowTransform:true,gridId:true,enableGroupEdit:true,initialState:true,processUnpinnedColumns:true,createChartContainer:true,getLocaleText:true,getRowId:true,reactiveCustomComponents:true,renderingMode:true,columnMenu:true,suppressSetFilterByDefault:true,getDataPath:true,enableCellSpan:true,enableFilterHandlers:true,filterHandlers:true};var hb="clientSide";var cb="serverSide";var ub="infinite";var db={onGroupExpandedOrCollapsed:[hb],refreshClientSideRowModel:[hb],isRowDataEmpty:[hb],forEachLeafNode:[hb],forEachNodeAfterFilter:[hb],forEachNodeAfterFilterAndSort:[hb],resetRowHeights:[hb,cb],applyTransaction:[hb],applyTransactionAsync:[hb],flushAsyncTransactions:[hb],getBestCostNodeSelection:[hb],getServerSideSelectionState:[cb],setServerSideSelectionState:[cb],applyServerSideTransaction:[cb],applyServerSideTransactionAsync:[cb],applyServerSideRowData:[cb],retryServerSideLoads:[cb],flushServerSideAsyncTransactions:[cb],refreshServerSide:[cb],getServerSideGroupLevelState:[cb],refreshInfiniteCache:[ub],purgeInfiniteCache:[ub],getInfiniteRowCount:[ub],isLastRowIndexKnown:[ub,cb],expandAll:[hb,cb],collapseAll:[hb,cb],onRowHeightChanged:[hb,cb],setRowCount:[ub,cb],getCacheBlockState:[ub,cb]};var fb={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function gb(t,e,i){const s=fb[t];if(s){const{version:i,new:n,old:o,message:r}=s;const l=o??t;return(...t)=>{const s=n?`Please use ${n} instead. `:"";ke(`Since ${i} api.${l} is deprecated. ${s}${r??""}`);return e.apply(e,t)}}const n=db[t];if(n){return(...s)=>{const o=i.rowModel.getType();if(!n.includes(o)){Pe(`api.${t} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return void 0}return e.apply(e,s)}}return e}var pb={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"};var mb={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1};var vb={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"};var wb=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]);var Cb=class extends re{constructor(){super(...arguments);this.beanName="validation"}wireBeans(t){this.gridOptions=t.gridOptions;Je($C)}warnOnInitialPropertyUpdate(t,e){if(t==="api"&&ab[e]){hi(22,{key:e})}}processGridOptions(t){this.processOptions(t,gv())}validateApiFunction(t,e){return gb(t,e,this.beans)}missingUserComponent(t,e,i,s){const n=qm[e];if(n){this.gos.assertModuleRegistered(n,`AG Grid '${t}' component: ${e}`)}else{hi(101,{propertyName:t,componentName:e,agGridDefaults:i,jsComps:s})}}missingDynamicBean(t){const e=pb[t];return e?fi(200,{...this.gos.getModuleErrorParams(),moduleName:e,reasonOrId:t}):void 0}checkRowEvents(t){if(yb.has(t)){hi(10,{eventType:t})}}validateIcon(t){if(wb.has(t)){hi(43,{iconName:t})}if(mb[t]){return}const e=vb[t];if(e){ci(200,{reasonOrId:`icon '${t}'`,moduleName:e,gridScoped:Le(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}hi(134,{iconName:t})}isProvidedUserComp(t){return!!qm[t]}validateColDef(t){this.processOptions(t,tv())}processOptions(t,e){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:l}=e;if(n&&this.gridOptions.suppressPropertyNamesCheck!==true){this.checkProperties(t,[...o??[],...Object.keys(s)],n,r,l)}const a=new Set;const h=Object.keys(t);h.forEach((e=>{const n=s[e];if(n){const{message:t,version:i}=n;a.add(`As of v${i}, ${String(e)} is deprecated. ${t??""}`)}const o=t[e];if(o==null||o===false){return}const r=i[e];if(!r){return}const{dependencies:l,validate:h,supportedRowModels:c,expectedType:u}=r;if(u){const t=typeof o;if(t!==u){a.add(`${String(e)} should be of type '${u}' but received '${t}' (${o}).`);return}}if(c){const t=this.gridOptions.rowModelType??"clientSide";if(!c.includes(t)){a.add(`${String(e)} is not supported with the '${t}' row model. It is only valid with: ${c.join(", ")}.`);return}}if(l){const i=this.checkForRequiredDependencies(e,l,t);if(i){a.add(i);return}}if(h){const e=h(t,this.gridOptions,this.beans);if(e){a.add(e);return}}}));if(a.size>0){for(const t of a){ke(t)}}}checkForRequiredDependencies(t,e,i){const s=Object.entries(e);const n=s.filter((([t,e])=>{const s=i[t];return!e.required.includes(s)}));if(n.length===0){return null}return n.map((([e,i])=>`'${String(t)}' requires '${e}' to be one of [${i.required.map((t=>{if(t===null){return"null"}else if(t===void 0){return"undefined"}return t})).join(", ")}]. ${i.reason??""}`)).join("\n           ")}checkProperties(t,e,i,s,n){const o=["__ob__","__v_skip","__metadata__"];const r=bb(Object.getOwnPropertyNames(t),[...o,...e,...i],i);const l=Object.keys(r);for(const t of l){const e=r[t];let n=`invalid ${s} property '${t}' did you mean any of these: ${e.slice(0,8).join(", ")}.`;if(i.includes("context")){n+=`\nIf you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`}ke(n)}if(l.length>0&&n){const t=this.beans.frameworkOverrides.getDocLink(n);ke(`to see all the valid ${s} properties please check: ${t}`)}}};function bb(t,e,i){const s={};const n=t.filter((t=>!e.some((e=>e===t))));if(n.length>0){for(const t of n){s[t]=qo({inputValue:t,allSuggestions:i}).values}}return s}var yb=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]);var Sb={moduleName:"Validation",version:Ke,beans:[Cb]};function xb(t){const e=t.sibling;if(e){e.childrenAfterFilter=t.childrenAfterFilter}}var Rb=class extends re{constructor(){super(...arguments);this.beanName="filterStage";this.step="filter";this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(t){this.filterManager=t.filterManager}execute(t){const{changedPath:e}=t;this.filter(e)}filter(t){const e=!!this.filterManager?.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){const i=(e,i)=>{if(e.hasChildren()){if(t&&!i){e.childrenAfterFilter=e.childrenAfterGroup.filter((t=>{const e=t.childrenAfterFilter&&t.childrenAfterFilter.length>0;const i=t.data&&this.filterManager.doesRowPassFilter({rowNode:t});return e||i}))}else{e.childrenAfterFilter=e.childrenAfterGroup}}else{e.childrenAfterFilter=e.childrenAfterGroup}xb(e)};if(this.doingTreeDataFiltering()){const t=(e,s)=>{if(e.childrenAfterGroup){for(let n=0;n<e.childrenAfterGroup.length;n++){const o=e.childrenAfterGroup[n];const r=s||this.filterManager.doesRowPassFilter({rowNode:o});if(o.childrenAfterGroup){t(e.childrenAfterGroup[n],r)}else{i(o,r)}}}i(e,s)};const s=e=>t(e,false);e.executeFromRootNode(s)}else{const t=t=>i(t,false);e.forEachChangedNodeDepthFirst(t,true)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};var Fb=class extends Xc{constructor(){super(...arguments);this.iconCreated=false}wireComp(t,e,i,s,n){this.comp=t;const o=mn(this,this.beans.context,n);this.eButtonShowMainFilter=i;this.eFloatingFilterBody=s;this.setGui(e,o);this.setupActive();this.refreshHeaderStyles();this.setupWidth(o);this.setupLeft(o);this.setupHover(o);this.setupFocus(o);this.setupAria();this.setupFilterButton();this.setupUserComp();this.setupSyncWithFilter(o);this.setupUi();o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)});this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r});o.addManagedEventListeners({filterSwitched:({column:t})=>{if(t===this.column){r()}}});o.addDestroyFunc((()=>{this.eButtonShowMainFilter=null;this.eFloatingFilterBody=null;this.userCompDetails=null;this.clearComponent()}))}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:t,beans:e}=this;const i=t.colDef;return os(e.gos,{colDef:i,column:t,floatingFilter:true})}setupActive(){const t=this.column.getColDef();const e=!!t.filter;const i=!!t.floatingFilter;this.active=e&&i}setupUi(){this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active);this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton);this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);if(!this.active||this.iconCreated){return}const t=pu("filter",this.beans,this.column);if(t){this.iconCreated=true;this.eButtonShowMainFilter.appendChild(t)}}setupFocus(t){t.createManagedBean(new sh(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const t=this.getLocaleTextFunc();k(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){const{beans:e}=this;const i=d(e);const s=i===this.eGui;if(s){return}const n=or(e,this.eGui,null,t.shiftKey);if(n){e.headerNavigation?.scrollToColumn(this.column);t.preventDefault();n.focus();return}const o=this.findNextColumnWithFloatingFilter(t.shiftKey);if(!o){return}if(e.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:t})){t.preventDefault()}}findNextColumnWithFloatingFilter(t){const e=this.beans.visibleCols;let i=this.column;do{i=t?e.getColBefore(i):e.getColAfter(i);if(!i){break}}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();switch(t.key){case mo.UP:case mo.DOWN:case mo.LEFT:case mo.RIGHT:if(e){return}th(t);case mo.ENTER:if(e){if(nr(this.eGui)){t.preventDefault()}}break;case mo.ESCAPE:if(!e){this.eGui.focus()}}}onFocusIn(t){const e=this.eGui.contains(t.relatedTarget);if(e){return}const i=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter");const s=!!t.relatedTarget&&st(t.relatedTarget,"ag-floating-filter");if(i&&s&&t.target===this.eGui){const t=this.lastFocusEvent;const e=!!(t&&t.key===mo.TAB);if(t&&e){const e=t.shiftKey;nr(this.eGui,e)}}this.focusThis()}setupHover(t){this.beans.colHover?.addHeaderFilterColumnHoverListener(t,this.comp,this.column,this.eGui)}setupLeft(t){const e=new Yc(this.column,this.eGui,this.beans);t.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column);this.highlightFilterButtonWhenActive=!is(this.gos)}setupUserComp(){if(!this.active){return}const t=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));if(t){this.setCompDetails(t)}}setCompDetails(t){this.userCompDetails=t;this.comp.setCompDetails(t)}showParentFilter(){const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(t){if(!this.active){return}const{beans:{colFilter:e},column:i,gos:s}=this;const n=t=>{if(t?.source==="filterDestroyed"&&(!this.isAlive()||!e?.isAlive())){return}const n=this.comp.getFloatingFilterComp();if(!n){return}n.then((n=>{if(n){if(s.get("enableFilterHandlers")){const e=t;let i="filter";if(e?.afterFloatingFilter){i="ui"}else if(e?.afterDataChange){i="dataChanged"}else if(t?.source==="api"){i="api"}this.updateFloatingFilterParams(this.userCompDetails,i);return}const o=e?.getCurrentFloatingFilterParentModel(i);const r=t?{...t,columns:t.columns??[],source:t.source==="api"?"api":"columnFilter"}:null;n.onParentModelChanged(o,r)}}))};[this.destroySyncListener]=t.addManagedListeners(i,{filterChanged:n});if(e?.isFilterActive(i)){n(null)}}setupWidth(t){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};t.addManagedListeners(this.column,{widthChanged:e});e()}setupFilterChangedListener(t){if(this.active){[this.destroyFilterChangedListener]=t.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)});this.updateFilterButton()}}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const t=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t);if(this.highlightFilterButtonWhenActive&&t){this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}}onColDefChanged(t){const e=this.active;this.setupActive();const i=!e&&this.active;if(e&&!this.active){this.destroySyncListener();this.destroyFilterChangedListener()}const s=this.beans.colFilter;const n=this.active?s?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null;const o=this.comp.getFloatingFilterComp();if(!o||!n){this.updateCompDetails(t,n,i)}else{o.then((e=>{if(!e||s?.areFilterCompsDifferent(this.userCompDetails??null,n)){this.updateCompDetails(t,n,i)}else{this.updateFloatingFilterParams(n,"colDef")}}))}}updateCompDetails(t,e,i){if(!this.isAlive()){return}this.setCompDetails(e);this.setupFilterButton();this.setupUi();if(i){this.setupSyncWithFilter(t);this.setupFilterChangedListener(t)}}updateFloatingFilterParams(t,e){if(!t){return}let i=t.params;this.comp.getFloatingFilterComp()?.then((t=>{if(typeof t?.refresh==="function"){if(this.gos.get("enableFilterHandlers")){i={...i,model:Da(this.beans.colFilter?.model??{},this.column.getColId()),source:e}}t.refresh(i)}}))}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy();this.destroySyncListener=null;this.destroyFilterChangedListener=null}};function kb(t,e){const i=t.colModel.getCol(e);if(!i){ci(12,{colKey:e});return}t.menuSvc?.showColumnMenu({column:i,positionBy:"auto"})}function Pb(t){t.menuSvc?.hidePopupMenu()}var Db={moduleName:"SharedMenu",version:Ke,beans:[ou],apiFunctions:{showColumnMenu:kb,hidePopupMenu:Pb}};var Mb=class extends ql{postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.gridCtrl=t.gridCtrl}));this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(t){const{eventSource:e,ePopup:i,event:s}=t;const n=e.getBoundingClientRect();const o=this.getParentRect();this.setAlignedTo(e,i);let r=false;const l=()=>{const t=this.keepXYWithinBounds(i,n.top-o.top,0);const e=i.clientWidth>0?i.clientWidth:200;if(!r){i.style.minWidth=`${e}px`;r=true}const s=o.right-o.left;const l=s-e;let a;if(this.gos.get("enableRtl")){a=c();if(a<0){a=h();this.setAlignedStyles(i,"left")}if(a>l){a=0;this.setAlignedStyles(i,"right")}}else{a=h();if(a>l){a=c();this.setAlignedStyles(i,"right")}if(a<0){a=0;this.setAlignedStyles(i,"left")}}return{x:a,y:t};function h(){return n.right-o.left-2}function c(){return n.left-o.left-e}};this.positionPopup({ePopup:i,keepWithinBounds:true,updatePosition:l,postProcessCallback:()=>this.callPostProcessPopup(t,"subMenu",i,e,s instanceof MouseEvent?s:void 0)})}callPostProcessPopup(t,e,i,s,n){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:r,rowNode:l}=t;const a={column:r,rowNode:l,ePopup:i,type:e,eventSource:s,mouseEvent:n};o(a)}}getActivePopups(){return this.popupList.map((t=>t.element))}handleThemeChange(t){if(t.themeChanged){const t=this.beans.environment;for(const e of this.popupList){t.applyThemeClasses(e.wrapper)}}}hasAnchoredPopup(){return this.popupList.some((t=>t.isAnchored))}isStopPropagation(t){return eh(t)}};var Tb={moduleName:"Popup",version:Ke,beans:[Mb]};var Eb=`.ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}`;function Ab(t){const e=t.filterManager;return!!e?.isColumnFilterPresent()||!!e?.isAggregateFilterPresent()}function Ib(t,e){return t.filterManager?.getColumnFilterInstance(e)??Promise.resolve(void 0)}function Hb(t,e){const i=t.colModel.getColDefCol(e);if(i){return t.colFilter?.destroyFilter(i,"api")}}function Ob(t,e){t.frameworkOverrides.wrapIncoming((()=>t.filterManager?.setFilterModel(e)))}function Nb(t){return t.filterManager?.getFilterModel()??{}}function Bb(t,e,i){const{gos:s,colModel:n,colFilter:o}=t;if(i&&!s.get("enableFilterHandlers")){hi(288);i=false}const r=n.getColDefCol(e);return r?o?.getModelForColumn(r,i)??null:null}function Gb(t,e,i){return t.filterManager?.setColumnFilterModel(e,i)??Promise.resolve()}function Vb(t,e){const i=t.colModel.getCol(e);if(!i){ci(12,{colKey:e});return}t.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function Lb(t){t.menuSvc?.hideFilterMenu()}function zb(t,e){const i=t.colModel.getCol(e);if(!i){ci(12,{colKey:e});return void 0}return t.colFilter?.getHandler(i,true)}function $b(t,e){const{colModel:i,colFilter:s,gos:n}=t;if(!n.get("enableFilterHandlers")){hi(287);return}const{colId:o,action:r}=e;if(o){const t=i.getColById(o);if(t){s?.updateModel(t,r)}}else{s?.updateAllModels(r)}}var Wb={filterHandler:()=>({doesFilterPass:()=>true})};var Ub=class extends re{constructor(){super(...arguments);this.beanName="colFilter";this.allColumnFilters=new Map;this.allColumnListeners=new Map;this.activeAggregateFilters=[];this.activeColumnFilters=[];this.processingFilterChange=false;this.modelUpdates=[];this.columnModelUpdates=[];this.state=new Map;this.handlerMap={...ya};this.isGlobalButtons=false;this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const t=this.gos;const e={...t.get("initialState")?.filter?.filterModel??{}};this.initialModel=e;this.model={...e};if(!t.get("enableFilterHandlers")){delete this.handlerMap["agMultiColumnFilter"]}}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(t,e="api",i){const{colModel:s,dataTypeSvc:n,filterManager:r}=this.beans;if(n?.isPendingInference){this.modelUpdates.push({model:t,source:e});return}const l=[];const a=this.getModel(true);if(t){const e=new Set(Object.keys(t));this.allColumnFilters.forEach(((i,s)=>{const n=t[s];l.push(this.setModelOnFilterWrapper(i,n));e.delete(s)}));e.forEach((e=>{const i=s.getColDefCol(e)||s.getCol(e);if(!i){hi(62,{colId:e});return}if(!i.isFilterAllowed()){hi(63,{colId:e});return}const n=this.getOrCreateFilterWrapper(i,true);if(!n){hi(64,{colId:e});return}l.push(this.setModelOnFilterWrapper(n,t[e],true))}))}else{this.model={};this.allColumnFilters.forEach((t=>{l.push(this.setModelOnFilterWrapper(t,null))}))}Fn.all(l).then((()=>{const t=this.getModel(true);const s=[];this.allColumnFilters.forEach(((e,i)=>{const n=a?a[i]:null;const r=t?t[i]:null;if(!o(n,r)){s.push(e.column)}}));if(s.length>0){r?.onFilterChanged({columns:s,source:e})}else if(i){this.updateActive("filterChanged")}}))}getModel(t){const e={};const{allColumnFilters:s,initialModel:n,beans:{colModel:o}}=this;s.forEach(((t,s)=>{const n=this.getModelFromFilterWrapper(t);if(i(n)){e[s]=n}}));if(!t){for(const t of Object.keys(n)){const r=n[t];if(i(r)&&!s.has(t)&&o.getCol(t)?.isFilterAllowed()){e[t]=r}}}return e}setState(t,e,i="api"){this.state.clear();if(e){for(const t of Object.keys(e)){const i=e[t];this.state.set(t,{model:Da(this.model,t),state:i})}}this.setModel(t,i,true)}getState(){const t=this.state;if(!t.size){return void 0}const e={};let i=false;t.forEach(((t,s)=>{const n=t.state;if(n!=null){i=true;e[s]=n}}));return i?e:void 0}getModelFromFilterWrapper(t){const e=t.column;const i=e.getColId();if(t.isHandler){return Da(this.model,i)}const s=t.filter;if(s){if(typeof s.getModel!=="function"){hi(66);return null}return s.getModel()}return Da(this.initialModel,i)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:t}=this;if(t.size){t.forEach((t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")));return true}return false}updateActiveFilters(){const t=t=>{if(!t){return false}if(!t.isFilterActive){hi(67);return false}return t.isFilterActive()};const{colModel:e,gos:i}=this.beans;const s=!!Ti(i);const n=t=>{const i=!t.isPrimary();if(i){return true}const n=!e.isPivotActive();const o=t.isValueActive();if(!o||!n){return false}if(e.isPivotMode()){return true}return s};const o=[];const r=[];const l=(t,e,i)=>{if(e){if(n(t)){o.push(i)}else{r.push(i)}}};const a=[];this.allColumnFilters.forEach((e=>{const i=e.column;const s=i.getColId();if(e.isHandler){a.push(Fn.resolve().then((()=>{l(i,this.isHandlerActive(i),{colId:s,isHandler:true,handler:e.handler,handlerParams:e.handlerParams})})))}else{const n=xa(e);if(n){a.push(n.then((e=>{l(i,t(e),{colId:s,isHandler:false,comp:e})})))}}}));return Fn.all(a).then((()=>{this.activeAggregateFilters=o;this.activeColumnFilters=r}))}updateFilterFlagInColumns(t,e){const i=[];this.allColumnFilters.forEach((s=>{const n=s.column;if(s.isHandler){i.push(Fn.resolve().then((()=>{this.setColFilterActive(n,this.isHandlerActive(n),t,e)})))}else{const o=xa(s);if(o){i.push(o.then((i=>{this.setColFilterActive(n,i.isFilterActive(),t,e)})))}}}));this.beans.groupFilter?.updateFilterFlags(t,e);return Fn.all(i)}doFiltersPass(t,e,i){const{data:s,aggData:n}=t;const o=i?this.activeAggregateFilters:this.activeColumnFilters;const r=i?n:s;const l=this.model;for(let i=0;i<o.length;i++){const s=o[i];const{colId:n,isHandler:a}=s;if(n===e){continue}if(a){const{handler:e,handlerParams:i}=s;if(!e.doesFilterPass({node:t,data:r,model:Da(l,n),handlerParams:i})){return false}}else{const e=s.comp;if(typeof e.doesFilterPass!=="function"){ci(91);continue}if(!e.doesFilterPass({node:t,data:r})){return false}}}return true}getHandlerParams(t){const e=this.allColumnFilters.get(t.getColId());return e?.isHandler?e.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(t){const{rowRenderer:e,filterManager:i}=this.beans;const s=()=>{if(this.isAlive()){i?.onFilterChanged(t)}};if(e.isRefreshInProgress()){setTimeout(s,0)}else{s()}}updateBeforeFilterChanged(t={}){const{column:e,additionalEventAttributes:i}=t;const s=e?.getColId();return this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((t=>{const{column:e,isHandler:i}=t;if(s===e.getColId()){return}if(i){t.handler.onAnyFilterChanged?.()}xa(t,i)?.then((t=>{if(typeof t?.onAnyFilterChanged==="function"){t.onAnyFilterChanged()}}))}));this.processingFilterChange=true}))))}updateAfterFilterChanged(){this.processingFilterChange=false}isSuppressFlashingCellsBecauseFiltering(){const t=this.gos.get("allowShowChangeAfterFilter")??false;return!t&&this.processingFilterChange}onNewRowsLoaded(t){const e=[];this.allColumnFilters.forEach((t=>{const i=t.isHandler;if(i){t.handler.onNewRowsLoaded?.()}const s=xa(t,i);if(s){e.push(s.then((t=>{t.onNewRowsLoaded?.()})))}}));Fn.all(e).then((()=>this.updateActive(t,{afterDataChange:true})))}updateActive(t,e){this.updateFilterFlagInColumns(t,e).then((()=>this.updateActiveFilters()))}createGetValue(t,e){const{filterValueSvc:i,colModel:s}=this.beans;return(n,o)=>{const r=o?s.getCol(o):t;return r?i.getValue(r,n,e):void 0}}isFilterActive(t){const e=this.cachedFilter(t);if(e?.isHandler){return this.isHandlerActive(t)}const i=e?.filter;if(i){return i.isFilterActive()}return Da(this.initialModel,t.getColId())!=null}isHandlerActive(t){const e=i(Da(this.model,t.getColId()));if(e){return e}const s=this.beans.groupFilter;return s?.isGroupFilter(t)?s.isFilterActive(t):false}getOrCreateFilterUi(t){const e=this.getOrCreateFilterWrapper(t,true);return e?xa(e):null}getFilterUiForDisplay(t){const e=this.getOrCreateFilterWrapper(t,true);if(!e){return null}const i=xa(e);if(!i){return null}return i.then((t=>({comp:t,params:e.filterUi.filterParams,isHandler:e.isHandler})))}getHandler(t,e){const i=this.getOrCreateFilterWrapper(t,e);return i?.isHandler?i.handler:void 0}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed()){return void 0}let i=this.cachedFilter(t);if(!i&&e){i=this.createFilterWrapper(t);this.setColumnFilterWrapper(t,i)}return i}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t,e=false){return this.getDefaultFilterFromDataType((()=>this.beans.dataTypeSvc?.getBaseDataType(t)),e)}getDefaultFilterFromDataType(t,e=false){if(es(this.gos)){return e?"agSetColumnFloatingFilter":"agSetColumnFilter"}return _a(t(),e)}getDefaultFloatingFilter(t){return this.getDefaultFilter(t,true)}createFilterComp(t,e,i,s,n,o){const r=()=>{const r=this.createFilterCompParams(t,n,o);const l=s(r,n);return oo(this.beans.userCompFactory,e,l,i)};const l=r();if(!l){return null}const a=t=>(t?r():l).newAgStackInstance();return{compDetails:l,createFilterUi:a}}createFilterInstance(t,e,i,s){const n=this.beans.selectableFilter;if(n?.isSelectable(e)){e=n.getFilterDef(t,e)}const{handler:o,handlerParams:r,handlerGenerator:l}=this.createHandler(t,e,i)??{};const a=this.createFilterComp(t,e,i,s,!!o,"init");if(!a){return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:l,handlerParams:r}}const{compDetails:h,createFilterUi:c}=a;if(this.isGlobalButtons){const e=!!h.params?.buttons?.length;if(!e){hi(281,{colId:t.getColId()})}}return{compDetails:h,handler:o,handlerGenerator:l,handlerParams:r,createFilterUi:c}}createBaseFilterParams(t,e){const{filterManager:i,rowModel:s}=this.beans;return os(this.gos,{column:t,colDef:t.getColDef(),getValue:this.createGetValue(t),doesRowPassOtherFilter:e?()=>true:e=>i?.doesRowPassOtherFilters(t.getColId(),e)??true,rowModel:s})}createFilterCompParams(t,e,i,s){const n=this.filterChangedCallbackFactory(t);const o=this.createBaseFilterParams(t,s);o.filterChangedCallback=n;o.filterModifiedCallback=s?()=>{}:e=>this.filterModified(t,e);if(e){const e=o;const s=t.getColId();const r=Da(this.model,s);e.model=r;e.state=this.state.get(s)??{model:r};e.onModelChange=(e,i)=>{this.updateStoredModel(s,e);this.refreshHandlerAndUi(t,e,"ui",false,i).then((()=>{n({...i,source:"columnFilter"})}))};e.onStateChange=e=>{this.updateState(t,e);this.updateOrRefreshFilterUi(t)};e.onAction=(e,i,s)=>{this.updateModel(t,e,i);this.dispatchLocalEvent({type:"filterAction",column:t,action:e,event:s})};e.getHandler=()=>this.getHandler(t,true);e.onUiChange=e=>this.filterUiChanged(t,e);e.source=i}return o}createFilterUiForHandler(t,e){return e?{created:false,create:e,filterParams:t.params,compDetails:t}:null}createFilterUiLegacy(t,e,i){const s=e();const n={created:true,create:e,filterParams:t.params,compDetails:t,promise:s};s.then(i);return n}createFilterWrapper(t){const{compDetails:e,handler:i,handlerGenerator:s,handlerParams:n,createFilterUi:o}=this.createFilterInstance(t,t.getColDef(),this.getDefaultFilter(t),(t=>t));const r=t.getColId();if(i){delete this.initialModel[r];i.init?.({...n,source:"init",model:Da(this.model,r)});return{column:t,isHandler:true,handler:i,handlerGenerator:s,handlerParams:n,filterUi:this.createFilterUiForHandler(e,o)}}if(o){const i={column:t,filterUi:null,isHandler:false};i.filterUi=this.createFilterUiLegacy(e,o,(t=>{i.filter=t??void 0}));return i}return{column:t,filterUi:null,isHandler:false}}createHandlerFunc(t,e,i){const{gos:s,frameworkOverrides:n,registry:o}=this.beans;let r;const l=t=>{const e=t.filter;if(xn(e)){const t=e.handler;if(t){return t}r=e.doesFilterPass;if(r){return()=>({doesFilterPass:r})}return void 0}return typeof e==="string"?e:void 0};const a=s.get("enableFilterHandlers");const h=a?l(e):void 0;const c=t=>()=>this.createBean(o.createDynamicBean(t,true));let u;let d;if(typeof h==="string"){const t=s.get("filterHandlers")?.[h];if(t!=null){u=t}else if(Sa.has(h)){u=c(h);d=h}}else{u=h}if(!u){let t;const{compName:s,jsComp:o,fwComp:r}=uo(n,e);if(s){t=s}else{const s=o==null&&r==null&&e.filter===true;if(s){t=i}}d=this.handlerMap[t];if(d){u=c(d)}}if(!u){if(!a){return void 0}if(pi(s)){hi(277,{colId:t.getColId()})}return Wb}return{filterHandler:u,handlerNameOrCallback:r??d}}createHandler(t,e,i){const s=this.createHandlerFunc(t,e,i);if(!s){return void 0}const n=fo(this.beans.userCompFactory,e,this.createFilterCompParams(t,true,"init"));const{handlerNameOrCallback:o,filterHandler:r}=s;const{handler:l,handlerParams:a}=this.createHandlerFromFunc(t,r,n);return{handler:l,handlerParams:a,handlerGenerator:o??r}}createHandlerFromFunc(t,e,i){const s=t.getColDef();const n=e(os(this.gos,{column:t,colDef:s}));const o=this.createHandlerParams(t,i);return{handler:n,handlerParams:o}}createHandlerParams(t,e){const i=t.getColDef();const s=t.getColId();const n=this.filterChangedCallbackFactory(t);return os(this.gos,{colDef:i,column:t,getValue:this.createGetValue(t),doesRowPassOtherFilter:t=>this.beans.filterManager?.doesRowPassOtherFilters(s,t)??true,onModelChange:(e,i)=>{this.updateStoredModel(s,e);this.refreshHandlerAndUi(t,e,"handler",false,i).then((()=>{n({...i,source:"columnFilter"})}))},filterParams:e})}onColumnsChanged(){const t=[];const{colModel:e,filterManager:i,groupFilter:s}=this.beans;this.allColumnFilters.forEach(((i,s)=>{let n;if(i.column.isPrimary()){n=e.getColDefCol(s)}else{n=e.getCol(s)}if(n&&n===i.column){return}t.push(i.column);this.disposeFilterWrapper(i,"columnChanged");this.disposeColumnListener(s)}));const n=s&&t.every((t=>s.isGroupFilter(t)));if(t.length>0&&!n){i?.onFilterChanged({columns:t,source:"api"})}}isFilterAllowed(t){const e=t.isFilterAllowed();if(!e){return false}const i=this.beans.groupFilter;if(i?.isGroupFilter(t)){return i.isFilterAllowed(t)}return true}getFloatingFilterCompDetails(t,e){const{userCompFactory:i,frameworkOverrides:s,selectableFilter:n}=this.beans;const o=e=>{const i=this.getOrCreateFilterUi(t);if(i==null){return}i.then((t=>{e(go(t))}))};const r=t.getColDef();const l=n?.isSelectable(r)?n.getFilterDef(t,r):r;const a=rh(s,l,(()=>this.getDefaultFloatingFilter(t)))??"agReadOnlyFloatingFilter";const h=this.gos.get("enableFilterHandlers");const c=fo(i,l,this.createFilterCompParams(t,h,"init",true));const u=os(this.gos,{column:t,filterParams:c,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:o,showParentFilter:e});if(h){const e=u;const i=t.getColId();const s=this.filterChangedCallbackFactory(t);e.onUiChange=e=>this.floatingFilterUiChanged(t,e);e.model=Da(this.model,i);e.onModelChange=(e,n)=>{this.updateStoredModel(i,e);this.refreshHandlerAndUi(t,e,"floating",true,n).then((()=>{s({...n,source:"columnFilter"})}))};e.getHandler=()=>this.getHandler(t,true);e.source="init"}return co(i,r,u,a)}getCurrentFloatingFilterParentModel(t){return this.getModelFromFilterWrapper(this.cachedFilter(t)??{column:t})}destroyFilterUi(t,e,i,s){const n="paramsUpdated";if(t.isHandler){const o=e.getColId();delete this.initialModel[o];this.state.delete(o);const r=t.filterUi;const l=this.createFilterUiForHandler(i,s);t.filterUi=l;const a=this.eventSvc;if(r?.created){r.promise.then((t=>{this.destroyBean(t);a.dispatchEvent({type:"filterDestroyed",source:n,column:e})}))}else{a.dispatchEvent({type:"filterHandlerDestroyed",source:n,column:e})}}else{this.destroyFilter(e,n)}}destroyFilter(t,e="api"){const i=t.getColId();const s=this.allColumnFilters.get(i);this.disposeColumnListener(i);delete this.initialModel[i];if(s){this.disposeFilterWrapper(s,e).then((e=>{if(e&&this.isAlive()){this.beans.filterManager?.onFilterChanged({columns:[t],source:"api"})}}))}}disposeColumnListener(t){const e=this.allColumnListeners.get(t);if(e){this.allColumnListeners.delete(t);e()}}disposeFilterWrapper(t,e){let i=false;const{column:s,isHandler:n,filterUi:o}=t;const r=s.getColId();if(n){i=this.isHandlerActive(s);this.destroyBean(t.handler);delete this.model[r];this.state.delete(r)}const l=()=>{this.setColFilterActive(s,false,"filterDestroyed");this.allColumnFilters.delete(r);this.eventSvc.dispatchEvent({type:"filterDestroyed",source:e,column:s})};if(o){if(o.created){return o.promise.then((t=>{i=n?i:!!t?.isFilterActive();this.destroyBean(t);l();return i}))}else{l()}}return Fn.resolve(i)}filterChangedCallbackFactory(t){return e=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:e,columns:[t],column:t,source:e?.source??"columnFilter"})}}filterParamsChanged(t,e="api"){const i=this.allColumnFilters.get(t);if(!i){return}const s=this.beans;const n=i.column;const o=n.getColDef();const r=n.isFilterAllowed();const l=this.getDefaultFilter(n);const a=s.selectableFilter;const h=a?.isSelectable(o)?a.getFilterDef(n,o):o;const c=r?this.createHandlerFunc(n,h,this.getDefaultFilter(n)):void 0;const u=!!c;const d=i.isHandler;if(d!=u){this.destroyFilter(n,"paramsUpdated");return}const{compDetails:f,createFilterUi:g}=(r?this.createFilterComp(n,h,l,(t=>t),u,"colDef"):null)??{compDetails:null,createFilterUi:null};const p=f?.params??fo(s.userCompFactory,h,this.createFilterCompParams(n,u,"colDef"));if(d){const s=c?.handlerNameOrCallback??c?.filterHandler;const o=Da(this.model,t);if(i.handlerGenerator!=s){const r=i.handler;const{handler:l,handlerParams:a}=this.createHandlerFromFunc(n,c.filterHandler,p);i.handler=l;i.handlerParams=a;i.handlerGenerator=s;delete this.model[t];l.init?.({...a,source:"init",model:null});this.destroyBean(r);if(o!=null){this.beans.filterManager?.onFilterChanged({columns:[n],source:e})}}else{const t=this.createHandlerParams(n,f?.params);i.handlerParams=t;i.handler.refresh?.({...t,source:"colDef",model:o})}}if(this.areFilterCompsDifferent(i.filterUi?.compDetails??null,f)||!i.filterUi||!f){this.destroyFilterUi(i,n,f,g);return}i.filterUi.filterParams=p;xa(i,d)?.then((t=>{const e=t?.refresh?t.refresh(p):true;if(e===false){this.destroyFilterUi(i,n,f,g)}else{this.dispatchLocalEvent({type:"filterParamsChanged",column:n,params:p})}}))}refreshHandlerAndUi(t,e,i,s,n){const o=this.cachedFilter(t);if(!o){if(s){this.getOrCreateFilterWrapper(t,true)}return Fn.resolve()}if(!o.isHandler){return Fn.resolve()}const{filterUi:r,handler:l,handlerParams:a}=o;return Ra((()=>{if(r){const{created:t,filterParams:e}=r;if(t){return r.promise.then((t=>t?{filter:t,filterParams:e}:void 0))}else{r.refreshed=true}}return Fn.resolve(void 0)}),l,a,e,this.state.get(t.getColId())??{model:e},i,n)}setColumnFilterWrapper(t,e){const i=t.getColId();this.allColumnFilters.set(i,e);this.allColumnListeners.set(i,this.addManagedListeners(t,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(t,e){if(!e||!t){return true}const{componentClass:i}=t;const{componentClass:s}=e;const n=i===s||i?.render&&s?.render&&i.render===s.render;return!n}hasFloatingFilters(){const t=this.beans.colModel.getCols();return t.some((t=>t.getColDef().floatingFilter))}getFilterInstance(t){const e=this.beans.colModel.getColDefCol(t);if(!e){return Promise.resolve(void 0)}const i=this.getOrCreateFilterUi(e);if(!i){return Promise.resolve(null)}return new Promise((t=>{i.then((e=>{t(go(e))}))}))}processFilterModelUpdateQueue(){this.modelUpdates.forEach((({model:t,source:e})=>this.setModel(t,e)));this.modelUpdates=[];this.columnModelUpdates.forEach((({key:t,model:e,resolve:i})=>{this.setModelForColumn(t,e).then((()=>i()))}));this.columnModelUpdates=[]}getModelForColumn(t,e){if(e){const{state:e,model:i}=this;const s=t.getColId();const n=e.get(s);if(n){return n.model??null}return Da(i,s)}const i=this.cachedFilter(t);return i?this.getModelFromFilterWrapper(i):null}setModelForColumn(t,e){if(this.beans.dataTypeSvc?.isPendingInference){let i=()=>{};const s=new Promise((t=>{i=t}));this.columnModelUpdates.push({key:t,model:e,resolve:i});return s}return new Promise((i=>{this.setModelForColumnLegacy(t,e).then((t=>i(t)))}))}getStateForColumn(t){return this.state.get(t)??{model:Da(this.model,t)}}setModelForColumnLegacy(t,e){const i=this.beans.colModel.getColDefCol(t);const s=i?this.getOrCreateFilterWrapper(i,true):null;return s?this.setModelOnFilterWrapper(s,e):Fn.resolve()}setColDefPropsForDataType(t,e,i){const s=t.filter;const n=s===true?this.getDefaultFilterFromDataType((()=>e.baseDataType)):s;if(typeof n!=="string"){return}let o;let r;const l=this.beans;const{filterParams:a,filterValueGetter:h}=t;if(n==="agMultiColumnFilter"){({filterParams:o,filterValueGetter:r}=l.multiFilter?.getParamsForDataType(a,h,e,i)??{})}else{({filterParams:o,filterValueGetter:r}=ja(n,a,h,e,i,l,this.getLocaleTextFunc()))}t.filterParams=o;if(r){t.filterValueGetter=r}}setColFilterActive(t,e,i,s){if(t.filterActive!==e){t.filterActive=e;t.dispatchColEvent("filterActiveChanged",i)}t.dispatchColEvent("filterChanged",i,s)}setModelOnFilterWrapper(t,e,i){return new Fn((s=>{if(t.isHandler){const n=t.column;const o=n.getColId();const r=this.model[o];this.updateStoredModel(o,e);if(i&&e===r){s();return}this.refreshHandlerAndUi(n,e,"api").then((()=>s()));return}const n=xa(t);if(n){n.then((t=>{if(typeof t?.setModel!=="function"){hi(65);s();return}(t.setModel(e)||Fn.resolve()).then((()=>s()))}));return}s()}))}updateStoredModel(t,e){if(i(e)){this.model[t]=e}else{delete this.model[t]}const s=this.state.get(t);const n={model:e,state:s?.state};this.state.set(t,n)}filterModified(t,e){this.getOrCreateFilterUi(t)?.then((i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:i,...e})}))}filterUiChanged(t,e){if(this.gos.get("enableFilterHandlers")){this.eventSvc.dispatchEvent({type:"filterUiChanged",column:t,...e})}}floatingFilterUiChanged(t,e){if(this.gos.get("enableFilterHandlers")){this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:t,...e})}}updateModel(t,e,i){const s=t.getColId();const n=this.cachedFilter(t);const o=()=>n?.filterUi;Pa(e,o,(()=>Da(this.model,s)),(()=>this.state.get(s)),(e=>this.updateState(t,e)),(t=>o()?.filterParams?.onModelChange(t,i)),n?.isHandler?n.handler.processModelToApply?.bind(n.handler):void 0)}updateAllModels(t,e){const i=[];this.allColumnFilters.forEach(((e,s)=>{const n=this.beans.colModel.getColDefCol(s);if(n){Pa(t,(()=>e.filterUi),(()=>Da(this.model,s)),(()=>this.state.get(s)),(t=>this.updateState(n,t)),(e=>{this.updateStoredModel(s,e);this.dispatchLocalEvent({type:"filterAction",column:n,action:t});i.push(this.refreshHandlerAndUi(n,e,"ui"))}),e?.isHandler?e.handler.processModelToApply?.bind(e.handler):void 0)}}));if(i.length){Fn.all(i).then((()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:e,columns:[]})}))}}updateOrRefreshFilterUi(t){const e=t.getColId();ka((()=>this.cachedFilter(t)?.filterUi),(()=>Da(this.model,e)),(()=>this.state.get(e)))}updateState(t,e){this.state.set(t.getColId(),e);this.dispatchLocalEvent({type:"filterStateChanged",column:t,state:e})}canApplyAll(){const{state:t,model:e,activeFilterComps:i}=this;for(const t of i){if(t.source==="COLUMN_MENU"){return false}}let s=false;for(const i of t.keys()){const n=t.get(i);if(n.valid===false){return false}if((n.model??null)!==Da(e,i)){s=true}}return s}hasUnappliedModel(t){const{model:e,state:i}=this;return(i.get(t)?.model??null)!==Da(e,t)}setGlobalButtons(t){this.isGlobalButtons=t;this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:t})}shouldKeepStateOnDetach(t,e){if(e==="newFiltersToolPanel"){return true}const i=this.beans.filterPanelSvc;if(i?.isActive){return!!i.getState(t.getColId())}return false}destroy(){super.destroy();this.allColumnFilters.forEach((t=>this.disposeFilterWrapper(t,"gridDestroyed")));this.allColumnListeners.clear();this.state.clear();this.activeFilterComps.clear()}};function jb(t){return!!t.filterManager?.isAnyFilterPresent()}function Kb(t,e="api"){t.filterManager?.onFilterChanged({source:e})}var qb=class extends re{constructor(){super(...arguments);this.beanName="filterManager";this.advFilterModelUpdateQueue=[]}wireBeans(t){this.quickFilter=t.quickFilter;this.advancedFilter=t.advancedFilter;this.colFilter=t.colFilter}postConstruct(){const t=this.refreshFiltersForAggregations.bind(this);const e=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:t,columnPivotChanged:t,columnPivotModeChanged:t,newColumnsLoaded:e,columnVisible:e,advancedFilterEnabledChanged:({enabled:t})=>this.onAdvFilterEnabledChanged(t),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});this.externalFilterPresent=this.isExternalFilterPresentCallback();this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})}));this.updateAggFiltering();this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering();this.onFilterChanged()}));if(this.quickFilter){this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter");this.addManagedPropertyListener("alwaysPassFilter",(()=>{this.alwaysPassFilter=i.get("alwaysPassFilter");this.onFilterChanged({source:"api"})}))}isExternalFilterPresentCallback(){const t=this.gos.getCallback("isExternalFilterPresent");return typeof t==="function"&&t({})}doesExternalFilterPass(t){const e=this.gos.get("doesExternalFilterPass");return typeof e==="function"&&e(t)}setFilterState(t,e,i="api"){if(this.isAdvFilterEnabled()){return}this.colFilter?.setState(t,e,i)}setFilterModel(t,e="api",i){if(this.isAdvFilterEnabled()){if(!i){this.warnAdvFilters()}return}this.colFilter?.setModel(t,e)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(t){if(t){if(this.colFilter?.disableFilters()){this.onFilterChanged({source:"advancedFilter"})}}else if(this.advancedFilter?.isFilterPresent()){this.advancedFilter.setModel(null);this.onFilterChanged({source:"advancedFilter"})}}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){if(Ti(this.gos)&&this.isAnyFilterPresent()){this.onFilterChanged()}}onFilterChanged(t={}){const{source:e,additionalEventAttributes:i,columns:s=[]}=t;this.externalFilterPresent=this.isExternalFilterPresentCallback();(this.colFilter?this.colFilter.updateBeforeFilterChanged(t):Fn.resolve()).then((()=>{const t={source:e,type:"filterChanged",columns:s};if(i){ve(t,i)}this.eventSvc.dispatchEvent(t);this.colFilter?.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Ti(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,colIdToSkip:t})}doesRowPassAggregateFilters(t){const{rowNode:e}=t;if(this.alwaysPassFilter?.(e)){return true}if(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(e)){return false}if(this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(e,t.colIdToSkip,true)){return false}return true}doesRowPassFilter(t){const{rowNode:e}=t;if(this.alwaysPassFilter?.(e)){return true}if(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(e)){return false}if(this.externalFilterPresent&&!this.doesExternalFilterPass(e)){return false}if(this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(e,t.colIdToSkip)){return false}if(this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(e)){return false}return true}isFilterAllowed(t){if(this.isAdvFilterEnabled()){return false}return!!this.colFilter?.isFilterAllowed(t)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(t,e="api"){if(!this.isAdvFilterEnabled()){return}if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(t);return}this.advancedFilter.setModel(t??null);this.onFilterChanged({source:e})}toggleAdvFilterBuilder(t,e){if(!this.isAdvFilterEnabled()){return}this.advancedFilter.getCtrl().toggleFilterBuilder({source:e,force:t})}updateAdvFilterColumns(){if(!this.isAdvFilterEnabled()){return}if(this.advancedFilter.updateValidity()){this.onFilterChanged({source:"advancedFilter"})}}hasFloatingFilters(){if(this.isAdvFilterEnabled()){return false}return!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(t){if(this.isAdvFilterEnabled()){this.warnAdvFilters();return Promise.resolve(void 0)}return this.colFilter?.getFilterInstance(t)??Promise.resolve(void 0)}warnAdvFilters(){hi(68)}setupAdvFilterHeaderComp(t){this.advancedFilter?.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const t of this.advFilterModelUpdateQueue){this.setAdvFilterModel(t)}this.advFilterModelUpdateQueue=[]}setColumnFilterModel(t,e){if(this.isAdvFilterEnabled()){this.warnAdvFilters();return Promise.resolve()}return this.colFilter?.setModelForColumn(t,e)??Promise.resolve()}};var _b=class extends re{constructor(){super(...arguments);this.beanName="filterMenuFactory"}wireBeans(t){this.popupSvc=t.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(t,e,i,s){if(t&&!t.isColumn){return}this.showPopup(t,(s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:t,type:i,mouseEvent:e,ePopup:s})}),i,e.target,is(this.gos),s)}showMenuAfterButtonClick(t,e,i,s){if(t&&!t.isColumn){return}let n=-1;let o="left";const r=is(this.gos);if(!r&&this.gos.get("enableRtl")){n=1;o="right"}const l=r?void 0:4*n;const a=r?void 0:4;this.showPopup(t,(s=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:e,ePopup:s,nudgeX:l,nudgeY:a,alignSide:o,keepWithinBounds:true,position:"under",column:t})}),i,e,r,s)}showPopup(t,e,i,s,n,o){const r=t?this.createBean(new Ga(t,"COLUMN_MENU")):void 0;this.activeMenu=r;if(!r?.hasFilter()||!t){ci(57);return}const l=Ma({tag:"div",cls:`ag-menu${!n?" ag-filter-menu":""}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(l,{keydown:t=>this.trapFocusWithin(t,l)});l.appendChild(r?.getGui());let a;const h=()=>r?.afterGuiDetached();const c=ss(this.gos)?s??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0;const u=e=>{ru(t,false,"contextMenu");const n=e instanceof KeyboardEvent;if(this.tabListener){this.tabListener=this.tabListener()}if(n&&s&&pt(s)){const t=rr(s);t?.focus({preventScroll:true})}h();this.destroyBean(this.activeMenu);this.dispatchVisibleChangedEvent(false,i,t);o?.()};const d=this.getLocaleTextFunc();const f=n&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter");const g=this.popupSvc?.addPopup({modal:true,eChild:l,closeOnEsc:true,closedCallback:u,positionCallback:()=>e(l),anchorToElement:c,ariaLabel:f});if(g){this.hidePopup=a=g.hideFunc}r.afterInit().then((()=>{e(l);r.afterGuiAttached({container:i,hidePopup:a})}));ru(t,true,"contextMenu");this.dispatchVisibleChangedEvent(true,i,t)}trapFocusWithin(t,e){if(t.key!==mo.TAB||t.defaultPrevented||or(this.beans,e,false,t.shiftKey)){return}t.preventDefault();nr(e,t.shiftKey)}dispatchVisibleChangedEvent(t,e,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:t,switchingTab:false,key:e,column:i??null,columnGroup:null})}isMenuEnabled(t){return t.isFilterAllowed()&&(t.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu);super.destroy()}};var Zb=class extends re{constructor(){super(...arguments);this.beanName="filterValueSvc"}getValue(t,e,i){if(!e){return}const s=t.getColDef();const{selectableFilter:n,valueSvc:o}=this.beans;const r=i??n?.getFilterValueGetter(t.getColId())??s.filterValueGetter;if(r){return this.executeFilterValueGetter(r,e.data,t,e,s)}return o.getValue(t,e)}executeFilterValueGetter(t,e,i,s,n){const{expressionSvc:o,valueSvc:r}=this.beans;const l=os(this.gos,{data:e,node:s,column:i,colDef:n,getValue:r.getValueCallback.bind(r,s)});if(typeof t==="function"){return t(l)}return o?.evaluate(t,l)}};var Yb={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]};var Qb=class extends Sn{constructor(){super(Yb,[mr]);this.eFloatingFilterText=vn}init(t){this.params=t;const e=this.beans.colNames.getDisplayNameForColumn(t.column,"header",true);this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(`${e} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`);if(this.gos.get("enableFilterHandlers")){const e=t;const i=e.getHandler();if(i.getModelAsString){const t=i.getModelAsString(e.model);this.eFloatingFilterText.setValue(t)}}}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance((e=>{if(e.getModelAsString){const i=e.getModelAsString(t);this.eFloatingFilterText.setValue(i)}}))}refresh(t){this.init(t)}};var Jb=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions??e;this.mapCustomOptions();this.defaultOption=this.getDefaultItem(t.defaultOption)}refresh(t,e){const i=t.filterOptions??e;if(this.filterOptions!==i){this.filterOptions=i;this.customFilterOptions={};this.mapCustomOptions()}this.defaultOption=this.getDefaultItem(t.defaultOption)}mapCustomOptions(){const{filterOptions:t}=this;if(!t){return}for(const e of t){if(typeof e==="string"){continue}const i=[["displayKey"],["displayName"],["predicate","test"]];const s=t=>{if(!t.some((t=>e[t]!=null))){hi(72,{keys:t});return false}return true};if(!i.every(s)){this.filterOptions=t.filter((t=>t===e))||[];continue}this.customFilterOptions[e.displayKey]=e}}getDefaultItem(t){const{filterOptions:e}=this;if(t){return t}else if(e.length>=1){const t=e[0];if(typeof t==="string"){return t}else if(t.displayKey){return t.displayKey}else{hi(73)}}else{hi(74)}return void 0}getCustomOption(t){return this.customFilterOptions[t]}};function Xb(t,e,i){return i==null?t.splice(e):t.splice(e,i)}function ty(t){return t==null||typeof t==="string"&&t.trim().length===0}function ey(t){return t==="AND"||t==="OR"?t:"AND"}function iy(t,e,i){if(t==null){return}const{predicate:s}=t;if(s!=null&&!e.some((t=>t==null))){return s(e,i)}}function sy(t,e){let i=t.length;if(i>e){t.splice(e);hi(78);i=e}return i}function ny(t,e){const i=e.getCustomOption(t);if(i){const{numberOfInputs:t}=i;return t!=null?t:1}const s=["empty","notBlank","blank"];if(t&&s.indexOf(t)>=0){return 0}else if(t==="inRange"){return 2}return 1}var oy=class extends nh{constructor(t,e,i){super(t,"simple-filter");this.mapValuesFromModel=e;this.defaultOptions=i;this.eTypes=[];this.eJoinPanels=[];this.eJoinAnds=[];this.eJoinOrs=[];this.eConditionBodies=[];this.listener=()=>this.onUiChanged();this.lastUiCompletePosition=null;this.joinOperatorId=0}setParams(t){super.setParams(t);const e=new Jb;this.optionsFactory=e;e.init(t,this.defaultOptions);this.commonUpdateSimpleParams(t);this.createOption();this.createMissingConditionsAndOperators()}updateParams(t,e){this.optionsFactory.refresh(t,this.defaultOptions);super.updateParams(t,e);this.commonUpdateSimpleParams(t)}commonUpdateSimpleParams(t){this.setNumConditions(t);this.defaultJoinOperator=ey(t.defaultJoinOperator);this.filterPlaceholder=t.filterPlaceholder;this.createFilterListOptions();const e=this.getGui();if(this.isReadOnly()){e.setAttribute("tabindex","-1")}else{e.removeAttribute("tabindex")}}onFloatingFilterChanged(t,e){this.setTypeFromFloatingFilter(t);this.setValueFromFloatingFilter(e);this.onUiChanged("immediately",true)}setTypeFromFloatingFilter(t){this.eTypes.forEach(((e,i)=>{const s=i===0?t:this.optionsFactory.defaultOption;e.setValue(s,true)}))}getModelFromUi(){const t=this.getUiCompleteConditions();if(t.length===0){return null}if(this.maxNumConditions>1&&t.length>1){return{filterType:this.filterType,operator:this.getJoinOperator(),conditions:t}}return t[0]}getConditionTypes(){return this.eTypes.map((t=>t.getValue()))}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){const{eJoinOrs:t,defaultJoinOperator:e}=this;return t.length===0?e:t[0].getValue()===true?"OR":"AND"}areNonNullModelsEqual(t,e){const i=!t.operator;const s=!e.operator;const n=!i&&s||i&&!s;if(n){return false}let o;if(i){const i=t;const s=e;o=this.areSimpleModelsEqual(i,s)}else{const i=t;const s=e;o=i.operator===s.operator&&ws(i.conditions,s.conditions,((t,e)=>this.areSimpleModelsEqual(t,e)))}return o}setModelIntoUi(t,e){if(t==null){this.resetUiToDefaults(e);return Fn.resolve()}const i=t.operator;if(i){const e=t;let i=e.conditions;if(i==null){i=[];hi(77)}const s=sy(i,this.maxNumConditions);const n=this.getNumConditions();if(s<n){this.removeConditionsAndOperators(s)}else if(s>n){for(let t=n;t<s;t++){this.createJoinOperatorPanel();this.createOption()}}const o=e.operator==="OR";this.eJoinAnds.forEach((t=>t.setValue(!o,true)));this.eJoinOrs.forEach((t=>t.setValue(o,true)));i.forEach(((t,e)=>{this.eTypes[e].setValue(t.type,true);this.setConditionIntoUi(t,e)}))}else{const e=t;if(this.getNumConditions()>1){this.removeConditionsAndOperators(1)}this.eTypes[0].setValue(e.type,true);this.setConditionIntoUi(e,0)}this.lastUiCompletePosition=this.getNumConditions()-1;this.createMissingConditionsAndOperators();this.updateUiVisibility();if(!e){this.params.onUiChange(this.getUiChangeEventParams())}return Fn.resolve()}setNumConditions(t){let e=t.maxNumConditions??2;if(e<1){hi(79);e=1}this.maxNumConditions=e;let i=t.numAlwaysVisibleConditions??1;if(i<1){hi(80);i=1}if(i>e){hi(81);i=e}this.numAlwaysVisibleConditions=i}createOption(){const t=this.getGui();const e=this.createManagedBean(new Ar);this.eTypes.push(e);e.addCss("ag-filter-select");t.appendChild(e.getGui());const i=this.createEValue();this.eConditionBodies.push(i);t.appendChild(i);this.putOptionsIntoDropdown(e);this.resetType(e);const s=this.getNumConditions()-1;this.forEachPositionInput(s,(t=>this.resetInput(t)));this.addChangedListeners(e,s)}createJoinOperatorPanel(){const t=Ma({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(t);const e=this.createJoinOperator(this.eJoinAnds,t,"and");const i=this.createJoinOperator(this.eJoinOrs,t,"or");this.getGui().appendChild(t);const s=this.eJoinPanels.length-1;const n=this.joinOperatorId++;this.resetJoinOperatorAnd(e,s,n);this.resetJoinOperatorOr(i,s,n);if(!this.isReadOnly()){e.onValueChange(this.listener);i.onValueChange(this.listener)}}createJoinOperator(t,e,i){const s=this.createManagedBean(new gr);t.push(s);const n="ag-filter-condition-operator";s.addCss(n);s.addCss(`${n}-${i}`);e.appendChild(s.getGui());return s}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map((t=>typeof t==="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t)))}putOptionsIntoDropdown(t){const{filterListOptions:e}=this;for(const i of e){t.addOption(i)}t.setDisabled(e.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){const{displayKey:e}=t;const i=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(e)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const t=this.getJoinOperator();this.updateNumConditions();this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){let t=-1;let e=true;for(let i=0;i<this.getNumConditions();i++){if(this.isConditionUiComplete(i)){t=i}else{e=false}}if(this.shouldAddNewConditionAtEnd(e)){this.createJoinOperatorPanel();this.createOption()}else{const e=this.lastUiCompletePosition??this.getNumConditions()-2;if(t<e){this.removeConditionsAndOperators(e+1);const i=t+1;const s=e-i;if(s>0){this.removeConditionsAndOperators(i,s)}this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(t,e){this.eTypes.forEach(((e,i)=>{const s=this.isConditionDisabled(i,t);e.setDisabled(s||this.filterListOptions.length<=1);if(i===1){it(this.eJoinPanels[0],s);this.eJoinAnds[0].setDisabled(s);this.eJoinOrs[0].setDisabled(s)}}));this.eConditionBodies.forEach(((t,e)=>{tt(t,this.isConditionBodyVisible(e))}));const i=(e??this.getJoinOperator())==="OR";for(const t of this.eJoinAnds){t.setValue(!i,true)}for(const t of this.eJoinOrs){t.setValue(i,true)}this.forEachInput(((e,i,s,n)=>{this.setElementDisplayed(e,i<n);this.setElementDisabled(e,this.isConditionDisabled(s,t))}));this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,e){if(t>=this.getNumConditions()){return}const{eTypes:i,eConditionBodies:s,eJoinPanels:n,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(i,t,e);this.removeElements(s,t,e);this.removeEValues(t,e);const l=Math.max(t-1,0);this.removeElements(n,l,e);this.removeComponents(o,l,e);this.removeComponents(r,l,e)}removeElements(t,e,i){const s=Xb(t,e,i);for(const t of s){ft(t)}}removeComponents(t,e,i){const s=Xb(t,e,i);for(const t of s){ft(t.getGui());this.destroyBean(t)}}afterGuiAttached(t){super.afterGuiAttached(t);this.resetPlaceholder();if(!t?.suppressFocus){let t;if(!this.isReadOnly()){const e=this.getInputs(0)[0];if(e instanceof ur&&this.isConditionBodyVisible(0)){t=e.getInputElement()}else{t=this.eTypes[0]?.getFocusableElement()}}(t??this.getGui()).focus({preventScroll:true})}}afterGuiDetached(){super.afterGuiDetached();const t=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(t.column)){return}t.onStateChange({model:t.model});let e=-1;let i=-1;let s=false;const n=this.getJoinOperator();for(let t=this.getNumConditions()-1;t>=0;t--){if(this.isConditionUiComplete(t)){if(e===-1){e=t;i=t}}else{const n=t>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(t-1);const o=t<e;if(n||o){this.removeConditionsAndOperators(t,1);s=true;if(o){i--}}}}let o=false;if(this.getNumConditions()<this.numAlwaysVisibleConditions){this.createMissingConditionsAndOperators();o=true}if(this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)){this.createJoinOperatorPanel();this.createOption();o=true}if(o){this.updateConditionStatusesAndValues(i,n)}if(s){this.updateJoinOperatorsDisabled()}this.lastUiCompletePosition=i}getModelAsString(t){return this.params.getHandler()?.getModelAsString?.(t)??""}getPlaceholderText(t,e){let i=this.translate(t);if(typeof this.filterPlaceholder==="function"){const t=this.eTypes[e].getValue();const s=this.translate(t);i=this.filterPlaceholder({filterOptionKey:t,filterOption:s,placeholder:i})}else if(typeof this.filterPlaceholder==="string"){i=this.filterPlaceholder}return i}resetPlaceholder(){const t=this.getLocaleTextFunc();this.forEachInput(((e,i,s,n)=>{if(!(e instanceof ur)){return}const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd";const r=i===0&&n>1?t("ariaFilterFromValue","Filter from value"):i===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");e.setInputPlaceholder(this.getPlaceholderText(o,s));e.setInputAriaLabel(r)}))}setElementValue(t,e,i){if(t instanceof ur){t.setValue(e!=null?String(e):null,true)}}setElementDisplayed(t,e){if(wn(t)){tt(t.getGui(),e)}}setElementDisabled(t,e){if(wn(t)){it(t.getGui(),e)}}attachElementOnChange(t,e){if(t instanceof ur){t.onValueChange(e)}}forEachInput(t){this.getConditionTypes().forEach(((e,i)=>{this.forEachPositionTypeInput(i,e,t)}))}forEachPositionInput(t,e){const i=this.getConditionType(t);this.forEachPositionTypeInput(t,i,e)}forEachPositionTypeInput(t,e,i){const s=ny(e,this.optionsFactory);const n=this.getInputs(t);for(let e=0;e<n.length;e++){const o=n[e];if(o!=null){i(o,e,t,s)}}}isConditionDisabled(t,e){if(this.isReadOnly()){return true}if(t===0){return false}return t>e+1}isConditionBodyVisible(t){const e=this.getConditionType(t);const i=ny(e,this.optionsFactory);return i>0}isConditionUiComplete(t){if(t>=this.getNumConditions()){return false}const e=this.getConditionType(t);if(e==="empty"){return false}if(this.getValues(t).some((t=>t==null))){return false}return true}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const t=[];for(let e=0;e<this.getNumConditions();e++){if(this.isConditionUiComplete(e)){t.push(this.createCondition(e))}}return t}createMissingConditionsAndOperators(){if(this.isReadOnly()){return}for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++){this.createJoinOperatorPanel();this.createOption()}}resetUiToDefaults(t){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions);this.eTypes.forEach((t=>this.resetType(t)));this.eJoinAnds.forEach(((t,e)=>this.resetJoinOperatorAnd(t,e,this.joinOperatorId+e)));this.eJoinOrs.forEach(((t,e)=>this.resetJoinOperatorOr(t,e,this.joinOperatorId+e)));this.joinOperatorId++;this.forEachInput((t=>this.resetInput(t)));this.resetPlaceholder();this.createMissingConditionsAndOperators();this.lastUiCompletePosition=null;this.updateUiVisibility();if(!t){this.params.onUiChange(this.getUiChangeEventParams())}}resetType(t){const e=this.getLocaleTextFunc();const i=e("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.defaultOption,true).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,e,i){this.resetJoinOperator(t,e,this.defaultJoinOperator==="AND",this.translate("andCondition"),i)}resetJoinOperatorOr(t,e,i){this.resetJoinOperator(t,e,this.defaultJoinOperator==="OR",this.translate("orCondition"),i)}resetJoinOperator(t,e,i,s,n){this.updateJoinOperatorDisabled(t.setValue(i,true).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),e)}updateJoinOperatorsDisabled(){const t=(t,e)=>this.updateJoinOperatorDisabled(t,e);this.eJoinAnds.forEach(t);this.eJoinOrs.forEach(t)}updateJoinOperatorDisabled(t,e){t.setDisabled(this.isReadOnly()||e>0)}resetInput(t){this.setElementValue(t,null);this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,e){const i=this.mapValuesFromModel(t,this.optionsFactory);this.forEachInput(((t,s,n)=>{if(n!==e){return}this.setElementValue(t,i[s]!=null?i[s]:null)}))}setValueFromFloatingFilter(t){this.forEachInput(((e,i,s)=>{this.setElementValue(e,i===0&&s===0?t:null,true)}))}addChangedListeners(t,e){if(this.isReadOnly()){return}t.onValueChange(this.listener);this.forEachPositionInput(e,(t=>{this.attachElementOnChange(t,this.listener)}))}hasInvalidInputs(){return false}isReadOnly(){return!!this.params.readOnly}};var ry=class{constructor(t,e,i,s,n,o){this.alive=true;this.context=t;this.eParent=n;const r=ro(e,i,s);if(!r){return}r.newAgStackInstance().then((e=>{if(!this.alive){t.destroyBean(e);return}this.dateComp=e;if(!e){return}n.appendChild(e.getGui());e?.afterGuiAttached?.();const{tempValue:i,disabled:s}=this;if(i){e.setDate(i)}if(s!=null){e.setDisabled?.(s)}o?.(this)}))}destroy(){this.alive=false;this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){const e=this.dateComp;if(e){e.setDate(t)}else{this.tempValue=t}}setDisabled(t){const e=this.dateComp;if(e){e.setDisabled?.(t)}else{this.disabled=t}}setDisplayed(t){tt(this.eParent,t)}setInputPlaceholder(t){this.dateComp?.setInputPlaceholder?.(t)}setInputAriaLabel(t){this.dateComp?.setInputAriaLabel?.(t)}afterGuiAttached(t){this.dateComp?.afterGuiAttached?.(t)}updateParams(t){this.dateComp?.refresh?.(t)}};var ly=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function ay(t,e){const{dateFrom:i,dateTo:s,type:n}=t||{};return[i&&Ko(i,void 0,true)||null,s&&Ko(s,void 0,true)||null].slice(0,ny(n,e))}var hy=1e3;var cy=Infinity;var uy=class extends oy{constructor(){super("dateFilter",ay,ly);this.eConditionPanelsFrom=[];this.eConditionPanelsTo=[];this.dateConditionFromComps=[];this.dateConditionToComps=[];this.minValidYear=hy;this.maxValidYear=cy;this.minValidDate=null;this.maxValidDate=null;this.filterType="date"}afterGuiAttached(t){super.afterGuiAttached(t);this.dateConditionFromComps[0].afterGuiAttached(t)}commonUpdateSimpleParams(t){super.commonUpdateSimpleParams(t);const e=(e,i)=>{const s=t[e];if(s!=null){if(!isNaN(s)){return s==null?i:Number(s)}else{hi(82,{param:e})}}return i};const i=e("minValidYear",hy);const s=e("maxValidYear",cy);this.minValidYear=i;this.maxValidYear=s;if(i>s){hi(83)}const{minValidDate:n,maxValidDate:o}=t;const r=n instanceof Date?n:Ko(n);this.minValidDate=r;const l=o instanceof Date?o:Ko(o);this.maxValidDate=l;if(r&&l&&r>l){hi(84)}}createDateCompWrapper(t){const{beans:{userCompFactory:e,context:i,gos:s},params:n}=this;const o=new ry(i,e,n.colDef,os(s,{onDateChanged:()=>this.onUiChanged(),filterParams:n,location:"filter"}),t);this.addDestroyFunc((()=>o.destroy()));return o}setElementValue(t,e){t.setDate(e)}setElementDisplayed(t,e){t.setDisplayed(e)}setElementDisabled(t,e){t.setDisabled(e)}createEValue(){const t=Ma({tag:"div",cls:"ag-filter-body"});this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from");this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to");return t}createFromToElement(t,e,i,s){const n=Ma({tag:"div",cls:`ag-filter-${s} ag-filter-date-${s}`});e.push(n);t.appendChild(n);i.push(this.createDateCompWrapper(n))}removeEValues(t,e){this.removeDateComps(this.dateConditionFromComps,t,e);this.removeDateComps(this.dateConditionToComps,t,e);Xb(this.eConditionPanelsFrom,t,e);Xb(this.eConditionPanelsTo,t,e)}removeDateComps(t,e,i){const s=Xb(t,e,i);for(const t of s){t.destroy()}}isValidDateValue(t){if(t===null){return false}const{minValidDate:e,maxValidDate:i,minValidYear:s,maxValidYear:n}=this;if(e){if(t<e){return false}}else if(t.getUTCFullYear()<s){return false}if(i){if(t>i){return false}}else if(t.getUTCFullYear()>n){return false}return true}isConditionUiComplete(t){if(!super.isConditionUiComplete(t)){return false}let e=true;this.forEachInput(((i,s,n,o)=>{if(n!==t||!e||s>=o){return}e=e&&this.isValidDateValue(i.getDate())}));return e}areSimpleModelsEqual(t,e){return t.dateFrom===e.dateFrom&&t.dateTo===e.dateTo&&t.type===e.type}createCondition(t){const e=this.getConditionType(t);const i={};const s=this.getValues(t);const n=this.params.useIsoSeparator?"T":" ";if(s.length>0){i.dateFrom=Go(s[0],true,n)}if(s.length>1){i.dateTo=Go(s[1],true,n)}return{dateFrom:null,dateTo:null,filterType:this.filterType,type:e,...i}}resetPlaceholder(){const t=this.getLocaleTextFunc();const e=this.translate("dateFormatOoo");const i=t("ariaFilterValue","Filter Value");this.forEachInput((t=>{t.setInputPlaceholder(e);t.setInputAriaLabel(i)}))}getInputs(t){const{dateConditionFromComps:e,dateConditionToComps:i}=this;if(t>=e.length){return[null,null]}return[e[t],i[t]]}getValues(t){const e=[];this.forEachPositionInput(t,((t,i,s,n)=>{if(i<n){e.push(t.getDate())}}));return e}translate(t){if(t==="lessThan"){return super.translate("before")}if(t==="greaterThan"){return super.translate("after")}return super.translate(t)}};var dy=class extends re{constructor(t,e){super();this.mapValuesFromModel=t;this.defaultOptions=e}init(t){const e=t.filterParams;const i=new Jb;this.optionsFactory=i;i.init(e,this.defaultOptions);this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,e));this.updateParams(t);this.validateModel(t)}refresh(t){if(t.source==="colDef"){const e=t.filterParams;const i=this.optionsFactory;i.refresh(e,this.defaultOptions);this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:e});this.updateParams(t)}this.validateModel(t)}updateParams(t){this.params=t}doesFilterPass(t){const e=t.model;if(e==null){return true}const{operator:i}=e;const s=[];if(i){const t=e;s.push(...t.conditions??[])}else{s.push(e)}const n=i&&i==="OR"?"some":"every";const o=this.params.getValue(t.node);return s[n]((e=>this.individualConditionPasses(t,e,o)))}getModelAsString(t,e){return this.filterModelFormatter.getModelAsString(t,e)??""}validateModel(t){const{model:e,filterParams:{filterOptions:i,maxNumConditions:s}}=t;if(e==null){return}const n=oh(e);let o=n?e.conditions:[e];const r=i?.map((t=>typeof t==="string"?t:t.displayKey))??this.defaultOptions;const l=!o||o.every((t=>r.find((e=>e===t.type))!==void 0));if(!l){this.params={...t,model:null};t.onModelChange(null);return}let a=false;const h=this.filterType;if(o&&!o.every((t=>t.filterType===h))||e.filterType!==h){o=o.map((t=>({...t,filterType:h})));a=true}if(typeof s==="number"&&o&&o.length>s){o=o.slice(0,s);a=true}if(a){const i=o.length>1?{...e,filterType:h,conditions:o}:{...o[0],filterType:h};this.params={...t,model:i};t.onModelChange(i)}}individualConditionPasses(t,e,i){const s=this.optionsFactory;const n=this.mapValuesFromModel(e,s);const o=s.getCustomOption(e.type);const r=iy(o,n,i);if(r!=null){return r}if(i==null){return this.evaluateNullValue(e.type)}return this.evaluateNonNullValue(n,i,e,t)}};var fy=class extends dy{evaluateNullValue(t){const{includeBlanksInEquals:e,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:s,includeBlanksInLessThan:n,includeBlanksInRange:o}=this.params.filterParams;switch(t){case"equals":if(e){return true}break;case"notEqual":if(i){return true}break;case"greaterThan":case"greaterThanOrEqual":if(s){return true}break;case"lessThan":case"lessThanOrEqual":if(n){return true}break;case"inRange":if(o){return true}break;case"blank":return true;case"notBlank":return false}return false}evaluateNonNullValue(t,e,i){const s=i.type;if(!this.isValid(e)){return s==="notEqual"||s==="notBlank"}const n=this.comparator();const o=t[0]!=null?n(t[0],e):0;switch(s){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const i=n(t[1],e);return this.params.filterParams.inRangeInclusive?o>=0&&i<=0:o>0&&i<0}case"blank":return ty(e);case"notBlank":return!ty(e);default:hi(76,{filterModelType:s});return true}}};var gy={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"};var py={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"};var my=class extends re{constructor(t,e,i){super();this.optionsFactory=t;this.filterParams=e;this.valueFormatter=i}getModelAsString(t,e){const i=this.getLocaleTextFunc();const s=e==="filterToolPanel";if(!t){return s?Ia(this,"filterSummaryInactive"):null}const n=t.operator!=null;if(n){const i=t;const s=i.conditions??[];const n=s.map((t=>this.getModelAsString(t,e)));const o=i.operator==="AND"?"andCondition":"orCondition";return n.join(` ${Ia(this,o)} `)}else if(t.type==="blank"||t.type==="notBlank"){return s?Ia(this,t.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):i(t.type,t.type)}else{const e=t;const n=this.optionsFactory.getCustomOption(e.type);const{displayKey:o,displayName:r,numberOfInputs:l}=n||{};if(o&&r&&l===0){return i(o,r)}return this.conditionToString(e,s,e.type==="inRange"||l===2,o,r)}}updateParams(t){const{optionsFactory:e,filterParams:i}=t;this.optionsFactory=e;this.filterParams=i}conditionForToolPanel(t,e,i,s,n,o){let r;const l=this.getTypeKey(t);if(l){r=Ia(this,l)}if(n&&o){r=this.getLocaleTextFunc()(n,o)}if(r!=null){if(e){return`${r} ${Ia(this,"filterSummaryInRangeValues",[i(),s()])}`}else{return`${r} ${i()}`}}return null}getTypeKey(t){const e=this.filterTypeKeys[t];return e?`filterSummary${e}`:null}formatValue(t){const e=this.valueFormatter;return e?e(t??null)??"":String(t)}};var vy=class extends my{constructor(t,e){super(t,e,(t=>{const{dataTypeSvc:i,valueSvc:s}=this.beans;const n=e.column;const o=i?.getDateFormatterFunction(n);const r=o?o(t??void 0):t;return s.formatValue(n,null,r)}));this.filterTypeKeys=gy}conditionToString(t,e,i,s,n){const{type:o}=t;const r=Ko(t.dateFrom);const l=Ko(t.dateTo);const a=this.filterParams.inRangeFloatingFilterDateFormat;const h=e?this.formatValue.bind(this):t=>Wo(t,a);const c=()=>r!==null?h(r):"null";const u=()=>l!==null?h(l):"null";if(e){const t=this.conditionForToolPanel(o,i,c,u,s,n);if(t!=null){return t}}if(i){return`${c()}-${u()}`}if(r!=null){return h(r)}return`${o}`}};function wy(t,e){const i=e;if(i<t){return-1}if(i>t){return 1}return 0}var Cy=class extends fy{constructor(){super(ay,ly);this.filterType="date";this.FilterModelFormatterClass=vy}comparator(){return this.params.filterParams.comparator??wy}isValid(t){const e=this.params.filterParams.isValidDate;return!e||e(t)}};var by=class extends Sn{constructor(){super(...arguments);this.defaultDebounceMs=0}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.defaultOption;return}const e=t.operator;let i;if(e){const e=t;i=e.conditions[0]}else{i=t}this.lastType=i.type}canWeEditAfterModelFromParentFilter(t){if(!t){return this.isTypeEditable(this.lastType)}const e=t.operator;if(e){return false}const i=t;return this.isTypeEditable(i.type)}init(t){this.params=t;const e=this.gos.get("enableFilterHandlers");this.reactive=e;this.setParams(t);if(e){const e=t;this.onModelUpdated(e.model)}}setParams(t){const e=new Jb;this.optionsFactory=e;e.init(t.filterParams,this.defaultOptions);this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(e,t.filterParams));this.setSimpleParams(t,false)}setSimpleParams(t,e=true){const i=this.optionsFactory.defaultOption;if(!e){this.lastType=i}this.readOnly=!!t.filterParams.readOnly;const s=this.isTypeEditable(i);this.setEditable(s)}refresh(t){this.params=t;const e=t;const i=this.reactive;if(!i||e.source==="colDef"){this.updateParams(t)}if(i){const{source:t,model:i}=e;if(t==="dataChanged"||t==="ui"){return}this.onModelUpdated(i)}}updateParams(t){const e=this.optionsFactory;e.refresh(t.filterParams,this.defaultOptions);this.setSimpleParams(t);this.filterModelFormatter.updateParams({optionsFactory:e,filterParams:t.filterParams})}onParentModelChanged(t,e){if(e?.afterFloatingFilter||e?.afterDataChange){return}this.onModelUpdated(t)}hasSingleInput(t){const e=this.optionsFactory.getCustomOption(t)?.numberOfInputs;return e==null||e==1}isTypeEditable(t){const e=["inRange","empty","blank","notBlank"];return!!t&&!this.readOnly&&this.hasSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){const e=this.beans.colNames.getDisplayNameForColumn(t.column,"header",true);return`${e} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}};var yy={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]};var Sy=class extends by{constructor(){super(yy,[mr]);this.eReadOnlyText=vn;this.eDateWrapper=vn;this.FilterModelFormatterClass=vy;this.filterType="date";this.defaultOptions=ly}setParams(t){super.setParams(t);this.createDateComponent();const e=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(true).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}updateParams(t){super.updateParams(t);this.dateComp.updateParams(this.getDateComponentParams());this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){const e=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(t);this.setEditable(e);if(e){const e=t?Ko(t.dateFrom):null;this.dateComp.setDate(e);this.eReadOnlyText.setValue("")}else{this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t));this.dateComp.setDate(null)}}setEditable(t){tt(this.eDateWrapper,t);tt(this.eReadOnlyText.getGui(),!t)}onModelUpdated(t){super.setLastTypeFromModel(t);this.updateCompOnModelChange(t)}onDateChanged(){const t=this.dateComp.getDate();if(this.reactive){const e=this.params;e.onUiChange();const i=e.model;const s=Go(t);const n=s==null?null:{...i??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:s};e.onModelChange(n,{afterFloatingFilter:true})}else{this.params.parentFilterInstance((e=>{e?.onFloatingFilterChanged(this.lastType||null,t)}))}}getDateComponentParams(){const{filterParams:t}=this.params;const e=Ha(t,this.defaultDebounceMs);return os(this.gos,{onDateChanged:de(this,this.onDateChanged.bind(this),e),filterParams:t,location:"floatingFilter"})}createDateComponent(){const{beans:{context:t,userCompFactory:e},eDateWrapper:i,params:s}=this;this.dateComp=new ry(t,e,s.column.getColDef(),this.getDateComponentParams(),i,(t=>{t.setInputAriaLabel(this.getAriaLabel(s))}));this.addDestroyFunc((()=>this.dateComp.destroy()))}};var xy={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]};var Ry=class extends Sn{constructor(){super(xy,[mr]);this.eDateInput=vn;this.isApply=false;this.applyOnFocusOut=false}init(t){this.params=t;this.setParams(t);const e=this.eDateInput.getInputElement();this.addManagedListeners(e,{mouseDown:()=>{if(this.eDateInput.isDisabled()||this.usingSafariDatePicker){return}e.focus({preventScroll:true})},input:this.handleInput.bind(this,false),change:this.handleInput.bind(this,true),focusout:this.handleFocusOut.bind(this)})}handleInput(t){if(this.eDateInput.isDisabled()){return}if(this.isApply){this.applyOnFocusOut=!t;if(t){this.params.onDateChanged()}return}if(!t){this.params.onDateChanged()}}handleFocusOut(){if(this.applyOnFocusOut){this.applyOnFocusOut=false;this.params.onDateChanged()}}setParams(t){const e=this.eDateInput.getInputElement();const i=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=i&&Fo();const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r,buttons:l,includeTime:a,colDef:h}=t.filterParams||{};const c=this.beans.dataTypeSvc;const u=a??c?.getDateIncludesTimeFlag?.(h.cellDataType)??false;if(i){if(u){e.type="datetime-local";e.step="1"}else{e.type="date"}}else{e.type="text"}if(o&&s){hi(85)}if(r&&n){hi(86)}if(o&&r){const[t,e]=[o,r].map((t=>t instanceof Date?t:Ko(t)));if(t&&e&&t.getTime()>e.getTime()){hi(87)}}if(o){if(o instanceof Date){e.min=Wo(o)}else{e.min=o}}else if(s){e.min=`${s}-01-01`}if(r){if(r instanceof Date){e.max=Wo(r)}else{e.max=r}}else if(n){e.max=`${n}-12-31`}this.isApply=t.location==="floatingFilter"&&!!l?.includes("apply")}refresh(t){this.params=t;this.setParams(t)}getDate(){return Ko(this.eDateInput.getValue())}setDate(t){const e=this.params.filterParams.colDef.cellDataType;const i=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(e)??false;this.eDateInput.setValue(Go(t,i))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){if(!t?.suppressFocus){this.eDateInput.getInputElement().focus({preventScroll:true})}}shouldUseBrowserDatePicker(t){return t?.filterParams?.browserDatePicker??true}};var Fy=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function ky(t){const{allowedCharPattern:e}=t??{};return e??null}function Py(t){if(t==null){return null}return isNaN(t)?null:t}function Dy(t,e){const{filter:i,filterTo:s,type:n}=t||{};return[Py(i),Py(s)].slice(0,ny(n,e))}var My=class extends oy{constructor(){super("numberFilter",Dy,Fy);this.eValuesFrom=[];this.eValuesTo=[];this.filterType="number";this.defaultDebounceMs=500}setElementValue(t,e,i){const{numberFormatter:s}=this.params;const n=!i&&s?s(e??null):e;super.setElementValue(t,n)}createEValue(){const t=ky(this.params);const e=Ma({tag:"div",cls:"ag-filter-body",role:"presentation"});this.createFromToElement(e,this.eValuesFrom,"from",t);this.createFromToElement(e,this.eValuesTo,"to",t);return e}createFromToElement(t,e,i,s){const n=this.createManagedBean(s?new pr({allowedCharPattern:s}):new Cr);n.addCss(`ag-filter-${i}`);n.addCss("ag-filter-filter");e.push(n);t.appendChild(n.getGui())}removeEValues(t,e){const i=i=>this.removeComponents(i,t,e);i(this.eValuesFrom);i(this.eValuesTo)}getValues(t){const e=[];this.forEachPositionInput(t,((t,i,s,n)=>{if(i<n){e.push(Py(this.stringToFloat(t.getValue())))}}));return e}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}stringToFloat(t){if(typeof t==="number"){return t}let i=e(t);if(i!=null&&i.trim()===""){i=null}const s=this.params.numberParser;if(s){return s(i)}return i==null||i.trim()==="-"?null:Number.parseFloat(i)}createCondition(t){const e=this.getConditionType(t);const i={filterType:this.filterType,type:e};const s=this.getValues(t);if(s.length>0){i.filter=s[0]}if(s.length>1){i.filterTo=s[1]}return i}getInputs(t){const{eValuesFrom:e,eValuesTo:i}=this;if(t>=e.length){return[null,null]}return[e[t],i[t]]}hasInvalidInputs(){let t=false;this.forEachInput((e=>{if(!e.getInputElement().validity.valid){t=true}}));return t}};var Ty=class extends my{constructor(t,e){super(t,e,e.numberFormatter);this.filterTypeKeys=gy}conditionToString(t,e,i,s,n){const{filter:o,filterTo:r,type:l}=t;const a=this.formatValue.bind(this);if(e){const t=this.conditionForToolPanel(l,i,(()=>a(o)),(()=>a(r)),s,n);if(t!=null){return t}}if(i){return`${a(o)}-${a(r)}`}if(o!=null){return a(o)}return`${l}`}};var Ey=class extends fy{constructor(){super(Dy,Fy);this.filterType="number";this.FilterModelFormatterClass=Ty}comparator(){return(t,e)=>{if(t===e){return 0}return t<e?1:-1}}isValid(t){return!isNaN(t)}};var Ay=class extends re{constructor(t){super();this.params=t;this.eInput=vn;this.onValueChanged=()=>{}}setupGui(t){this.eInput=this.createManagedBean(new pr(this.params?.config));const e=this.eInput.getGui();t.appendChild(e);const i=t=>this.onValueChanged(t);this.addManagedListeners(e,{input:i,keydown:i})}setEditable(t){this.eInput.setDisabled(!t)}getValue(){return this.eInput.getValue()}setValue(t,e){this.eInput.setValue(t,e)}setValueChangedListener(t){this.onValueChanged=t}setParams({ariaLabel:t,autoComplete:e}){const{eInput:i}=this;i.setInputAriaLabel(t);if(e!==void 0){i.setAutoComplete(e)}}};function Iy(t){const e=t?.trim();return e===""?t:e}function Hy(t,e){const{filter:i,filterTo:s,type:n}=t||{};return[i||null,s||null].slice(0,ny(n,e))}var Oy={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"};var Ny=class extends by{constructor(){super(...arguments);this.eFloatingFilterInputContainer=vn;this.defaultDebounceMs=500}postConstruct(){this.setTemplate(Oy)}onModelUpdated(t){this.setLastTypeFromModel(t);this.setEditable(this.canWeEditAfterModelFromParentFilter(t));this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(t))}setParams(t){this.setupFloatingFilterInputService(t);super.setParams(t);this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.inputSvc=this.createFloatingFilterInputService(t);this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){const e=t.browserAutoComplete??false;const{inputSvc:i,defaultDebounceMs:s,readOnly:n}=this;i.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:e});this.applyActive=Oa(t.filterParams);if(!n){const e=Ha(t.filterParams,s);const n=de(this,this.syncUpWithParentFilter.bind(this),e);i.setValueChangedListener(n)}}updateParams(t){super.updateParams(t);this.setTextInputParams(t)}recreateFloatingFilterInputService(t){const{inputSvc:e}=this;const i=e.getValue();dt(this.eFloatingFilterInputContainer);this.destroyBean(e);this.setupFloatingFilterInputService(t);e.setValue(i,true)}syncUpWithParentFilter(t){const e=t.key===mo.ENTER;const i=this.reactive;if(i){const t=this.params;t.onUiChange()}if(this.applyActive&&!e){return}const{inputSvc:s,params:n,lastType:o}=this;let r=s.getValue();if(n.filterParams.trimInput){r=Iy(r);s.setValue(r,true)}if(i){const t=n;const e=t.model;const i=this.convertValue(r);const s=i==null?null:{...e??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:i};t.onModelChange(s,{afterFloatingFilter:true})}else{n.parentFilterInstance((t=>{t?.onFloatingFilterChanged(o||null,r||null)}))}}convertValue(t){return t||null}setEditable(t){this.inputSvc.setEditable(t)}};var By=class extends re{constructor(){super(...arguments);this.onValueChanged=()=>{};this.numberInputActive=true}setupGui(t){this.eNumberInput=this.createManagedBean(new Cr);this.eTextInput=this.createManagedBean(new pr);this.eTextInput.setDisabled(true);const e=this.eNumberInput.getGui();const i=this.eTextInput.getGui();t.appendChild(e);t.appendChild(i);this.setupListeners(e,(t=>this.onValueChanged(t)));this.setupListeners(i,(t=>this.onValueChanged(t)))}setEditable(t){this.numberInputActive=t;this.eNumberInput.setDisplayed(this.numberInputActive);this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eNumberInput.setAutoComplete(t);this.eTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(t){this.onValueChanged=t}setupListeners(t,e){this.addManagedListeners(t,{input:e,keydown:e})}setParams(t){this.setAriaLabel(t.ariaLabel);if(t.autoComplete!==void 0){this.setAutoComplete(t.autoComplete)}}setAriaLabel(t){this.eNumberInput.setInputAriaLabel(t);this.eTextInput.setInputAriaLabel(t)}};var Gy=class extends Ny{constructor(){super(...arguments);this.FilterModelFormatterClass=Ty;this.filterType="number";this.defaultOptions=Fy}updateParams(t){const e=ky(t.filterParams);if(e!==this.allowedCharPattern){this.recreateFloatingFilterInputService(t)}super.updateParams(t)}createFloatingFilterInputService(t){this.allowedCharPattern=ky(t.filterParams);if(this.allowedCharPattern){return this.createManagedBean(new Ay({config:{allowedCharPattern:this.allowedCharPattern}}))}return this.createManagedBean(new By)}convertValue(t){return t?Number(t):null}};var Vy=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"];var Ly=class extends oy{constructor(){super("textFilter",Hy,Vy);this.filterType="text";this.eValuesFrom=[];this.eValuesTo=[];this.defaultDebounceMs=500}createCondition(t){const e=this.getConditionType(t);const i={filterType:this.filterType,type:e};const s=this.getValues(t);if(s.length>0){i.filter=s[0]}if(s.length>1){i.filterTo=s[1]}return i}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getInputs(t){const{eValuesFrom:e,eValuesTo:i}=this;if(t>=e.length){return[null,null]}return[e[t],i[t]]}getValues(t){const i=[];this.forEachPositionInput(t,((t,s,n,o)=>{if(s<o){i.push(e(t.getValue()))}}));return i}createEValue(){const t=Ma({tag:"div",cls:"ag-filter-body",role:"presentation"});const{eValuesFrom:e,eValuesTo:i}=this;this.createFromToElement(t,e,"from");this.createFromToElement(t,i,"to");return t}createFromToElement(t,e,i){const s=this.createManagedBean(new pr);s.addCss(`ag-filter-${i}`);s.addCss("ag-filter-filter");e.push(s);t.appendChild(s.getGui())}removeEValues(t,e){const i=i=>this.removeComponents(i,t,e);const{eValuesFrom:s,eValuesTo:n}=this;i(s);i(n)}};var zy=class extends my{constructor(){super(...arguments);this.filterTypeKeys=py}conditionToString(t,e,i,s,n){const{filter:o,filterTo:r,type:l}=t;if(e){const t=t=>()=>Ia(this,"filterSummaryTextQuote",[t]);const e=this.conditionForToolPanel(l,i,t(o),t(r),s,n);if(e!=null){return e}}if(i){return`${o}-${r}`}if(o!=null){return`${o}`}return`${l}`}};var $y=({filterOption:t,value:e,filterText:i})=>{if(i==null){return false}switch(t){case"contains":return e.includes(i);case"notContains":return!e.includes(i);case"equals":return e===i;case"notEqual":return e!=i;case"startsWith":return e.indexOf(i)===0;case"endsWith":{const t=e.lastIndexOf(i);return t>=0&&t===e.length-i.length}default:return false}};var Wy=t=>t;var Uy=t=>t==null?null:t.toString().toLowerCase();var jy=class extends dy{constructor(){super(Hy,Vy);this.filterType="text";this.FilterModelFormatterClass=zy}updateParams(t){super.updateParams(t);const e=t.filterParams;this.matcher=e.textMatcher??$y;this.formatter=e.textFormatter??(e.caseSensitive?Wy:Uy)}evaluateNullValue(t){const e=["notEqual","notContains","blank"];return t?e.indexOf(t)>=0:false}evaluateNonNullValue(t,e,i,s){const n=t.map((t=>this.formatter(t)))||[];const o=this.formatter(e);const{api:r,colDef:l,column:a,context:h,filterParams:{textFormatter:c}}=this.params;if(i.type==="blank"){return ty(e)}else if(i.type==="notBlank"){return!ty(e)}const u={api:r,colDef:l,column:a,context:h,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:c};return n.some((t=>this.matcher({...u,filterText:t})))}processModelToApply(t){if(t&&this.params.filterParams.trimInput){const e=t=>{const e={...t};const{filter:i,filterTo:s}=t;if(i){e.filter=Iy(i)??null}if(s){e.filterTo=Iy(s)??null}return e};if(oh(t)){return{...t,conditions:t.conditions.map(e)}}return e(t)}return t}};var Ky=class extends Ny{constructor(){super(...arguments);this.FilterModelFormatterClass=zy;this.filterType="text";this.defaultOptions=Vy}createFloatingFilterInputService(){return this.createManagedBean(new Ay)}};function qy(t){return!!t.quickFilter?.isFilterPresent()}function _y(t){return t.quickFilter?.getText()}function Zy(t){t.quickFilter?.resetCache()}var Yy=class extends re{constructor(){super(...arguments);this.beanName="quickFilter";this.quickFilter=null;this.quickFilterParts=null}postConstruct(){const t=this.resetCache.bind(this);const e=this.gos;this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:t,columnRowGroupChanged:t,columnVisible:()=>{if(!e.get("includeHiddenColumnsInQuickFilter")){this.resetCache()}}});this.addManagedPropertyListener("quickFilterText",(t=>this.setFilter(t.currentValue)));this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onColumnConfigChanged()));this.quickFilter=this.parseFilter(e.get("quickFilterText"));this.parser=e.get("quickFilterParser");this.matcher=e.get("quickFilterMatcher");this.setFilterParts();this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setParserAndMatcher()))}refreshCols(){const{autoColSvc:t,colModel:e,gos:i,pivotResultCols:s}=this.beans;const n=e.isPivotMode();const o=t?.getColumns();const r=e.getColDefCols();let l=(n&&!i.get("applyQuickFilterBeforePivotOrAgg")?s?.getPivotResultCols()?.list:r)??[];if(o){l=l.concat(o)}this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?l:l.filter((t=>t.isVisible()||t.isRowGroupActive()))}isFilterPresent(){return this.quickFilter!==null}doesRowPass(t){const e=this.gos.get("cacheQuickFilter");if(this.matcher){return this.doesRowPassMatcher(e,t)}return this.quickFilterParts.every((i=>e?this.doesRowPassCache(t,i):this.doesRowPassNoCache(t,i)))}resetCache(){this.beans.rowModel.forEachNode((t=>t.quickFilterAggregateText=null))}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:t,parser:e}=this;if(t){this.quickFilterParts=e?e(t):t.split(" ")}else{this.quickFilterParts=null}}parseFilter(t){if(!i(t)){return null}return t.toUpperCase()}setFilter(t){if(t!=null&&typeof t!=="string"){hi(70,{newFilter:t});return}const e=this.parseFilter(t);if(this.quickFilter!==e){this.quickFilter=e;this.setFilterParts();this.dispatchLocalEvent({type:"quickFilterChanged"})}}setParserAndMatcher(){const t=this.gos.get("quickFilterParser");const e=this.gos.get("quickFilterMatcher");const i=t!==this.parser||e!==this.matcher;this.parser=t;this.matcher=e;if(i){this.setFilterParts();this.dispatchLocalEvent({type:"quickFilterChanged"})}}onColumnConfigChanged(){this.refreshCols();this.resetCache();if(this.isFilterPresent()){this.dispatchLocalEvent({type:"quickFilterChanged"})}}doesRowPassNoCache(t,e){return this.colsToUse.some((s=>{const n=this.getTextForColumn(s,t);return i(n)&&n.includes(e)}))}doesRowPassCache(t,e){this.checkGenerateAggText(t);return t.quickFilterAggregateText.includes(e)}doesRowPassMatcher(t,e){let i;if(t){this.checkGenerateAggText(e);i=e.quickFilterAggregateText}else{i=this.getAggText(e)}const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateAggText(t){if(!t.quickFilterAggregateText){t.quickFilterAggregateText=this.getAggText(t)}}getTextForColumn(t,e){let s=this.beans.filterValueSvc.getValue(t,e);const n=t.getColDef();if(n.getQuickFilterText){const i=os(this.gos,{value:s,node:e,data:e.data,column:t,colDef:n});s=n.getQuickFilterText(i)}return i(s)?s.toString().toUpperCase():null}getAggText(t){const e=[];for(const s of this.colsToUse){const n=this.getTextForColumn(s,t);if(i(n)){e.push(n)}}return e.join("\n")}};var Qy={moduleName:"ClientSideRowModelFilter",version:Ke,rowModels:["clientSide"],beans:[Rb]};var Jy={moduleName:"FilterCore",version:Ke,beans:[qb],apiFunctions:{isAnyFilterPresent:jb,onFilterChanged:Kb},css:[Eb],dependsOn:[Qy]};var Xy={moduleName:"FilterValue",version:Ke,beans:[Zb]};var tS={moduleName:"ColumnFilter",version:Ke,beans:[Ub,_b],dynamicBeans:{headerFilterCellCtrl:Fb},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Ab,getColumnFilterInstance:Ib,destroyFilter:Hb,setFilterModel:Ob,getFilterModel:Nb,getColumnFilterModel:Bb,setColumnFilterModel:Gb,showColumnFilter:Vb,hideColumnFilter:Lb,getColumnFilterHandler:zb,doFilterAction:$b},dependsOn:[Jy,Tb,Xy,Db]};var eS={moduleName:"CustomFilter",version:Ke,userComponents:{agReadOnlyFloatingFilter:Qb},dependsOn:[tS]};var iS={moduleName:"TextFilter",version:Ke,dependsOn:[tS],userComponents:{agTextColumnFilter:{classImp:Ly,params:{useForm:true}},agTextColumnFloatingFilter:Ky},dynamicBeans:{agTextColumnFilterHandler:jy}};var sS={moduleName:"NumberFilter",version:Ke,dependsOn:[tS],userComponents:{agNumberColumnFilter:{classImp:My,params:{useForm:true}},agNumberColumnFloatingFilter:Gy},dynamicBeans:{agNumberColumnFilterHandler:Ey}};var nS={moduleName:"DateFilter",version:Ke,dependsOn:[tS],userComponents:{agDateColumnFilter:{classImp:uy,params:{useForm:true}},agDateInput:Ry,agDateColumnFloatingFilter:Sy},dynamicBeans:{agDateColumnFilterHandler:Cy}};var oS={moduleName:"QuickFilterCore",version:Ke,rowModels:["clientSide"],beans:[Yy],dependsOn:[Jy,Xy]};var rS={moduleName:"QuickFilter",version:Ke,apiFunctions:{isQuickFilterPresent:qy,getQuickFilter:_y,resetQuickFilter:Zy},dependsOn:[oS]};var lS={moduleName:"ExternalFilter",version:Ke,dependsOn:[Jy]};var aS=`.ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}`;var hS=(t,e,i)=>{const{editModelSvc:s}=t;const n=s?.getCellValidationModel()?.getCellValidation(e)?.errorMessages;const o=s?.getRowValidationModel().getRowValidation(e)?.errorMessages;const r=n||o;return r?.length?r.join(i("tooltipValidationErrorSeparator",". ")):void 0};var cS=class extends re{constructor(){super(...arguments);this.beanName="tooltipSvc"}setupHeaderTooltip(t,e,i,s){if(t){e.destroyBean(t)}const n=this.gos;const o=sb(n);const{column:r,eGui:l}=e;const a=r.getColDef();if(!s&&o&&!a.headerComponent){s=yt((()=>l.querySelector(".ag-header-cell-text")))}const h="header";const c="header";const u=this.beans.colNames.getDisplayNameForColumn(r,c,true);const d=i??u;const f={getGui:()=>l,getLocation:()=>h,getTooltipValue:()=>i??a?.headerTooltipValueGetter?.(os(n,{location:h,colDef:a,column:r,value:d,valueFormatted:u}))??a?.headerTooltip,shouldDisplayTooltip:s,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let g=this.createTooltipFeature(f);if(g){g=e.createBean(g);e.setRefreshFunction("tooltip",(()=>g.refreshTooltip()))}return g}setupHeaderGroupTooltip(t,e,i,s){if(t){e.destroyBean(t)}const n=this.gos;const o=sb(n);const{column:r,eGui:l}=e;const a=r.getColGroupDef();if(!s&&o&&!a?.headerGroupComponent){s=yt((()=>l.querySelector(".ag-header-group-text")))}const h="headerGroup";const c="header";const u=this.beans.colNames.getDisplayNameForColumnGroup(r,c);const d=i??u;const f={getGui:()=>l,getLocation:()=>h,getTooltipValue:()=>i??a?.headerTooltipValueGetter?.(os(n,{location:h,colDef:a,column:r,value:d,valueFormatted:u}))??a?.headerTooltip,shouldDisplayTooltip:s,getAdditionalParams:()=>{const t={column:r};if(a){t.colDef=a}return t}};const g=this.createTooltipFeature(f);return g?e.createBean(g):g}enableCellTooltipFeature(t,e,s){const{beans:n}=this;const{gos:o,editSvc:r}=n;const{column:l,rowNode:a}=t;let h="cell";const c=()=>{const e=!!r?.isEditing(t);const s=!e&&hS(n,t,this.getLocaleTextFunc());if(s){h="cellEditor";return s}h="cell";const c=l.getColDef();const u=a.data;if(c.tooltipField&&i(u)){return dp(u,c.tooltipField,l.isTooltipFieldContainsDots())}const d=c.tooltipValueGetter;if(d){return d(os(o,{location:"cell",colDef:l.getColDef(),column:l,rowIndex:t.cellPosition.rowIndex,node:a,data:a.data,value:t.value,valueFormatted:t.valueFormatted}))}return null};const u=sb(o);if(!s){if(u&&!t.isCellRenderer()){s=()=>{const e=!!r?.isEditing(t);const i=!e&&hS(n,t,this.getLocaleTextFunc());if(i){return true}const s=l.isTooltipEnabled();if(!s){return false}const o=yt((()=>{const e=t.eGui;return e.children.length===0?e:e.querySelector(".ag-cell-value")}));return!e&&o()}}else{s=()=>!r?.isEditing(t)}}const d={getGui:()=>t.eGui,getLocation:()=>h,getTooltipValue:e!=null?()=>e:c,shouldDisplayTooltip:s,getAdditionalParams:()=>({column:l,colDef:l.getColDef(),rowIndex:t.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:t.valueFormatted})};return this.createTooltipFeature(d,n)}setupFullWidthRowTooltip(t,e,i,s){const n={getGui:()=>e.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:s};const o=this.beans;const r=o.context;if(t){e.destroyBean(t,r)}const l=this.createTooltipFeature(n,o);if(!l){return}return e.createBean(l,r)}setupCellEditorTooltip(t,e){const{beans:i}=this;const{context:s}=i;const n=e.getValidationElement?.(true)||!e.isPopup?.()&&t.eGui;if(!n){return}const o={getGui:()=>n,getTooltipValue:()=>hS(i,t,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:t}=i;const e=t?.getRowValidationModel()?.getRowValidationMap();const s=t?.getCellValidationModel()?.getCellValidationMap();const n=!!e&&e.size>0;const o=!!s&&s.size>0;return n||o}};const r=this.createTooltipFeature(o,i);if(!r){return}return t.createBean(r,s)}initCol(t){const{colDef:e}=t;t.tooltipEnabled=i(e.tooltipField)||i(e.tooltipValueGetter)||i(e.tooltipComponent)}createTooltipFeature(t,e){return this.beans.registry.createDynamicBean("tooltipFeature",false,t,e)}};var uS=class extends Wl{createTooltipComp(t,e){const i=ho(this.beans.userCompFactory,t);i?.newAgStackInstance().then(e)}setEventHandlers(t){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:t})}clearEventHandlers(){this.onColumnMovedEventCallback?.();this.onColumnMovedEventCallback=void 0}};var dS={moduleName:"Tooltip",version:Ke,beans:[cS],dynamicBeans:{tooltipFeature:Bl,highlightTooltipFeature:Ul,tooltipStateManager:uS},userComponents:{agTooltipComponent:_l},dependsOn:[Tb],css:[aS]};var fS=class{constructor(t){this.cellValueChanges=t}};var gS=class extends fS{constructor(t,e,i,s){super(t);this.initialRange=e;this.finalRange=i;this.ranges=s}};var pS=10;var mS=class{constructor(t){this.actionStack=[];this.maxStackSize=t?t:pS;this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){const e=t.cellValueChanges&&t.cellValueChanges.length>0;if(!e){return}if(this.actionStack.length===this.maxStackSize){this.actionStack.shift()}this.actionStack.push(t)}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};var vS=class extends re{constructor(){super(...arguments);this.beanName="undoRedo";this.cellValueChanges=[];this.activeCellEdit=null;this.activeRowEdit=null;this.isPasting=false;this.isRangeInAction=false;this.batchEditing=false;this.bulkEditing=false;this.onCellValueChanged=t=>{const e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned};const i=this.activeCellEdit!==null&&nf(this.activeCellEdit,e);const s=this.activeRowEdit!==null&&rf(this.activeRowEdit,e);const n=i||s||this.isPasting||this.isRangeInAction;if(!n){return}const{rowPinned:o,rowIndex:r,column:l,oldValue:a,value:h}=t;const c={rowPinned:o,rowIndex:r,columnId:l.getColId(),newValue:h,oldValue:a};this.cellValueChanges.push(c)};this.clearStacks=()=>{this.undoStack.clear();this.redoStack.clear()}}postConstruct(){const{gos:t,ctrlsSvc:e}=this.beans;if(!t.get("undoRedoCellEditing")){return}const i=t.get("undoRedoCellEditingLimit");if(i<=0){return}this.undoStack=new mS(i);this.redoStack=new mS(i);this.addListeners();const s=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:t=>{if(!t.keepUndoRedoStack){this.clearStacks()}},columnPivotModeChanged:s,newColumnsLoaded:s,columnGroupOpened:s,columnRowGroupChanged:s,columnMoved:s,columnPinned:s,columnVisible:s,rowDragEnd:s});e.whenReady(this,(t=>{this.gridBodyCtrl=t.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(t){const{eventSvc:e,undoStack:i,redoStack:s}=this;e.dispatchEvent({type:"undoStarted",source:t});const n=this.undoRedo(i,s,"initialRange","oldValue","undo");e.dispatchEvent({type:"undoEnded",source:t,operationPerformed:n})}redo(t){const{eventSvc:e,undoStack:i,redoStack:s}=this;e.dispatchEvent({type:"redoStarted",source:t});const n=this.undoRedo(s,i,"finalRange","newValue","redo");e.dispatchEvent({type:"redoEnded",source:t,operationPerformed:n})}undoRedo(t,e,i,s,n){if(!t){return false}const o=t.pop();if(!o?.cellValueChanges){return false}this.processAction(o,(t=>t[s]),n);if(o instanceof gS){this.processRange(o.ranges||[o[i]])}else{this.processCell(o.cellValueChanges)}e.push(o);return true}processAction(t,e,i){for(const s of t.cellValueChanges){const{rowIndex:t,rowPinned:n,columnId:o}=s;const r={rowIndex:t,rowPinned:n};const l=hf(this.beans,r);if(!l.displayed){continue}l.setDataValue(o,e(s),i)}}processRange(t){let e;const i=this.beans.rangeSvc;i.removeAllCellRanges(true);t.forEach(((s,n)=>{if(!s){return}const o=s.startRow;const r=s.endRow;if(n===t.length-1){e={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()};this.setLastFocusedCell(e)}const l={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};i.addCellRange(l)}))}processCell(t){const e=t[0];const{rowIndex:i,rowPinned:s}=e;const n={rowIndex:i,rowPinned:s};const o=hf(this.beans,n);const r={rowPinned:e.rowPinned,rowIndex:o.rowIndex,columnId:e.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(t){const{rowIndex:e,columnId:i,rowPinned:s}=t;const{colModel:n,focusSvc:o,rangeSvc:r}=this.beans;const l=n.getCol(i);if(!l){return}const{scrollFeature:a}=this.gridBodyCtrl;a.ensureIndexVisible(e);a.ensureColumnVisible(l);const h={rowIndex:e,column:l,rowPinned:s};o.setFocusedCell({...h,forceBrowserFocus:true});r?.setRangeToCell(h)}addListeners(){this.addManagedEventListeners({rowEditingStarted:t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}},rowEditingStopped:()=>{const t=new fS(this.cellValueChanges);this.pushActionsToUndoStack(t);this.activeRowEdit=null},cellEditingStarted:t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}},cellEditingStopped:t=>{this.activeCellEdit=null;const e=t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction;if(e){const t=new fS(this.cellValueChanges);this.pushActionsToUndoStack(t)}},pasteStart:()=>{this.isPasting=true},pasteEnd:()=>{const t=new fS(this.cellValueChanges);this.pushActionsToUndoStack(t);this.isPasting=false},fillStart:()=>{this.isRangeInAction=true},fillEnd:t=>{const e=new gS(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e);this.isRangeInAction=false},keyShortcutChangedCellStart:()=>{this.isRangeInAction=true},keyShortcutChangedCellEnd:()=>{let t;const{rangeSvc:e,gos:i}=this.beans;if(e&&$i(i)){t=new gS(this.cellValueChanges,void 0,void 0,[...e.getCellRanges()])}else{t=new fS(this.cellValueChanges)}this.pushActionsToUndoStack(t);this.isRangeInAction=false},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:t})=>this.stopBigChange("batchEditing",t),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:t})=>this.stopBigChange("bulkEditing",t)})}startBigChange(t){this.updateBigChange(t,true)}updateBigChange(t,e){if(t==="bulkEditing"){this.bulkEditing=e}else{this.batchEditing=e}}stopBigChange(t,e){if(t==="bulkEditing"&&!this.bulkEditing||t==="batchEditing"&&!this.batchEditing){return}this.updateBigChange(t,false);if(e?.length===0){return}const i=new fS(e??[]);this.pushActionsToUndoStack(i);this.cellValueChanges=[]}pushActionsToUndoStack(t){this.undoStack.push(t);this.cellValueChanges=[];this.redoStack.clear()}};var wS=`.ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}`;var CS={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]};var bS=class extends au{constructor(){super(CS,[fr]);this.eEditor=vn}initialiseEditor(t){const e=t.value??void 0;const i=this.eEditor;i.setValue(e);const s=i.getInputElement();s.setAttribute("tabindex","-1");this.setAriaLabel(e);this.addManagedListeners(i,{fieldValueChanged:t=>this.setAriaLabel(t.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){if(this.params.cellStartedEdit){this.focusIn()}}isPopup(){return false}setAriaLabel(t){const e=this.getLocaleTextFunc();const i=Y(e,t);const s=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${s} (${i})`)}getValidationElement(t){return t?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:t}=this;const{getValidationErrors:e}=t;const i=this.getValue();if(!e){return null}return e({value:i,internalErrors:null,cellEditorParams:t})}};var yS=class extends au{constructor(t){super();this.cellEditorInput=t;this.eEditor=vn}initialiseEditor(t){const{cellEditorInput:e}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[e.getTemplate()]},e.getAgComponents());const{eEditor:i}=this;const{cellStartedEdit:s,eventKey:n,suppressPreventDefault:o}=t;i.getInputElement().setAttribute("title","");e.init(i,t);let r;let l=true;if(s){this.focusAfterAttached=true;if(n===mo.BACKSPACE||n===mo.DELETE){r=""}else if(n&&n.length===1){if(o){l=false}else{r=n}}else{r=e.getStartValue();if(n!==mo.F2){this.highlightAllOnFocus=true}}}else{this.focusAfterAttached=false;r=e.getStartValue()}if(l&&r!=null){i.setStartValue(r)}this.addGuiEventListener("keydown",(t=>{const{key:e}=t;if(e===mo.PAGE_UP||e===mo.PAGE_DOWN){t.preventDefault()}}))}afterGuiAttached(){const t=this.getLocaleTextFunc();const e=this.eEditor;e.setInputAriaLabel(t("ariaInputEditor","Input Editor"));if(!this.focusAfterAttached){return}if(!Fo()){e.getFocusableElement().focus()}const i=e.getInputElement();if(this.highlightAllOnFocus){i.select()}else{this.cellEditorInput.setCaret?.()}}focusIn(){const{eEditor:t}=this;const e=t.getFocusableElement();const i=t.getInputElement();e.focus();i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return false}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}};var SS={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"};var xS=class{constructor(t,e){this.getDataTypeService=t;this.getLocaleTextFunc=e}getTemplate(){return SS}getAgComponents(){return[Sr]}init(t,e){this.eEditor=t;this.params=e;const{min:i,max:s,step:n,colDef:o}=e;if(i!=null){t.setMin(i)}if(s!=null){t.setMax(s)}if(n!=null){t.setStep(n)}this.includeTime=e.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType);if(this.includeTime!=null){t.setIncludeTime(this.includeTime)}}getValidationErrors(){const t=this.eEditor.getInputElement();const e=t.valueAsDate;const{params:i}=this;const{min:s,max:n,getValidationErrors:o}=i;let r=[];const l=this.getLocaleTextFunc();if(e instanceof Date&&!isNaN(e.getTime())){if(s){const t=s instanceof Date?s:new Date(s);if(e<t){const e=t.toLocaleDateString();r.push(l("minDateValidation",`Date must be after ${e}`,[e]))}}if(n){const t=n instanceof Date?n:new Date(n);if(e>t){const e=t.toLocaleDateString();r.push(l("maxDateValidation",`Date must be before ${e}`,[e]))}}}if(!r.length){r=null}if(o){return o({value:e,cellEditorParams:i,internalErrors:r})}return r}getValue(){const{eEditor:t,params:e}=this;const s=t.getDate();if(!i(s)&&!i(e.value)){return e.value}return s??null}getStartValue(){const{value:t}=this.params;if(!(t instanceof Date)){return void 0}return Go(t,this.includeTime??false)}};var RS=class extends yS{constructor(){super(new xS((()=>this.beans.dataTypeSvc),(()=>this.getLocaleTextFunc())))}};var FS={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"};var kS=class{constructor(t,e){this.getDataTypeService=t;this.getLocaleTextFunc=e}getTemplate(){return FS}getAgComponents(){return[Sr]}init(t,e){this.eEditor=t;this.params=e;const{min:i,max:s,step:n,colDef:o}=e;if(i!=null){t.setMin(i)}if(s!=null){t.setMax(s)}if(n!=null){t.setStep(n)}this.includeTime=e.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType);if(this.includeTime!=null){t.setIncludeTime(this.includeTime)}}getValidationErrors(){const{eEditor:t,params:e}=this;const i=t.getInputElement().value;const s=this.formatDate(this.parseDate(i??void 0));const{min:n,max:o,getValidationErrors:r}=e;let l=[];if(s){const t=new Date(s);const e=this.getLocaleTextFunc();if(n){const i=new Date(n);if(t<i){const t=i.toLocaleDateString();l.push(e("minDateValidation",`Date must be after ${t}`,[t]))}}if(o){const i=new Date(o);if(t>i){const t=i.toLocaleDateString();l.push(e("maxDateValidation",`Date must be before ${t}`,[t]))}}}if(!l.length){l=null}if(r){return r({value:this.getValue(),cellEditorParams:e,internalErrors:l})}return l}getValue(){const{params:t,eEditor:e}=this;const s=this.formatDate(e.getDate());if(!i(s)&&!i(t.value)){return t.value}return t.parseValue(s??"")}getStartValue(){return Go(this.parseDate(this.params.value??void 0)??null,this.includeTime??false)}parseDate(t){const e=this.getDataTypeService();return e?e.getDateParserFunction(this.params.column)(t):Ko(t)??void 0}formatDate(t){const e=this.getDataTypeService();return e?e.getDateFormatterFunction(this.params.column)(t):Go(t??null,this.includeTime??false)??void 0}};var PS=class extends yS{constructor(){super(new kS((()=>this.beans.dataTypeSvc),(()=>this.getLocaleTextFunc())))}};var DS={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]};var MS=class extends au{constructor(){super(DS,[wr]);this.eEditor=vn}initialiseEditor(t){const{eEditor:e}=this;const{cellStartedEdit:i,eventKey:s,maxLength:n,cols:o,rows:r}=t;this.focusAfterAttached=i;e.getInputElement().setAttribute("title","");e.setMaxLength(n||200).setCols(o||60).setRows(r||10);let l;if(i){this.focusAfterAttached=true;if(s===mo.BACKSPACE||s===mo.DELETE){l=""}else if(s&&s.length===1){l=s}else{l=this.getStartValue(t);if(s!==mo.F2){this.highlightAllOnFocus=true}}}else{this.focusAfterAttached=false;l=this.getStartValue(t)}if(l!=null){e.setValue(l,true)}this.addGuiEventListener("keydown",this.onKeyDown.bind(this));this.activateTabIndex()}getStartValue(t){const{value:e}=t;return e?.toString()??e}onKeyDown(t){const e=t.key;if(e===mo.LEFT||e===mo.UP||e===mo.RIGHT||e===mo.DOWN||t.shiftKey&&e===mo.ENTER){t.stopPropagation()}}afterGuiAttached(){const{eEditor:t,focusAfterAttached:e,highlightAllOnFocus:i}=this;const s=this.getLocaleTextFunc();t.setInputAriaLabel(s("ariaInputEditor","Input Editor"));if(e){t.getFocusableElement().focus();if(i){t.getInputElement().select()}}}getValue(){const{eEditor:t,params:e}=this;const{value:s}=e;const n=t.getValue();if(!i(n)&&!i(s)){return s}return e.parseValue(n)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:t}=this;const{maxLength:e,getValidationErrors:i}=t;const s=this.getLocaleTextFunc();const n=this.getValue();let o=[];if(typeof n==="string"&&e!=null&&n.length>e){o.push(s("maxLengthValidation",`Must be ${e} characters or fewer.`,[String(e)]))}if(!o.length){o=null}if(i){return i({value:n,internalErrors:o,cellEditorParams:t})}return o}};var TS={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"};var ES=class{constructor(t){this.getLocaleTextFunc=t}getTemplate(){return TS}getAgComponents(){return[br]}init(t,e){this.eEditor=t;this.params=e;const{max:i,min:s,precision:n,step:o}=e;if(i!=null){t.setMax(i)}if(s!=null){t.setMin(s)}if(n!=null){t.setPrecision(n)}if(o!=null){t.setStep(o)}const r=t.getInputElement();if(e.preventStepping){t.addManagedElementListeners(r,{keydown:this.preventStepping})}else if(e.showStepperButtons){r.classList.add("ag-number-field-input-stepper")}}getValidationErrors(){const{params:t}=this;const{min:e,max:i,getValidationErrors:s}=t;const n=this.eEditor.getInputElement();const o=n.valueAsNumber;const r=this.getLocaleTextFunc();let l=[];if(typeof o==="number"){if(e!=null&&o<e){l.push(r("minValueValidation",`Must be greater than or equal to ${e}.`,[String(e)]))}if(i!=null&&o>i){l.push(r("maxValueValidation",`Must be less than or equal to ${i}.`,[String(i)]))}}if(!l.length){l=null}if(s){return s({value:o,cellEditorParams:t,internalErrors:l})}return l}preventStepping(t){if(t.key===mo.UP||t.key===mo.DOWN){t.preventDefault()}}getValue(){const{eEditor:t,params:e}=this;const s=t.getValue();if(!i(s)&&!i(e.value)){return e.value}let n=e.parseValue(s);if(n==null){return n}if(typeof n==="string"){if(n===""){return null}n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){if(Fo()){this.eEditor.getInputElement().focus({preventScroll:true})}}};var AS=class extends yS{constructor(){super(new ES((()=>this.getLocaleTextFunc())))}};var IS={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]};var HS=class extends au{constructor(){super(IS,[Ir]);this.eEditor=vn;this.startedByEnter=false}wireBeans(t){this.valueSvc=t.valueSvc}initialiseEditor(t){this.focusAfterAttached=t.cellStartedEdit;const{eEditor:e,valueSvc:i,gos:n}=this;const{values:o,value:r,eventKey:l}=t;if(s(o)){hi(58);return}this.startedByEnter=l!=null?l===mo.ENTER:false;let a=false;o.forEach((s=>{const n={value:s};const o=i.formatValue(t.column,null,s);const l=o!==null&&o!==void 0;n.text=l?o:s;e.addOption(n);a=a||r===s}));if(a){e.setValue(t.value,true)}else if(t.values.length){e.setValue(t.values[0],true)}const{valueListGap:h,valueListMaxWidth:c,valueListMaxHeight:u}=t;if(h!=null){e.setPickerGap(h)}if(u!=null){e.setPickerMaxHeight(u)}if(c!=null){e.setPickerMaxWidth(c)}if(n.get("editType")!=="fullRow"){this.addManagedListeners(this.eEditor,{selectedItem:()=>t.stopEditing()})}}afterGuiAttached(){if(this.focusAfterAttached){this.eEditor.getFocusableElement().focus()}if(this.startedByEnter){setTimeout((()=>{if(this.isAlive()){this.eEditor.showPicker()}}))}}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return false}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:t}=this;const{values:e,getValidationErrors:i}=t;const s=this.getValue();let n=[];if(e&&!e.includes(s)){const t=this.getLocaleTextFunc();n.push(t("invalidSelectionValidation","Invalid selection."))}else{n=null}if(i){return i({value:s,internalErrors:n,cellEditorParams:t})}return n}};var OS={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"};var NS=class{constructor(t){this.getLocaleTextFunc=t}getTemplate(){return OS}getAgComponents(){return[mr]}init(t,e){this.eEditor=t;this.params=e;const i=e.maxLength;if(i!=null){t.setMaxLength(i)}}getValidationErrors(){const{params:t}=this;const{maxLength:e,getValidationErrors:i}=t;const s=this.getValue();const n=this.getLocaleTextFunc();let o=[];if(e!=null&&typeof s==="string"&&s.length>e){o.push(n("maxLengthValidation",`Must be ${e} characters or fewer.`,[String(e)]))}if(!o.length){o=null}if(i){return i({value:s,cellEditorParams:t,internalErrors:o})}return o}getValue(){const{eEditor:t,params:e}=this;const s=t.getValue();if(!i(s)&&!i(e.value)){return e.value}return e.parseValue(s)}getStartValue(){const t=this.params;const e=t.useFormatter||t.column.getColDef().refData;return e?t.formatValue(t.value):t.value}setCaret(){if(Fo()){this.eEditor.getInputElement().focus({preventScroll:true})}const t=this.eEditor;const e=t.getValue();const s=i(e)&&e.length||0;if(s){t.getInputElement().setSelectionRange(s,s)}}};var BS=class extends yS{constructor(){super(new NS((()=>this.getLocaleTextFunc())))}};function GS(t){return t.ctrlsSvc.getScrollFeature().getVScrollPosition()}function VS(t){return t.ctrlsSvc.getScrollFeature().getHScrollPosition()}function LS(t,e,i="auto"){t.frameworkOverrides.wrapIncoming((()=>t.ctrlsSvc.getScrollFeature().ensureColumnVisible(e,i)),"ensureVisible")}function zS(t,e,i){t.frameworkOverrides.wrapIncoming((()=>t.ctrlsSvc.getScrollFeature().ensureIndexVisible(e,i)),"ensureVisible")}function $S(t,e,i=null){t.frameworkOverrides.wrapIncoming((()=>t.ctrlsSvc.getScrollFeature().ensureNodeVisible(e,i)),"ensureVisible")}function WS(t){t.undoRedo?.undo("api")}function US(t){t.undoRedo?.redo("api")}function jS(t,e){return t.editModelSvc?.getEditRowDataValue(e,{checkSiblings:true})}function KS(t){const e=t.editModelSvc?.getEditMap();const i=[];e?.forEach(((t,e)=>{const{rowIndex:s,rowPinned:n}=e;t.forEach(((t,e)=>{const{editorValue:o,pendingValue:r,sourceValue:l,state:a}=t;const h=Jv(t);let c=o??r;if(c===_v){c=void 0}const u={newValue:c,oldValue:l,state:a,column:e,colId:e.getColId(),colKey:e.getColId(),rowIndex:s,rowPinned:n};const d=a==="changed"&&h;const f=a==="editing";if(f||d){i.push(u)}}))}));return i}function qS(t,e=false){const{editSvc:i}=t;if(i?.isBatchEditing()){if(e){for(const e of t.editModelSvc?.getEditPositions()??[]){if(e.state==="editing"){i.revertSingleCellEdit(e)}}}else{ow(t,{persist:true})}aw(t,void 0,{cancel:e})}else{i?.stopEditing(void 0,{cancel:e,source:"edit",forceStop:!e,forceCancel:e})}}function _S(t,e){const i=Uv(t,e);return t.editSvc?.isEditing(i)??false}function ZS(t,e){const{key:i,colKey:s,rowIndex:n,rowPinned:o}=e;const{editSvc:r,colModel:l}=t;const a=l.getCol(s);if(!a){hi(12,{colKey:s});return}const h={rowIndex:n,rowPinned:o||null};const c=hf(t,h);if(!c){hi(290,{rowIndex:n,rowPinned:o});return}if(!a.isCellEditable(c)){return}const u=o==null;if(u){zS(t,n)}LS(t,s);r?.startEditing({rowNode:c,column:a},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})}function YS(t){return t.editSvc?.validateEdit()||null}function QS(t){return t.undoRedo?.getCurrentUndoStackSize()??0}function JS(t){return t.undoRedo?.getCurrentRedoStackSize()??0}var XS={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}};var tx=class extends vo{constructor(t){super(XS);this.params=t}postConstruct(){ki(this.gos,this.getGui(),"popupEditorWrapper",true);this.addKeyDownListener()}addKeyDownListener(){const t=this.getGui();const e=this.params;const i=t=>{if(!Fh(this.gos,t,e.node,e.column,true)){e.onKeyDown(t)}};this.addManagedElementListeners(t,{keydown:i})}};function ex(t,{column:e},i,s,n="ui"){if(i instanceof KeyboardEvent&&(i.key===mo.TAB||i.key===mo.ENTER||i.key===mo.F2||i.key===mo.BACKSPACE&&s)){return true}const o=i?.shiftKey&&t.rangeSvc?.getCellRanges().length!=0;if(o){return false}const r=e?.getColDef();const l=ix(t.gos,r);const a=i?.type;if(a==="click"&&i?.detail===1&&l===1){return true}if(a==="dblclick"&&i?.detail===2&&l===2){return true}if(n==="api"){return s??false}return false}function ix(t,e){if(t.get("suppressClickEdit")===true){return 0}if(t.get("singleClickEdit")===true){return 1}if(e?.singleClickEdit){return 1}return 2}function sx(t,{rowNode:e,column:i},s="ui"){const n=i.getColDef().editable;const o=t.editModelSvc;return i.isColumnFunc(e,n)||!!o&&o.hasEdits({rowNode:e,column:i},{withOpenEditor:true})}function nx(t,e,i="ui"){const s=sx(t,e,i);if(s===true||i==="ui"){return s}const n=t.colModel.getCols();return n.some((s=>sx(t,{rowNode:e.rowNode,column:s},i)))}var ox=(t,e=false)=>{if(t!==void 0){return Jv(t)||e&&t.state==="editing"}};function rx(t,e,i=false){return ox(t.editModelSvc?.getEdit(e),i)}var lx=(t,e,i)=>{if(!t){return}for(let s=0,n=t.length;s<n;++s){const n=t[s];if(n.data){const t=ox(e?.getEdit({rowNode:n,column:i}))||ox(e?.getEdit({rowNode:n.pinnedSibling,column:i}));if(t){return true}}if(lx(n.childrenAfterGroup,e,i)){return true}}};function ax(t,e){const{column:i,rowNode:s}=e;if(t.gos.get("groupTotalRow")&&!s?.footer){return false}return lx(s?.childrenAfterGroup,t.editModelSvc,i)}function hx(t,{rowNode:e,column:i}){e=e.pinnedSibling;if(!e){return}return ox(t.editModelSvc?.getEdit({rowNode:e,column:i}))}var cx=class extends re{constructor(t,e){super();this.cellCtrl=t;this.beans=e;this.editSvc=e.editSvc;this.editModelSvc=e.editModelSvc}setComp(t){this.cellComp=t;this.applyCellStyles()}applyCellStyles(){const{cellCtrl:t,editSvc:e,beans:i}=this;if(e?.isBatchEditing()&&e.isEditing()){const e=rx(i,t)||ax(i,t)||hx(i,t);this.applyBatchingStyle(e)}else{this.applyBatchingStyle(false)}const s=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",s)}applyBatchingStyle(t){this.cellComp.toggleCss("ag-cell-editing",t??false);this.cellComp.toggleCss("ag-cell-batch-edit",(t&&this.editSvc?.isBatchEditing())??false)}};var ux=class extends re{constructor(t,e){super();this.rowCtrl=t;this.beans=e;this.gos=e.gos;this.editSvc=e.editSvc;this.editModelSvc=e.editModelSvc}applyRowStyles(){const{rowCtrl:t,editModelSvc:e,beans:i}=this;let s=t.rowNode;let n=e?.getEditRow(s);const o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:s});if(!n&&s.pinnedSibling){s=s.pinnedSibling;n=e?.getEditRow(s)}if(n){const t=Array.from(n.keys()).some((t=>{const e={rowNode:s,column:t};return rx(i,e,true)||ax(i,e)||hx(i,e)}));this.applyStyle(o,t);return}this.applyStyle(o)}applyStyle(t=false,e=false){const i=this.editSvc?.isBatchEditing()??false;const s=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,(({rowComp:n})=>{n.toggleCss("ag-row-editing",s&&e);n.toggleCss("ag-row-batch-edit",s&&e&&i);n.toggleCss("ag-row-inline-editing",e);n.toggleCss("ag-row-not-inline-editing",!e);n.toggleCss("ag-row-editing-invalid",s&&e&&t)}))}};var dx=({rowModel:t,pinnedRowModel:e,editModelSvc:i},s)=>{const n=new Set;t.forEachNode((t=>s.has(t)&&n.add(t)));e?.forEachPinnedRow("top",(t=>s.has(t)&&n.add(t)));e?.forEachPinnedRow("bottom",(t=>s.has(t)&&n.add(t)));for(const t of s){if(!n.has(t)){i.removeEdits({rowNode:t})}}return n};var fx=({editModelSvc:t},e,i)=>{for(const s of e){t?.getEditRow(s)?.forEach(((e,n)=>!i.has(n)&&t.removeEdits({rowNode:s,column:n})))}};var gx=t=>()=>{const e=new Set(t.colModel.getCols());const i=t.editModelSvc.getEditMap(true);const s=new Set(i.keys());fx(t,dx(t,s),e)};var px=new Set(["undo","redo","paste","bulk","rangeSvc"]);var mx=new Set(["ui","api"]);var vx={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"};var wx=new Set(Object.keys(vx));var Cx=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]);var bx={cancel:true,source:"api"};var yx={cancel:false,source:"api"};var Sx={checkSiblings:true};var xx={force:true,suppressFlash:true};var Rx=class extends re{constructor(){super(...arguments);this.beanName="editSvc";this.batch=false;this.stopping=false;this.committing=false}postConstruct(){const{beans:t}=this;this.model=t.editModelSvc;this.valueSvc=t.valueSvc;this.rangeSvc=t.rangeSvc;this.addManagedPropertyListener("editType",(({currentValue:t})=>{this.stopEditing(void 0,bx);this.createStrategy(t)}));const e=gx(t);const i=()=>{const e=this.model.getCellValidationModel().getCellValidationMap().size>0;const i=this.model.getRowValidationModel().getRowValidationMap().size>0;if(e||i){this.stopEditing(void 0,bx)}else if(this.isEditing()){if(this.isBatchEditing()){aw(t,this.model.getEditPositions())}else{this.stopEditing(void 0,yx)}}return false};this.addManagedEventListeners({columnPinned:e,columnVisible:e,columnRowGroupChanged:e,rowExpansionStateChanged:e,pinnedRowsChanged:e,displayedRowsChanged:e,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(t){if(t){this.batch=true;this.stopEditing(void 0,bx)}else{this.stopEditing(void 0,bx);this.batch=false}}createStrategy(t){const{beans:e,gos:i,strategy:s}=this;const n=kx(i,t);if(s){if(s.beanName===n){return s}this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(e.registry.createDynamicBean(n,true))}destroyStrategy(){if(!this.strategy){return}this.strategy.destroy();this.strategy=this.destroyBean(this.strategy)}shouldStartEditing(t,e,i,s="ui"){const n=ex(this.beans,t,e,i,s);if(n){this.strategy??(this.strategy=this.createStrategy())}return n}shouldStopEditing(t,e,i="ui"){return this.strategy?.shouldStop(t,e,i)??null}shouldCancelEditing(t,e,i="ui"){return this.strategy?.shouldCancel(t,e,i)??null}validateEdit(){return pw(this.beans)}isEditing(t,e){return this.model.hasEdits(t,e??Sx)}isRowEditing(t,e){return(t&&this.model.hasRowEdits(t,e))??false}startEditing(t,e){const{startedEdit:i=true,event:s=null,source:n="ui",ignoreEventKey:o=false,silent:r}=e;this.strategy??(this.strategy=this.createStrategy());if(!this.isCellEditable(t,"api")){return}const l=Uv(this.beans,t);if(l&&!l.comp){l.onCompAttachedFuncs.push((()=>this.startEditing(t,e)));return}const a=this.shouldStartEditing(t,s,i,n);if(a===false&&n!=="api"){this.isEditing(t)&&this.stopEditing();return}if(!this.batch&&this.shouldStopEditing(t,void 0,n)&&!e.continueEditing){this.stopEditing(void 0,{source:n})}if(a&&this.isBatchEditing()){this.dispatchBatchEvent("batchEditingStarted",new Map)}this.strategy.start({position:t,event:s,source:n,ignoreEventKey:o,startedEdit:i,silent:r})}stopEditing(t,e){const{event:i,cancel:s,source:n="ui",forceCancel:o,forceStop:r}=e||{};const{beans:l,model:a}=this;if(wx.has(n)){if(this.isBatchEditing()){this.bulkRefresh(t);return false}}const h=this.committing?vx[n]:n;const c=this.committing||this.isEditing(t)||this.isBatchEditing()&&a.hasEdits(t,Sx);if(!c||!this.strategy||this.stopping){return false}this.stopping=true;const u=Uv(l,t);if(u){u.onEditorAttachedFuncs=[]}let d=a.getEditMap(true);let f=false;const g=!s&&(!!this.shouldStopEditing(t,i,h)||this.committing&&!this.batch)||(r??false);const p=s&&!!this.shouldCancelEditing(t,i,h)||(o??false);if(g||p){ow(l,{persist:true,isCancelling:p||s,isStopping:g});const t=a.getEditMap();const e=this.processEdits(t,s,n);this.strategy?.stop(s,i);for(const t of e){a.clearEditValue(t)}this.bulkRefresh(void 0,d);for(const e of a.getEditPositions(t)){const t=Uv(l,e);const i=Jv(e);t?.refreshCell({force:true,suppressFlash:!i})}d=t;f||(f=g)}else if(i instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(t)&&this.isEditing(t,{withOpenEditor:true})){const{key:e}=i;const s=e===mo.ENTER;const n=e===mo.ESCAPE;const o=e===mo.TAB;if(s||o||n){if(s||o){ow(l,{persist:true})}else if(n){this.revertSingleCellEdit(u)}if(this.isBatchEditing()){this.strategy?.cleanupEditors()}else{aw(l,a.getEditPositions(),{event:i,cancel:n})}i.preventDefault();this.bulkRefresh(t,d,{suppressFlash:true});d=a.getEditMap()}}else{ow(l,{persist:true});d=a.getEditMap()}if(f&&t){this.model.removeEdits(t)}this.navigateAfterEdit(e,u?.cellPosition);iw(l);if(!this.model.hasEdits()){this.model.getCellValidationModel().clearCellValidationMap();this.model.getRowValidationModel().clearRowValidationMap()}this.bulkRefresh();if(p){this.beans.rowRenderer.refreshRows({rowNodes:Array.from(d.keys())})}if(this.isBatchEditing()){this.beans.rowRenderer.refreshRows({suppressFlash:true,force:true});if(f&&g){this.dispatchBatchEvent("batchEditingStopped",d)}}this.stopping=false;return f}navigateAfterEdit(t,e){if(!t||!e){return}const{event:i,suppressNavigateAfterEdit:s}=t;const n=i instanceof KeyboardEvent;if(!n||s){return}const{key:o,shiftKey:r}=i;const l=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==mo.ENTER||!l){return}const a=r?mo.UP:mo.DOWN;this.beans.navigation?.navigateToNextCell(null,a,e,false)}processEdits(t,e=false,i){const s=Array.from(t.keys());const n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0;const o=[];for(const r of s){const s=t.get(r);for(const t of s.keys()){const l=s.get(t);const a={rowNode:r,column:t};const h=Jv(l);if(!e&&h&&!n){const e=this.setNodeDataValue(r,t,l.pendingValue,void 0,i);if(!e){o.push(a)}}}}return o}setNodeDataValue(t,e,i,s,n="edit"){const{beans:o}=this;const r=Uv(o,{rowNode:t,column:e});const l=mx.has(n)?"edit":n;if(r){r.suppressRefreshCell=true}this.commitNextEdit();const a=t.setDataValue(e,i,l);if(r){r.suppressRefreshCell=false}if(s){r?.refreshCell(xx)}return a}setEditMap(t,e){this.strategy??(this.strategy=this.createStrategy());this.strategy?.setEditMap(t,e);this.bulkRefresh();let i=xx;if(e?.forceRefreshOfEditCellsOnly){i={...Fx(t),...xx}}this.beans.rowRenderer.refreshCells(i)}dispatchEditValuesChanged({rowNode:t,column:e},i={}){if(!t||!e||!i){return}const{pendingValue:s,sourceValue:n}=i;const{rowIndex:o,rowPinned:r,data:l}=t;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:t,rowIndex:o,rowPinned:r,column:e,source:"api",data:l,newValue:s,oldValue:n,value:s,colDef:e.getColDef()})}bulkRefresh(t={},e,i={}){const{beans:s,gos:n}=this;const{editModelSvc:o}=s;if(pi(n)){if(t.rowNode&&t.column){this.refCell(t,this.model.getEdit(t),i)}else if(e){o?.getEditMap(false)?.forEach(((t,e)=>{for(const s of t.keys()){this.refCell({rowNode:e,column:s},t.get(s),i)}}))}}}refCell({rowNode:t,column:e},i,s={}){const{beans:n,gos:o}=this;const r=new Set([t]);const l=new Set;const a=t.pinnedSibling;if(a){r.add(a)}const h=t.sibling;if(h){l.add(h)}let c=t.parent;while(c){if(c.sibling?.footer&&o.get("groupTotalRow")){l.add(c.sibling)}else if(!c.parent&&c.sibling&&o.get("grandTotalRow")){l.add(c.sibling)}else{l.add(c)}c=c.parent}for(const t of r){this.dispatchEditValuesChanged({rowNode:t,column:e},i)}for(const t of r){Uv(n,{rowNode:t,column:e})?.refreshCell(s)}for(const t of l){Uv(n,{rowNode:t,column:e})?.refreshCell(s)}}stopAllEditing(t=false,e="ui"){if(this.isEditing()){this.stopEditing(void 0,{cancel:t,source:e})}}isCellEditable(t,e="ui"){const{rowNode:i}=t;const{gos:s,beans:n}=this;if(i.group){if(s.get("treeData")){if(!i.data&&!s.get("enableGroupEdit")){return false}}else if(!s.get("enableGroupEdit")){return false}}const o=kx(s)==="fullRow"?nx(n,t,e):sx(n,t,e);if(o){this.strategy??(this.strategy=this.createStrategy())}return o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(t,e,i=true){if(this.hasValidationErrors(t)){const s=Uv(this.beans,t);if(this.cellEditingInvalidCommitBlocks()){e?.preventDefault?.();if(i){!s?.hasBrowserFocus()&&s?.focusCell();s?.comp?.getCellEditor()?.focusIn?.()}return"block-stop"}s&&this.revertSingleCellEdit(s);return"revert-continue"}return"continue"}revertSingleCellEdit(t,e=false){const i=Uv(this.beans,t);if(!i?.comp?.getCellEditor()){return}aw(this.beans,[t],{silent:true});this.model.clearEditValue(t);Xv(this.beans,t,{silent:true});fw(this.beans);i?.refreshCell(xx);if(!e){return}i?.focusCell();i?.comp?.getCellEditor()?.focusIn?.()}hasValidationErrors(t){fw(this.beans);const e=Uv(this.beans,t);if(e){e.refreshCell(xx);e.rowCtrl.rowEditStyleFeature?.applyRowStyles()}let i=false;if(t?.rowNode){i||(i=this.model.getRowValidationModel().hasRowValidation({rowNode:t.rowNode}));if(t.column){i||(i=this.model.getCellValidationModel().hasCellValidation({rowNode:t.rowNode,column:t.column}))}}else{i||(i=this.model.getCellValidationModel().getCellValidationMap().size>0);i||(i=this.model.getRowValidationModel().getRowValidationMap().size>0)}return i}moveToNextCell(t,e,i,s="ui"){let n;const o=this.isEditing();const r=o&&this.checkNavWithValidation(void 0,i)==="block-stop";if(t instanceof Tw&&o){n=this.strategy?.moveToNextEditingCell(t,e,i,s,r)}if(n===null){return n}n=n||!!this.beans.focusSvc.focusedHeader;if(n===false&&!r){this.stopEditing()}return n}getCellDataValue({rowNode:t,column:e},i=true){if(!t||!e){return void 0}let s=this.model.getEdit({rowNode:t,column:e});const n=t.pinnedSibling;if(n){const t=this.model.getEdit({rowNode:n,column:e});if(t){s=t}}const o=i?s?.editorValue??s?.pendingValue:s?.pendingValue;return o===_v||!s?s?.sourceValue??this.valueSvc.getValue(e,t,false,"api"):o}addStopEditingWhenGridLosesFocus(t){Kv(this,this.beans,t)}createPopupEditorWrapper(t){return new tx(t)}commitNextEdit(){this.committing=true}setDataValue(t,e,i){try{if((!this.isEditing()||this.committing)&&!Cx.has(i)){return}const{beans:s}=this;this.strategy??(this.strategy=this.createStrategy());const n=this.isBatchEditing()?"ui":this.committing?i??"api":"api";if(!i||px.has(i)){rw(s,t,e,i,void 0,{persist:true});return this.setNodeDataValue(t.rowNode,t.column,e,true,i)}const o=this.model.getEdit(t);if(o){if(o.pendingValue===e){return false}if(o.sourceValue!==e){rw(s,t,e,i,void 0,{persist:true});this.stopEditing(t,{source:n,suppressNavigateAfterEdit:true});return true}if(o.sourceValue===e){s.editModelSvc?.removeEdits(t);this.dispatchEditValuesChanged(t,{...o,pendingValue:e});return true}}rw(s,t,e,i,void 0,{persist:true});this.stopEditing(t,{source:n,suppressNavigateAfterEdit:true});return true}finally{this.committing=false}}handleColDefChanged(t){sw(this.beans,t)}destroy(){this.model.clear();this.destroyStrategy();super.destroy()}prepDetailsDuringBatch(t,e){if(!this.batch){return}const i=this.model.hasRowEdits(t.rowNode,Sx);if(!i){return}const{rowNode:s,column:n}=t;const{compDetails:o,valueToDisplay:r}=e;if(o){const{params:t}=o;t.data=this.model.getEditRowDataValue(s,Sx);return{compDetails:o}}const l=this.model.getEditRow(t.rowNode,Sx);if(r!==void 0&&l?.has(n)){return{valueToDisplay:this.valueSvc.getValue(n,s)}}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(t,e,i,s){this.strategy?.dispatchCellEvent(t,e,i,s)}dispatchBatchEvent(t,e){this.eventSvc.dispatchEvent(this.createBatchEditEvent(t,e))}createBatchEditEvent(t,e){return os(this.gos,{type:t,...t==="batchEditingStopped"?{changes:this.toEventChangeList(e)}:{}})}toEventChangeList(t){return this.model.getEditPositions(t).map((t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue})))}applyBulkEdit({rowNode:t,column:e},i){if(!i||i.length===0){return}const{beans:s,rangeSvc:n,valueSvc:o}=this;ow(s,{persist:true});const r=this.model.getEditMap(true);const l=r.get(t)?.get(e)?.pendingValue;if(!this.batch){this.eventSvc.dispatchEvent({type:"bulkEditingStarted"})}i.forEach((t=>{n?.forEachRowInRange(t,(e=>{const i=hf(s,e);if(i===void 0){return}const n=r.get(i)??new Map;for(const e of t.columns){if(!e){continue}if(this.isCellEditable({rowNode:i,column:e},"api")){const t=o.getValue(e,i,true,"api");let s=o.parseValue(e,i??null,l,t);if(Number.isNaN(s)){s=null}n.set(e,{editorValue:void 0,pendingValue:s,sourceValue:t,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}}if(n.size>0){r.set(i,n)}}));this.setEditMap(r);if(this.batch){this.cleanupEditors();iw(s);this.bulkRefresh();return}this.commitNextEdit();this.stopEditing(void 0,{source:"bulk"});this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}));this.bulkRefresh();const a=Uv(s,{rowNode:t,column:e});if(a){a.focusCell(true)}}createCellStyleFeature(t,e){return new cx(t,e)}createRowStyleFeature(t,e){return new ux(t,e)}setEditingCells(t,e){const{beans:i}=this;const{colModel:s,valueSvc:n}=i;const o=new Map;for(let{colId:r,column:l,colKey:a,rowIndex:h,rowPinned:c,newValue:u,state:d}of t){const t=r?s.getCol(r):a?s.getCol(a):l;if(!t){continue}const f=hf(i,{rowIndex:h,rowPinned:c});if(!f){continue}const g=n.getValue(t,f,true,"api");if(!e?.forceRefreshOfEditCellsOnly&&!Jv({pendingValue:u,sourceValue:g})&&d!=="editing"){continue}let p=o.get(f);if(!p){p=new Map;o.set(f,p)}if(u===void 0){u=_v}p.set(t,{editorValue:void 0,pendingValue:u,sourceValue:g,state:d??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,e)}onCellFocused(t){const e=Uv(this.beans,t);if(!e||!this.isEditing(e,Sx)){return}const i=this.model.getEdit(e);if(!i||!Jv(i)){return}const s=this.getLocaleTextFunc();const n=s("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(n,"pendingChange")}allowedFocusTargetOnValidation(t){return Uv(this.beans,t)}};function Fx(t){return{rowNodes:t?Array.from(t.keys()):void 0,columns:t?[...new Set(Array.from(t.values()).flatMap((t=>Array.from(t.keys()))))]:void 0}}function kx(t,e){return e??t.get("editType")??"singleCell"}var Px=class extends re{postConstruct(){this.model=this.beans.editModelSvc;this.editSvc=this.beans.editSvc;this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(t){this.model.clearEditValue(t)}onCellFocusChanged(t){let e;const i=t["previousParams"];const{editSvc:s,beans:n}=this;const o=t.type==="cellFocused"?t.sourceEvent:null;if(i){e=Uv(n,i)}const{gos:r,editModelSvc:l}=n;const a=t.type==="cellFocusCleared";if(s.isEditing(void 0,{withOpenEditor:true})){const{column:e,rowIndex:h,rowPinned:c}=t;const u={column:e,rowNode:hf(n,{rowIndex:h,rowPinned:c})};const d=r.get("invalidEditValueMode")==="block";if(d){return}const f=!d;const g=!!l?.getCellValidationModel().hasCellValidation(u);const p=f&&g;const m=i||a?s.stopEditing(void 0,{cancel:p,source:a&&f?"api":void 0,event:o}):true;if(!m){if(s.isBatchEditing()){s.cleanupEditors()}else{s.stopEditing(void 0,{source:"api"})}}}e?.refreshCell({suppressFlash:true,force:true})}stop(t,e){const i=this.model.getEditPositions();const s={all:[],pass:[],fail:[]};for(const t of i){s.all.push(t);const e=this.model.getCellValidationModel().getCellValidation(t);if((e?.errorMessages?.length??0)>0){s.fail.push(t);continue}s.pass.push(t)}if(t){for(const e of i){hw(this.beans,e,{cancel:t});this.model.stop(e)}}else{const i=this.processValidationResults(s);if(i.destroy.length>0){for(const s of i.destroy){hw(this.beans,s,{event:e,cancel:t});this.model.stop(s)}}if(i.keep.length>0){for(const t of i.keep){const e=Uv(this.beans,t);if(!this.editSvc?.cellEditingInvalidCommitBlocks()){e&&this.editSvc.revertSingleCellEdit(e)}}}}return true}cleanupEditors({rowNode:t}={},e){ow(this.beans,{persist:false});const i=this.model.getEditPositions();const s=[];if(t){for(const e of i){if(e.rowNode!==t){s.push(e)}}}else{for(const t of i){s.push(t)}}aw(this.beans,s);iw(this.beans,e)}setFocusOutOnEditor(t){t.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(t){const e=t.comp;const i=e?.getCellEditor();if(i?.focusIn){i.focusIn()}else{const i=this.beans.gos.get("editType")==="fullRow";t.focusCell(i);t.onEditorAttachedFuncs.push((()=>e?.getCellEditor()?.focusIn?.()))}}setupEditors(t){const{event:e,ignoreEventKey:i=false,startedEdit:s,position:n,cells:o=this.model.getEditPositions()}=t;const r=e instanceof KeyboardEvent&&!i&&e.key||void 0;Qv(this.beans,o,n,r,e,s)}dispatchCellEvent(t,e,i,s){const n=Uv(this.beans,t);if(n){this.eventSvc.dispatchEvent({...n.createEvent(e??null,i),...s})}}dispatchRowEvent(t,e,i){if(i){return}const s=Wv(this.beans,t);if(s){this.eventSvc.dispatchEvent(s.createRowEvent(e))}}shouldStop(t,e,i="ui"){const s=this.editSvc.isBatchEditing();if(s&&i==="api"){return true}if(s&&(i==="ui"||i==="edit")){return false}if(i==="api"){return true}if(e instanceof KeyboardEvent&&!s){return e.key===mo.ENTER}return null}shouldCancel(t,e,i="ui"){const s=this.editSvc.isBatchEditing();if(e instanceof KeyboardEvent&&!s){const t=e.key===mo.ESCAPE;if(t){return true}}if(s&&i==="api"){return true}if(i==="api"){return true}return false}setEditMap(t,e){if(!e?.update){this.editSvc.stopEditing(void 0,{cancel:true,source:"api"})}const i=[];t.forEach(((t,e)=>{t.forEach(((t,s)=>{if(t.state==="editing"){i.push({...t,rowNode:e,column:s})}}))}));if(e?.update){t=new Map([...this.model.getEditMap(),...t])}this.model?.setEditMap(t);if(i.length>0){const t=i.at(-1);const e=t.pendingValue===_v?void 0:t.pendingValue;this.start({position:t,event:new KeyboardEvent("keydown",{key:e}),source:"api"});const s=Uv(this.beans,t);if(s){this.setFocusInOnEditor(s)}}}destroy(){this.cleanupEditors();super.destroy()}};var Dx=class extends Px{constructor(){super(...arguments);this.beanName="fullRow";this.startedRows=[]}shouldStop(t,e,i="ui"){const{rowNode:s}=t||{};const n=Wv(this.beans,{rowNode:this.rowNode});if(!n){return true}const o=super.shouldStop({rowNode:this.rowNode},e,i);if(o!==null){return o}if(!this.rowNode){return false}return s!==this.rowNode}midBatchInputsAllowed({rowNode:t}){if(!t){return false}return this.model.hasEdits({rowNode:t})}clearEdits(t){this.model.clearEditValue(t)}start(t){const{position:e,silent:i,startedEdit:s,event:n,ignoreEventKey:o}=t;const{rowNode:r}=e;if(this.rowNode!==r){super.cleanupEditors(e)}const l=this.beans.visibleCols.allCols;const a=[];const h=[];for(const t of l){if(t.isCellEditable(r)){h.push(t)}}if(h.length==0){return}this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i);this.startedRows.push(r);for(const t of h){const e={rowNode:r,column:t};a.push(e);if(!this.model.hasEdits(e)){this.model.start(e)}}this.rowNode=r;this.setupEditors({cells:a,position:e,startedEdit:s,event:n,ignoreEventKey:o})}processValidationResults(t){const e=t.fail.length>0;if(e&&this.editSvc.cellEditingInvalidCommitBlocks()){return{destroy:[],keep:t.all}}return{destroy:t.all,keep:[]}}stop(t,e){const{rowNode:i}=this;if(i&&!this.model.hasRowEdits(i)){return false}const s=[];if(!t){this.model.getEditMap().forEach(((t,e)=>{if(!t||t.size===0){return}for(const i of t.values()){if(Jv(i)){s.push(e);break}}}))}fw(this.beans);if(!t&&this.editSvc?.checkNavWithValidation({rowNode:i})==="block-stop"){return false}super.stop(t,e);for(const t of s){this.dispatchRowEvent({rowNode:t},"rowValueChanged")}this.cleanupEditors({rowNode:i},true);this.rowNode=void 0;return true}onCellFocusChanged(t){const{rowIndex:e}=t;const i=t["previousParams"];if(i?.rowIndex===e||t.sourceEvent instanceof KeyboardEvent){return}const s=Uv(this.beans,i);const n=this.gos.get("invalidEditValueMode")==="block";if(n&&s&&(this.model.getCellValidationModel().getCellValidation(s)||this.model.getRowValidationModel().getRowValidation(s))){return}super.onCellFocusChanged(t)}cleanupEditors(t={},e){super.cleanupEditors(t,e);for(const t of this.startedRows){this.dispatchRowEvent({rowNode:t},"rowEditingStopped")}this.startedRows.length=0}moveToNextEditingCell(t,e,i,s="ui",n=false){const o=t.cellPosition;let r;this.model.suspend(true);try{r=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:e,startEditing:true,skipToNextEditableCell:false})}finally{this.model.suspend(false)}if(r===false){return null}if(r==null){return false}const l=r.cellPosition;const a=t.isCellEditable();const h=r.isCellEditable();const c=l&&o.rowIndex===l.rowIndex&&o.rowPinned===l.rowPinned;if(a){this.setFocusOutOnEditor(t)}this.restoreEditors();const u=this.gos.get("suppressStartEditOnTab");if(h&&!n){if(u){r.focusCell(true,i)}else{if(!r.comp?.getCellEditor()){Xv(this.beans,r,{event:i,cellStartedEdit:true})}this.setFocusInOnEditor(r);r.focusCell(false,i)}}else{if(h&&n){this.setFocusInOnEditor(r)}r.focusCell(true,i)}if(!c&&!n){this.editSvc?.stopEditing({rowNode:t.rowNode},{event:i});this.cleanupEditors(r,true);if(u){r.focusCell(true,i)}else{this.editSvc.startEditing(r,{startedEdit:true,event:i,source:s,ignoreEventKey:true})}}t.rowCtrl?.refreshRow({suppressFlash:true,force:true});return true}restoreEditors(){this.model.getEditMap().forEach(((t,e)=>t.forEach((({state:t},i)=>{if(t!=="editing"){return}const s=Uv(this.beans,{rowNode:e,column:i});if(s&&!s.comp?.getCellEditor()){Xv(this.beans,s,{silent:true})}}))))}destroy(){super.destroy();this.rowNode=void 0;this.startedRows.length=0}};var Mx=class extends Px{constructor(){super(...arguments);this.beanName="singleCell"}shouldStop(t,e,i="ui"){const s=super.shouldStop(t,e,i);if(s!==null){return s}const{rowNode:n,column:o}=t||{};if((!this.rowNode||!this.column)&&n&&o){return null}return this.rowNode!==n||this.column!==o}midBatchInputsAllowed(t){return this.model.hasEdits(t)}start(t){const{position:e,startedEdit:i,event:s,ignoreEventKey:n}=t;if(this.rowNode!==e.rowNode||this.column!==e.column){super.cleanupEditors()}this.rowNode=e.rowNode;this.column=e.column;this.model.start(e);this.setupEditors({cells:[e],position:e,startedEdit:i,event:s,ignoreEventKey:n})}dispatchRowEvent(t,e,i){}processValidationResults(t){const e=t.fail.length>0;if(e&&this.editSvc.cellEditingInvalidCommitBlocks()){return{destroy:[],keep:t.all}}return{destroy:t.all,keep:[]}}stop(t,e){super.stop(t,e);this.rowNode=void 0;this.column=void 0;return true}onCellFocusChanged(t){const{colModel:e,editSvc:i}=this.beans;const{rowIndex:s,column:n,rowPinned:o}=t;const r=hf(this.beans,{rowIndex:s,rowPinned:o});const l=qv(n);const a=e.getCol(l);const h=t["previousParams"];if(h){const t=qv(h.column);if(h?.rowIndex===s&&t===l&&h?.rowPinned===o){return}}if(i?.isEditing({rowNode:r,column:a},{withOpenEditor:true})&&t.type==="cellFocused"){return}super.onCellFocusChanged(t)}moveToNextEditingCell(t,e,i,s="ui",n=false){const o=this.beans.focusSvc.getFocusedCell();if(o){t=cf(this.beans,o)??t}const r=t.cellPosition;let l;const a=this.beans.gos.get("editType")==="fullRow";if(a){this.model.suspend(true)}if(!n){t.eGui.focus();this.editSvc?.stopEditing(t,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:i})}try{l=this.beans.navigation?.findNextCellToFocusOn(r,{backwards:e,startEditing:true})}finally{if(a){this.model.suspend(false)}}if(l===false){return null}if(l==null){return false}const h=l.cellPosition;const c=t.isCellEditable();const u=l.isCellEditable();const d=h&&r.rowIndex===h.rowIndex&&r.rowPinned===h.rowPinned;if(c&&!n){this.setFocusOutOnEditor(t)}const f=this.gos.get("suppressStartEditOnTab");if(!d&&!n){super.cleanupEditors(l,true);if(f){l.focusCell(true,i)}else{this.editSvc.startEditing(l,{startedEdit:true,event:i,source:s,ignoreEventKey:true})}}if(u&&!n){l.focusCell(false,i);if(f){l.focusCell(true,i)}else if(!l.comp?.getCellEditor()){const t=this.editSvc?.isEditing(l,{withOpenEditor:true});Xv(this.beans,l,{event:i,cellStartedEdit:true,silent:t});this.setFocusInOnEditor(l);this.cleanupEditors(l)}}else{if(u&&n){this.setFocusInOnEditor(l)}l.focusCell(true,i)}t.rowCtrl?.refreshRow({suppressFlash:true,force:true});return true}destroy(){super.destroy();this.rowNode=void 0;this.column=void 0}};var Tx={moduleName:"EditCore",version:Ke,beans:[Lv,Rx],apiFunctions:{getEditingCells:KS,getEditRowValues:jS,getCellEditorInstances:Yv,startEditingCell:ZS,stopEditing:qS,isEditing:_S,validateEdit:YS},dynamicBeans:{singleCell:Mx,fullRow:Dx},dependsOn:[Tb,dS],css:[wS]};var Ex={moduleName:"UndoRedoEdit",version:Ke,beans:[vS],apiFunctions:{undoCellEditing:WS,redoCellEditing:US,getCurrentUndoSize:QS,getCurrentRedoSize:JS},dependsOn:[Tx]};var Ax={moduleName:"TextEditor",version:Ke,userComponents:{agCellEditor:BS,agTextCellEditor:BS},dependsOn:[Tx]};var Ix={moduleName:"NumberEditor",version:Ke,userComponents:{agNumberCellEditor:{classImp:AS}},dependsOn:[Tx]};var Hx={moduleName:"DateEditor",version:Ke,userComponents:{agDateCellEditor:RS,agDateStringCellEditor:PS},dependsOn:[Tx]};var Ox={moduleName:"CheckboxEditor",version:Ke,userComponents:{agCheckboxCellEditor:bS},dependsOn:[Tx]};var Nx={moduleName:"SelectEditor",version:Ke,userComponents:{agSelectCellEditor:HS},dependsOn:[Tx]};var Bx={moduleName:"LargeTextEditor",version:Ke,userComponents:{agLargeTextCellEditor:MS},dependsOn:[Tx]};var Gx={moduleName:"CustomEditor",version:Ke,dependsOn:[Tx]};var Vx=class extends re{constructor(){super(...arguments);this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",(t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,Os(t.source))}));this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(t){const e=this.columns;if(e==null){return}t.list=e.list.concat(t.list);t.tree=e.tree.concat(t.tree);Hs(t)}createColumns(t,e){const i=()=>{Ps(this.beans,this.columns?.tree);this.columns=null};const s=t.treeDepth;const n=this.columns?.treeDepth??-1;const o=n==s;const r=this.generateSelectionCols();const l=Is(r,this.columns?.list??[]);if(l&&o){return}i();const{colGroupSvc:a}=this.beans;const h=a?.findDepth(t.tree)??0;const c=a?.balanceTreeForAutoCols(r,h)??[];this.columns={list:r,tree:c,treeDepth:h,map:{}};const u=t=>{if(!t){return null}const e=t.filter((t=>!Ms(t)));return[...r,...e]};e(u)}updateColumns(t){const e=Os(t.source);for(const i of this.columns?.list??[]){const s=this.createSelectionColDef(t.currentValue);i.setColDef(s,null,e);on(this.beans,{state:[{...s,colId:i.getColId()}]},e)}}getColumn(t){return this.columns?.list.find((e=>Ns(e,t)))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:t,beans:e}=this;const i=t.get("rowSelection");if(typeof i!=="object"||!wi(t)){return false}const s=(e.autoColSvc?.getColumns()?.length??0)>0;if(i.checkboxLocation==="autoGroupColumn"&&s){return false}const n=!!Bi(i);const o=Gi(i);return n||o}createSelectionColDef(t){const{gos:e}=this;const i=t??e.get("selectionColumnDef");const s=e.get("enableRtl");const{rowSpan:n,spanRows:o,...r}=i??{};return{width:50,resizable:false,suppressHeaderMenuButton:true,sortable:false,suppressMovable:true,lockPosition:s?"right":"left",comparator(t,e,i,s){const n=i.isSelected();const o=s.isSelected();return n===o?0:n?1:-1},editable:false,suppressFillHandle:true,pinned:null,...r,colId:xs,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled()){return[]}const t=this.createSelectionColDef();const e=t.colId;this.gos.validateColDef(t,e,true);const i=new us(t,null,e,false);this.createBean(i);return[i]}onSelectionOptionsChanged(t,e,i){const s=e&&typeof e!=="string"?Bi(e):void 0;const n=t&&typeof t!=="string"?Bi(t):void 0;const o=s!==n;const r=e&&typeof e!=="string"?Gi(e):void 0;const l=t&&typeof t!=="string"?Gi(t):void 0;const a=r!==l;const h=Vi(t);const c=Vi(e);const u=h!==c;if(o||a||u){this.beans.colModel.refreshAll(i)}}destroy(){Ps(this.beans,this.columns?.tree);super.destroy()}refreshVisibility(t,e,i){if(!this.columns?.list.length){return}const s=t.length+e.length+i.length;if(s===0){return}const n=this.columns.list[0];if(!n.isVisible()){return}const o=()=>{let s;switch(n.pinned){case"left":case true:s=t;break;case"right":s=i;break;default:s=e}s&&bs(s,n)};const r=this.beans.rowNumbersSvc?.getColumn(Rs);const l=r?2:1;if(l===s){o()}}};function Lx(t,e){const i=e.nodes.every((t=>{if(t.rowPinned&&!Wu(t)){hi(59);return false}if(t.id===void 0){hi(60);return false}return true}));if(!i){return}const{nodes:s,source:n,newValue:o}=e;t.selectionSvc?.setNodesSelected({nodes:s,source:n??"api",newValue:o})}function zx(t,e,i="apiSelectAll"){t.selectionSvc?.selectAllRowNodes({source:i,selectAll:e})}function $x(t,e,i="apiSelectAll"){t.selectionSvc?.deselectAllRowNodes({source:i,selectAll:e})}function Wx(t,e="apiSelectAllFiltered"){t.selectionSvc?.selectAllRowNodes({source:e,selectAll:"filtered"})}function Ux(t,e="apiSelectAllFiltered"){t.selectionSvc?.deselectAllRowNodes({source:e,selectAll:"filtered"})}function jx(t,e="apiSelectAllCurrentPage"){t.selectionSvc?.selectAllRowNodes({source:e,selectAll:"currentPage"})}function Kx(t,e="apiSelectAllCurrentPage"){t.selectionSvc?.deselectAllRowNodes({source:e,selectAll:"currentPage"})}function qx(t){return t.selectionSvc?.getSelectedNodes()??[]}function _x(t){return t.selectionSvc?.getSelectedRows()??[]}var Zx=class extends Yu{constructor(){super(...arguments);this.beanName="selectionSvc";this.selectedNodes=new Map;this.detailSelection=new Map;this.masterSelectsDetail=false}postConstruct(){super.postConstruct();const{gos:t}=this;this.mode=qi(t);this.groupSelectsDescendants=Xi(t);this.groupSelectsFiltered=Yi(t)==="filteredDescendants";this.masterSelectsDetail=ts(t)==="detail";this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],(()=>{const e=Xi(t);const i=qi(t);const s=Yi(t)==="filteredDescendants";this.masterSelectsDetail=ts(t)==="detail";if(e!==this.groupSelectsDescendants||s!==this.groupSelectsFiltered||i!==this.mode){this.deselectAllRowNodes({source:"api"});this.groupSelectsDescendants=e;this.groupSelectsFiltered=s;this.mode=i}}));this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy();this.resetNodes()}handleSelectionEvent(t,e,i){if(this.isRowSelectionBlocked(e)){return 0}const s=this.inferNodeSelections(e,t.shiftKey,t.metaKey||t.ctrlKey,i);if(s==null){return 0}this.selectionCtx.selectAll=false;if("select"in s){if(s.reset){this.resetNodes()}else{this.selectRange(s.deselect,false,i)}return this.selectRange(s.select,true,i)}else{const e=s.checkFilteredNodes?tR(s.node):s.newValue;return this.setNodesSelected({nodes:[s.node],newValue:e,clearSelection:s.clearSelection,keepDescendants:s.keepDescendants,event:t,source:i})}}setNodesSelected({newValue:t,clearSelection:e,suppressFinishActions:i,nodes:s,event:n,source:o,keepDescendants:r=false}){if(s.length===0){return 0}const{gos:l}=this;if(!wi(l)&&t){hi(132);return 0}if(s.length>1&&!this.isMultiSelect()){hi(130);return 0}let a=0;for(let e=0;e<s.length;e++){const i=s[e];const r=Yx(i);if(r.rowPinned&&!Wu(r)){hi(59);continue}if(r.id===void 0){hi(60);continue}const h=this.groupSelectsFiltered&&r.group&&!l.get("treeData");if(!h){const e=this.selectRowNode(r,t,n,o);if(e){this.detailSelection.delete(r.id);a++}}if(this.groupSelectsDescendants&&r.childrenAfterGroup?.length){a+=this.selectChildren(r,t,o)}}if(!i){if(s.length===1&&o==="api"){this.selectionCtx.setRoot(Yx(s[0]))}const i=t&&(e||!this.isMultiSelect());if(i){a+=this.clearOtherNodes(Yx(s[0]),r,o)}if(a>0){this.updateGroupsFromChildrenSelections(o);this.dispatchSelectionChanged(o)}}return a}selectRange(t,e,i){let s=0;t.forEach((t=>{const n=Yx(t);if(n.group&&this.groupSelectsDescendants){return}const o=this.selectRowNode(n,e,void 0,i);if(o){s++}}));if(s>0){this.updateGroupsFromChildrenSelections(i);this.dispatchSelectionChanged(i)}return s}selectChildren(t,e,i){const s=this.groupSelectsFiltered?t.childrenAfterAggFilter:t.childrenAfterGroup;if(!s){return 0}return this.setNodesSelected({newValue:e,clearSelection:false,suppressFinishActions:true,source:i,nodes:s})}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const t=[];this.selectedNodes.forEach((e=>e.data&&t.push(e.data)));return t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){const e=new Map;this.selectedNodes.forEach(((i,s)=>{if(t(i)){e.set(s,i)}}));this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsDescendants){return false}const{gos:i,rowModel:s}=this.beans;if(!pi(i)){return false}const n=s.rootNode;if(!n){return false}if(!e){e=new mf(true,n);e.active=false}let o=false;e.forEachChangedNodeDepthFirst((e=>{if(e!==n){const i=this.calculateSelectedFromChildren(e);o=this.selectRowNode(e,i===null?false:i,void 0,t)||o}}));return o}clearOtherNodes(t,e,i){const s=new Map;let n=0;this.selectedNodes.forEach((o=>{const r=o.id==t.id;const l=e?!Xx(t,o):true;if(l&&!r){const t=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[t],newValue:false,clearSelection:false,suppressFinishActions:true,source:i});if(this.groupSelectsDescendants&&o.parent){s.set(o.parent.id,o.parent)}}}));s.forEach((t=>{const e=this.calculateSelectedFromChildren(t);this.selectRowNode(t,e===null?false:e,void 0,i)}));return n}onRowSelected(t){const e=t.node;if(this.groupSelectsDescendants&&e.group){return}if(e.isSelected()){this.selectedNodes.set(e.id,e)}else{this.selectedNodes.delete(e.id)}}syncInRowNode(t,e){this.syncInOldRowNode(t,e);this.syncInNewRowNode(t)}createDaemonNode(t){if(!t.id){return void 0}const e=new ma(this.beans);e.id=t.id;e.data=t.data;e.__selected=t.__selected;e.level=t.level;return e}syncInOldRowNode(t,e){if(e&&t.id!==e.id){const i=this.selectedNodes.get(e.id)==t;if(i){this.selectedNodes.set(e.id,e)}}}syncInNewRowNode(t){if(this.selectedNodes.has(t.id)){t.__selected=true;this.selectedNodes.set(t.id,t)}else{t.__selected=false}}reset(t){const e=this.getSelectionCount();this.resetNodes();if(e){this.dispatchSelectionChanged(t)}}resetNodes(){this.selectedNodes.forEach((t=>{this.selectRowNode(t,false)}));this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:t,rowModel:e}=this.beans;if(!pi(t)){return}const i=e.getTopLevelNodes();if(i===null){return}const s=[];function n(t){for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.isSelected()){s.push(i)}else if(i.group&&i.childrenAfterGroup){n(i.childrenAfterGroup)}}}n(i);return s}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:t,selectAll:e}){const i=pi(this.gos);let s=false;const n=e=>{const i=this.selectRowNode(Yx(e),false,void 0,t);s||(s=i)};if(e==="currentPage"||e==="filtered"){if(!i){ci(102);return}this.getNodesToSelect(e).forEach(n)}else{this.selectedNodes.forEach(n);this.reset(t)}this.selectionCtx.selectAll=false;if(i&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(t);s||(s=e)}if(s){this.dispatchSelectionChanged(t)}}getSelectedCounts(t){let e=0;let i=0;this.getNodesToSelect(t).forEach((t=>{if(this.groupSelectsDescendants&&t.group){return}if(t.isSelected()){e++}else if(t.selectable){i++}}));return{selectedCount:e,notSelectedCount:i}}getSelectAllState(t){const{selectedCount:e,notSelectedCount:i}=this.getSelectedCounts(t);return Jx(e,i)??null}hasNodesToSelect(t){return this.getNodesToSelect(t).filter((t=>t.selectable)).length>0}getNodesToSelect(t){if(!this.canSelectAll()){return[]}const e=[];const i=t=>e.push(t);if(t==="currentPage"){this.forEachNodeOnPage((t=>{if(!t.group){i(t);return}if(!t.expanded&&!t.footer){const e=t=>{i(t);t.childrenAfterFilter?.forEach(e)};e(t);return}if(!this.groupSelectsDescendants){i(t)}}));return e}const s=this.beans.rowModel;if(t==="filtered"){s.forEachNodeAfterFilter(i);return e}s.forEachNode(i);return e}forEachNodeOnPage(t){const{pageBounds:e,rowModel:i}=this.beans;const s=e.getFirstRow();const n=e.getLastRow();for(let e=s;e<=n;e++){const s=i.getRow(e);if(s){t(s)}}}selectAllRowNodes(t){const{gos:e,selectionCtx:i}=this;if(!wi(e)){hi(132);return}if(zi(e)&&!_i(e)){hi(130);return}if(!this.canSelectAll()){return}const{source:s,selectAll:n}=t;let o=false;this.getNodesToSelect(n).forEach((t=>{const e=this.selectRowNode(Yx(t),true,void 0,s);o||(o=e)}));i.selectAll=true;if(pi(e)&&this.groupSelectsDescendants){const t=this.updateGroupsFromChildrenSelections(s);o||(o=t)}if(o){this.dispatchSelectionChanged(s)}}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(t,e,i){if(!t){t=[]}if(!Array.isArray(t)){ci(103);return}const s=new Set(t);const n=[];this.beans.rowModel.forEachNode((t=>{if(s.has(t.id)){n.push(t)}}));if(i){this.resetNodes()}this.setNodesSelected({newValue:true,nodes:n,source:e})}canSelectAll(){return pi(this.beans.gos)}updateSelectable(t){const{gos:e,rowModel:i}=this.beans;if(!wi(e)){return}const s="selectableChanged";const n=t!==void 0;const o=pi(e)&&this.groupSelectsDescendants;const r=[];const l=t=>{if(n&&!t.group){return}if(o&&t.group){const e=t.childrenAfterGroup?.some((t=>t.selectable))??false;this.setRowSelectable(t,e,true);return}const e=this.updateRowSelectable(t,true);if(!e&&t.isSelected()){r.push(t)}};if(o){if(t===void 0){const e=i.rootNode;t=e?new mf(false,e):void 0}t?.forEachChangedNodeDepthFirst(l,!n,!n)}else{i.forEachNode(l)}if(r.length){this.setNodesSelected({nodes:r,newValue:false,source:s})}if(!n&&o){this.updateGroupsFromChildrenSelections?.(s)}}updateSelectableAfterGrouping(t){this.updateSelectable(t);if(this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections?.("rowGroupChanged",t);if(e){this.dispatchSelectionChanged("rowGroupChanged")}}}refreshMasterNodeState(t,e){if(!this.masterSelectsDetail){return}const i=t.detailNode?.detailGridInfo?.api;if(!i){return}const s=Qx(i);const n=t.isSelected();if(n!==s){const i=this.selectRowNode(t,s,e,"masterDetail");if(i){this.dispatchSelectionChanged("masterDetail")}}if(!s){const e=this.detailSelection.get(t.id)??new Set;for(const t of i.getSelectedNodes()){e.add(t.id)}this.detailSelection.set(t.id,e)}}setDetailSelectionState(t,e,i){if(!this.masterSelectsDetail){return}if(!_i(e)){hi(269);return}switch(t.isSelected()){case true:{i.selectAll();break}case false:{i.deselectAll();break}case void 0:{const e=this.detailSelection.get(t.id);if(e){const t=[];for(const s of e){const e=i.getRowNode(s);if(e){t.push(e)}}i.setNodesSelected({nodes:t,newValue:true,source:"masterDetail"})}break}}}dispatchSelectionChanged(t){this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function Yx(t){return Wu(t)?t.pinnedSibling:t.footer?t.sibling:t}function Qx(t){let e=0;let i=0;t.forEachNode((t=>{if(t.isSelected()){e++}else if(t.selectable){i++}}));return Jx(e,i)}function Jx(t,e){if(t===0&&e===0){return false}if(t>0&&e>0){return}return t>0}function Xx(t,e){let i=e.parent;while(i){if(i===t){return true}i=i.parent}return false}function tR(t){const e=t.isSelected()===false;const i=t.childrenAfterFilter?.some(tR)??false;return e||i}var eR={moduleName:"SharedRowSelection",version:Ke,beans:[Vx],apiFunctions:{setNodesSelected:Lx,selectAll:zx,deselectAll:$x,selectAllFiltered:Wx,deselectAllFiltered:Ux,selectAllOnCurrentPage:jx,deselectAllOnCurrentPage:Kx,getSelectedNodes:qx,getSelectedRows:_x}};var iR={moduleName:"RowSelection",version:Ke,rowModels:["clientSide","infinite","viewport"],beans:[Zx],dependsOn:[eR]};function sR(t){t.expansionSvc?.expandAll(true)}function nR(t){t.expansionSvc?.expandAll(false)}function oR(t){t.rowModel?.onRowHeightChanged()}function rR(t){if(t.rowAutoHeight?.active){hi(3);return}t.rowModel?.resetRowHeights()}function lR(t,e,i){const s=JC(t);if(s){if(t.rowGroupColsSvc?.columns.length===0){if(e<0){ci(238);return}s.setRowCount(e,i);return}ci(28);return}QC(t)?.setRowCount(e,i)}function aR(t){if(mi(t.gos)){const e=t.rowModel;return e.getBlockStates()}return t.rowNodeBlockLoader?.getBlockState()??{}}function hR(t){return t.rowModel.isLastRowIndexKnown()}var cR={moduleName:"CsrmSsrmSharedApi",version:Ke,apiFunctions:{expandAll:sR,collapseAll:nR}};var uR={moduleName:"RowModelSharedApi",version:Ke,apiFunctions:{onRowHeightChanged:oR,resetRowHeights:rR}};var dR={moduleName:"SsrmInfiniteSharedApi",version:Ke,apiFunctions:{setRowCount:lR,getCacheBlockState:aR,isLastRowIndexKnown:hR}};var fR=class extends re{constructor(){super(...arguments);this.beanName="alignedGridsSvc";this.consuming=false}getAlignedGridApis(){let t=this.gos.get("alignedGrids")??[];const e=typeof t==="function";if(typeof t==="function"){t=t()}const i=t.map((t=>{if(!t){ci(18);if(!e){ci(20)}return}if(this.isGridApi(t)){return t}const i=t;if("current"in i){return i.current?.api}if(!i.api){ci(19)}return i.api})).filter((t=>!!t&&!t.isDestroyed()));return i}isGridApi(t){return!!t&&!!t.dispatchEvent}postConstruct(){const t=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:t,columnVisible:t,columnPinned:t,columnGroupOpened:t,columnResized:t,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(t){if(this.consuming){return}for(const e of this.getAlignedGridApis()){if(e.isDestroyed()){continue}e.dispatchEvent(t)}}onEvent(t){this.consuming=true;t();this.consuming=false}fireColumnEvent(t){this.fireEvent({type:"alignedGridColumn",event:t})}fireScrollEvent(t){if(t.direction!=="horizontal"){return}this.fireEvent({type:"alignedGridScroll",event:t})}onScrollEvent(t){this.onEvent((()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(t.left,true)}))}extractDataFromEvent(t,e){const i=[];if(t.columns){t.columns.forEach((t=>{i.push(e(t))}))}else if(t.column){i.push(e(t.column))}return i}getMasterColumns(t){return this.extractDataFromEvent(t,(t=>t))}getColumnIds(t){return this.extractDataFromEvent(t,(t=>t.getColId()))}onColumnEvent(t){this.onEvent((()=>{switch(t.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(t);break}case"columnGroupOpened":{this.processGroupOpenedEvent(t);break}case"columnPivotChanged":hi(21);break}}))}processGroupOpenedEvent(t){const{colGroupSvc:e}=this.beans;if(!e){return}for(const i of t.columnGroups){let t=null;if(i){t=e.getProvidedColGroup(i.getGroupId())}if(i&&!t){continue}e.setColumnGroupOpened(t,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(t){const e=t.column;let i=null;const s=this.beans;const{colResize:n,ctrlsSvc:o,colModel:r}=s;if(e){i=r.getColDefCol(e.getColId())}if(e&&!i){return}const l=this.getMasterColumns(t);switch(t.type){case"columnMoved":{const e=t.api.getColumnState();const i=e.map((t=>({colId:t.colId})));on(s,{state:i,applyOrder:true},"alignedGridChanged")}break;case"columnVisible":{const e=t.api.getColumnState();const i=e.map((t=>({colId:t.colId,hide:t.hide})));on(s,{state:i},"alignedGridChanged")}break;case"columnPinned":{const e=t.api.getColumnState();const i=e.map((t=>({colId:t.colId,pinned:t.pinned})));on(s,{state:i},"alignedGridChanged")}break;case"columnResized":{const e=t;const i={};for(const t of l){i[t.getId()]={key:t.getColId(),newWidth:t.getActualWidth()}}for(const t of e.flexColumns??[]){if(i[t.getId()]){delete i[t.getId()]}}n?.setColumnWidths(Object.values(i),false,e.finished,"alignedGridChanged");break}}const a=o.getGridBodyCtrl();const h=a.isVerticalScrollShowing();for(const t of this.getAlignedGridApis()){t.setGridOption("alwaysShowVerticalScroll",h)}}};var gR={moduleName:"AlignedGrids",version:Ke,beans:[fR],dependsOn:[xp]};var pR=class extends re{constructor(t){super();this.rootNode=t;this.nextId=0;this.allNodesMap={};vR(t)}getRowNode(t){return this.allNodesMap[t]}setNewRowData(t){const{selectionSvc:e,pinnedRowModel:i,groupStage:s}=this.beans;e?.reset("rowDataChanged");if(i?.isManual()){i.reset()}this.dispatchRowDataUpdateStarted(t);this.allNodesMap=Object.create(null);this.nextId=0;const n=vR(this.rootNode);const o=new Array(t.length);n._leafs=o;let r=0;const l=s?.getNestedDataGetter();const a=l?new Set:null;const h=(t,e)=>{const i=t.level+1;for(let s=0,n=e.length;s<n;++s){const n=e[s];if(!n){continue}const c=this.createRowNode(n,i);c.sourceRowIndex=r;o[r++]=c;if(a&&!a.has(n)){a.add(n);c.treeParent=t;const e=l(n);if(e){h(c,e)}}}};h(n,t);o.length=r}setImmutableRowData(t,e){const{rootNode:i,gos:s}=this;this.dispatchRowDataUpdateStarted(e);const n=Hi(s);const o=t.changedRowNodes;const{adds:r,updates:l}=o;const a=new Set;const h=[];const c=this.beans.groupStage?.getNestedDataGetter();let u=s.get("suppressMaintainUnsortedOrder")?void 0:false;let d=-1;let f=false;const g=(t,e)=>{if(!u&&u!==void 0){const e=t.sourceRowIndex;u=e<=d;d=e}if(t.data!==e){t.updateData(e);if(!r.has(t)){l.add(t)}if(!t.selectable&&t.isSelected()){h.push(t)}}};const p=(t,e,i)=>{for(let s=0,o=e.length;s<o;++s){const o=e[s];if(!o){continue}let l=this.getRowNode(n({data:o,level:i}));if(l){g(l,o);f||(f=!!c&&l.treeParent!==t)}else{l=this.createRowNode(o,i);r.add(l)}if(!c||a.has(l)){a.add(l);continue}a.add(l);l.treeParent=t;const h=c(o);if(h){p(l,h,i+1)}}};p(i,e,0);const m=this.deleteUnusedNodes(a,o,h)||u||r.size>0;if(m){const t=i._leafs??(i._leafs=[]);if(u===void 0){yR(t,a,o)}else if(bR(t,a)){o.reordered=true}}if(m||f||l.size){t.rowDataUpdated=true;this.deselect(h)}}deleteUnusedNodes(t,{removals:e},i){const s=this.rootNode._leafs;for(let n=0,o=s.length;n<o;n++){const o=s[n];if(!t.has(o)){e.add(o);if(o.isSelected()){i.push(o)}this.deleteNode(o)}}return e.size>0}updateRowData(t,e){this.dispatchRowDataUpdateStarted(t.add);if(this.beans.groupStage?.getNestedDataGetter()){hi(268);return{remove:[],update:[],add:[]}}const i=[];const s=Hi(this.gos);const n=this.executeRemove(s,t,e,i);const o=this.executeUpdate(s,t,e,i);const r=this.executeAdd(t,e);this.deselect(i);return{remove:n,update:o,add:r}}executeRemove(t,{remove:e},{adds:i,updates:s,removals:n},o){const r=this.rootNode._leafs;const l=r?.length;const a=e?.length;if(!a||!l){return[]}let h=0;let c=l;let u=0;let d;const f=new Array(a);for(let r=0;r<a;++r){const l=this.lookupNode(t,e[r]);if(!l){continue}const a=l.sourceRowIndex;if(a<c){c=a}if(a>u){u=a}if(l.isSelected()){o.push(l)}this.deleteNode(l);if(i.delete(l)){d??(d=new Set);d.add(l)}else{s.delete(l);n.add(l)}f[h++]=l}f.length=h;if(h){CR(r,c,u,n,d)}return f}executeUpdate(t,{update:e},{adds:i,updates:s},n){const o=e?.length;if(!o){return[]}const r=new Array(o);let l=0;for(let a=0;a<o;a++){const o=e[a];const h=this.lookupNode(t,o);if(h){h.updateData(o);if(!h.selectable&&h.isSelected()){n.push(h)}r[l++]=h;if(!i.has(h)){s.add(h)}}}r.length=l;return r}executeAdd(t,e){var i;const s=(i=this.rootNode)._leafs??(i._leafs=[]);const n=s.length;const o=t.add;const r=o?.length;if(!r){return[]}const l=n+r;let a=this.sanitizeAddIndex(s,t.addIndex);if(a<n){for(let t=n-1,e=l-1;t>=a;--t){const i=s[t];i.sourceRowIndex=e;s[e--]=i}e.reordered=true}s.length=l;const h=new Array(r);const c=e.adds;for(let t=0;t<r;t++){const e=this.createRowNode(o[t],0);c.add(e);e.sourceRowIndex=a;s[a]=e;h[t]=e;a++}return h}dispatchRowDataUpdateStarted(t){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:t?.length?t[0]:null})}deselect(t){const e="rowDataChanged";const i=this.beans.selectionSvc;if(t.length){i?.setNodesSelected({newValue:false,nodes:t,suppressFinishActions:true,source:e})}i?.updateGroupsFromChildrenSelections?.(e);if(t.length){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:i?.getSelectedNodes()??null,serverSideState:null})}}createRowNode(t,e){const i=new ma(this.beans);i.parent=this.rootNode;i.level=e;i.group=false;i.expanded=false;i.setDataAndId(t,String(this.nextId++));const s=i.id;const n=this.allNodesMap;if(n[s]){hi(2,{nodeId:s})}n[s]=i;return i}deleteNode(t){t.clearRowTopAndRowIndex();const e=t.id;const i=this.allNodesMap;if(i[e]===t){delete i[e]}const s=t.pinnedSibling;if(s){this.beans.pinnedRowModel?.pinRow(s,null)}}lookupNode(t,e){if(!t){return wR(this.rootNode._leafs,e)}const i=t({data:e,level:0});const s=this.allNodesMap[i];if(!s){ci(4,{id:i});return null}return s}sanitizeAddIndex(t,e){const i=t.length;if(typeof e!=="number"){return i}if(e<0||e>=i||Number.isNaN(e)){return i}e=Math.ceil(e);const s=this.gos;if(e>0&&s.get("treeData")&&s.get("getDataPath")){e=mR(t,e)}return e}};var mR=(t,e)=>{for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s?.rowIndex==e-1){return i+1}}return e};var vR=t=>{t.group=true;t.level=-1;t.id="ROOT_NODE_ID";if(t._leafs?.length!==0){t._leafs=[]}const e=[];const i=[];const s=[];const n=[];t.childrenAfterGroup=e;t.childrenAfterSort=i;t.childrenAfterAggFilter=s;t.childrenAfterFilter=n;const o=t.sibling;if(o){o.childrenAfterGroup=e;o.childrenAfterSort=i;o.childrenAfterAggFilter=s;o.childrenAfterFilter=n;o.childrenMapped=t.childrenMapped}t.updateHasChildren();return t};var wR=(t,e)=>{if(t){for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.data===e){return s}}}ci(5,{data:e});return null};var CR=(t,e,i,s,n)=>{e=Math.max(0,e);for(let o=e,r=t.length;o<r;++o){const r=t[o];if(o<=i&&(s.has(r)||n?.has(r))){continue}r.sourceRowIndex=e;t[e++]=r}t.length=e};var bR=(t,e)=>{const i=e.size;t.length=i;let s=0;let n=false;let o=false;for(const i of e){const e=i.sourceRowIndex;if(e===s){o||(o=n)}else{if(e>=0){o=true}else{n=true}i.sourceRowIndex=s;t[s]=i}++s}return o};var yR=(t,e,{removals:i,adds:s})=>{const n=t.length;t.length=e.size;let o=0;for(let e=0;e<n;++e){const s=t[e];if(!i.has(s)){if(o!==e){s.sourceRowIndex=o;t[o]=s}++o}}for(const e of s){if(e.sourceRowIndex<0){e.sourceRowIndex=o;t[o++]=e}}t.length=o};var SR=t=>{const e=t.childrenAfterSort;const i=t.sibling;if(i){i.childrenAfterSort=e}if(!e){return}for(let t=0,i=e.length-1;t<=i;t++){const s=e[t];const n=t===0;const o=t===i;if(s.firstChild!==n){s.firstChild=n;s.dispatchRowEvent("firstChildChanged")}if(s.lastChild!==o){s.lastChild=o;s.dispatchRowEvent("lastChildChanged")}if(s.childIndex!==t){s.childIndex=t;s.dispatchRowEvent("childIndexChanged")}}};var xR=class extends re{constructor(){super(...arguments);this.beanName="sortStage";this.step="sort";this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(t){const e=this.beans.sortSvc.getSortOptions();const i=e.length>0&&!!t.changedRowNodes&&this.gos.get("deltaSort");this.sort(e,i,t.changedRowNodes,t.changedPath)}sort(t,e,i,s){const{gos:n,colModel:o,rowGroupColsSvc:r,rowNodeSorter:l,rowRenderer:a,showRowGroupCols:h}=this.beans;const c=n.get("groupMaintainOrder");const u=o.getCols().some((t=>t.isRowGroupActive()));const d=r?.columns;const f=o.isPivotMode();const g=n.getCallback("postSortRows");let p=false;let m;const v=n=>{const o=f&&n.leafGroup;let r=c&&u&&!n.leafGroup;if(r){m??(m=this.shouldSortContainsGroupCols(t));r&&(r=!m)}let a=null;if(r){let t=false;if(d){const e=n.level+1;if(e<d.length){t=d[e].getSort()===null}}if(!t){a=kR(n)}}else if(!t.length||o);else if(e&&i){a=RR(l,n,i,s,t)}else{a=l.doFullSort(n.childrenAfterAggFilter,t)}a||(a=n.childrenAfterAggFilter?.slice(0)??[]);p||(p=n.childrenAfterSort?.[0]!==a[0]);n.childrenAfterSort=a;SR(n);if(g){const t={nodes:n.childrenAfterSort};g(t)}};s?.forEachChangedNodeDepthFirst(v);if(p&&n.get("groupHideOpenParents")){const t=h?.getShowRowGroupCols();if(t?.length){a.refreshCells({columns:t,force:true})}}}shouldSortContainsGroupCols(t){const e=t.length;if(!e){return false}if(Mi(this.gos)){for(let i=0;i<e;++i){const e=t[i].column;if(e.isPrimary()&&e.isRowGroupActive()){return true}}return false}for(let i=0;i<e;++i){if(t[i].column.getColDef().showRowGroup){return true}}return false}};var RR=(t,e,i,s,n)=>{const o=e.childrenAfterAggFilter;const r=e.childrenAfterSort;if(!r){return t.doFullSort(o,n)}const l=new Set;const a=[];const{updates:h,adds:c}=i;for(let t=0,e=o.length;t<e;++t){const e=o[t];if(h.has(e)||c.has(e)||s&&!s.canSkip(e)){a.push({currentPos:a.length,rowNode:e})}else{l.add(e)}}const u=r.filter((t=>l.has(t))).map(((t,e)=>({currentPos:e,rowNode:t})));a.sort(((e,i)=>t.compareRowNodes(n,e,i)));return FR(t,n,a,u)};var FR=(t,e,i,s)=>{let n=0;let o=0;const r=i.length;const l=s.length;const a=new Array(r+l);let h=0;while(n<r&&o<l){const r=i[n];const l=s[o];if(t.compareRowNodes(e,r,l)<0){a[h++]=r.rowNode;++n}else{a[h++]=l.rowNode;++o}}while(n<r){a[h++]=i[n++].rowNode}while(o<l){a[h++]=s[o++].rowNode}return a};var kR=t=>{const e=t.childrenAfterSort;const i=t.childrenAfterAggFilter;const s=e?.length;const n=i?.length;if(!s||!n){return null}const o=new Array(n);const r=new Set;for(let t=0;t<n;++t){r.add(i[t])}let l=0;for(let t=0;t<s;++t){const i=e[t];if(r.delete(i)){o[l++]=i}}if(r.size===0&&l===s){return e}for(const t of r){o[l++]=t}o.length=l;return o};var PR=class extends re{constructor(){super(...arguments);this.beanName="rowModel";this.rootNode=null;this.rowCountReady=false;this.nodeManager=void 0;this.rowsToDisplay=[];this.rowDataUpdatedPending=false;this.asyncTransactions=null;this.asyncTransactionsTimer=0;this.started=false;this.refreshingModel=false;this.rowNodesCountReady=false;this.stages=[];this.stagesRefreshProps=new Map;this.onRowHeightChanged_debounced=de(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const t=this.beans;const e=new ma(t);this.rootNode=e;this.nodeManager=this.createBean(new pR(e));const i=this.refreshModel.bind(this,{step:"group"});const s=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:true,keepRenderedRows:true,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:s,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:i,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)});this.addPropertyListeners()}addPropertyListeners(){const{beans:t,stagesRefreshProps:e}=this;const i=[t.groupStage,t.filterStage,t.pivotStage,t.aggStage,t.sortStage,t.filterAggStage,t.flattenStage].filter((t=>!!t));this.stages=i;for(let t=i.length-1;t>=0;--t){for(const s of i[t].refreshProps){e.set(s,t)}}this.addManagedPropertyListeners([...e.keys()],(t=>{const e=t.changeSet?.properties;if(e){this.onPropChange(e)}}));this.addManagedPropertyListener("rowData",(()=>this.onPropChange(["rowData"])));this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.started=true;if(this.rowNodesCountReady){this.refreshModel({step:"group",rowDataUpdated:true,newData:true})}else{this.setInitialData()}}setInitialData(){const t=this.gos.get("rowData");if(t){this.onPropChange(["rowData"])}}ensureRowHeightsValid(t,e,i,s){let n;let o=false;do{n=false;const r=this.getRowIndexAtPixel(t);const l=this.getRowIndexAtPixel(e);const a=Math.max(r,i);const h=Math.min(l,s);for(let t=a;t<=h;t++){const e=this.getRow(t);if(e.rowHeightEstimated){const t=yi(this.beans,e);e.setRowHeight(t.height);n=true;o=true}}if(n){this.setRowTopAndRowIndex()}}while(n);return o}onPropChange(t){const{nodeManager:e,gos:i,beans:s}=this;const n=s.groupStage;if(!e){return}const o=new Set(t);const r=n?.onPropChange(o);let l;if(o.has("rowData")){l=i.get("rowData")}else if(r){l=n?.extractData()}if(l&&!Array.isArray(l)){l=null;hi(1)}const a={step:"nothing",changedProps:o};if(l){const t=!r&&!this.isEmpty()&&l.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate");if(t){a.keepRenderedRows=true;a.animate=!i.get("suppressAnimationFrame");a.changedRowNodes=new ef;e.setImmutableRowData(a,l)}else{a.rowDataUpdated=true;a.newData=true;e.setNewRowData(l);this.rowNodesCountReady=true}}const h=a.rowDataUpdated?"group":this.getRefreshedStage(t);if(h){a.step=h;this.refreshModel(a)}}getRefreshedStage(t){const{stages:e,stagesRefreshProps:i}=this;const s=e.length;let n=s;for(let e=0,s=t.length;e<s&&n;++e){n=Math.min(n,i.get(t[e])??n)}return n<s?e[n].step:null}setRowTopAndRowIndex(t){const{beans:e,rowsToDisplay:i}=this;const s=e.environment.getDefaultRowHeight();let n=0;const o=vi(this.gos,"normal");for(let r=0,l=i.length;r<l;++r){const l=i[r];const a=l.id;if(a!=null){t?.add(a)}if(l.rowHeight==null){const t=yi(e,l,o,s);l.setRowHeight(t.height,t.estimated)}l.setRowTop(n);l.setRowIndex(r);n+=l.rowHeight}}clearRowTopAndRowIndex(t,e){const i=t.active;const s=t=>{if(t?.id!=null&&!e.has(t.id)){t.clearRowTopAndRowIndex()}};const n=t=>{s(t);s(t.detailNode);s(t.sibling);const e=t.childrenAfterGroup;if(!t.hasChildren()||!e){return}const o=t.level==-1;const r=i&&!o&&!t.expanded;if(r){return}for(let t=0,i=e.length;t<i;++t){n(e[t])}};const o=this.rootNode;if(o){n(o)}}isLastRowIndexKnown(){return true}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){const{rootNode:t,rowsToDisplay:e}=this;if(!t||!e.length){return 0}const i=e[0]===t;if(i){return 1}const s=t.sibling?.displayed?1:0;return(t.childrenAfterSort?.length??0)+s}getTopLevelRowDisplayedIndex(t){const{beans:e,rootNode:i,rowsToDisplay:s}=this;const n=!i||!s.length||s[0]===i;if(n){return t}const o=i.childrenAfterSort;const r=t=>{let e=o[t];if(this.gos.get("groupHideOpenParents")){while(e.expanded&&e.childrenAfterSort&&e.childrenAfterSort.length>0){e=e.childrenAfterSort[0]}}return e.rowIndex};const l=e.footerSvc;if(l){return l?.getTopDisplayIndex(s,t,o,r)}return r(t)}getTopLevelIndexFromDisplayedIndex(t){const{rootNode:e,rowsToDisplay:i}=this;const s=!e||!i.length||i[0]===e;if(s){return t}let n=this.getRow(t);if(n.footer){n=n.sibling}let o=n.parent;while(o&&o!==e){n=o;o=n.parent}const r=e.childrenAfterSort?.indexOf(n)??-1;return r>=0?r:t}getRowBounds(t){const e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:true,animate:Pi(this.gos)})}onFilterChanged({afterDataChange:t,columns:e}){if(!t){const t=e.length===0||e.some((t=>t.isPrimary()));const i=t?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:true,animate:Pi(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:true,animate:Pi(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(t){const e=new mf(false,this.rootNode);e.active=t;return e}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")){return false}const{changedRowNodes:e,newData:i,rowDataUpdated:s}=t;if(!e||i||!s){return false}if(e.removals.size||e.adds.size){return false}return true}refreshModel(t){const{nodeManager:e,beans:i,eventSvc:s,started:n,refreshingModel:o}=this;if(!e){return}const r=!!t.rowDataUpdated;const l=t.changedPath??(t.changedPath=this.createChangePath(!t.newData&&r));if(n&&r){s.dispatchEvent({type:"rowDataUpdated"})}if(!n||o||i.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(t)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}if(this.rowDataUpdatedPending){this.rowDataUpdatedPending=false;t.step="group"}this.refreshingModel=true;i.masterDetailSvc?.refreshModel(t);if(r&&t.step!=="group"){i.colFilter?.refreshModel()}switch(t.step){case"group":this.doGrouping(t);case"filter":this.doFilter(l);case"pivot":this.doPivot(l);case"aggregate":this.doAggregate(l);case"filter_aggregates":this.doFilterAggregates(l);case"sort":this.doSort(t.changedRowNodes,l);case"map":this.doRowsToDisplay()}const a=new Set;this.setRowTopAndRowIndex(a);this.clearRowTopAndRowIndex(l,a);this.refreshingModel=false;s.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:false,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let i=false;let s=false;const n=[];const o=Xi(this.gos);this.forEachNodeAfterFilterAndSort((r=>{if(s){return}if(i){if(r===e||r===t){s=true;if(o&&r.group){DR(n,r);return}}}if(!i){if(r!==e&&r!==t){return}i=true;if(e===t){s=true}}const l=!r.group||!o;if(l){n.push(r)}}));return n}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){const e=this.rowsToDisplay;const i=e.length;if(this.isEmpty()||i===0){return-1}let s=0;let n=i-1;if(t<=0){return 0}const o=e[n];if(o.rowTop<=t){return n}let r=-1;let l=-1;while(true){const i=Math.floor((s+n)/2);const o=e[i];if(this.isRowInPixel(o,t)){return i}if(o.rowTop<t){s=i+1}else if(o.rowTop>t){n=i-1}const a=r===s&&l===n;if(a){return i}r=s;l=n}}isRowInPixel(t,e){const i=t.rowTop;const s=i+t.rowHeight;return i<=e&&s>e}forEachLeafNode(t){const e=this.rootNode?._leafs;if(e){for(let i=0,s=e.length;i<s;++i){t(e[i],i)}}}forEachNode(t,e=false){this.depthFirstSearchRowNodes(t,e)}forEachDisplayedNode(t){const e=this.rowsToDisplay;for(let i=0,s=e.length;i<s;++i){t(e[i],i)}}forEachNodeAfterFilter(t,e=false){this.depthFirstSearchRowNodes(t,e,(t=>t.childrenAfterAggFilter))}forEachNodeAfterFilterAndSort(t,e=false){this.depthFirstSearchRowNodes(t,e,(t=>t.childrenAfterSort))}forEachPivotNode(t,e,i){const{colModel:s,rowGroupColsSvc:n}=this.beans;if(!s.isPivotMode()){return}if(!n?.columns.length){t(this.rootNode,0);return}const o=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(t,e,(t=>!t.leafGroup?t[o]:null))}depthFirstSearchRowNodes(t,e=false,i=t=>t.childrenAfterGroup,s=this.rootNode,n=0){let o=n;if(!s){return o}const r=s===this.rootNode;if(!r){t(s,o++)}if(s.hasChildren()&&!s.footer){const n=i(s);if(n){const l=this.beans.footerSvc;o=l?.addTotalRows(o,s,t,e,r,"top")??o;for(const s of n){o=this.depthFirstSearchRowNodes(t,e,i,s,o)}return l?.addTotalRows(o,s,t,e,r,"bottom")??o}}return o}doAggregate(t){const e=this.rootNode;if(e){this.beans.aggStage?.execute({rowNode:e,changedPath:t})}}doFilterAggregates(t){const e=this.rootNode;const i=this.beans.filterAggStage;if(i){i.execute({rowNode:e,changedPath:t});return}e.childrenAfterAggFilter=e.childrenAfterFilter}doSort(t,e){const i=this.beans.sortStage;if(i){i.execute({rowNode:this.rootNode,changedRowNodes:t,changedPath:e});return}e.forEachChangedNodeDepthFirst((t=>{t.childrenAfterSort=t.childrenAfterAggFilter.slice(0);SR(t)}))}doGrouping(t){const e=this.rootNode;const i=this.beans.groupStage;const s=i?.execute({rowNode:e,changedRowNodes:t.changedRowNodes,changedPath:t.changedPath,afterColumnsChanged:!!t.afterColumnsChanged});if(s===void 0){const t=e._leafs;e.childrenAfterGroup=t;e.updateHasChildren();const i=e.sibling;if(i){i.childrenAfterGroup=t}}if(s||t.rowDataUpdated){this.beans.colFilter?.refreshModel()}if(!this.rowCountReady&&this.rowNodesCountReady){this.rowCountReady=true;this.eventSvc.dispatchEventOnce({type:"rowCountReady"})}}doFilter(t){const e=this.beans.filterStage;if(e){e.execute({rowNode:this.rootNode,changedPath:t});return}t.forEachChangedNodeDepthFirst((t=>{t.childrenAfterFilter=t.childrenAfterGroup;xb(t)}),true)}doPivot(t){this.beans.pivotStage?.execute({rowNode:this.rootNode,changedPath:t})}getRowNode(t){const e=this.nodeManager?.getRowNode(t);if(typeof e==="object"){return e}const i=typeof t=="string"&&t.indexOf(da)===0;return i?this.beans.groupStage?.getNode(t):void 0}batchUpdateRowData(t,e){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const t=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout((()=>this.executeBatchUpdateRowData()),t)}this.asyncTransactions.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){const t=this.asyncTransactionsTimer;if(t){clearTimeout(t);this.executeBatchUpdateRowData()}}executeBatchUpdateRowData(){const{nodeManager:t,beans:e,eventSvc:i,asyncTransactions:s}=this;if(!t){return}e.valueCache?.onDataChanged();const n=[];const o=[];const r=new ef;for(const{rowDataTransaction:e,callback:i}of s??[]){this.rowNodesCountReady=true;const s=t.updateRowData(e,r);n.push(s);if(i){o.push(i.bind(null,s))}}this.commitTransactions(r);if(o.length>0){setTimeout((()=>{for(let t=0,e=o.length;t<e;t++){o[t]()}}),0)}if(n.length>0){i.dispatchEvent({type:"asyncTransactionsFlushed",results:n})}this.asyncTransactionsTimer=0;this.asyncTransactions=null}updateRowData(t){const e=this.nodeManager;if(!e){return null}this.beans.valueCache?.onDataChanged();this.rowNodesCountReady=true;const i=new ef;const s=e.updateRowData(t,i);this.commitTransactions(i);return s}commitTransactions(t){this.refreshModel({step:"group",rowDataUpdated:true,keepRenderedRows:true,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(true)})}doRowsToDisplay(){const{beans:t,rootNode:e}=this;const i=t.flattenStage;if(i){this.rowsToDisplay=i.execute({rowNode:e});return}const s=this.rootNode.childrenAfterSort??[];for(const t of s){t.setUiLevel(0)}this.rowsToDisplay=s}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:true,keepUndoRedoStack:true})}resetRowHeights(){const t=this.rootNode;if(!t){return}const e=this.resetRowHeightsForAllRowNodes();t.setRowHeight(t.rowHeight,true);const i=t.sibling;i?.setRowHeight(i.rowHeight,true);if(e){this.onRowHeightChanged()}}resetRowHeightsForAllRowNodes(){let t=false;this.forEachNode((e=>{e.setRowHeight(e.rowHeight,true);const i=e.detailNode;i?.setRowHeight(i.rowHeight,true);const s=e.sibling;s?.setRowHeight(s.rowHeight,true);t=true}));return t}onGridStylesChanges(t){if(t.rowHeightChanged&&!this.beans.rowAutoHeight?.active){this.resetRowHeights()}}onGridReady(){if(!this.started){this.setInitialData()}}destroy(){super.destroy();this.nodeManager=this.destroyBean(this.nodeManager);this.started=false;this.rootNode=null;this.rowsToDisplay=[];this.asyncTransactions=null;clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};var DR=(t,e)=>{const i=e.childrenAfterGroup;if(i){for(let e=0,s=i.length;e<s;++e){const s=i[e];if(s.data){t.push(s)}if(s.group){DR(t,s)}}}};function MR(t){t.expansionSvc?.onGroupExpandedOrCollapsed()}function TR(t,e){const i=YC(t);if(i){if(!e||e==="everything"){e="group"}i.refreshModel({step:e,keepRenderedRows:true,animate:!t.gos.get("suppressAnimationFrame")})}}function ER(t){return YC(t)?.isEmpty()??true}function AR(t,e){YC(t)?.forEachLeafNode(e)}function IR(t,e){YC(t)?.forEachNodeAfterFilter(e)}function HR(t,e){YC(t)?.forEachNodeAfterFilterAndSort(e)}function OR(t,e){return t.frameworkOverrides.wrapIncoming((()=>YC(t)?.updateRowData(e)))}function NR(t,e,i){t.frameworkOverrides.wrapIncoming((()=>YC(t)?.batchUpdateRowData(e,i)))}function BR(t){t.frameworkOverrides.wrapIncoming((()=>YC(t)?.flushAsyncTransactions()))}function GR(t){return t.selectionSvc?.getBestCostNodeSelection()}var VR={moduleName:"ClientSideRowModel",version:Ke,rowModels:["clientSide"],beans:[PR,xR],dependsOn:[gC]};var LR={moduleName:"ClientSideRowModelApi",version:Ke,apiFunctions:{onGroupExpandedOrCollapsed:MR,refreshClientSideRowModel:TR,isRowDataEmpty:ER,forEachLeafNode:AR,forEachNodeAfterFilter:IR,forEachNodeAfterFilterAndSort:HR,applyTransaction:OR,applyTransactionAsync:NR,flushAsyncTransactions:BR,getBestCostNodeSelection:GR,resetRowHeights:rR,onRowHeightChanged:oR},dependsOn:[cR,uR]};var zR=class extends re{constructor(){super(...arguments);this.beanName="gridSerializer"}wireBeans(t){this.visibleCols=t.visibleCols;this.colModel=t.colModel;this.rowModel=t.rowModel;this.pinnedRowModel=t.pinnedRowModel}serialize(t,e={}){const{allColumns:i,columnKeys:s,skipRowGroups:n,exportRowNumbers:o}=e;const r=this.getColumnsToExport({allColumns:i,skipRowGroups:n,columnKeys:s,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(e),this.exportColumnGroups(e,r),this.exportHeaders(e,r),this.processPinnedTopRows(e,r),this.processRows(e,r),this.processPinnedBottomRows(e,r),this.appendContent(e)].reduce(((t,e)=>e(t)),t).parse()}processRow(t,e,i,s){const n=e.shouldRowBeSkipped||(()=>false);const o=e.rowPositions!=null;const r=o||!!e.onlySelected;const l=this.gos.get("groupHideOpenParents")&&!r;const a=this.colModel.isPivotMode()?s.leafGroup:!s.group;const h=!!s.footer;const c=s.allChildrenCount===1&&s.childrenAfterGroup?.length===1&&Oi(this.gos,s);if(!a&&!h&&(e.skipRowGroups||c||l)||e.onlySelected&&!s.isSelected()||e.skipPinnedTop&&s.rowPinned==="top"||e.skipPinnedBottom&&s.rowPinned==="bottom"||s.stub){return}const u=s.level===-1;if(u&&!a&&!h){return}const d=n(os(this.gos,{node:s}));if(d){return}const f=t.onNewBodyRow(s);i.forEach(((t,e)=>{f.onColumn(t,e,s)}));if(e.getCustomContentBelowRow){const i=e.getCustomContentBelowRow(os(this.gos,{node:s}));if(i){t.addCustomContent(i)}}}appendContent(t){return e=>{const i=t.appendContent;if(i){e.addCustomContent(i)}return e}}prependContent(t){return e=>{const i=t.prependContent;if(i){e.addCustomContent(i)}return e}}prepareSession(t){return e=>{e.prepare(t);return e}}exportColumnGroups(t,e){return i=>{if(!t.skipColumnGroupHeaders){const s=new pn;const{colGroupSvc:n}=this.beans;const o=n?n.createColumnGroups({columns:e,idCreator:s,pinned:null,isStandaloneStructure:true}):e;this.recursivelyAddHeaderGroups(o,i,t.processGroupHeaderCallback)}return i}}exportHeaders(t,e){return i=>{if(!t.skipColumnHeaders){const t=i.onNewHeaderRow();e.forEach(((e,i)=>{t.onColumn(e,i,void 0)}))}return i}}processPinnedTopRows(t,e){return i=>{const s=this.processRow.bind(this,i,t,e);if(t.rowPositions){t.rowPositions.filter((t=>t.rowPinned==="top")).sort(((t,e)=>t.rowIndex-e.rowIndex)).map((t=>this.pinnedRowModel?.getPinnedTopRow(t.rowIndex))).forEach(s)}else if(!this.pinnedRowModel?.isManual()){this.pinnedRowModel?.forEachPinnedRow("top",s)}return i}}processRows(t,e){return i=>{const s=this.rowModel;const n=pi(this.gos);const o=mi(this.gos);const r=!n&&t.onlySelected;const l=this.processRow.bind(this,i,t,e);const{exportedRows:a="filteredAndSorted"}=t;if(t.rowPositions){t.rowPositions.filter((t=>t.rowPinned==null)).sort(((t,e)=>t.rowIndex-e.rowIndex)).map((t=>s.getRow(t.rowIndex))).forEach(l)}else if(this.colModel.isPivotMode()){if(n){s.forEachPivotNode(l,true,a==="filteredAndSorted")}else if(o){s.forEachNodeAfterFilterAndSort(l,true)}else{s.forEachNode(l)}}else if(t.onlySelectedAllPages||r){const t=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(t);t.forEach(l)}else if(a==="all"){s.forEachNode(l)}else if(n||o){s.forEachNodeAfterFilterAndSort(l,true)}else{s.forEachNode(l)}return i}}replicateSortedOrder(t){const{sortSvc:e,rowNodeSorter:i}=this.beans;if(!e||!i){return}const s=e.getSortOptions();const n=(t,e)=>{if(t.rowIndex!=null&&e.rowIndex!=null){return t.rowIndex-e.rowIndex}if(t.level===e.level){if(t.parent?.id===e.parent?.id){return i.compareRowNodes(s,{rowNode:t,currentPos:t.rowIndex??-1},{rowNode:e,currentPos:e.rowIndex??-1})}return n(t.parent,e.parent)}if(t.level>e.level){return n(t.parent,e)}return n(t,e.parent)};t.sort(n)}processPinnedBottomRows(t,e){return i=>{const s=this.processRow.bind(this,i,t,e);if(t.rowPositions){t.rowPositions.filter((t=>t.rowPinned==="bottom")).sort(((t,e)=>t.rowIndex-e.rowIndex)).map((t=>this.pinnedRowModel?.getPinnedBottomRow(t.rowIndex))).forEach(s)}else if(!this.pinnedRowModel?.isManual()){this.pinnedRowModel?.forEachPinnedRow("bottom",s)}return i}}getColumnsToExport(t){const{allColumns:e=false,skipRowGroups:i=false,exportRowNumbers:s=false,columnKeys:n}=t;const{colModel:o,gos:r,visibleCols:l}=this;const a=o.isPivotMode();const h=t=>{if(Ms(t)){return false}return!Ts(t)||s};if(n?.length){return o.getColsForKeys(n).filter(h)}const c=r.get("treeData");let u=[];if(e&&!a){u=o.getCols()}else{u=l.allCols}u=u.filter((t=>h(t)&&(i&&!c?!Ds(t):true)));return u}recursivelyAddHeaderGroups(t,e,i){const s=[];for(const e of t){const t=e;if(!t.getChildren){continue}for(const e of t.getChildren()??[]){s.push(e)}}if(t.length>0&&ca(t[0])){this.doAddHeaderHeader(e,t,i)}if(s&&s.length>0){this.recursivelyAddHeaderGroups(s,e,i)}}doAddHeaderHeader(t,e,i){const s=t.onNewHeaderGroupingRow();let n=0;for(const t of e){const e=t;let o;if(i){o=i(os(this.gos,{columnGroup:e}))}else{o=this.beans.colNames.getDisplayNameForColumnGroup(e,"header")}const r=e.isExpandable()?e.getLeafColumns():[];const l=r.reduce(((t,e,i,s)=>{let n=vs(t);const o=e.getColumnGroupShow()==="open";if(!o){if(n&&n[1]==null){n[1]=i-1}}else if(!n||n[1]!=null){n=[i];t.push(n)}if(i===s.length-1&&n&&n[1]==null){n[1]=i}return t}),[]);s.onColumn(e,o||"",n++,e.getLeafColumns().length-1,l)}}};var $R={moduleName:"SharedExport",version:Ke,beans:[zR]};var WR="\r\n";var UR=class extends rb{constructor(t){super(t);this.config=t;this.isFirstLine=true;this.result="";const{suppressQuotes:e,columnSeparator:i}=t;this.suppressQuotes=e;this.columnSeparator=i}addCustomContent(t){if(!t){return}if(typeof t==="string"){if(!/^\s*\n/.test(t)){this.beginNewLine()}t=t.replace(/\r?\n/g,WR);this.result+=t}else{t.forEach((t=>{this.beginNewLine();t.forEach(((t,e)=>{if(e!==0){this.result+=this.columnSeparator}this.result+=this.putInQuotes(t.data.value||"");if(t.mergeAcross){this.appendEmptyCells(t.mergeAcross)}}))}))}}onNewHeaderGroupingRow(){this.beginNewLine();return{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,i,s){if(i!=0){this.result+=this.columnSeparator}this.result+=this.putInQuotes(e);this.appendEmptyCells(s)}appendEmptyCells(t){for(let e=1;e<=t;e++){this.result+=this.columnSeparator+this.putInQuotes("")}}onNewHeaderRow(){this.beginNewLine();return{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){if(e!=0){this.result+=this.columnSeparator}this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){this.beginNewLine();return{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,i){if(e!=0){this.result+=this.columnSeparator}const s=this.extractRowCellValue(t,e,e,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(t){if(this.suppressQuotes){return t}if(t===null||t===void 0){return'""'}let e;if(typeof t==="string"){e=t}else if(typeof t.toString==="function"){e=t.toString()}else{hi(53);e=""}const i=e.replace(/"/g,'""');return'"'+i+'"'}parse(){return this.result}beginNewLine(){if(!this.isFirstLine){this.result+=WR}this.isFirstLine=false}};var jR=class extends ob{constructor(){super(...arguments);this.beanName="csvCreator"}wireBeans(t){this.colModel=t.colModel;this.colNames=t.colNames;this.rowGroupColsSvc=t.rowGroupColsSvc;this.valueSvc=t.valueSvc}getMergedParams(t){const e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){hi(51);return}const e=this.getMergedParams(t);const i=this.getData(e);const s=new Blob(["\ufeff",i],{type:"text/plain"});const n=typeof e.fileName==="function"?e.fileName(os(this.gos,{})):e.fileName;lb(this.getFileName(n),s)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=false){const i=e?Object.assign({},t):this.getMergedParams(t);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){const{colModel:e,colNames:i,rowGroupColsSvc:s,valueSvc:n,gos:o}=this;const{processCellCallback:r,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:h,suppressQuotes:c,columnSeparator:u}=t;return new UR({colModel:e,colNames:i,valueSvc:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:a||void 0,processRowGroupCallback:h||void 0,suppressQuotes:c||false,columnSeparator:u||",",rowGroupColsSvc:s})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function KR(t,e){return t.csvCreator?.getDataAsCsv(e)}function qR(t,e){t.csvCreator?.exportDataAsCsv(e)}var _R={moduleName:"CsvExport",version:Ke,beans:[jR],apiFunctions:{getDataAsCsv:KR,exportDataAsCsv:qR},dependsOn:[$R]};var ZR=class extends re{constructor(t,e,i){super();this.id=t;this.parentCache=e;this.params=i;this.state="needsLoading";this.version=0;this.startRow=t*i.blockSize;this.endRow=this.startRow+i.blockSize}load(){this.state="loading";this.loadFromDatasource()}setStateWaitingToLoad(){this.version++;this.state="needsLoading"}pageLoadFailed(t){const e=this.isRequestMostRecentAndLive(t);if(e){this.state="failed"}this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(t,e,i){this.successCommon(t,{rowData:e,rowCount:i})}isRequestMostRecentAndLive(t){const e=t===this.version;const i=this.isAlive();return e&&i}successCommon(t,e){this.dispatchLocalEvent({type:"loadComplete"});const i=this.isRequestMostRecentAndLive(t);if(i){this.state="loaded";this.processServerResult(e)}}postConstruct(){this.rowNodes=[];const{params:{blockSize:t,rowHeight:e},startRow:i,beans:s,rowNodes:n}=this;for(let o=0;o<t;o++){const t=i+o;const r=new ma(s);r.setRowHeight(e);r.uiLevel=0;r.setRowIndex(t);r.setRowTop(e*t);n.push(r)}}getBlockStateJson(){const{id:t,startRow:e,endRow:i,state:s}=this;return{id:""+t,state:{blockNumber:t,startRow:e,endRow:i,pageStatus:s}}}setDataAndId(t,e,s){if(i(e)){t.setDataAndId(e,s.toString())}else{t.setDataAndId(void 0,void 0)}}loadFromDatasource(){const t=this.createLoadParams();if(s(this.params.datasource.getRows)){hi(90);return}window.setTimeout((()=>{this.params.datasource.getRows(t)}),0)}createLoadParams(){const{startRow:t,endRow:e,version:i,params:{sortModel:s,filterModel:n},gos:o}=this;const r={startRow:t,endRow:e,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:s,filterModel:n,context:os(o,{}).context};return r}forEachNode(t,e,i){this.rowNodes.forEach(((s,n)=>{const o=this.startRow+n;if(o<i){t(s,e.value++)}}))}getRow(t,e=false){if(!e){this.lastAccessed=this.params.lastAccessedSequence.value++}const i=t-this.startRow;return this.rowNodes[i]}processServerResult(t){const{rowNodes:e,beans:i}=this;e.forEach(((s,n)=>{const o=t.rowData?t.rowData[n]:void 0;if(!s.id&&s.alreadyRendered&&o){e[n]=new ma(i);e[n].setRowIndex(s.rowIndex);e[n].setRowTop(s.rowTop);e[n].setRowHeight(s.rowHeight);s.clearRowTopAndRowIndex()}this.setDataAndId(e[n],o,this.startRow+n)}));const s=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,s)}destroy(){for(const t of this.rowNodes){t.clearRowTopAndRowIndex()}super.destroy()}};var YR=2;var QR=class extends re{constructor(t){super();this.params=t;this.lastRowIndexKnown=false;this.blocks={};this.blockCount=0;this.rowCount=t.initialRowCount}getRow(t,e=false){const i=Math.floor(t/this.params.blockSize);let s=this.blocks[i];if(!s){if(e){return void 0}s=this.createBlock(i)}return s.getRow(t)}createBlock(t){const e=this.params;const i=this.createBean(new ZR(t,this,e));this.blocks[i.id]=i;this.blockCount++;this.purgeBlocksIfNeeded(i);e.rowNodeBlockLoader.addBlock(i);return i}refreshCache(){const t=this.blockCount==0;if(t){this.purgeCache();return}for(const t of this.getBlocksInOrder()){t.setStateWaitingToLoad()}this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const t of this.getBlocksInOrder()){this.destroyBlock(t)}super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(t,e){if(!this.isAlive()){return}Fe(this.gos,`InfiniteCache - onPageLoaded: page = ${t.id}, lastRow = ${e}`);this.checkRowCount(t,e);this.onCacheUpdated()}purgeBlocksIfNeeded(t){const e=this.getBlocksInOrder().filter((e=>e!=t));const i=(t,e)=>e.lastAccessed-t.lastAccessed;e.sort(i);const s=this.params.maxBlocksInCache>0;const n=s?this.params.maxBlocksInCache-1:null;const o=YR-1;e.forEach(((t,e)=>{const i=t.state==="needsLoading"&&e>=o;const r=s?e>=n:false;if(i||r){if(this.isBlockCurrentlyDisplayed(t)){return}if(this.isBlockFocused(t)){return}this.removeBlockFromCache(t)}}))}isBlockFocused(t){const e=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!e){return false}if(e.rowPinned!=null){return false}const{startRow:i,endRow:s}=t;const n=e.rowIndex>=i&&e.rowIndex<s;return n}isBlockCurrentlyDisplayed(t){const{startRow:e,endRow:i}=t;return this.beans.rowRenderer.isRangeInRenderedViewport(e,i-1)}removeBlockFromCache(t){if(!t){return}this.destroyBlock(t)}checkRowCount(t,e){if(typeof e==="number"&&e>=0){this.rowCount=e;this.lastRowIndexKnown=true}else if(!this.lastRowIndexKnown){const{blockSize:e,overflowSize:i}=this.params;const s=(t.id+1)*e;const n=s+i;if(this.rowCount<n){this.rowCount=n}}}setRowCount(t,e){this.rowCount=t;if(i(e)){this.lastRowIndexKnown=e}if(!this.lastRowIndexKnown){if(this.rowCount%this.params.blockSize===0){this.rowCount++}}this.onCacheUpdated()}forEachNodeDeep(t){const e={value:0};for(const i of this.getBlocksInOrder()){i.forEachNode(t,e,this.rowCount)}}getBlocksInOrder(){const t=(t,e)=>t.id-e.id;const e=Object.values(this.blocks).sort(t);return e}destroyBlock(t){delete this.blocks[t.id];this.destroyBean(t);this.blockCount--;this.params.rowNodeBlockLoader.removeBlock(t)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();this.eventSvc.dispatchEvent({type:"storeUpdated"})}}destroyAllBlocksPastVirtualRowCount(){const t=[];for(const e of this.getBlocksInOrder()){const i=e.id*this.params.blockSize;if(i>=this.rowCount){t.push(e)}}if(t.length>0){for(const e of t){this.destroyBlock(e)}}}purgeCache(){for(const t of this.getBlocksInOrder()){this.removeBlockFromCache(t)}this.lastRowIndexKnown=false;if(this.rowCount===0){this.rowCount=this.params.initialRowCount}this.onCacheUpdated()}getRowNodesInRange(t,e){const i=[];let s=-1;let n=false;const o={value:0};let r=false;for(const l of this.getBlocksInOrder()){if(r){continue}if(n&&s+1!==l.id){r=true;continue}s=l.id;l.forEachNode((s=>{const o=s===t||s===e;if(n||o){i.push(s)}if(o){n=!n}}),o,this.rowCount)}const l=r||n;return l?[]:i}};var JR=class extends re{constructor(){super(...arguments);this.beanName="rowModel";this.rootNode=null}getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(){return false}postConstruct(){if(this.gos.get("rowModelType")!=="infinite"){return}const t=this.beans;const e=new ma(t);this.rootNode=e;e.level=-1;this.rowHeight=xi(t);this.addEventListeners();this.addDestroyFunc((()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource();super.destroy();this.rootNode=null}destroyDatasource(){if(this.datasource){this.destroyBean(this.datasource);this.beans.rowRenderer.datasourceChanged();this.datasource=null}}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)});this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource"))));this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache()));this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=xi(this.beans);this.cacheParams.rowHeight=this.rowHeight;this.updateRowHeights()}))}onColumnEverything(){let t;if(this.cacheParams){t=!o(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[])}else{t=true}if(t){this.reset()}}getType(){return"infinite"}setDatasource(t){this.destroyDatasource();this.datasource=t;if(t){this.reset()}}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?.getRowNodesInRange(t,e)??[]}reset(){if(!this.datasource){return}const t=Hi(this.gos);const e=t!=null;if(!e){this.beans.selectionSvc?.reset("rowDataChanged")}this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:false,newPageSize:false,newData:false,keepRenderedRows:true,animate:false})}resetCache(){this.destroyCache();const t=this.beans;const{filterManager:e,sortSvc:i,rowNodeBlockLoader:s,eventSvc:n,gos:o}=t;this.cacheParams={datasource:this.datasource,filterModel:e?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:s,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:xi(t),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}};this.infiniteCache=this.createBean(new QR(this.cacheParams));n.dispatchEventOnce({type:"rowCountReady"});this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((t=>{t.setRowHeight(this.rowHeight);t.setRowTop(this.rowHeight*t.rowIndex)}));this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(t){const e=this.infiniteCache;if(!e){return void 0}if(t>=e.getRowCount()){return void 0}return e.getRow(t)}getRowNode(t){let e;this.forEachNode((i=>{if(i.id===t){e=i}}));return e}forEachNode(t){this.infiniteCache?.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){const e=Math.floor(t/this.rowHeight);const i=this.getRowCount()-1;if(e>i){return i}return e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??false}setRowCount(t,e){this.infiniteCache?.setRowCount(t,e)}resetRowHeights(){}onRowHeightChanged(){}};function XR(t){QC(t)?.refreshCache()}function tF(t){QC(t)?.purgeCache()}function eF(t){return QC(t)?.getRowCount()}var iF=class extends re{constructor(){super(...arguments);this.beanName="rowNodeBlockLoader";this.activeBlockLoadsCount=0;this.blocks=[];this.active=true}postConstruct(){this.maxConcurrentRequests=Ni(this.gos);const t=this.gos.get("blockLoadDebounceMillis");if(t&&t>0){this.checkBlockToLoadDebounce=de(this,this.performCheckBlocksToLoad.bind(this),t)}}addBlock(t){this.blocks.push(t);t.addEventListener("loadComplete",this.loadComplete.bind(this));this.checkBlockToLoad()}removeBlock(t){bs(this.blocks,t)}destroy(){super.destroy();this.active=false}loadComplete(){this.activeBlockLoadsCount--;this.checkBlockToLoad()}checkBlockToLoad(){if(this.checkBlockToLoadDebounce){this.checkBlockToLoadDebounce()}else{this.performCheckBlocksToLoad()}}performCheckBlocksToLoad(){if(!this.active){return}this.printCacheStatus();if(this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){Fe(this.gos,`RowNodeBlockLoader - checkBlockToLoad: max loads exceeded`);return}const t=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1;const e=this.blocks.filter((t=>t.state==="needsLoading")).slice(0,t);this.activeBlockLoadsCount+=e.length;for(const t of e){t.load()}this.printCacheStatus()}getBlockState(){const t={};this.blocks.forEach((e=>{const{id:i,state:s}=e.getBlockStateJson();t[i]=s}));return t}printCacheStatus(){Fe(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}};var sF={moduleName:"InfiniteRowModelCore",version:Ke,rowModels:["infinite"],beans:[JR,iF]};var nF={moduleName:"InfiniteRowModel",version:Ke,apiFunctions:{refreshInfiniteCache:XR,purgeInfiniteCache:tF,getInfiniteRowCount:eF},dependsOn:[sF,dR]};var oF="";var rF="";var lF={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]};var aF=class extends Sn{constructor(){super(lF);this.eValue=vn;this.eDelta=vn;this.refreshCount=0}init(t){this.refresh(t,true)}showDelta(t,e){const s=Math.abs(e);const n=t.formatValue(s);const o=i(n)?n:s;const r=e>=0;const l=this.eDelta;if(r){l.textContent=oF+o}else{l.textContent=rF+o}l.classList.toggle("ag-value-change-delta-up",r);l.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;const t=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{if(t===this.refreshCount){this.hideDeltaValue()}}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight");dt(this.eDelta)}refresh(t,e=false){const{value:s,valueFormatted:n}=t;const{eValue:o,lastValue:r,beans:l}=this;if(s===r){return false}if(i(n)){o.textContent=n}else if(i(s)){o.textContent=s}else{dt(o)}if(l.filterManager?.isSuppressFlashingCellsBecauseFiltering()){return false}const a=s&&typeof s==="object"&&"toNumber"in s?s.toNumber():s;const h=r&&typeof r==="object"&&"toNumber"in r?r.toNumber():r;if(a===h){return false}if(typeof a==="number"&&typeof h==="number"){const e=a-h;this.showDelta(t,e)}if(r){o.classList.add("ag-value-change-value-highlight")}if(!e){this.setTimerToRemoveDelta()}this.lastValue=s;return true}};var hF=`.ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}`;var cF={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]};var uF=class extends Sn{constructor(){super(cF);this.eCurrent=vn;this.refreshCount=0;this.registerCSS(hF)}init(t){this.refresh(t,true)}addSlideAnimation(){this.refreshCount++;const t=this.refreshCount;this.ePrevious?.remove();const{beans:e,eCurrent:i}=this;const s=Ma({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=s;s.textContent=i.textContent;this.getGui().insertBefore(s,i);e.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{if(t!==this.refreshCount){return}this.ePrevious.classList.add("ag-value-slide-out-end")}),50);window.setTimeout((()=>{if(t!==this.refreshCount){return}this.ePrevious?.remove();this.ePrevious=null}),3e3)}))}refresh(t,e=false){let n=t.value;if(s(n)){n=""}if(n===this.lastValue){return false}if(this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering()){return false}if(!e){this.addSlideAnimation()}this.lastValue=n;const o=this.eCurrent;if(i(t.valueFormatted)){o.textContent=t.valueFormatted}else if(i(t.value)){o.textContent=n}else{dt(o)}return true}};var dF=class extends re{constructor(){super(...arguments);this.beanName="cellFlashSvc";this.nextAnimationTime=null;this.nextAnimationCycle=null;this.animations={highlight:new Map,"data-changed":new Map}}animateCell(t,e,i=this.beans.gos.get("cellFlashDuration"),s=this.beans.gos.get("cellFadeDuration")){const n=this.animations[e];n.delete(t);const o=Date.now();const r=o+i;const l=o+i+s;const a={phase:"flash",flashEndTime:r,fadeEndTime:l};n.set(t,a);const h=`ag-cell-${e}`;const c=`${h}-animation`;const{comp:u,eGui:{style:d}}=t;u.toggleCss(h,true);u.toggleCss(c,false);d.removeProperty("transition");d.removeProperty("transition-delay");if(this.nextAnimationTime&&r+15<this.nextAnimationTime){clearTimeout(this.nextAnimationCycle);this.nextAnimationCycle=null;this.nextAnimationTime=null}if(!this.nextAnimationCycle){this.beans.frameworkOverrides.wrapIncoming((()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}));this.nextAnimationTime=r}}advanceAnimations(){const t=Date.now();let e=null;for(const i of Object.keys(this.animations)){const s=this.animations[i];const n=`ag-cell-${i}`;const o=`${n}-animation`;for(const[i,r]of s){if(!i.isAlive()||!i.comp){s.delete(i);continue}const{phase:l,flashEndTime:a,fadeEndTime:h}=r;const c=l==="flash"?a:h;const u=t+15>=c;if(!u){e=Math.min(c,e??Infinity);continue}const{comp:d,eGui:{style:f}}=i;switch(l){case"flash":d.toggleCss(n,false);d.toggleCss(o,true);f.transition=`background-color ${h-a}ms`;f.transitionDelay=`${a-t}ms`;e=Math.min(h,e??Infinity);r.phase="fade";break;case"fade":d.toggleCss(n,false);d.toggleCss(o,false);f.removeProperty("transition");f.removeProperty("transition-delay");s.delete(i);break}}}if(e==null){this.nextAnimationTime=null;this.nextAnimationCycle=null}else if(e){this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),e-t);this.nextAnimationTime=e}}onFlashCells(t,e){if(!t.comp){return}const i=sf(t.cellPosition);const s=e.cells[i];if(s){this.animateCell(t,"highlight")}}flashCell(t,e){this.animateCell(t,"data-changed",e?.flashDuration,e?.fadeDuration)}destroy(){for(const t of Object.keys(this.animations)){const e=this.animations[t];e.clear()}}};function fF(t,e={}){const{cellFlashSvc:i}=t;if(!i){return}t.frameworkOverrides.wrapIncoming((()=>{for(const s of t.rowRenderer.getCellCtrls(e.rowNodes,e.columns)){i.flashCell(s,e)}}))}var gF={moduleName:"HighlightChanges",version:Ke,beans:[dF],userComponents:{agAnimateShowChangeCellRenderer:aF,agAnimateSlideCellRenderer:uF},apiFunctions:{flashCells:fF}};function pF(t){return t.stateSvc?.getState()??{}}function mF(t,e,i){return t.stateSvc?.setState(e,i)}function vF(t){t={...t};if(!t.version){t.version="32.1.0"}if(t.version==="32.1.0"){t=wF(t)}t.version=Ke;return t}function wF(t){t.cellSelection=CF(t,"rangeSelection");return t}function CF(t,e){if(t&&typeof t==="object"){return t[e]}}var bF=class extends re{constructor(){super(...arguments);this.beanName="stateSvc";this.updateRowGroupExpansionStateTimer=0;this.suppressEvents=true;this.queuedUpdateSources=new Set;this.dispatchStateUpdateEventDebounced=de(this,(()=>this.dispatchQueuedStateUpdateEvents()),0);this.onRowGroupOpenedDebounced=de(this,(()=>{if(this.beans.gos.get("ssrmExpandAllAffectsAllRows")){this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState());this.updateCachedState("rowGroupExpansion",void 0)}else{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.updateCachedState("ssrmRowGroupExpansion",void 0)}}),0);this.onRowSelectedDebounced=de(this,(()=>{this.staleStateKeys.delete("rowSelection");this.updateCachedState("rowSelection",this.getRowSelectionState())}),0);this.staleStateKeys=new Set}postConstruct(){const{gos:t,ctrlsSvc:e,colDelayRenderSvc:i}=this.beans;this.isClientSideRowModel=pi(t);const s=vF(t.get("initialState")??{});const n=s.partialColumnState;delete s.partialColumnState;this.cachedState=s;const o=this.suppressEventsAndDispatchInitEvent.bind(this);e.whenReady(this,(()=>o((()=>this.setupStateOnGridReady(s)))));if(s.columnOrder||s.columnVisibility||s.columnSizing||s.columnPinning||s.columnGroup){i?.hideColumns("columnState")}const[r,l,a]=this.addManagedEventListeners({newColumnsLoaded:({source:t})=>{if(t==="gridInitializing"){r();o((()=>{this.setupStateOnColumnsInitialised(s,!!n);i?.revealColumns("columnState")}))}},rowCountReady:()=>{l?.();o((()=>this.setupStateOnRowCountReady(s)))},firstDataRendered:()=>{a?.();o((()=>this.setupStateOnFirstDataRendered(s)))}})}destroy(){super.destroy();clearTimeout(this.updateRowGroupExpansionStateTimer);this.queuedUpdateSources.clear()}getState(){if(this.staleStateKeys.size){this.refreshStaleState()}return this.cachedState}setState(t,e){const i=vF(t);delete i.partialColumnState;this.cachedState=i;this.startSuppressEvents();const s="api";const n=e?new Set(e):void 0;this.setGridReadyState(i,s,n);this.setColumnsInitialisedState(i,s,!!n,n);this.setRowCountState(i,s,n);setTimeout((()=>{if(this.isAlive()){this.setFirstDataRenderedState(i,s,n)}this.stopSuppressEvents(s)}))}setGridReadyState(t,e,i){if(e==="api"&&!i?.has("sideBar")){this.beans.sideBar?.comp?.setState(t.sideBar)}this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(t){this.setGridReadyState(t,"gridInitializing");const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]);this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(t,e,i,s){this.setColumnState(t,e,i,s);this.setColumnGroupState(t,e,s);this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(t,e){this.setColumnsInitialisedState(t,"gridInitializing",e);const i=t=>()=>this.updateColumnState([t]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(t,e,i){const{filter:s,rowGroupExpansion:n,ssrmRowGroupExpansion:o,rowSelection:r,pagination:l}=t;const a=(t,s)=>!i?.has(t)&&(s||e==="api");if(a("filter",s)){this.setFilterState(s)}if(a("rowGroupExpansion",n)){this.setRowGroupExpansionState(o,n,e)}if(a("rowSelection",r)){this.setRowSelectionState(r,e)}if(a("pagination",l)){this.setPaginationState(l,e)}const h=this.updateCachedState.bind(this);h("filter",this.getFilterState());if(this.beans.gos.get("ssrmExpandAllAffectsAllRows")){h("ssrmRowGroupExpansion",this.getRowGroupExpansionState());h("rowGroupExpansion",void 0)}else{h("rowGroupExpansion",this.getRowGroupExpansionState());h("ssrmRowGroupExpansion",void 0)}h("rowSelection",this.getRowSelectionState());h("pagination",this.getPaginationState())}setupStateOnRowCountReady(t){this.setRowCountState(t,"gridInitializing");const e=this.updateCachedState.bind(this);const i=()=>{this.updateRowGroupExpansionStateTimer=0;if(this.beans.gos.get("ssrmExpandAllAffectsAllRows")){e("ssrmRowGroupExpansion",this.getRowGroupExpansionState());e("rowGroupExpansion",void 0)}else{e("rowGroupExpansion",this.getRowGroupExpansionState());e("ssrmRowGroupExpansion",void 0)}};const s=()=>e("filter",this.getFilterState());const{gos:n,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:s,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{if(n.get("groupDefaultExpanded")!==0||n.get("isGroupOpenByDefault")){this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i))}},selectionChanged:()=>{this.staleStateKeys.add("rowSelection");this.onRowSelectedDebounced()},paginationChanged:t=>{if(t.newPage||t.newPageSize){e("pagination",this.getPaginationState())}}});if(o){this.addManagedListeners(o,{filterStateChanged:s})}}setFirstDataRenderedState(t,e,i){const{scroll:s,cellSelection:n,focusedCell:o,columnOrder:r,rowPinning:l}=t;const a=(t,s)=>!i?.has(t)&&(s||e==="api");if(a("focusedCell",o)){this.setFocusedCellState(o)}if(a("cellSelection",n)){this.setCellSelectionState(n)}if(a("scroll",s)){this.setScrollState(s)}if(a("rowPinning",l)){this.setRowPinningState(l)}this.setColumnPivotState(!!r?.orderedColIds,e);const h=this.updateCachedState.bind(this);h("sideBar",this.getSideBarState());h("focusedCell",this.getFocusedCellState());const c=this.getRangeSelectionState();h("rangeSelection",c);h("cellSelection",c);h("scroll",this.getScrollState())}setupStateOnFirstDataRendered(t){this.setFirstDataRenderedState(t,"gridInitializing");const e=this.updateCachedState.bind(this);const i=()=>e("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:t=>{if(t.finished){const t=this.getRangeSelectionState();e("rangeSelection",t);e("cellSelection",t)}},bodyScrollEnd:()=>e("scroll",this.getScrollState()),pinnedRowsChanged:()=>e("rowPinning",this.getRowPinningState())})}getColumnState(){const t=this.beans;return tb(an(t),t.colModel.isPivotMode())}setColumnState(t,e,i,s){const{sort:n,rowGroup:o,aggregation:r,pivot:l,columnPinning:a,columnVisibility:h,columnSizing:c,columnOrder:u}=t;let d=false;const f=(t,i)=>{const n=!s?.has(t)&&!!(i||e==="api");d||(d=n);return n};const g={};const p=t=>{let e=g[t];if(e){return e}e={colId:t};g[t]=e;return e};const m={};const v=f("sort",n);if(v){n?.sortModel.forEach((({colId:t,sort:e},i)=>{const s=p(t);s.sort=e;s.sortIndex=i}))}if(v||!i){m.sort=null;m.sortIndex=null}const w=f("rowGroup",o);if(w){o?.groupColIds.forEach(((t,e)=>{const i=p(t);i.rowGroup=true;i.rowGroupIndex=e}))}if(w||!i){m.rowGroup=null;m.rowGroupIndex=null}const C=f("aggregation",r);if(C){r?.aggregationModel.forEach((({colId:t,aggFunc:e})=>{p(t).aggFunc=e}))}if(C||!i){m.aggFunc=null}const b=f("pivot",l);if(b){l?.pivotColIds.forEach(((t,e)=>{const i=p(t);i.pivot=true;i.pivotIndex=e}));this.gos.updateGridOptions({options:{pivotMode:!!l?.pivotMode},source:e})}if(b||!i){m.pivot=null;m.pivotIndex=null}const y=f("columnPinning",a);if(y){for(const t of a?.leftColIds??[]){p(t).pinned="left"}for(const t of a?.rightColIds??[]){p(t).pinned="right"}}if(y||!i){m.pinned=null}const S=f("columnVisibility",h);if(S){for(const t of h?.hiddenColIds??[]){p(t).hide=true}}if(S||!i){m.hide=null}const x=f("columnSizing",c);if(x){for(const{colId:t,flex:e,width:i}of c?.columnSizingModel??[]){const s=p(t);s.flex=e??null;s.width=i}}if(x||!i){m.flex=null}const R=u?.orderedColIds;const F=!!R?.length&&!s?.has("columnOrder");const k=F?R.map((t=>p(t))):Object.values(g);if(k.length||d){this.columnStates=k;on(this.beans,{state:k,applyOrder:F,defaultState:m},e)}}setColumnPivotState(t,e){const i=this.columnStates;this.columnStates=void 0;const s=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans;const{pivotResultCols:o,colGroupSvc:r}=n;if(!o?.isPivotResultColsPresent()){return}if(i){const s=[];for(const t of i){if(o.getPivotResultCol(t.colId)){s.push(t)}}on(n,{state:s,applyOrder:t},e)}if(s){r?.setColumnGroupState(s,e)}}getColumnGroupState(){const t=this.beans.colGroupSvc;if(!t){return void 0}const e=t.getColumnGroupState();return ib(e)}setColumnGroupState(t,e,i){const s=this.beans.colGroupSvc;if(!s||i?.has("columnGroup")||e!=="api"&&!Object.prototype.hasOwnProperty.call(t,"columnGroup")){return}const n=new Set(t.columnGroup?.openColumnGroupIds);const o=s.getColumnGroupState();const r=o.map((({groupId:t})=>{const e=n.has(t);if(e){n.delete(t)}return{groupId:t,open:e}}));for(const t of n){r.push({groupId:t,open:true})}if(r.length){this.columnGroupStates=r}s.setColumnGroupState(r,e)}getFilterState(){const t=this.beans.filterManager;let e=t?.getFilterModel();if(e&&Object.keys(e).length===0){e=void 0}const i=t?.getFilterState();const s=t?.getAdvFilterModel()??void 0;return e||s||i?{filterModel:e,columnFilterState:i,advancedFilterModel:s}:void 0}setFilterState(t){const e=this.beans.filterManager;const{filterModel:i,columnFilterState:s,advancedFilterModel:n}=t??{filterModel:null,columnFilterState:null,advancedFilterModel:null};if(i!==void 0||s!==void 0){e?.setFilterState(i??null,s??null,"columnFilter")}if(n!==void 0){e?.setAdvFilterModel(n??null,"advancedFilter")}}getRangeSelectionState(){const t=this.beans.rangeSvc?.getCellRanges().map((t=>{const{id:e,type:i,startRow:s,endRow:n,columns:o,startColumn:r}=t;return{id:e,type:i,startRow:s,endRow:n,colIds:o.map((t=>t.getColId())),startColId:r.getColId()}}));return t?.length?{cellRanges:t}:void 0}setCellSelectionState(t){const{gos:e,rangeSvc:i,colModel:s,visibleCols:n}=this.beans;if(!$i(e)||!i){return}const o=[];for(const e of t?.cellRanges??[]){const t=[];for(const i of e.colIds){const e=s.getCol(i);if(e){t.push(e)}}if(!t.length){continue}let i=s.getCol(e.startColId);if(!i){const e=n.allCols;const s=new Set(t);i=e.find((t=>s.has(t)))}o.push({...e,columns:t,startColumn:i})}i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel){return void 0}const t=this.beans.ctrlsSvc.getScrollFeature();const{left:e}=t?.getHScrollPosition()??{left:0};const{top:i}=t?.getVScrollPosition()??{top:0};return i||e?{top:i,left:e}:void 0}setScrollState(t){if(!this.isClientSideRowModel){return}const{top:e,left:i}=t??{top:0,left:0};const{frameworkOverrides:s,rowRenderer:n,animationFrameSvc:o,ctrlsSvc:r}=this.beans;s.wrapIncoming((()=>{r.get("center").setCenterViewportScrollLeft(i);r.getScrollFeature()?.setVerticalScrollPosition(e);n.redraw({afterScroll:true});o?.flushAllFrames()}))}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel){return void 0}const t=this.beans.focusSvc.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t;return{colId:e.getColId(),rowIndex:i,rowPinned:s}}return void 0}setFocusedCellState(t){if(!this.isClientSideRowModel){return}const{focusSvc:e,colModel:i}=this.beans;if(!t){e.clearFocusedCell();return}const{colId:s,rowIndex:n,rowPinned:o}=t;e.setFocusedCell({column:i.getCol(s),rowIndex:n,rowPinned:o,forceBrowserFocus:true,preventScrollOnBrowserFocus:true})}getPaginationState(){const{pagination:t,gos:e}=this.beans;if(!t){return void 0}const i=t.getCurrentPage();const s=!e.get("paginationAutoPageSize")?t.getPageSize():void 0;if(!i&&!s){return}return{page:i,pageSize:s}}setPaginationState(t,e){const{pagination:i,gos:s}=this.beans;if(!i){return}const{pageSize:n,page:o}=t??{page:0,pageSize:s.get("paginationPageSize")};const r=e==="gridInitializing";if(n&&!s.get("paginationAutoPageSize")){i.setPageSize(n,r?"initialState":"pageSizeSelector")}if(typeof o==="number"){if(r){i.setPage(o)}else{i.goToPage(o)}}}getRowSelectionState(){const t=this.beans.selectionSvc;if(!t){return void 0}const e=t.getSelectionState();const i=!e||!Array.isArray(e)&&(e.selectAll===false||e.selectAllChildren===false)&&!e?.toggledNodes?.length;return i?void 0:e}setRowSelectionState(t,e){this.beans.selectionSvc?.setSelectionState(t,e,e==="api")}getRowGroupExpansionState(){const{expansionSvc:t}=this.beans;if(!t){return void 0}return t.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(t){const e=this.beans.pinnedRowModel;if(t){e?.setPinnedState(t)}else{e?.reset()}}setRowGroupExpansionState(t,e,i){const s=this.beans.expansionSvc;if(!s){return}const n=e??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};s.setExpansionState(n,i)}updateColumnState(t){const e=this.getColumnState();let i=false;const s=this.cachedState;for(const t of Object.keys(e)){const n=e[t];if(!o(n,s[t])){i=true}}this.cachedState={...s,...e};if(i){this.dispatchStateUpdateEvent(t)}}updateCachedState(t,e){const i=this.cachedState[t];this.setCachedStateValue(t,e);if(!o(e,i)){this.dispatchStateUpdateEvent([t])}}setCachedStateValue(t,e){this.cachedState={...this.cachedState,[t]:e}}refreshStaleState(){const t=this.staleStateKeys;for(const e of t){if(e==="rowSelection"){this.setCachedStateValue(e,this.getRowSelectionState())}}t.clear()}dispatchStateUpdateEvent(t){if(this.suppressEvents){return}for(const e of t){this.queuedUpdateSources.add(e)}this.dispatchStateUpdateEventDebounced()}dispatchQueuedStateUpdateEvents(){const t=this.queuedUpdateSources;const e=Array.from(t);t.clear();this.eventSvc.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=true;this.beans.colAnimation?.setSuppressAnimation(true)}stopSuppressEvents(t){setTimeout((()=>{this.suppressEvents=false;this.queuedUpdateSources.clear();if(!this.isAlive()){return}this.beans.colAnimation?.setSuppressAnimation(false);this.dispatchStateUpdateEvent([t])}))}suppressEventsAndDispatchInitEvent(t){this.startSuppressEvents();t();this.stopSuppressEvents("gridInitializing")}};var yF={moduleName:"GridState",version:Ke,beans:[bF],apiFunctions:{getState:pF,setState:mF}};function SF(t){return t.rowModel.isLastRowIndexKnown()}function xF(t){return t.pagination?.getPageSize()??100}function RF(t){return t.pagination?.getCurrentPage()??0}function FF(t){return t.pagination?.getTotalPages()??1}function kF(t){return t.pagination?t.pagination.getMasterRowCount():t.rowModel.getRowCount()}function PF(t){t.pagination?.goToNextPage()}function DF(t){t.pagination?.goToPreviousPage()}function MF(t){t.pagination?.goToFirstPage()}function TF(t){t.pagination?.goToLastPage()}function EF(t,e){t.pagination?.goToPage(e)}var AF=class extends re{constructor(){super(...arguments);this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(t=>{this.centerRowsCtrl=t.center;const e=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:e,scrollVisibilityChanged:e});this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this));this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){if(this.notActive()){this.beans.pagination.unsetAutoCalculatedPageSize()}else{this.checkPageSize()}}checkPageSize(){if(this.notActive()){return}const t=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(t>0){const e=this.beans;const i=()=>{const i=Math.max(xi(e),1);const s=Math.floor(t/i);e.pagination.setPageSize(s,"autoCalculated")};if(!this.isBodyRendered){i();this.isBodyRendered=true}else{de(this,i,50)()}}else{this.isBodyRendered=false}}};var IF="paginationPageSizeSelector";var HF={tag:"span",cls:"ag-paging-page-size"};var OF=class extends Sn{constructor(){super(HF);this.hasEmptyOption=false;this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp){return}const t=this.selectPageSizeComp.getValue();if(!t){return}const e=Number(t);if(isNaN(e)||e<1||e===this.pagination.getPageSize()){return}this.pagination.setPageSize(e,"pageSizeSelector");if(this.hasEmptyOption){this.toggleSelectDisplay(true)}this.selectPageSizeComp.getFocusableElement().focus()}}wireBeans(t){this.pagination=t.pagination}postConstruct(){this.addManagedPropertyListener(IF,(()=>{this.onPageSizeSelectorValuesChange()}));this.addManagedEventListeners({paginationChanged:t=>this.handlePaginationChanged(t)})}handlePaginationChanged(t){if(!this.selectPageSizeComp||!t?.newPageSize){return}const e=this.pagination.getPageSize();if(this.getPageSizeSelectorValues().includes(e)){this.selectPageSizeComp.setValue(e.toString())}else if(this.hasEmptyOption){this.selectPageSizeComp.setValue("")}else{this.toggleSelectDisplay(true)}}toggleSelectDisplay(t){if(this.selectPageSizeComp&&!t){this.reset()}if(!t){return}this.reloadPageSizesSelector();if(!this.selectPageSizeComp){return}}reset(){dt(this.getGui());if(!this.selectPageSizeComp){return}this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp)}onPageSizeSelectorValuesChange(){if(!this.selectPageSizeComp){return}if(this.shouldShowPageSizeSelector()){this.reloadPageSizesSelector()}}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(IF)!==false}reloadPageSizesSelector(){const t=this.getPageSizeSelectorValues();const e=this.pagination.getPageSize();const i=!e||!t.includes(e);if(i){const i=this.gos.exists("paginationPageSize");const s=this.gos.get(IF)!==true;hi(94,{pageSizeSet:i,pageSizesSet:s,pageSizeOptions:t,paginationPageSizeOption:e});if(!s){hi(95,{paginationPageSizeOption:e,paginationPageSizeSelector:IF})}t.unshift("")}const s=String(i?"":e);if(this.selectPageSizeComp){if(!ws(this.pageSizeOptions,t)){this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(t));this.pageSizeOptions=t}this.selectPageSizeComp.setValue(s,true)}else{this.createPageSizeSelectorComp(t,s)}this.hasEmptyOption=i}createPageSizeSelectOptions(t){return t.map((t=>({value:String(t)})))}createPageSizeSelectorComp(t,e){const i=this.getLocaleTextFunc();const s=i("pageSizeSelectorLabel","Page Size:");const n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Ar).addOptions(this.createPageSizeSelectOptions(t)).setValue(e).setAriaLabel(n).setLabel(s).onValueChange((()=>this.handlePageSizeItemSelected()));this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const t=[20,50,100];const e=this.gos.get(IF);if(!Array.isArray(e)||!e?.length){return t}return[...e].sort(((t,e)=>t-e))}destroy(){this.toggleSelectDisplay(false);super.destroy()}};var NF={selector:"AG-PAGE-SIZE-SELECTOR",component:OF};var BF=`.ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}`;var GF=class extends td{constructor(){super();this.btFirst=vn;this.btPrevious=vn;this.btNext=vn;this.btLast=vn;this.lbRecordCount=vn;this.lbFirstRowOnPage=vn;this.lbLastRowOnPage=vn;this.lbCurrent=vn;this.lbTotal=vn;this.pageSizeComp=vn;this.previousAndFirstButtonsDisabled=false;this.nextButtonDisabled=false;this.lastButtonDisabled=false;this.areListenersSetup=false;this.allowFocusInnerElement=false;this.registerCSS(BF)}wireBeans(t){this.rowModel=t.rowModel;this.pagination=t.pagination;this.ariaAnnounce=t.ariaAnnounce}postConstruct(){const t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[NF]);const{btFirst:e,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([e,i,s,n]);e.insertAdjacentElement("afterbegin",pu(t?"last":"first",this.beans));i.insertAdjacentElement("afterbegin",pu(t?"next":"previous",this.beans));s.insertAdjacentElement("afterbegin",pu(t?"previous":"next",this.beans));n.insertAdjacentElement("afterbegin",pu(t?"first":"last",this.beans));this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this));this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this));this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange()));this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector());this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:t=>{if(this.allowFocusInnerElement){return this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(t)}else{return Pc(this.beans,t)}},forceFocusOutWhenTabGuardsAreEmpty:true});this.onPaginationChanged()}setAllowFocus(t){this.allowFocusInnerElement=t}onPaginationChanged(){const t=this.gos.get("pagination");const e=t&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e);if(!e){return}this.setupListeners();this.enableOrDisableButtons();this.updateLabels();this.onPageSizeRelatedOptionsChange()}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const t of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:e,fn:i}=t;this.addManagedListeners(e,{click:i,keydown:t=>{if(t.key===mo.ENTER||t.key===mo.SPACE){t.preventDefault();i()}}})}kc(this.beans,this,this.getGui());this.areListenersSetup=true}}onBtFirst(){if(!this.previousAndFirstButtonsDisabled){this.pagination.goToFirstPage()}}formatNumber(t){const e=this.gos.getCallback("paginationNumberFormatter");if(e){const i={value:t};return e(i)}return nb(t,this.getLocaleTextFunc.bind(this))}getTemplate(){const t=this.getLocaleTextFunc();const e=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${e}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-first-row`}},{tag:"span",attrs:{id:`${e}-to`},children:t("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-last-row`}},{tag:"span",attrs:{id:`${e}-of`},children:t("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${e}-start-page`},children:t("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${e}-start-page-number`}},{tag:"span",attrs:{id:`${e}-of-page`},children:t("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${e}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("lastPage","Last Page")}}]}]}}onBtNext(){if(!this.nextButtonDisabled){this.pagination.goToNextPage()}}onBtPrevious(){if(!this.previousAndFirstButtonsDisabled){this.pagination.goToPreviousPage()}}onBtLast(){if(!this.lastButtonDisabled){this.pagination.goToLastPage()}}enableOrDisableButtons(){const t=this.pagination.getCurrentPage();const e=this.rowModel.isLastRowIndexKnown();const i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=t===0;this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled);this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay();const n=t===i-1;this.nextButtonDisabled=n||s;this.lastButtonDisabled=!e||s||t===i-1;this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled);this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){A(t,e);t.classList.toggle("ag-disabled",e)}isZeroPagesToDisplay(){const t=this.rowModel.isLastRowIndexKnown();const e=this.pagination.getTotalPages();return t&&e===0}updateLabels(){const t=this.rowModel.isLastRowIndexKnown();const e=this.pagination.getTotalPages();const i=this.pagination.getMasterRowCount();const s=t?i:null;const n=this.pagination.getCurrentPage();const o=this.pagination.getPageSize();let r;let l;if(this.isZeroPagesToDisplay()){r=l=0}else{r=o*n+1;l=r+o-1;if(t&&l>s){l=s}}const a=r+o-1;const h=!t&&i<a;const c=this.formatNumber(r);this.lbFirstRowOnPage.textContent=c;let u;const d=this.getLocaleTextFunc();if(h){u=d("pageLastRowUnknown","?")}else{u=this.formatNumber(l)}this.lbLastRowOnPage.textContent=u;const f=e>0;const g=f?n+1:0;const p=this.formatNumber(g);this.lbCurrent.textContent=p;let m;let v;if(t){m=this.formatNumber(e);v=this.formatNumber(s)}else{const t=d("more","more");m=t;v=t}this.lbTotal.textContent=m;this.lbRecordCount.textContent=v;this.announceAriaStatus(c,u,v,p,m)}announceAriaStatus(t,e,i,s,n){const o=this.getLocaleTextFunc();const r=o("page","Page");const l=o("to","to");const a=o("of","of");const h=`${t} ${l} ${e} ${a} ${i}`;const c=`${r} ${s} ${a} ${n}`;if(h!==this.ariaRowStatus){this.ariaRowStatus=h;this.ariaAnnounce?.announceValue(h,"paginationRow")}if(c!==this.ariaPageStatus){this.ariaPageStatus=c;this.ariaAnnounce?.announceValue(c,"paginationPage")}}};var VF={selector:"AG-PAGINATION",component:GF};var LF=class extends re{constructor(){super(...arguments);this.beanName="pagination";this.currentPage=0;this.topDisplayedRowIndex=0;this.bottomDisplayedRowIndex=0;this.masterRowCount=0}postConstruct(){const t=this.gos;this.active=t.get("pagination");this.pageSizeFromGridOptions=t.get("paginationPageSize");this.paginateChildRows=this.isPaginateChildRows();this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this));this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return VF}isPaginateChildRows(){const t=this.gos;const e=t.get("groupHideParentOfSingleChild")||t.get("groupRemoveSingleChildren")||t.get("groupRemoveLowestSingleChildren");if(e){return true}return t.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination");this.calculatePages();this.dispatchPaginationChangedEvent({keepRenderedRows:true})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){const e=this.currentPage;if(!this.active||e===t||typeof e!=="number"){return}const{editSvc:i}=this.beans;if(i?.isEditing()){if(i.isBatchEditing()){i.cleanupEditors()}else{i.stopEditing(void 0,{source:"api"})}}this.currentPage=t;this.calculatePages();this.dispatchPaginationChangedEvent({newPage:true})}goToPageWithIndex(t){if(!this.active){return}let e=t;if(!this.paginateChildRows){e=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(t)??t}this.goToPage(Math.floor(e/this.pageSize))}isRowInPage(t){if(!this.active){return true}return t>=this.topDisplayedRowIndex&&t<=this.bottomDisplayedRowIndex}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const t=this.beans.rowModel.getRowCount();const e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){if(i(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")){return this.pageSizeAutoCalculated}if(i(this.pageSizeFromPageSizeSelector)){return this.pageSizeFromPageSizeSelector}if(i(this.pageSizeFromInitialState)){return this.pageSizeFromInitialState}if(i(this.pageSizeFromGridOptions)){return this.pageSizeFromGridOptions}return this.defaultPageSize}calculatePages(){if(this.active){if(this.paginateChildRows){this.calculatePagesAllRows()}else{this.calculatePagesMasterRowsOnly()}}else{this.calculatedPagesNotActive()}this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0){return}const t=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0;if(this.pageSize===t){return}this.calculatePages();this.dispatchPaginationChangedEvent({newPageSize:true})}setPageSize(t,e){const i=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t;if(this.currentPage!==0){this.goToFirstPage()}break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t;this.pageSizeFromInitialState=void 0;this.pageSizeFromPageSizeSelector=void 0;if(this.currentPage!==0){this.goToFirstPage()}break}if(i!==this.pageSize){this.calculatePages();this.dispatchPaginationChangedEvent({newPageSize:true,keepRenderedRows:true})}}setZeroRows(){this.masterRowCount=0;this.topDisplayedRowIndex=0;this.bottomDisplayedRowIndex=-1;this.currentPage=0;this.totalPages=0}adjustCurrentPageIfInvalid(){const t=this.totalPages;if(this.currentPage>=t){this.currentPage=t-1}const e=this.currentPage;if(!isFinite(e)||isNaN(e)||e<0){this.currentPage=0}}calculatePagesMasterRowsOnly(){const t=this.beans.rowModel;const e=t.getTopLevelRowCount();this.masterRowCount=e;if(e<=0){this.setZeroRows();return}const i=this.pageSize;const s=e-1;this.totalPages=Math.floor(s/i)+1;this.adjustCurrentPageIfInvalid();const n=this.currentPage;const o=i*n;let r=i*(n+1)-1;if(r>s){r=s}this.topDisplayedRowIndex=t.getTopLevelRowDisplayedIndex(o);if(r===s){this.bottomDisplayedRowIndex=t.getRowCount()-1}else{const e=t.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const t=this.beans.rowModel.getRowCount();this.masterRowCount=t;if(t===0){this.setZeroRows();return}const{pageSize:e,currentPage:i}=this;const s=t-1;this.totalPages=Math.floor(s/e)+1;this.adjustCurrentPageIfInvalid();this.topDisplayedRowIndex=e*i;this.bottomDisplayedRowIndex=e*(i+1)-1;if(this.bottomDisplayedRowIndex>s){this.bottomDisplayedRowIndex=s}}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated");this.totalPages=1;this.currentPage=0;this.topDisplayedRowIndex=0;this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(t){const{keepRenderedRows:e=false,newPage:i=false,newPageSize:s=false}=t;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:false,newData:false,newPage:i,newPageSize:s,keepRenderedRows:e})}};var zF={moduleName:"Pagination",version:Ke,beans:[LF,AF],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:SF,paginationGetPageSize:xF,paginationGetCurrentPage:RF,paginationGetTotalPages:FF,paginationGetRowCount:kF,paginationGoToNextPage:PF,paginationGoToPreviousPage:DF,paginationGoToFirstPage:MF,paginationGoToLastPage:TF,paginationGoToPage:EF},dependsOn:[Tb]};function $F(t,e={}){const i=e?e.rowNodes:void 0;t.frameworkOverrides.wrapIncoming((()=>t.rowRenderer.redrawRows(i)))}function WF(t,e,i,s,n){if(e){if(s&&e.parent&&e.parent.level!==-1){WF(t,e.parent,i,s,n)}e.setExpanded(i,void 0,n)}}function UF(t,e){return t.rowModel.getRowNode(e)}function jF(t,e,i,s){t.rowRenderer.addRenderedRowListener(e,i,s)}function KF(t){return t.rowRenderer.getRenderedNodes()}function qF(t,e,i){t.rowModel.forEachNode(e,i)}function _F(t){return t.rowRenderer.firstRenderedRow}function ZF(t){return t.rowRenderer.lastRenderedRow}function YF(t,e){return t.rowModel.getRow(e)}function QF(t){return t.rowModel.getRowCount()}var JF={moduleName:"RowApi",version:Ke,apiFunctions:{redrawRows:$F,setRowNodeExpanded:WF,getRowNode:UF,addRenderedRowListener:jF,getRenderedNodes:KF,forEachNode:qF,getFirstDisplayedRowIndex:_F,getLastDisplayedRowIndex:ZF,getDisplayedRowAtIndex:YF,getDisplayedRowCount:QF}};var XF={moduleName:"ScrollApi",version:Ke,apiFunctions:{getVerticalPixelRange:GS,getHorizontalPixelRange:VS,ensureColumnVisible:LS,ensureIndexVisible:zS,ensureNodeVisible:$S}};function tk(t,e,i){if(!e){return}const s=t.ctrlsSvc.getGridBodyCtrl().eGridBody;const n=`aria-${e}`;if(i===null){s.removeAttribute(n)}else{s.setAttribute(n,i)}}function ek(t,e={}){t.frameworkOverrides.wrapIncoming((()=>t.rowRenderer.refreshCells(e)))}function ik(t){t.frameworkOverrides.wrapIncoming((()=>{for(const e of t.ctrlsSvc.getHeaderRowContainerCtrls()){e.refresh()}}))}function sk(t){return t.animationFrameSvc?.isQueueEmpty()??true}function nk(t){t.animationFrameSvc?.flushAllFrames()}function ok(t){return{rowHeight:xi(t),headerHeight:Oc(t)}}function rk(t,e={}){const i=[];for(const s of t.rowRenderer.getCellCtrls(e.rowNodes,e.columns)){const t=s.getCellRenderer();if(t!=null){i.push(go(t))}}if(e.columns?.length){return i}const s=[];const n=cC(e.rowNodes);for(const e of t.rowRenderer.getAllRowCtrls()){if(n&&!uC(e.rowNode,n)){continue}if(!e.isFullWidth()){continue}const t=e.getFullWidthCellRenderers();for(let e=0;e<t.length;e++){const i=t[e];if(i!=null){s.push(go(i))}}}return[...s,...i]}var lk={moduleName:"RenderApi",version:Ke,apiFunctions:{setGridAriaProperty:tk,refreshCells:ek,refreshHeader:ik,isAnimationFrameQueueEmpty:sk,flushAllAnimationFrames:nk,getSizesForCurrentTheme:ok,getCellRendererInstances:rk}};function ak(t,e){if(typeof e==="number"){t.colAutosize?.sizeColumnsToFit(e,"api")}else{t.colAutosize?.sizeColumnsToFitGridBody(e)}}function hk({colAutosize:t,visibleCols:e},i,s){if(Array.isArray(i)){t?.autoSizeCols({colKeys:i,skipHeader:s,source:"api"})}else{t?.autoSizeCols({...i,colKeys:i.colIds??e.allCols,source:"api"})}}function ck(t,e){if(e&&typeof e==="object"){hk(t,e)}else{t.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:e})}}var uk=class extends re{constructor(){super(...arguments);this.beanName="colAutosize";this.timesDelayed=0;this.shouldQueueResizeOperations=false;this.resizeOperationQueue=[]}postConstruct(){const{gos:t}=this;const e=t.get("autoSizeStrategy");if(e){let i=false;const s=e.type;if(s==="fitGridWidth"||s==="fitProvidedWidth"){i=true}else if(s==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(e)});const s=t.get("rowData");i=s!=null&&s.length>0&&pi(t)}if(i){this.beans.colDelayRenderSvc?.hideColumns(s)}}}autoSizeCols(t){const{eventSvc:e,visibleCols:i}=this.beans;this.innerAutoSizeCols(t).then((s=>{const n=t=>nn(e,Array.from(t),true,"autosizeColumns");if(!t.scaleUpToFitGridWidth){return n(s)}const o=fk(this.beans);const r=t=>i.leftCols.some((e=>Ns(e,t)));const l=t=>i.rightCols.some((e=>Ns(e,t)));const a=t.colKeys.filter((t=>!Ms(t)&&!Ts(t)&&!r(t)&&!l(t)));this.sizeColumnsToFit(o,t.source,true,{defaultMaxWidth:t.defaultMaxWidth,defaultMinWidth:t.defaultMinWidth,columnLimits:t.columnLimits?.map((t=>({...t,key:t.colId}))),colKeys:a,onlyScaleUp:true});n(s)}))}innerAutoSizeCols(t){return new Promise(((e,i)=>{if(this.shouldQueueResizeOperations){return this.pushResizeOperation((()=>this.innerAutoSizeCols(t).then(e,i)))}const{colKeys:s,skipHeader:n,skipHeaderGroups:o,stopAtGroup:r,defaultMaxWidth:l,defaultMinWidth:a,columnLimits:h=[],source:c="api"}=t;const{animationFrameSvc:u,renderStatus:d,colModel:f,autoWidthCalc:g,visibleCols:p}=this.beans;u?.flushAllFrames();if(this.timesDelayed<5&&d&&(!d.areHeaderCellsRendered()||!d.areCellsRendered())){this.timesDelayed++;setTimeout((()=>{if(this.isAlive()){this.innerAutoSizeCols(t).then(e,i)}}));return}this.timesDelayed=0;const m=new Set;let v=-1;const w=Object.fromEntries(h.map((({colId:t,...e})=>[t,e])));const C=n??this.gos.get("skipHeaderOnAutoSize");const b=o??C;while(v!==0){v=0;const t=[];for(const e of s){if(!e||Es(e)){continue}const i=f.getCol(e);if(!i||m.has(i)){continue}const s=g.getPreferredWidthForColumn(i,C);if(s>0){const t=w[i.colId]??{};t.minWidth??(t.minWidth=a);t.maxWidth??(t.maxWidth=l);const e=dk(i,s,t);i.setActualWidth(e,c);m.add(i);v++}t.push(i)}if(t.length){p.refresh(c)}}if(!b){this.autoSizeColumnGroupsByColumns(s,c,r)}e(m)}))}autoSizeColumn(t,e,i){this.autoSizeCols({colKeys:[t],skipHeader:i,skipHeaderGroups:true,source:e})}autoSizeColumnGroupsByColumns(t,e,i){const{colModel:s,ctrlsSvc:n}=this.beans;const o=new Set;const r=s.getColsForKeys(t);for(const t of r){let e=t.getParent();while(e&&e!=i){if(!e.isPadding()){o.add(e)}e=e.getParent()}}let l;for(const t of o){for(const e of n.getHeaderRowContainerCtrls()){l=e.getHeaderCtrlForColumn(t);if(l){break}}l?.resizeLeafColumnsToFit(e)}}autoSizeAllColumns(t){if(this.shouldQueueResizeOperations){this.pushResizeOperation((()=>this.autoSizeAllColumns(t)));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...t})}addColumnAutosizeListeners(t,e){const i=this.gos.get("skipHeaderOnAutoSize");const s=()=>{this.autoSizeColumn(e,"uiColumnResized",i)};t.addEventListener("dblclick",s);const n=new od(t);n.addEventListener("doubleTap",s);return()=>{t.removeEventListener("dblclick",s);n.destroy()}}addColumnGroupResize(t,e,i){const s=this.gos.get("skipHeaderOnAutoSize");const n=()=>{const t=[];const n=e.getDisplayedLeafColumns();for(const e of n){if(!e.getColDef().suppressAutoSize){t.push(e.getColId())}}if(t.length>0){this.autoSizeCols({colKeys:t,skipHeader:s,stopAtGroup:e,source:"uiColumnResized"})}i()};t.addEventListener("dblclick",n);return()=>t.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(t,e){if(!this.isAlive()){return}const i=fk(this.beans);if(i>0){this.sizeColumnsToFit(i,"sizeColumnsToFit",false,t);return}if(e===void 0){window.setTimeout((()=>{this.sizeColumnsToFitGridBody(t,100)}),0)}else if(e===100){window.setTimeout((()=>{this.sizeColumnsToFitGridBody(t,500)}),100)}else if(e===500){window.setTimeout((()=>{this.sizeColumnsToFitGridBody(t,-1)}),500)}else{hi(29)}}sizeColumnsToFit(t,e="sizeColumnsToFit",i,s){if(this.shouldQueueResizeOperations){this.pushResizeOperation((()=>this.sizeColumnsToFit(t,e,i,s)));return}const n={};for(const{key:t,...e}of s?.columnLimits??[]){n[typeof t==="string"?t:t.getColId()]=e}const o=this.beans.visibleCols.allCols;if(t<=0||!o.length){return}const r=ks(o);if(s?.onlyScaleUp&&r>t){return}const l=t===r;if(l){const t=o.every((t=>{if(t.colDef.suppressSizeToFit){return true}const e=n?.[t.getId()];const i=e?.minWidth??s?.defaultMinWidth;const o=e?.maxWidth??s?.defaultMaxWidth;const r=t.getActualWidth();return(i==null||r>=i)&&(o==null||r<=o)}));if(t){return}}const a=[];const h=[];for(const t of o){const e=s?.colKeys?.some((e=>Ns(t,e)))??true;if(t.getColDef().suppressSizeToFit||!e){h.push(t)}else{a.push(t)}}const c=a.slice(0);let u=false;const d=t=>{bs(a,t);h.push(t)};for(const t of a){t.resetActualWidth(e);const i=n?.[t.getId()];const o=i?.minWidth??s?.defaultMinWidth;const r=i?.maxWidth??s?.defaultMaxWidth;const l=t.getActualWidth();if(typeof o==="number"&&l<o){t.setActualWidth(o,e,true)}else if(typeof r==="number"&&l>r){t.setActualWidth(r,e,true)}}while(!u){u=true;const i=t-ks(h);if(i<=0){for(const t of a){const i=n?.[t.getId()]?.minWidth??s?.defaultMinWidth??t.minWidth;t.setActualWidth(i,e,true)}}else{const t=i/ks(a);let o=i;for(let i=a.length-1;i>=0;i--){const r=a[i];const l=n?.[r.getId()];const h=l?.minWidth??s?.defaultMinWidth;const c=l?.maxWidth??s?.defaultMaxWidth;const f=r.getMinWidth();const g=r.getMaxWidth();const p=typeof h==="number"&&h>f?h:f;const m=typeof c==="number"&&c<g?c:g;let v=Math.round(r.getActualWidth()*t);if(v<p){v=p;d(r);u=false}else if(v>m){v=m;d(r);u=false}else if(i===0){v=o}r.setActualWidth(v,e,true);o-=v}}}for(const t of c){t.fireColumnWidthChangedEvent(e)}const f=this.beans.visibleCols;f.setLeftValues(e);f.updateBodyWidths();if(i){return}nn(this.eventSvc,c,true,e)}applyAutosizeStrategy(){const{gos:t,colDelayRenderSvc:e}=this.beans;const i=t.get("autoSizeStrategy");if(i?.type!=="fitGridWidth"&&i?.type!=="fitProvidedWidth"){return}setTimeout((()=>{if(!this.isAlive()){return}const t=i.type;if(t==="fitGridWidth"){const{columnLimits:t,defaultMinWidth:e,defaultMaxWidth:s}=i;const n=t?.map((({colId:t,minWidth:e,maxWidth:i})=>({key:t,minWidth:e,maxWidth:i})));this.sizeColumnsToFitGridBody({defaultMinWidth:e,defaultMaxWidth:s,columnLimits:n})}else if(t==="fitProvidedWidth"){this.sizeColumnsToFit(i.width,"sizeColumnsToFit")}e?.revealColumns(t)}))}onFirstDataRendered({colIds:t,...e}){setTimeout((()=>{if(!this.isAlive()){return}const i="autosizeColumns";if(t){this.autoSizeCols({...e,source:i,colKeys:t})}else{this.autoSizeAllColumns({...e,source:i})}this.beans.colDelayRenderSvc?.revealColumns(e.type)}))}processResizeOperations(){this.shouldQueueResizeOperations=false;for(const t of this.resizeOperationQueue){t()}this.resizeOperationQueue=[]}pushResizeOperation(t){this.resizeOperationQueue.push(t)}destroy(){this.resizeOperationQueue.length=0;super.destroy()}};function dk(t,e,i={}){const s=i.minWidth??t.getMinWidth();if(e<s){e=s}const n=i.maxWidth??t.getMaxWidth();if(e>n){e=n}return e}function fk({ctrlsSvc:t,scrollVisibleSvc:e}){const i=t.getGridBodyCtrl();const s=i.isVerticalScrollShowing();const n=s?e.getScrollbarWidth():0;const o=rt(i.eGridBody);return o-n}var gk={moduleName:"ColumnAutoSize",version:Ke,beans:[uk],apiFunctions:{sizeColumnsToFit:ak,autoSizeColumns:hk,autoSizeAllColumns:ck},dependsOn:[dg]};var pk=`.ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}`;function mk(t){return t.pinnedRowModel?.getPinnedTopRowCount()??0}function vk(t){return t.pinnedRowModel?.getPinnedBottomRowCount()??0}function wk(t,e){return t.pinnedRowModel?.getPinnedTopRow(e)}function Ck(t,e){return t.pinnedRowModel?.getPinnedBottomRow(e)}function bk(t,e,i){return t.pinnedRowModel?.forEachPinnedRow(e,i)}var yk={moduleName:"PinnedRow",version:Ke,beans:[$u],css:[pk],apiFunctions:{getPinnedTopRowCount:mk,getPinnedBottomRowCount:vk,getPinnedTopRow:wk,getPinnedBottomRow:Ck,forEachPinnedRow:bk},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}};var Sk=class{constructor(t,e){this.col=t;this.firstNode=e;this.cellSpan=true;this.spannedNodes=new Set;this.addSpannedNode(e)}reset(){this.spannedNodes.clear();this.addSpannedNode(this.firstNode)}addSpannedNode(t){this.spannedNodes.add(t);this.lastNode=t}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(t){if(t.column!==this.col){return false}if(t.rowPinned!=this.firstNode.rowPinned){return false}return this.firstNode.rowIndex<=t.rowIndex&&t.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const t=this.firstNode.__autoHeights?.[this.col.getColId()];if(t==null){return void 0}let e=0;for(const t of this.spannedNodes){if(t===this.lastNode){continue}e+=t.rowHeight}return t-e}};var xk=class extends re{constructor(t){super();this.column=t}buildCache(t){const{column:e,beans:{gos:i,pinnedRowModel:s,rowModel:n,valueSvc:o,pagination:r}}=this;const{colDef:l}=e;const a=this.getNodeMap(t);const h=new Map;const c=i.getCallback("isFullWidthRow");const u=l.equals;const d=l.spanRows;const f=typeof d==="function";let g=null;let p=null;let m;const v=(t,e)=>{g=t;p=null;m=e};const w=t=>{const s=!t.isExpandable()&&!t.group&&!t.detail&&(c?!c({rowNode:t}):true);if(t.rowIndex==null||!s){v(null,null);return}if(g==null||t.level!==g.level||t.footer||p&&t.rowIndex-1!==p?.getLastNode().rowIndex){v(t,o.getValue(e,t));return}const n=o.getValue(e,t);if(f){const s=os(i,{valueA:m,nodeA:g,valueB:n,nodeB:t,column:e,colDef:l});if(!d(s)){v(t,n);return}}else if(u?!u(m,n):m!==n){v(t,n);return}if(!p){const t=a?.get(g);if(t?.firstNode===g){t.reset();p=t}else{p=new Sk(e,g)}h.set(g,p)}p.addSpannedNode(t);h.set(t,p)};switch(t){case"center":n.forEachDisplayedNode?.((t=>{const e=!r||r.isRowInPage(t.rowIndex);if(!e){return}w(t)}));this.centerValueNodeMap=h;break;case"top":s?.forEachPinnedRow("top",w);this.topValueNodeMap=h;break;case"bottom":s?.forEachPinnedRow("bottom",w);this.bottomValueNodeMap=h;break}}isCellSpanning(t){return!!this.getCellSpan(t)}getCellSpan(t){return this.getNodeMap(t.rowPinned).get(t)}getNodeMap(t){switch(t){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}};var Rk=class extends re{constructor(){super(...arguments);this.beanName="rowSpanSvc";this.spanningColumns=new Map;this.debouncePinnedEvent=de(this,this.dispatchCellsUpdatedEvent.bind(this,true),0);this.debounceModelEvent=de(this,this.dispatchCellsUpdatedEvent.bind(this,false),0);this.pinnedTimeout=null;this.modelTimeout=null}postConstruct(){const t=this.onRowDataUpdated.bind(this);const e=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:e,pinnedRowsChanged:e,rowNodeDataChanged:t,cellValueChanged:t})}register(t){const{gos:e}=this.beans;if(!e.get("enableCellSpan")){return}if(this.spanningColumns.has(t)){return}const i=this.createManagedBean(new xk(t));this.spanningColumns.set(t,i);i.buildCache("top");i.buildCache("bottom");i.buildCache("center");this.debouncePinnedEvent();this.debounceModelEvent()}dispatchCellsUpdatedEvent(t){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:t})}deregister(t){this.spanningColumns.delete(t)}onRowDataUpdated({node:t}){const{spannedRowRenderer:e}=this.beans;if(t.rowPinned){if(this.pinnedTimeout!=null){return}this.pinnedTimeout=window.setTimeout((()=>{this.pinnedTimeout=null;this.buildPinnedCaches();e?.createCtrls("top");e?.createCtrls("bottom")}),0);return}if(this.modelTimeout!=null){return}this.modelTimeout=window.setTimeout((()=>{this.modelTimeout=null;this.buildModelCaches();e?.createCtrls("center")}),0)}buildModelCaches(){if(this.modelTimeout!=null){clearTimeout(this.modelTimeout)}this.spanningColumns.forEach((t=>t.buildCache("center")));this.debounceModelEvent()}buildPinnedCaches(){if(this.pinnedTimeout!=null){clearTimeout(this.pinnedTimeout)}this.spanningColumns.forEach((t=>{t.buildCache("top");t.buildCache("bottom")}));this.debouncePinnedEvent()}isCellSpanning(t,e){const i=this.spanningColumns.get(t);if(!i){return false}return i.isCellSpanning(e)}getCellSpanByPosition(t){const{pinnedRowModel:e,rowModel:i}=this.beans;const s=t.column;const n=t.rowIndex;const o=this.spanningColumns.get(s);if(!o){return void 0}let r;switch(t.rowPinned){case"top":r=e?.getPinnedTopRow(n);break;case"bottom":r=e?.getPinnedBottomRow(n);break;default:r=i.getRow(n)}if(!r){return void 0}return o.getCellSpan(r)}getCellStart(t){const e=this.getCellSpanByPosition(t);if(!e){return t}return{...t,rowIndex:e.firstNode.rowIndex}}getCellEnd(t){const e=this.getCellSpanByPosition(t);if(!e){return t}return{...t,rowIndex:e.getLastNode().rowIndex}}getCellSpan(t,e){const i=this.spanningColumns.get(t);if(!i){return void 0}return i.getCellSpan(e)}forEachSpannedColumn(t,e){for(const[i,s]of this.spanningColumns){if(s.isCellSpanning(t)){const n=s.getCellSpan(t);e(i,n)}}}destroy(){super.destroy();this.spanningColumns.clear()}};var Fk=class extends Tw{constructor(t,e,i){super(t.col,t.firstNode,i,e);this.cellSpan=t;this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(t,e,i,s,n,o,r){this.eWrapper=i;super.setComp(t,e,i,s,n,o,r);this.setAriaRowSpan();this.refreshAriaRowIndex()}isCellSpanning(){return true}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:t,rowNode:e}=this;if(!t||e.rowIndex==null){return}V(t,e.rowIndex)}setAriaRowSpan(){L(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(t){this.focusedCellPosition=t}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const t=this.beans.focusSvc.getFocusedCell();return!!t&&this.cellSpan.doesSpanContain(t)}applyStaticCssClasses(){super.applyStaticCssClasses();this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,true)}onCellFocused(t){const{beans:e}=this;if(Mc(e)){this.focusedCellPosition=void 0;return}const i=this.isCellFocused();if(!i){this.focusedCellPosition=void 0}if(t&&i){this.focusedCellPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column}}super.onCellFocused(t)}getRootElement(){return this.eWrapper}};var kk=class extends Ow{onRowIndexChanged(){super.onRowIndexChanged();for(const t of this.getAllCellCtrls()){t.refreshAriaRowIndex()}}getInitialRowClasses(t){return["ag-spanned-row"]}getNewCellCtrl(t){const e=this.beans.rowSpanSvc?.getCellSpan(t,this.rowNode);if(!e){return}const i=e.firstNode!==this.rowNode;if(i){return}return new Fk(e,this,this.beans)}isCorrectCtrlForSpan(t){const e=this.beans.rowSpanSvc?.getCellSpan(t.column,this.rowNode);if(!e){return false}const i=e.firstNode!==this.rowNode;if(i){return false}return t.getCellSpan()===e}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}};var Pk=class extends re{constructor(){super(...arguments);this.beanName="spannedRowRenderer";this.topCtrls=new Map;this.bottomCtrls=new Map;this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top");this.createCtrls("bottom");this.createCtrls("center")}createCtrls(t){const{rowSpanSvc:e}=this.beans;const i=this.getCtrlsMap(t);const s=i.size;const n=this.getAllRelevantRowControls(t);const o=new Map;let r=false;for(const t of n){if(!t.isAlive()){continue}e?.forEachSpannedColumn(t.rowNode,((t,e)=>{if(o.has(e.firstNode)){return}const s=i.get(e.firstNode);if(s){o.set(e.firstNode,s);i.delete(e.firstNode);return}r=true;const n=new kk(e.firstNode,this.beans,false,false,false);o.set(e.firstNode,n)}))}this.setCtrlsMap(t,o);const l=o.size===s;if(!r&&l){return}for(const t of i.values()){t.destroyFirstPass(true);t.destroySecondPass()}this.dispatchLocalEvent({type:`spannedRowsUpdated`,ctrlsKey:t})}getAllRelevantRowControls(t){const{rowRenderer:e}=this.beans;switch(t){case"top":return e.topRowCtrls;case"bottom":return e.bottomRowCtrls;case"center":return e.allRowCtrls}}getCellByPosition(t){const{rowSpanSvc:e}=this.beans;const i=e?.getCellSpanByPosition(t);if(!i){return void 0}const s=this.getCtrlsMap(t.rowPinned).get(i.firstNode);if(!s){return void 0}return s.getAllCellCtrls().find((e=>e.column===t.column))}getCtrls(t){return[...this.getCtrlsMap(t).values()]}destroyRowCtrls(t){for(const e of this.getCtrlsMap(t).values()){e.destroyFirstPass(true);e.destroySecondPass()}this.setCtrlsMap(t,new Map)}getCtrlsMap(t){switch(t){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(t,e){switch(t){case"top":this.topCtrls=e;break;case"bottom":this.bottomCtrls=e;break;default:this.centerCtrls=e;break}}destroy(){super.destroy();this.destroyRowCtrls("top");this.destroyRowCtrls("bottom");this.destroyRowCtrls("center")}};var Dk={moduleName:"CellSpan",version:Ke,beans:[Rk,Pk]};var Mk=class extends re{constructor(t,e){super();this.cellCtrl=t;this.staticClasses=[];this.beans=e;this.column=t.column}setComp(t){this.cellComp=t;this.applyUserStyles();this.applyCellClassRules();this.applyClassesFromColDef()}applyCellClassRules(){const{column:t,cellComp:e}=this;const i=t.colDef;const s=i.cellClassRules;const n=this.getCellClassParams(t,i);Ew(this.beans.expressionSvc,s===this.cellClassRules?void 0:this.cellClassRules,s,n,(t=>e.toggleCss(t,true)),(t=>e.toggleCss(t,false)));this.cellClassRules=s}applyUserStyles(){const t=this.column;const e=t.colDef;const i=e.cellStyle;if(!i){return}let s;if(typeof i==="function"){const n=this.getCellClassParams(t,e);s=i(n)}else{s=i}if(s){this.cellComp.setUserStyles(s)}}applyClassesFromColDef(){const{column:t,cellComp:e}=this;const i=t.colDef;const s=this.getCellClassParams(t,i);for(const t of this.staticClasses){e.toggleCss(t,false)}const n=this.beans.cellStyles.getStaticCellClasses(i,s);this.staticClasses=n;for(const t of n){e.toggleCss(t,true)}}getCellClassParams(t,e){const{value:i,rowNode:s}=this.cellCtrl;return os(this.beans.gos,{value:i,data:s.data,node:s,colDef:e,column:t,rowIndex:s.rowIndex})}};var Tk=class extends re{constructor(){super(...arguments);this.beanName="cellStyles"}processAllCellClasses(t,e,i,s){Ew(this.beans.expressionSvc,void 0,t.cellClassRules,e,i,s);this.processStaticCellClasses(t,e,i)}getStaticCellClasses(t,e){const{cellClass:i}=t;if(!i){return[]}let s;if(typeof i==="function"){const t=i;s=t(e)}else{s=i}if(typeof s==="string"){s=[s]}return s||[]}createCellCustomStyleFeature(t,e){return new Mk(t,e)}processStaticCellClasses(t,e,i){const s=this.getStaticCellClasses(t,e);s.forEach((t=>{i(t)}))}};var Ek={moduleName:"CellStyle",version:Ke,beans:[Tk]};var Ak={moduleName:"RowStyle",version:Ke,beans:[Iw]};function Ik(t,e){return!!t.colHover?.isHovered(e)}var Hk=class extends re{constructor(t,e){super();this.columns=t;this.element=e;this.destroyManagedListeners=[];this.enableFeature=t=>{const{beans:e,gos:i,element:s,columns:n}=this;const o=e.colHover;const r=t??!!i.get("columnHoverHighlight");if(r){this.destroyManagedListeners=this.addManagedElementListeners(s,{mouseover:o.setMouseOver.bind(o,n),mouseout:o.clearMouseOver.bind(o)})}else{for(const t of this.destroyManagedListeners){t()}this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",(({currentValue:t})=>{this.enableFeature(t)}));this.enableFeature()}destroy(){super.destroy();this.destroyManagedListeners=null}};var Ok="ag-column-hover";var Nk=class extends re{constructor(){super(...arguments);this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",(({currentValue:t})=>{if(!t){this.clearMouseOver()}}))}setMouseOver(t){this.updateState(t)}clearMouseOver(){this.updateState(null)}isHovered(t){if(!this.gos.get("columnHoverHighlight")){return false}const e=this.selectedColumns;return!!e&&e.indexOf(t)>=0}addHeaderColumnHoverListener(t,e,i){const s=()=>{const t=this.isHovered(i);e.toggleCss("ag-column-hover",t)};t.addManagedEventListeners({columnHoverChanged:s});s()}onCellColumnHover(t,e){if(!e){return}const i=this.isHovered(t);e.toggleCss(Ok,i)}addHeaderFilterColumnHoverListener(t,e,i,s){this.createHoverFeature(t,[i],s);const n=()=>{const t=this.isHovered(i);e.toggleCss("ag-column-hover",t)};t.addManagedEventListeners({columnHoverChanged:n});n()}createHoverFeature(t,e,i){t.createManagedBean(new Hk(e,i))}updateState(t){this.selectedColumns=t;this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}};var Bk={moduleName:"ColumnHover",version:Ke,beans:[Nk],apiFunctions:{isColumnHovered:Ik}};var Gk=class extends re{constructor(){super(...arguments);this.beanName="apiEventSvc";this.syncListeners=new Map;this.asyncListeners=new Map;this.syncGlobalListeners=new Set;this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(t,e){const i=this.wrapSvc?.wrap(t,e)??e;const s=!Gm.has(t);const n=s?this.asyncListeners:this.syncListeners;if(!n.has(t)){n.set(t,new Set)}n.get(t).add(i);this.eventSvc.addListener(t,i,s)}removeListener(t,e){const i=this.wrapSvc?.unwrap(t,e)??e;const s=this.asyncListeners.get(t);const n=!!s?.delete(i);if(!n){this.syncListeners.get(t)?.delete(i)}this.eventSvc.removeListener(t,i,n)}addGlobalListener(t){const e=this.wrapSvc?.wrapGlobal(t)??t;const i=(t,i)=>{if(Gm.has(t)){e(t,i)}};const s=(t,i)=>{if(!Gm.has(t)){e(t,i)}};this.globalListenerPairs.set(t,{syncListener:i,asyncListener:s});const n=this.eventSvc;n.addGlobalListener(i,false);n.addGlobalListener(s,true)}removeGlobalListener(t){const{eventSvc:e,wrapSvc:i,globalListenerPairs:s}=this;const n=i?.unwrapGlobal(t)??t;const o=s.has(n);if(o){const{syncListener:i,asyncListener:o}=s.get(n);e.removeGlobalListener(i,false);e.removeGlobalListener(o,true);s.delete(t)}else{this.syncGlobalListeners.delete(n);e.removeGlobalListener(n,false)}}destroyEventListeners(t,e){t.forEach(((t,i)=>{t.forEach((t=>this.eventSvc.removeListener(i,t,e)));t.clear()}));t.clear()}destroyGlobalListeners(t,e){for(const i of t){this.eventSvc.removeGlobalListener(i,e)}t.clear()}destroy(){super.destroy();this.destroyEventListeners(this.syncListeners,false);this.destroyEventListeners(this.asyncListeners,true);this.destroyGlobalListeners(this.syncGlobalListeners,false);const{globalListenerPairs:t,eventSvc:e}=this;t.forEach((({syncListener:t,asyncListener:i})=>{e.removeGlobalListener(t,false);e.removeGlobalListener(i,true)}));t.clear()}};function Vk(t,e,i){t.apiEventSvc?.addListener(e,i)}function Lk(t,e,i){t.apiEventSvc?.removeListener(e,i)}function zk(t,e){t.apiEventSvc?.addGlobalListener(e)}function $k(t,e){t.apiEventSvc?.removeGlobalListener(e)}var Wk={moduleName:"EventApi",version:Ke,apiFunctions:{addEventListener:Vk,addGlobalListener:zk,removeEventListener:Lk,removeGlobalListener:$k},beans:[Gk]};var Uk={moduleName:"Locale",version:Ke,beans:[XC]};var jk=class extends re{constructor(){super(...arguments);this.beanName="rowAutoHeight";this.wasEverActive=false;this._debouncedCalculateRowHeights=de(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){if(!this.wasEverActive){return}this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:t,rowModel:e,rowSpanSvc:i,pinnedRowModel:s}=this.beans;const n=t.autoHeightCols;let o=false;const r=t=>{const e=t.__autoHeights;let s=yi(this.beans,t).height;for(const o of n){let n=e?.[o.getColId()];const r=i?.getCellSpan(o,t);if(r){if(r.getLastNode()!==t){continue}n=i?.getCellSpan(o,t)?.getLastNodeAutoHeight();if(!n){return}}if(n==null){if(this.colSpanSkipCell(o,t)){continue}return}s=Math.max(n,s)}if(s!==t.rowHeight){t.setRowHeight(s);o=true}};s?.forEachPinnedRow?.("top",r);s?.forEachPinnedRow?.("bottom",r);e.forEachDisplayedNode?.(r);if(o){e.onRowHeightChanged?.()}}setRowAutoHeight(t,e,i){t.__autoHeights??(t.__autoHeights={});if(e==void 0){delete t.__autoHeights[i.getId()];return}const s=t.__autoHeights[i.getId()];t.__autoHeights[i.getId()]=e;if(s!==e){this.requestCheckAutoHeight()}}colSpanSkipCell(t,e){const{colModel:i,colViewport:s,visibleCols:n}=this.beans;if(!i.colSpanActive){return false}let o=[];switch(t.getPinned()){case"left":o=n.getLeftColsForRow(e);break;case"right":o=n.getRightColsForRow(e);break;case null:o=s.getColsWithinViewport(e);break}return!o.includes(t)}setupCellAutoHeight(t,e,i){if(!t.column.isAutoHeight()||!e){return false}this.wasEverActive=true;const s=e.parentElement;const{rowNode:n,column:o}=t;const r=this.beans;const l=a=>{if(this.beans.editSvc?.isEditing(t)){return}if(!t.isAlive()||!i.isAlive()){return}const{paddingTop:h,paddingBottom:c,borderBottomWidth:u,borderTopWidth:d}=nt(s);const g=h+c+u+d;const p=e.offsetHeight;const m=p+g;if(a<5){const t=f(r);const i=!t?.contains(e);const s=m==0;if(i||s){window.setTimeout((()=>l(a+1)),0);return}}this.setRowAutoHeight(n,m,o)};const a=()=>l(0);a();const h=Tt(r,e,a);i.addDestroyFunc((()=>{h();this.setRowAutoHeight(n,void 0,o)}));return true}setAutoHeightActive(t){this.active=t.list.some((t=>t.isVisible()&&t.isAutoHeight()))}areRowsMeasured(){if(!this.active){return true}const t=this.beans.rowRenderer.getAllRowCtrls();let e=null;for(const{rowNode:i}of t){if(!e||this.beans.colModel.colSpanActive){const t=this.beans.colViewport.getColsWithinViewport(i);e=t.filter((t=>t.isAutoHeight()))}if(e.length===0){continue}if(!i.__autoHeights){return false}for(const t of e){const e=i.__autoHeights[t.getColId()];if(!e||i.rowHeight<e){return false}}}return true}};var Kk={moduleName:"RowAutoHeight",version:Ke,beans:[jk]};var qk={moduleName:"AllCommunity",version:Ke,dependsOn:[VR,_R,nF,Sb,Ax,Ix,Hx,Ox,Nx,Bx,Gx,Ex,iS,sS,nS,eS,rS,lS,yF,gR,zF,xp,JF,XF,lk,gk,If,yk,iR,SC,Ek,Bk,Ak,Wk,FC,gF,dS,Uk,Kk,Ef,LR,Dk]};export{qk as A,je as M,KC as c,ye as p};
//# sourceMappingURL=p-ByHlxOiP.js.map