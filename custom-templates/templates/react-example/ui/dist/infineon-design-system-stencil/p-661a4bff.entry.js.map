{"version":3,"names":["stepperCss","Stepper","ifxChange","activeStep","indicatorPosition","showStepNumber","variant","ariaLabel","ariaCurrent","stepsCount","shouldEmitEvent","emittedByClick","onStepChange","event","steps","this","getSteps","previousActiveStep","detail","complete","setAttribute","handleActiveStep","newStep","oldStep","disabled","emitIfxChange","i","emit","totalSteps","el","querySelectorAll","addStepIdsToStepsAndCountSteps","length","lastStep","stepId","setActiveStep","setByClick","setStepsBeforeActiveToComplete","forEach","step","syncIfxSteps","stepperState","bind","setInitialActiveStep","Math","max","min","componentWillLoad","componentDidLoad","isNestedInIfxComponent","framework","detectFramework","trackComponent","componentWillUpdate","render","h","key","role","class","componentDidRender","progressBar","shadowRoot","querySelector","style","setProperty"],"sources":["src/components/stepper/stepper.scss?tag=ifx-stepper&encapsulation=shadow","src/components/stepper/stepper.tsx"],"sourcesContent":["@use \"~@infineon/design-system-tokens/dist/tokens\";\n\n.stepper {\n    display: flex;\n    align-items: center;\n    \n    &.compact {\n        align-items: center;\n        gap: 8px;\n        \n        &.compact-right {\n            flex-direction: row-reverse;\n            text-align: left;\n        }\n        \n        .stepper-wrapper{\n            width: unset;\n            flex-direction: column;\n        }\n    }\n\n    &.vertical {\n        height: 100%;\n\n        .stepper-wrapper {\n            flex-direction: column;\n            width: unset;\n            height: 100%;\n        }\n    }\n}\n\n.stepper-wrapper {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n}\n\n.stepper-wrapper ::slotted(*){\n    display: flex;\n    flex: 1;\n    justify-content: flex-start;\n}\n\n.stepper-progress {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font: tokens.$ifxBodyBodySemibold04;\n    min-width: tokens.$ifxSize700;\n    height: tokens.$ifxSize700;\n    border-radius: tokens.$ifxBorderRadiusRound;\n    background: conic-gradient(tokens.$ifxColorOcean500 var(--pb, 0%), tokens.$ifxColorEngineering300 0);\n    \n    .progress-detail {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        width: (tokens.$ifxSize700)-(tokens.$ifxSize100);\n        height: (tokens.$ifxSize700)-(tokens.$ifxSize100);\n        border-radius: tokens.$ifxBorderRadiusRound;\n        background: white;\n    }\n}\n\n","import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tListen,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\nimport type { StepperState } from \"./interfaces\";\n\n@Component({\n\ttag: \"ifx-stepper\",\n\tstyleUrl: \"stepper.scss\",\n\tshadow: true,\n})\nexport class Stepper {\n\t@Element() el: HTMLElement;\n\n\t@Event() ifxChange: EventEmitter;\n\n\t@Prop({ mutable: true }) activeStep: number = 1;\n\t@Prop() indicatorPosition?: \"left\" | \"right\" = \"left\";\n\t@Prop() showStepNumber?: boolean = false;\n\t@Prop() variant?: \"default\" | \"compact\" | \"vertical\" = \"default\";\n\t@Prop() ariaLabel: string | null;\n\t@Prop() ariaCurrent: string | null;\n\n\t@State() stepsCount: number;\n\t@State() shouldEmitEvent: boolean = true;\n\t@State() emittedByClick: boolean = false;\n\n\t@Listen(\"ifxChange\")\n\tonStepChange(event: CustomEvent) {\n\t\tconst steps = this.getSteps();\n\t\tconst previousActiveStep = steps[event.detail.previousActiveStep - 1];\n\t\tif (previousActiveStep && !previousActiveStep.complete) {\n\t\t\tpreviousActiveStep.setAttribute(\"error\", \"true\");\n\t\t}\n\t}\n\n\t@Watch(\"activeStep\")\n\thandleActiveStep(newStep: number, oldStep: number) {\n\t\tconst steps = this.getSteps();\n\t\tif (!this.shouldEmitEvent) {\n\t\t\tthis.shouldEmitEvent = true;\n\t\t\treturn;\n\t\t}\n\t\t// Skipping until the enabled step is found\n\t\tif (steps[newStep - 1]) {\n\t\t\tif (!steps[newStep - 1].disabled) {\n\t\t\t\tthis.emitIfxChange(newStep, oldStep);\n\t\t\t} else {\n\t\t\t\t// If coming from higher step number to the lower step number\n\t\t\t\tif (newStep < oldStep) {\n\t\t\t\t\tlet i = newStep;\n\t\t\t\t\tthis.shouldEmitEvent = false;\n\t\t\t\t\twhile (i >= 1 && steps[i - 1].disabled) i--;\n\t\t\t\t\t// if all the steps are disabled no change.\n\t\t\t\t\tif (i < 1) {\n\t\t\t\t\t\tthis.activeStep = oldStep;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.emitIfxChange(i, oldStep);\n\t\t\t\t\t\tthis.activeStep = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If coming from lower step number to the higher step number\n\t\t\t\telse {\n\t\t\t\t\tlet i = newStep;\n\t\t\t\t\tthis.shouldEmitEvent = false;\n\t\t\t\t\twhile (i <= this.stepsCount && steps[i - 1].disabled) i++;\n\t\t\t\t\tif (i > this.stepsCount) {\n\t\t\t\t\t\tthis.activeStep = oldStep;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.emitIfxChange(i, oldStep);\n\t\t\t\t\t\tthis.activeStep = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\temitIfxChange(activeStep: number, previousActiveStep: number) {\n\t\tthis.ifxChange.emit({\n\t\t\tactiveStep: activeStep,\n\t\t\tpreviousActiveStep: previousActiveStep,\n\t\t\ttotalSteps: this.stepsCount,\n\t\t\temittedByClick: this.emittedByClick,\n\t\t});\n\t\tthis.emittedByClick = false;\n\t}\n\n\tgetSteps() {\n\t\tconst steps: NodeListOf<HTMLIfxStepElement> =\n\t\t\tthis.el.querySelectorAll(\"ifx-step\");\n\t\treturn steps;\n\t}\n\n\taddStepIdsToStepsAndCountSteps() {\n\t\tconst steps = this.getSteps();\n\t\tsteps[steps.length - 1].lastStep = true;\n\t\tfor (let i = 0; i < steps.length; i++) {\n\t\t\tsteps[i].stepId = i + 1;\n\t\t}\n\t\tthis.stepsCount = steps.length;\n\t}\n\n\tsetActiveStep(stepId: number, setByClick: boolean = false) {\n\t\tthis.emittedByClick = setByClick;\n\t\tthis.activeStep = stepId;\n\t}\n\n\tsetStepsBeforeActiveToComplete() {\n\t\tconst steps = this.getSteps();\n\t\tsteps.forEach((step, stepId) => {\n\t\t\tif (stepId + 1 < this.activeStep) step.complete = true;\n\t\t});\n\t}\n\n\tsyncIfxSteps() {\n\t\tconst steps = this.getSteps();\n\t\tfor (let i = 0; i < steps.length; i++) {\n\t\t\tconst stepperState: StepperState = {\n\t\t\t\tactiveStep: this.activeStep,\n\t\t\t\tindicatorPosition:\n\t\t\t\t\tthis.indicatorPosition !== \"right\" ? \"left\" : \"right\",\n\t\t\t\tshowStepNumber: this.showStepNumber,\n\t\t\t\tvariant:\n\t\t\t\t\tthis.variant !== \"compact\" && this.variant !== \"vertical\"\n\t\t\t\t\t\t? \"default\"\n\t\t\t\t\t\t: this.variant,\n\t\t\t\tsetActiveStep: this.setActiveStep.bind(this),\n\t\t\t};\n\t\t\tsteps[i].stepperState = stepperState;\n\t\t}\n\t}\n\n\tsetInitialActiveStep() {\n\t\tthis.activeStep = Math.max(\n\t\t\t1,\n\t\t\tMath.min(\n\t\t\t\tthis.stepsCount + (this.variant !== \"compact\" ? 1 : 0),\n\t\t\t\tthis.activeStep,\n\t\t\t),\n\t\t);\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.addStepIdsToStepsAndCountSteps();\n\t\tthis.setInitialActiveStep();\n\t\tthis.setStepsBeforeActiveToComplete();\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-stepper\", await framework);\n\t\t}\n\t\tthis.syncIfxSteps();\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.syncIfxSteps();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\taria-label={this.ariaLabel}\n\t\t\t\taria-current={this.ariaCurrent}\n\t\t\t\trole=\"navigation\"\n\t\t\t\tclass={`stepper ${this.variant !== \"compact\" && this.variant !== \"vertical\" ? \"default\" : this.variant} ${this.variant === \"compact\" ? \"compact-\" + this.indicatorPosition : \"\"}`}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\t/* Progress bar for compact variant. */\n\t\t\t\t\tthis.variant === \"compact\" && (\n\t\t\t\t\t\t<div class=\"stepper-progress\">\n\t\t\t\t\t\t\t<div class=\"progress-detail\">\n\t\t\t\t\t\t\t\t{`${Math.min(this.activeStep, this.stepsCount)} of ${this.stepsCount}`}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{/* Slot for ifx-steps. */}\n\t\t\t\t<div class={`stepper-wrapper`}>\n\t\t\t\t\t<slot />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidRender() {\n\t\t/* Updating progress bar in compact version. */\n\t\tif (this.variant == \"compact\") {\n\t\t\tconst progressBar: HTMLElement =\n\t\t\t\tthis.el.shadowRoot.querySelector(\".stepper-progress\");\n\t\t\tprogressBar.style.setProperty(\n\t\t\t\t\"--pb\",\n\t\t\t\t`${(this.activeStep / this.stepsCount) * 100}%`,\n\t\t\t);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}