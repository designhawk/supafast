import{r as e,c as t,a as i,h as s,d as o}from"./p-CA_siwAQ.js";import{i as n}from"./p-CtINY9El.js";import{d as l,t as c}from"./p-DNHOWgWh.js";const r=()=>`.ifx-multiselect-container{position:relative;box-sizing:border-box;font-family:var(--ifx-font-family)}.ifx-multiselect-container.disabled .ifx-label-wrapper{color:#BFBBBB}.ifx-multiselect-container.disabled .ifx-multiselect-wrapper{background:#BFBBBB;color:#FFFFFF;border-color:#BFBBBB;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ifx-multiselect-container:hover{cursor:pointer}.ifx-multiselect-container .ifx-label-wrapper{font-size:1rem;line-height:1.5rem;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;max-width:100%}.ifx-multiselect-container .ifx-label-wrapper .required{margin-left:4px}.ifx-multiselect-container .ifx-label-wrapper .required.error{color:#CD002F}.ifx-multiselect-container .multi__select-caption{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;color:#1D1D1D;flex:none;order:1;align-self:stretch;flex-grow:0}.ifx-multiselect-container .multi__select-caption.error{color:#CD002F}.ifx-multiselect-container .multi__select-caption.disabled{color:#BFBBBB}.ifx-multiselect-container .ifx-multiselect-wrapper{background-color:#FFFFFF;box-sizing:border-box;display:flex;align-items:center;border:1px solid #8D8786;border-radius:1px;width:100%;font-weight:400;font-style:normal;height:40px;line-height:24px;padding:8px 16px;font-size:1rem;line-height:1.5rem}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible{outline:none}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible:not(.active):not(:active){outline:none}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible:not(.active):not(:active)::before{content:"";position:absolute;width:calc(100% + 4px);height:calc(100% + 4px);top:50%;left:50%;transform:translate(-50%, -50%);border:2px solid #0A8276;border-radius:2px}.ifx-multiselect-container .ifx-multiselect-wrapper.error{border-color:#CD002F}.ifx-multiselect-container .ifx-multiselect-wrapper.active{border-color:#0A8276 !important}.ifx-multiselect-container .ifx-multiselect-wrapper.active .icon-wrapper-up{display:flex;align-items:center;justify-content:center;padding-left:8px}.ifx-multiselect-container .ifx-multiselect-wrapper.active .icon-wrapper-down{display:none}.ifx-multiselect-container .ifx-multiselect-wrapper .icon-wrapper-up{display:none}.ifx-multiselect-container .ifx-multiselect-wrapper .icon-wrapper-down{display:flex;align-items:center;justify-content:center;padding-left:8px}.ifx-multiselect-container .ifx-multiselect-wrapper.is-flipped .ifx-multiselect-dropdown-menu{top:auto;bottom:100%}.ifx-multiselect-container .ifx-multiselect-input{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ifx-multiselect-container .ifx-multiselect-input.placeholder{opacity:0.5}.ifx-multiselect-container .ifx-multiselect-icon-container{margin-left:auto;display:flex;align-items:center;gap:8px}.ifx-multiselect-container .ifx-multiselect-icon-container .ifx-multiselect-icon-container{display:flex}.ifx-multiselect-container .ifx-multiselect-icon-container .icon-wrapper{display:flex;align-items:center;transition:transform 0.2s ease-in-out}.ifx-multiselect-container .ifx-multiselect-icon-container .icon-wrapper--open{transform:rotate(180deg)}.ifx-multiselect-container .ifx-clear-button{display:flex;align-items:center}.ifx-multiselect-container .ifx-clear-button.hide{display:none}.ifx-multiselect-container .ifx-multiselect-dropdown-menu{box-sizing:border-box;position:absolute;top:100%;left:0;width:100%;margin-top:4px;padding-bottom:8px;border:1px solid #EEEDED;background-color:#FFFFFF;box-shadow:0px 6px 9px 0px rgba(29, 29, 29, 0.1);max-height:300px;z-index:1000;display:flex;flex-direction:column}.ifx-multiselect-container:not(.disabled) .ifx-multiselect-wrapper:hover:not(.focus,:focus){border-color:#575352}.ifx-multiselect-dropdown-functions{padding:12px 16px;border-bottom:1px solid #EEEDED;flex-shrink:0}.ifx-multiselect-dropdown-search{margin-bottom:12px}.ifx-multiselect-dropdown-controls{display:flex;flex-wrap:wrap;justify-content:space-between;gap:8px}.ifx-multiselect-dropdown-controls .select-all-wrapper{display:flex}.ifx-multiselect-dropdown-controls .expand-collapse-controls{display:flex;gap:12px}.ifx-multiselect-dropdown-controls .control-item{font-size:16px;line-height:24px}.ifx-multiselect-dropdown-controls .control-item:hover{color:#0A8276}.ifx-multiselect-dropdown-controls .control-item:active{color:#08665C}.ifx-multiselect-dropdown-controls .control-item:focus{outline:none}.ifx-multiselect-dropdown-controls .control-item:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.ifx-multiselect-options{flex:1;overflow-y:auto;padding-top:8px}.ifx-multiselect-options.show-no-results .ifx-multiselect-no-results{display:block}.ifx-multiselect-no-results{padding-left:16px;padding-right:16px;display:none}`;function a(e,t){let i;return function s(...o){const n=()=>{clearTimeout(i);e(...o)};clearTimeout(i);i=setTimeout(n,t)}}const h=class{constructor(i){e(this,i);this.ifxSelect=t(this,"ifxSelect",7);this.ifxOpen=t(this,"ifxOpen",7);if(i.$hostElement$["s-ei"]){this.internals=i.$hostElement$["s-ei"]}else{this.internals=i.$hostElement$.attachInternals();i.$hostElement$["s-ei"]=this.internals}}name;disabled=false;required=false;error=false;caption="";label="";placeholder="";showSearch=true;showSelectAll=true;showClearButton=true;showExpandCollapse=true;noResultsMessage="No results found.";showNoResultsMessage=true;searchPlaceholder="Search";selectAllLabel="Select all";expandLabel="Expand";collapseLabel="Collapse";ariaMultiSelectLabel="Multi-select dropdown";ariaMultiSelectLabelledBy="";ariaMultiSelectDescribedBy="";ariaSearchLabel="Search options";ariaClearLabel="Clear all selections";ariaToggleLabel="Toggle dropdown";ariaSelectAllLabel="Select all options";ariaExpandAllLabel="Expand all categories";ariaCollapseAllLabel="Collapse all categories";internalError=false;persistentSelectedOptions=[];dropdownOpen=false;dropdownFlipped;searchTerm="";ifxSelect;ifxOpen;get el(){return i(this)}dropdownElement;internals;parseChildOptions(){const e=[];const t=Array.from(this.el.children);t.forEach(((t,i)=>{if(t.tagName==="IFX-MULTISELECT-OPTION"){const s=this.parseOptionElement(t,i);if(s){e.push(s)}}}));return e}parseOptionElement(e,t){const i=e.getAttribute("value")||`option-${t}`;const s=e.hasAttribute("selected");const o=e.hasAttribute("disabled");const n=e.hasAttribute("indeterminate");const l={value:i,selected:s,disabled:o,indeterminate:n};const c=Array.from(e.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION")).map(((e,t)=>this.parseOptionElement(e,t))).filter((e=>e!==null));if(c.length>0){l.children=c}return l}loadInitialOptions(){this.internalError=this.error;const e=this.parseChildOptions();const t=this.collectSelectedOptions(e);const i=t.filter((e=>!this.persistentSelectedOptions.some((t=>t.value==e.value))));this.persistentSelectedOptions=[...this.persistentSelectedOptions,...i]}collectSelectedOptions(e){let t=[];for(const i of e){if(i.selected){if(i.children&&i.children.length>0){t=t.concat(this.collectLeafOptions(i.children))}else{if(!t.some((e=>e.value===i.value))){t.push(i)}}}else{if(i.children&&i.children.length>0){t=t.concat(this.collectSelectedOptions(i.children))}}}return t}collectLeafOptions(e){let t=[];for(const i of e){if(i.children&&i.children.length>0){t=t.concat(this.collectLeafOptions(i.children))}else{t.push(i)}}return t}handleSearch=a((e=>{const t=e.value.toLowerCase();const i=t!=="";this.searchTerm=t;const s=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper");if(s){if(i){s.classList.remove("active")}else{const e=this.el.shadowRoot.querySelector("ifx-search-field");const t=e&&e.matches(":focus-within");if(!t){s.classList.add("active")}}}const o=this.el.shadowRoot.querySelector(".ifx-multiselect-options");if(o){if(i){o.classList.add("has-search-filter")}else{o.classList.remove("has-search-filter")}}requestAnimationFrame((()=>{const e=this.el.querySelectorAll("ifx-multiselect-option");e.forEach((e=>{const s=new CustomEvent("ifx-search-filter",{detail:{searchTerm:t,isActive:i}});e.dispatchEvent(s)}));if(i){setTimeout((()=>{const e=this.el.querySelectorAll("ifx-multiselect-option");let t=0;e.forEach((e=>{const i=window.getComputedStyle(e);const s=e.getBoundingClientRect();if(i.display!=="none"&&i.visibility!=="hidden"&&i.opacity!=="0"&&s.height>0){t++}}));const i=this.el.shadowRoot.querySelector(".ifx-multiselect-options");if(i){if(t===0){i.classList.add("show-no-results")}else{i.classList.remove("show-no-results")}}}),200)}else{const e=this.el.shadowRoot.querySelector(".ifx-multiselect-options");if(e){e.classList.remove("show-no-results")}}}))}),150);handleSearchFocus(e){const t=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper");if(t){if(e||this.searchTerm!==""){t.classList.remove("active")}else{t.classList.add("active")}}}positionDropdown(){const e=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper")?.getBoundingClientRect();const t=window.innerHeight-e.bottom;const i=e.top;if(i>t&&e.height>t||e.bottom>window.innerHeight){this.dropdownFlipped=true}else{this.dropdownFlipped=false}}updateSlotBasedSelections(e=false){const t=this.el.querySelectorAll("ifx-multiselect-option");const i=[];t.forEach((e=>{const t=e["__stencil_instance"];if(t&&t.selected&&!t.hasChildren){i.push({value:t.value,selected:true,disabled:t.disabled,label:t.getTextContent()||t.value})}}));this.persistentSelectedOptions=i;if(e){this.ifxSelect.emit(this.persistentSelectedOptions)}}updateInitialParentStates(){const e=this.el.querySelectorAll("ifx-multiselect-option");const t=Array.from(e).map((e=>({element:e,instance:e["__stencil_instance"],depth:parseInt(e.getAttribute("data-level")||"0")}))).filter((e=>e.instance)).sort(((e,t)=>t.depth-e.depth));t.forEach((({instance:e})=>{if(e.hasChildren){this.updateParentState(e)}}))}updateParentState(e){const t=Array.from(e.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION")).map((e=>e["__stencil_instance"])).filter((e=>e!==null));const i=t.filter((e=>e.selected)).length;const s=t.filter((e=>e.indeterminate)).length;const o=t.length;if(i===o&&s===0){e.selected=true;e.indeterminate=false}else if(i===0&&s===0){e.selected=false;e.indeterminate=false}else{e.selected=false;e.indeterminate=true}}async componentDidLoad(){if(!n(this.el)){const e=l();c("ifx-multiselect",await e)}setTimeout((()=>{this.positionDropdown()}),500);this.el.addEventListener("ifx-option-changed",(e=>{const t=e.target?.__stencil_instance;if(t&&!t.hasChildren){this.updateSlotBasedSelections(true)}}));setTimeout((()=>{this.updateSlotBasedSelections(false);this.updateInitialParentStates()}),100)}componentWillLoad(){this.loadInitialOptions()}updateInternalError(){this.internalError=this.error}onSelectionChange(e,t){const i=new FormData;e.forEach((e=>i.append(this.name,e.value)))}collapseAll(){const e=this.el.querySelectorAll("ifx-multiselect-option");e.forEach((e=>{const t=e["__stencil_instance"];if(t&&t.hasChildren){t.isExpanded=false}}))}expandAll(){const e=this.el.querySelectorAll("ifx-multiselect-option");e.forEach((e=>{const t=e["__stencil_instance"];if(t&&t.hasChildren){t.isExpanded=true}}))}selectAll(){this.resetSearch();const e=this.el.querySelectorAll("ifx-multiselect-option");e.forEach((e=>{const t=e["__stencil_instance"];if(t){if(t.hasChildren){t.isExpanded=true}else{t.selected=true}}}));setTimeout((()=>{this.updateInitialParentStates();this.updateSlotBasedSelections(false);this.ifxSelect.emit(this.persistentSelectedOptions)}),0)}async clearSelection(){const e=this.el.querySelectorAll("ifx-multiselect-option");e.forEach((e=>{const t=e["__stencil_instance"];if(t){t.selected=false;t.indeterminate=false;if(t.hasChildren){t.isExpanded=false}}}));this.persistentSelectedOptions=[];setTimeout((()=>{this.updateSlotBasedSelections(false);this.ifxSelect.emit(this.persistentSelectedOptions)}),0)}handleDocumentClick=e=>{const t=e.composedPath();if(!t.includes(this.dropdownElement)){this.dropdownOpen=false;document.removeEventListener("click",this.handleDocumentClick);this.resetSearch();this.ifxOpen.emit(this.dropdownOpen)}};toggleDropdown(){this.dropdownOpen=!this.dropdownOpen;setTimeout((()=>{if(this.dropdownOpen){document.addEventListener("click",this.handleDocumentClick)}else{this.resetSearch()}this.ifxOpen.emit(this.dropdownOpen)}),0)}resetSearch(){this.searchTerm="";const e=this.el.shadowRoot.querySelector("ifx-search-field");if(e){e.value=""}const t=this.el.shadowRoot.querySelector(".ifx-multiselect-options");if(t){t.classList.remove("has-search-filter")}const i=this.el.querySelectorAll("ifx-multiselect-option");i.forEach((e=>{const t=new CustomEvent("ifx-search-filter",{detail:{searchTerm:"",isActive:false}});e.dispatchEvent(t)}))}handleWrapperClick(e){this.positionDropdown();if(e.currentTarget===e.target){this.toggleDropdown()}}handleKeyDown(e){if(this.disabled)return;if(!this.dropdownOpen){switch(e.code){case"Enter":case"Space":case"ArrowDown":e.preventDefault();this.toggleDropdown();break}return}switch(e.code){case"Escape":e.preventDefault();this.toggleDropdown();break;case"Enter":case"Space":{const t=e.target;if(!t.closest(".ifx-multiselect-dropdown-functions")){e.preventDefault();this.toggleDropdown()}break}case"ArrowDown":case"ArrowUp":e.preventDefault();this.focusFirstOption();break}}focusFirstOption(){const e=this.el.querySelector("ifx-multiselect-option:not(.search-hidden)");if(e){const t=e.shadowRoot?.querySelector(".option-label");t?.focus()}}renderSelectAll(){const e=this.el.querySelectorAll("ifx-multiselect-option");const t=Array.from(e).filter((e=>!e.hasChildren));const i=Array.from(e).filter((e=>!e.hasChildren&&e.selected));const o=t.length>0&&i.length===t.length;const n=e=>{if(e){e.preventDefault();e.stopPropagation()}if(o){this.clearSelection()}else{this.selectAll()}};return s("div",{class:"select-all-wrapper"},s("ifx-checkbox",{id:"selectAll",checked:o,size:"s","aria-label":this.ariaSelectAllLabel,onClick:n,onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();n(e)}}},this.selectAllLabel))}renderNoResultsMessage(){return s("div",{class:"ifx-multiselect-no-results"},s("div",{class:"no-results-content"},s("span",{class:"no-results-text"},this.noResultsMessage)))}render(){const e=this.persistentSelectedOptions.map((e=>e.label||e.value)).join(", ");const t=this.persistentSelectedOptions.length>0;let i=false;const o=this.el.querySelectorAll("ifx-multiselect-option");if(o.length>0){i=Array.from(o).every((e=>e.children.length===0))}return s("div",{key:"4e19eee53f458103cdc03851f7f0ba0db1b7ab24",class:`ifx-multiselect-container ${this.disabled&&!this.error?"disabled":""}`,ref:e=>this.dropdownElement=e},s("div",{key:"9f7bb71003ce3687e4a316203b42118cc7e640af",class:"ifx-label-wrapper"},this.label&&s("span",{key:"d215d4d4cb8c318f318988f6d1d7b1d420a57bc4",class:"wrapper-label"},s("span",{key:"1c638aad8c1c6c5b579e7aefe55d8cf933b5b8cf"},this.label),this.required&&s("span",{key:"741befc8bd52c952144963cb934a5137051d4278",class:`required ${this.error?"error":""}`},"*"))),s("div",{key:"fc7e0b1037fdb0d9960b49dcdf66e922981e2570",class:`ifx-multiselect-wrapper\n        ${this.dropdownOpen?"active":""}\n        ${this.dropdownFlipped?"is-flipped":""}\n        ${this.internalError?"error":""}\n        ${this.disabled&&!this.error?"disabled":""}`,role:"combobox","aria-label":this.ariaMultiSelectLabel,"aria-labelledby":this.ariaMultiSelectLabelledBy||undefined,"aria-describedby":this.ariaMultiSelectDescribedBy||undefined,"aria-expanded":this.dropdownOpen,"aria-haspopup":"listbox","aria-disabled":this.disabled&&!this.error,tabindex:"0",onClick:this.disabled&&!this.error?undefined:e=>this.handleWrapperClick(e),onKeyDown:this.disabled&&!this.error?undefined:e=>this.handleKeyDown(e)},s("div",{key:"0201f2d814edd5d1419b40d9fcf46f0199f1478f",class:`ifx-multiselect-input\n          ${t?"":"placeholder"}\n          `,onClick:this.disabled&&!this.error?undefined:()=>this.toggleDropdown()},t?e:this.placeholder),this.dropdownOpen&&s("div",{key:"0cd349f15be478d2d45ee6c210449371e9c40972",class:"ifx-multiselect-dropdown-menu"},(this.showSearch||this.showSelectAll||this.showExpandCollapse&&!i)&&s("div",{key:"50ef9d298ebe178f2d3cbd5160eb150b8a3209ca",class:"ifx-multiselect-dropdown-functions",onClick:e=>e.stopPropagation()},this.showSearch&&s("div",{key:"0fd4dadbeeb4d62b2c106e9af8a0282c4ee0f919",class:"ifx-multiselect-dropdown-search"},s("ifx-search-field",{key:"e290f2f00763de3951b31d01d89ea01ea284892a",class:"search-input",placeholder:this.searchPlaceholder,size:"s","show-delete-icon":"true","aria-label":this.ariaSearchLabel,onKeyDown:e=>{e.stopPropagation()},onIfxInput:e=>this.handleSearch(e.target),onFocus:()=>this.handleSearchFocus(true),onBlur:()=>this.handleSearchFocus(false)})),s("div",{key:"19035f2c6c69d3c1347bd0f094e2a3fd2593fc63",class:"ifx-multiselect-dropdown-controls"},this.showSelectAll&&this.renderSelectAll(),this.showExpandCollapse&&!i&&s("div",{key:"fb8f66a2207dddd9854997bc7c357a2919d6f484",class:"expand-collapse-controls"},s("span",{key:"7b37f0aa6bf1caa7b8ce013fd9b858aa36edcb60",class:"control-item",role:"button",tabIndex:0,"aria-label":this.ariaExpandAllLabel,onClick:e=>{e.stopPropagation();this.expandAll()},onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.expandAll()}}},this.expandLabel),s("span",{key:"61cbc3cfb9a9ea953a76756d3b408826df744065",class:"control-item",role:"button",tabIndex:0,"aria-label":this.ariaCollapseAllLabel,onClick:e=>{e.stopPropagation();this.collapseAll()},onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.collapseAll()}}},this.collapseLabel)))),s("div",{key:"0eb3f2c438b647f1eeaf2e8eff736b71696cc764",class:"ifx-multiselect-options",role:"listbox","aria-multiselectable":"true"},s("slot",{key:"8712ddc2c75db4f869463adc40bd9036ba864141"}),this.searchTerm&&this.showNoResultsMessage&&this.renderNoResultsMessage())),s("div",{key:"eef9377329f7293b259bcd7209a7a5f027f121ed",class:"ifx-multiselect-icon-container"},this.persistentSelectedOptions.length>0&&s("div",{key:"9563bb568c85172482d506ff8030b91f31562a14",class:`ifx-clear-button ${!this.showClearButton?"hide":""}`,onClick:this.disabled&&!this.error?undefined:()=>this.clearSelection()},s("ifx-icon",{key:"60bb69c165607832c7c7370fd60dc4c6d1d28d25",icon:"cRemove16"})),s("div",{key:"a11767d740b34ffe49955f26f5d85c552ed959c7",class:"icon-wrapper-up",onClick:this.disabled&&!this.error?undefined:()=>this.toggleDropdown()},s("ifx-icon",{key:"icon-up",icon:"chevron-up-16"})),s("div",{key:"f868228fa05e34ed9d6ed9817aeaa9ce65a946ce",class:"icon-wrapper-down",onClick:this.disabled&&!this.error?undefined:()=>this.toggleDropdown()},s("ifx-icon",{key:"icon-down",icon:"chevron-down-16"})))),this.caption&&s("div",{key:"b0a0c736bf9b564d9008f3a017b8a72d3dbfb9d3",class:`multi__select-caption ${this.error?"error":""} ${this.disabled&&!this.error?"disabled":""}`},this.caption))}static get watchers(){return{error:[{updateInternalError:0}],persistentSelectedOptions:[{onSelectionChange:0}]}}};h.style=r();const d=()=>`:host{display:block;width:100%}.option{display:flex;flex-direction:column;position:relative;cursor:pointer;list-style:none}.option.option--expanded{position:relative}.option.option--has-children{position:relative}.option.option--has-children .option-item>.chevron-wrapper{display:flex}.option--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.option.search-hidden{display:none !important}.option.search-match .option-item .option-label .search-highlight{font-weight:bold}.option-item{display:flex;flex-direction:row;align-items:center;white-space:nowrap;min-height:20px;padding:4px 16px;background-color:#FFFFFF;transition:background-color 0.2s ease-in-out}.option-item:hover{background-color:#F7F7F7}.option--disabled .option-item:hover{background-color:transparent}.option-children{display:block}.chevron-wrapper{display:none;align-items:center;justify-content:center;margin-right:8px;width:20px;height:20px;flex-shrink:0}.chevron-wrapper:focus{outline:none}.chevron-wrapper:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--has-children .chevron-wrapper{display:flex}.chevron-wrapper .chevron{transition:transform 0.2s ease-in-out;color:#3C3A39}.chevron-wrapper .chevron.chevron--expanded{transform:rotate(90deg)}.chevron-wrapper .chevron.chevron--collapsed{transform:rotate(0deg)}.checkbox-wrapper{display:flex;align-items:center;margin-right:8px;flex-shrink:0}.option-label{flex-grow:1;display:flex;align-items:center;cursor:pointer;padding:2px 0;font-size:0.875rem}.option-label:focus{outline:none}.option-label:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--disabled .option-label{cursor:not-allowed;color:#BFBBBB}`;const f=class{constructor(t){e(this,t)}get el(){return i(this)}value;selected=false;disabled=false;indeterminate=false;isExpanded=false;hasChildren=false;depth=0;searchTerm="";isSearchActive=false;isSearchDisabled=false;componentWillLoad(){this.hasChildren=this.el.children.length>0;this.depth=this.calculateDepth();this.el.setAttribute("data-level",this.depth.toString());if(this.hasChildren){const e=this.hasAnySelectedChildren();if(e){this.isExpanded=true}}}componentDidLoad(){this.el["__stencil_instance"]=this;this.notifyMultiselect();this.el.addEventListener("ifx-search-filter",this.handleSearchFilter)}disconnectedCallback(){this.el.removeEventListener("ifx-search-filter",this.handleSearchFilter)}handleSearchFilter=e=>{const{searchTerm:t,isActive:i}=e.detail;this.searchTerm=t.toLowerCase();this.isSearchActive=i;requestAnimationFrame((()=>{this.updateSearchClasses()}))};updateSearchClasses(){const e=this.el.shadowRoot?.querySelector(".option");if(!e)return;if(!this.isSearchActive){e.classList.remove("search-hidden","search-parent","search-match");this.removeHighlighting();this.isSearchDisabled=false;return}const t=this.getTextContent().toLowerCase();const i=t.includes(this.searchTerm);const s=this.hasMatchingParent();requestAnimationFrame((()=>{const t=this.hasMatchingChildren();e.classList.remove("search-hidden","search-parent","search-match");this.isSearchDisabled=false;if(i&&!this.hasChildren){e.classList.add("search-match");this.highlightSearchTerm()}else if(i&&this.hasChildren){e.classList.add("search-match");this.highlightSearchTerm();this.isExpanded=true}else if(!i&&this.hasChildren&&t){e.classList.add("search-parent");this.removeHighlighting();this.isExpanded=true;this.isSearchDisabled=true}else if(s){e.classList.add("search-match");this.removeHighlighting()}else{e.classList.add("search-hidden");this.removeHighlighting()}}))}highlightSearchTerm(){if(!this.searchTerm)return;const e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;const t=e.querySelector("slot");if(!t)return;this.removeHighlighting();const i=this.getTextContent();const s=this.searchTerm.toLowerCase();const o=i.toLowerCase();if(!o.includes(s))return;const n=o.indexOf(s);if(n===-1)return;const l=i.substring(0,n);const c=i.substring(n,n+s.length);const r=i.substring(n+s.length);const a=document.createElement("span");a.className="highlighted-text";if(l){a.appendChild(document.createTextNode(l))}const h=document.createElement("strong");h.className="search-highlight";h.textContent=c;a.appendChild(h);if(r){a.appendChild(document.createTextNode(r))}e.setAttribute("data-original-content","true");t.style.display="none";e.appendChild(a)}removeHighlighting(){const e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;const t=e.querySelector("slot");const i=e.querySelector(".highlighted-text");if(i){e.removeChild(i)}if(t){t.style.display=""}e.removeAttribute("data-original-content")}getTextContent(){let e="";Array.from(this.el.childNodes).forEach((t=>{if(t.nodeType===Node.TEXT_NODE){e+=t.textContent?.trim()||""}}));return e||this.value||""}hasMatchingChildren(){if(!this.hasChildren)return false;const e=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return e.some((e=>{const t=e["__stencil_instance"];if(!t)return false;const i=t.getTextContent().toLowerCase();const s=i.includes(this.searchTerm);const o=t.hasMatchingChildren();return s||o}))}hasMatchingParent(){let e=this.el.parentElement;while(e&&e.tagName==="IFX-MULTISELECT-OPTION"){const t=e["__stencil_instance"];if(t){const e=t.getTextContent().toLowerCase();if(e.includes(this.searchTerm)){return true}}e=e.parentElement}return false}calculateDepth(){let e=0;let t=this.el.parentElement;while(t&&t.tagName!=="IFX-MULTISELECT"){if(t.tagName==="IFX-MULTISELECT-OPTION"){e++}t=t.parentElement}return e}handleClick(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;e.stopPropagation();if(e.type==="click"&&e.target.closest(".chevron-wrapper")){this.toggleExpansion();return}let t;if(this.indeterminate){t=true}else{t=!this.selected}this.selected=t;this.indeterminate=false;if(this.hasChildren){this.isExpanded=t;requestAnimationFrame((()=>{this.selectAllChildren(t);this.expandAllChildren(t)}))}this.updateParentStates();this.notifyMultiselect()}handleKeyDown(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;const t=e.target;if(t.closest(".chevron-wrapper")||t.closest(".checkbox-wrapper")){return}if(e.key!=="ArrowUp"&&e.key!=="ArrowDown"){e.stopPropagation()}if(e.key==="ArrowRight"&&this.hasChildren){this.isExpanded=true}if(e.key==="ArrowLeft"&&this.hasChildren){this.isExpanded=false}}notifyMultiselect(){const e=new CustomEvent("ifx-option-changed",{bubbles:true,detail:{value:this.value,selected:this.selected,indeterminate:this.indeterminate}});this.el.dispatchEvent(e)}selectAllChildren(e){const t=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));t.forEach((t=>{const i=t["__stencil_instance"];if(i){i.selected=e;i.indeterminate=false;if(i.hasChildren){i.isExpanded=e;i.selectAllChildren(e)}i.notifyMultiselect?.()}}))}expandAllChildren(e){const t=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));t.forEach((t=>{const i=t["__stencil_instance"];if(i&&i.hasChildren){i.isExpanded=e;i.expandAllChildren(e)}}))}updateParentStates(){let e=this.el.parentElement;while(e&&e.tagName==="IFX-MULTISELECT-OPTION"){const t=e["__stencil_instance"];if(!t){e=e.parentElement;continue}const i=Array.from(e.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION")).map((e=>e["__stencil_instance"])).filter((e=>e!==null));const s=i.filter((e=>e.selected)).length;const o=i.filter((e=>e.indeterminate)).length;const n=i.length;if(s===n&&o===0){t.selected=true;t.indeterminate=false}else if(s===0&&o===0){t.selected=false;t.indeterminate=false}else{t.selected=false;t.indeterminate=true}t.notifyMultiselect?.();e=e.parentElement}}toggleExpansion(){this.isExpanded=!this.isExpanded}handleCheckboxClick=e=>{if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;e.stopPropagation();let t;if(this.indeterminate){t=true}else{t=!this.selected}this.selected=t;this.indeterminate=false;if(this.hasChildren){this.isExpanded=t;requestAnimationFrame((()=>{this.selectAllChildren(t);this.expandAllChildren(t)}))}this.updateParentStates();this.notifyMultiselect()};handleHeaderClick=e=>{e.stopPropagation();if(!this.disabled&&!(this.isSearchActive&&this.isSearchDisabled)){this.handleClick(e)}};hasAnySelectedChildren(){const e=Array.from(this.el.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return e.some((e=>{const t=e.hasAttribute("selected");const i=this.checkForSelectedDescendants(e);return t||i}))}checkForSelectedDescendants(e){const t=Array.from(e.children).filter((e=>e.tagName==="IFX-MULTISELECT-OPTION"));return t.some((e=>{const t=e.hasAttribute("selected");const i=this.checkForSelectedDescendants(e);return t||i}))}render(){let e=false;const t=this.el.closest("ifx-multiselect");if(t){const i=Array.from(t.querySelectorAll("ifx-multiselect-option"));e=i.every((e=>e.children.length===0))}const i=this.depth*28+16;const n=this.hasChildren?0:28;const l=i+n;const c=e?undefined:{paddingLeft:`${l}px`};return s(o,{key:"02456f3eb7c3cb9a43bbed255d0c4f8f7773e637"},s("div",{key:"4496cbfb613844d6643ad8796777b55d4ac06dbd",class:{option:true,"option--has-children":this.hasChildren,"option--expanded":this.isExpanded,"option--disabled":this.disabled,"option--selected":this.selected},role:"option","aria-expanded":this.hasChildren?this.isExpanded?"true":"false":undefined,"aria-selected":this.selected?"true":"false","aria-disabled":this.disabled?"true":"false","data-level":this.depth,"data-value":this.value},s("div",{key:"355abb8b4e86fb26b5cf8a878e6c15a70d97b9ae",class:"option-item",style:c},s("div",{key:"f9623e8ee76f8cee3679b6aaecf130d988e20c9d",class:"chevron-wrapper",tabIndex:this.hasChildren?0:-1,role:this.hasChildren?"button":undefined,"aria-label":this.hasChildren?this.isExpanded?"Collapse":"Expand":undefined,onClick:e=>{e.stopPropagation();this.toggleExpansion()},onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.toggleExpansion()}}},this.hasChildren&&s("ifx-icon",{key:"d7bb92cbc69bd4ac5f2ce0062070f7b62cf0f0c0",class:`chevron ${this.isExpanded?"chevron--expanded":"chevron--collapsed"}`,icon:"chevron-right-16"})),s("div",{key:"b2abd3d5eb547cd544606b5885e6e93445d5c7ae",class:"checkbox-wrapper",onClick:e=>e.stopPropagation()},s("ifx-checkbox",{key:"ea0c810dc4813cebdb993e413b9d9516e0c79618",size:"s",checked:this.isSearchActive&&this.isSearchDisabled?false:this.indeterminate?false:this.selected,indeterminate:this.isSearchActive&&this.isSearchDisabled?false:this.indeterminate,onClick:this.handleCheckboxClick,disabled:this.disabled||this.isSearchActive&&this.isSearchDisabled,onKeyDown:e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();e.stopPropagation();this.handleCheckboxClick(e)}}})),s("div",{key:"95d76f425080089e93fec232bc984b12dd7a1273",class:"option-label",onClick:this.handleHeaderClick,tabIndex:-1},s("slot",{key:"d4b55c67d8f31bd8b6dfc4756c1eaa7367b183fd"}))),this.isExpanded&&s("div",{key:"4765b74ea8288daf72b6b0f0ce1ecf986f2a0a65",class:"option-children"},s("slot",{key:"75ca13e8068d2f6d2642d44e2f9220a2431b1d41",name:"children"}))))}};f.style=d();export{h as ifx_multiselect,f as ifx_multiselect_option};
//# sourceMappingURL=p-a3610912.entry.js.map