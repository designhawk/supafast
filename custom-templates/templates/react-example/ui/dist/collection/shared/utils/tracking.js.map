{"version":3,"file":"tracking.js","sourceRoot":"","sources":["../../../src/shared/utils/tracking.ts"],"names":[],"mappings":"AASA,MAAM,iBAAiB,GACtB,OAAO,OAAO,KAAK,WAAW;IAC9B,OAAO,CAAC,GAAG;IACX,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM,CAAC;AAEjC,SAAS,kBAAkB;IAC1B,IAAI,iBAAiB,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAClB,MAAM,CAAC,IAAI,GAAG,GAAG,EAAE,GAAE,CAAC,CAAC;QACxB,CAAC;QACD,OAAO;IACR,CAAC;IAED,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE;QACrB,IAAI,OAAO,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE,CAAC;YAC3C,MAAM,CAAC,UAAU,GAAG;gBACnB,MAAM,EAAE,4BAA4B;gBACpC,WAAW,EAAE,IAAI;gBACjB,YAAY,EAAE,EAAE;aAChB,CAAC;QACH,CAAC;QAED,IAAI,MAAM,CAAC,MAAM,CAAC;YAAE,OAAO;QAE3B,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE;YACtB,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;gBAC3B,CAAC,GAAG,EAAE,CAAC;YACR,CAAC;YACD,IAAI,OAAO,MAAM,CAAC,SAAS,KAAK,QAAQ,EAAE,CAAC;gBAC1C,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC;YACvB,CAAC;YACD,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC;QAEF,CAAC,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAEvB,yCAAyC;QACzC,EAAE,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClC,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;YACzB,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACZ,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,UAAU,CAAC;YAC9C,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACnC,CAAC;IACF,CAAC,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AACxB,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,aAAqB,EAAE,WAAmB;IACxE,MAAM,gBAAgB,GAAG,CAAC,MAAM,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC;IACxD,IAAI,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;QAC5C,OAAO;IACR,CAAC;IAED,IAAI,CAAC,MAAM,CAAC,2BAA2B,EAAE,CAAC;QACzC,MAAM,CAAC,2BAA2B,GAAG,IAAI,GAAG,EAAE,CAAC;IAChD,CAAC;IAED,IAAI,MAAM,CAAC,2BAA2B,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC;QAC3D,OAAO;IACR,CAAC;IAED,MAAM,CAAC,2BAA2B,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAEtD,IAAI,CAAC,MAAM,CAAC,IAAI;QAAE,kBAAkB,EAAE,CAAC;IAEvC,MAAM,CAAC,IAAI,CAAC;QACX,UAAU,EAAE,uBAAuB;QACnC,cAAc,EAAE,aAAa;QAC7B,WAAW,EAAE,WAAW;KACxB,CAAC,CAAC;AACJ,CAAC;AAED,eAAe,cAAc,CAAC","sourcesContent":["declare global {\n\tinterface Window {\n\t\tbtntConfig?: any;\n\t\tbtntQueue?: any[];\n\t\tbtnt?: (data: object) => void;\n\t\tINFINEON_TRACKED_COMPONENTS?: Set<string>;\n\t}\n}\n\nconst isTestEnvironment =\n\ttypeof process !== \"undefined\" &&\n\tprocess.env &&\n\tprocess.env.NODE_ENV === \"test\";\n\nfunction initializeTracking() {\n\tif (isTestEnvironment) {\n\t\tif (!window.btnt) {\n\t\t\twindow.btnt = () => {};\n\t\t}\n\t\treturn;\n\t}\n\n\t((t, r, _kk, n, pp) => {\n\t\tif (typeof window.btntConfig !== \"object\") {\n\t\t\twindow.btntConfig = {\n\t\t\t\tdomain: \"https://ssgtm.infineon.com\",\n\t\t\t\twithCookies: true,\n\t\t\t\tmaxBatchSize: 10,\n\t\t\t};\n\t\t}\n\n\t\tif (window[\"btnt\"]) return;\n\n\t\twindow[\"btnt\"] = (z) => {\n\t\t\tif (typeof z !== \"object\") {\n\t\t\t\tz = {};\n\t\t\t}\n\t\t\tif (typeof window.btntQueue !== \"object\") {\n\t\t\t\twindow.btntQueue = [];\n\t\t\t}\n\t\t\twindow.btntQueue.push(z);\n\t\t};\n\n\t\tn = t.createElement(r);\n\n\t\t// Add safety check for test environments\n\t\tpp = t.getElementsByTagName(r)[0];\n\t\tif (pp && pp.parentNode) {\n\t\t\tn.async = 1;\n\t\t\tn.src = window.btntConfig.domain + \"/btnt.js\";\n\t\t\tpp.parentNode.insertBefore(n, pp);\n\t\t}\n\t})(document, \"script\");\n}\n\nexport function trackComponent(componentName: string, environment: string) {\n\tconst skipEnvironments = [\"jest\", \"localhost\", \"error\"];\n\tif (skipEnvironments.includes(environment)) {\n\t\treturn;\n\t}\n\n\tif (!window.INFINEON_TRACKED_COMPONENTS) {\n\t\twindow.INFINEON_TRACKED_COMPONENTS = new Set();\n\t}\n\n\tif (window.INFINEON_TRACKED_COMPONENTS.has(componentName)) {\n\t\treturn;\n\t}\n\n\twindow.INFINEON_TRACKED_COMPONENTS.add(componentName);\n\n\tif (!window.btnt) initializeTracking();\n\n\twindow.btnt({\n\t\tevent_name: \"component_initialized\",\n\t\tcomponent_name: componentName,\n\t\tenvironment: environment,\n\t});\n}\n\nexport default trackComponent;\n"]}