{"version":3,"file":"multiselect.js","sourceRoot":"","sources":["../../../../src/components/select/multi-select/multiselect.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tAttachInternals,\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tMethod,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../../../shared/utils/dom-utils\";\nimport { detectFramework } from \"../../../shared/utils/framework-detection\";\nimport { trackComponent } from \"../../../shared/utils/tracking\";\nimport type { Option } from \"./interfaces\";\n\nfunction debounce(func, wait) {\n\tlet timeout;\n\treturn function executedFunction(...args) {\n\t\tconst later = () => {\n\t\t\tclearTimeout(timeout);\n\t\t\tfunc(...args);\n\t\t};\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t};\n}\n\n@Component({\n\ttag: \"ifx-multiselect\",\n\tstyleUrl: \"multiselect.scss\",\n\tshadow: true,\n\t// formAssociated: true\n})\nexport class Multiselect {\n\t@Prop() name: string;\n\t@Prop() disabled: boolean = false;\n\t@Prop() required: boolean = false;\n\t@Prop() error: boolean = false;\n\t@Prop() caption: string = \"\";\n\t@Prop() label: string = \"\";\n\t@Prop() placeholder: string = \"\";\n\t@Prop() showSearch: boolean = true;\n\t@Prop() showSelectAll: boolean = true;\n\t@Prop() showClearButton: boolean = true;\n\t@Prop() showExpandCollapse: boolean = true;\n\t@Prop() noResultsMessage: string = \"No results found.\";\n\t@Prop() showNoResultsMessage: boolean = true;\n\t@Prop() searchPlaceholder: string = \"Search\";\n\t@Prop() selectAllLabel: string = \"Select all\";\n\t@Prop() expandLabel: string = \"Expand\";\n\t@Prop() collapseLabel: string = \"Collapse\";\n\t@Prop() ariaMultiSelectLabel: string = \"Multi-select dropdown\";\n\t@Prop() ariaMultiSelectLabelledBy: string = \"\";\n\t@Prop() ariaMultiSelectDescribedBy: string = \"\";\n\t@Prop() ariaSearchLabel: string = \"Search options\";\n\t@Prop() ariaClearLabel: string = \"Clear all selections\";\n\t@Prop() ariaToggleLabel: string = \"Toggle dropdown\";\n\t@Prop() ariaSelectAllLabel: string = \"Select all options\";\n\t@Prop() ariaExpandAllLabel: string = \"Expand all categories\";\n\t@Prop() ariaCollapseAllLabel: string = \"Collapse all categories\";\n\n\t@State() internalError: boolean = false;\n\t@State() persistentSelectedOptions: Option[] = [];\n\t@State() dropdownOpen = false;\n\t@State() dropdownFlipped: boolean;\n\t@State() searchTerm: string = \"\";\n\n\t@Event() ifxSelect: EventEmitter;\n\t@Event() ifxOpen: EventEmitter;\n\n\t@Element() el: HTMLElement;\n\tdropdownElement!: HTMLElement;\n\n\t@AttachInternals() internals: ElementInternals;\n\tprivate parseChildOptions(): Option[] {\n\t\tconst options: Option[] = [];\n\t\tconst childElements = Array.from(this.el.children);\n\n\t\tchildElements.forEach((child, index) => {\n\t\t\tif (child.tagName === \"IFX-MULTISELECT-OPTION\") {\n\t\t\t\tconst option = this.parseOptionElement(child as HTMLElement, index);\n\t\t\t\tif (option) {\n\t\t\t\t\toptions.push(option);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn options;\n\t}\n\n\tprivate parseOptionElement(\n\t\telement: HTMLElement,\n\t\tindex: number,\n\t): Option | null {\n\t\tconst value = element.getAttribute(\"value\") || `option-${index}`;\n\t\tconst selected = element.hasAttribute(\"selected\");\n\t\tconst disabled = element.hasAttribute(\"disabled\");\n\t\tconst indeterminate = element.hasAttribute(\"indeterminate\");\n\n\t\tconst option: Option = {\n\t\t\tvalue,\n\t\t\tselected,\n\t\t\tdisabled,\n\t\t\tindeterminate,\n\t\t};\n\n\t\tconst nestedOptions = Array.from(element.children)\n\t\t\t.filter((child) => child.tagName === \"IFX-MULTISELECT-OPTION\")\n\t\t\t.map((child, childIndex) =>\n\t\t\t\tthis.parseOptionElement(child as HTMLElement, childIndex),\n\t\t\t)\n\t\t\t.filter((opt) => opt !== null) as Option[];\n\n\t\tif (nestedOptions.length > 0) {\n\t\t\toption.children = nestedOptions;\n\t\t}\n\n\t\treturn option;\n\t}\n\n\tloadInitialOptions() {\n\t\tthis.internalError = this.error;\n\t\tconst allOptions = this.parseChildOptions();\n\t\tconst initiallySelected = this.collectSelectedOptions(allOptions);\n\t\tconst initiallySelectedNotInState = initiallySelected.filter(\n\t\t\t(init) =>\n\t\t\t\t!this.persistentSelectedOptions.some((opt) => opt.value == init.value),\n\t\t);\n\t\tthis.persistentSelectedOptions = [\n\t\t\t...this.persistentSelectedOptions,\n\t\t\t...initiallySelectedNotInState,\n\t\t];\n\t}\n\n\tprivate collectSelectedOptions(options: Option[]): Option[] {\n\t\tlet selectedOptions: Option[] = [];\n\n\t\tfor (const option of options) {\n\t\t\tif (option.selected) {\n\t\t\t\tif (option.children && option.children.length > 0) {\n\t\t\t\t\tselectedOptions = selectedOptions.concat(\n\t\t\t\t\t\tthis.collectLeafOptions(option.children),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!selectedOptions.some(\n\t\t\t\t\t\t\t(existingOption) => existingOption.value === option.value,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tselectedOptions.push(option);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (option.children && option.children.length > 0) {\n\t\t\t\t\tselectedOptions = selectedOptions.concat(\n\t\t\t\t\t\tthis.collectSelectedOptions(option.children),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn selectedOptions;\n\t}\n\n\tprivate collectLeafOptions(children: Option[]): Option[] {\n\t\tlet leafOptions = [];\n\n\t\tfor (const child of children) {\n\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\tleafOptions = leafOptions.concat(\n\t\t\t\t\tthis.collectLeafOptions(child.children),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tleafOptions.push(child);\n\t\t\t}\n\t\t}\n\t\treturn leafOptions;\n\t}\n\n\thandleSearch = debounce((targetElement: HTMLInputElement) => {\n\t\tconst searchTerm = targetElement.value.toLowerCase();\n\t\tconst isSearchActive = searchTerm !== \"\";\n\n\t\tthis.searchTerm = searchTerm;\n\n\t\tconst wrapper = this.el.shadowRoot.querySelector(\n\t\t\t\".ifx-multiselect-wrapper\",\n\t\t);\n\t\tif (wrapper) {\n\t\t\tif (isSearchActive) {\n\t\t\t\twrapper.classList.remove(\"active\");\n\t\t\t} else {\n\t\t\t\tconst searchField =\n\t\t\t\t\tthis.el.shadowRoot.querySelector(\"ifx-search-field\");\n\t\t\t\tconst searchFieldHasFocus =\n\t\t\t\t\tsearchField && searchField.matches(\":focus-within\");\n\t\t\t\tif (!searchFieldHasFocus) {\n\t\t\t\t\twrapper.classList.add(\"active\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst optionsContainer = this.el.shadowRoot.querySelector(\n\t\t\t\".ifx-multiselect-options\",\n\t\t);\n\t\tif (optionsContainer) {\n\t\t\tif (isSearchActive) {\n\t\t\t\toptionsContainer.classList.add(\"has-search-filter\");\n\t\t\t} else {\n\t\t\t\toptionsContainer.classList.remove(\"has-search-filter\");\n\t\t\t}\n\t\t}\n\n\t\trequestAnimationFrame(() => {\n\t\t\tconst allOptions = this.el.querySelectorAll(\"ifx-multiselect-option\");\n\t\t\tallOptions.forEach((option) => {\n\t\t\t\tconst searchEvent = new CustomEvent(\"ifx-search-filter\", {\n\t\t\t\t\tdetail: { searchTerm, isActive: isSearchActive },\n\t\t\t\t});\n\t\t\t\toption.dispatchEvent(searchEvent);\n\t\t\t});\n\n\t\t\tif (isSearchActive) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst allOptions = this.el.querySelectorAll(\"ifx-multiselect-option\");\n\t\t\t\t\tlet visibleCount = 0;\n\n\t\t\t\t\tallOptions.forEach((option) => {\n\t\t\t\t\t\tconst style = window.getComputedStyle(option);\n\t\t\t\t\t\tconst rect = option.getBoundingClientRect();\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstyle.display !== \"none\" &&\n\t\t\t\t\t\t\tstyle.visibility !== \"hidden\" &&\n\t\t\t\t\t\t\tstyle.opacity !== \"0\" &&\n\t\t\t\t\t\t\trect.height > 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tvisibleCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst optionsContainer = this.el.shadowRoot.querySelector(\n\t\t\t\t\t\t\".ifx-multiselect-options\",\n\t\t\t\t\t);\n\t\t\t\t\tif (optionsContainer) {\n\t\t\t\t\t\tif (visibleCount === 0) {\n\t\t\t\t\t\t\toptionsContainer.classList.add(\"show-no-results\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toptionsContainer.classList.remove(\"show-no-results\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 200);\n\t\t\t} else {\n\t\t\t\tconst optionsContainer = this.el.shadowRoot.querySelector(\n\t\t\t\t\t\".ifx-multiselect-options\",\n\t\t\t\t);\n\t\t\t\tif (optionsContainer) {\n\t\t\t\t\toptionsContainer.classList.remove(\"show-no-results\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}, 150);\n\n\tprivate handleSearchFocus(hasFocus: boolean) {\n\t\tconst wrapper = this.el.shadowRoot.querySelector(\n\t\t\t\".ifx-multiselect-wrapper\",\n\t\t);\n\t\tif (wrapper) {\n\t\t\tif (hasFocus || this.searchTerm !== \"\") {\n\t\t\t\twrapper.classList.remove(\"active\");\n\t\t\t} else {\n\t\t\t\twrapper.classList.add(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\n\tpositionDropdown() {\n\t\tconst wrapperRect = this.el.shadowRoot\n\t\t\t.querySelector(\".ifx-multiselect-wrapper\")\n\t\t\t?.getBoundingClientRect();\n\t\tconst spaceBelow = window.innerHeight - wrapperRect.bottom;\n\t\tconst spaceAbove = wrapperRect.top;\n\n\t\tif (\n\t\t\t(spaceAbove > spaceBelow && wrapperRect.height > spaceBelow) ||\n\t\t\twrapperRect.bottom > window.innerHeight\n\t\t) {\n\t\t\tthis.dropdownFlipped = true;\n\t\t} else {\n\t\t\tthis.dropdownFlipped = false;\n\t\t}\n\t}\n\n\t//private pendingSelectionUpdate = false;\n\tpublic updateSlotBasedSelections(emitEvent: boolean = false) {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tconst selectedLeafOptions: Option[] = [];\n\n\t\tallOptionElements.forEach((optionEl: any) => {\n\t\t\tconst instance = optionEl[\"__stencil_instance\"];\n\t\t\tif (instance && instance.selected && !instance.hasChildren) {\n\t\t\t\tselectedLeafOptions.push({\n\t\t\t\t\tvalue: instance.value,\n\t\t\t\t\tselected: true,\n\t\t\t\t\tdisabled: instance.disabled,\n\t\t\t\t\tlabel: instance.getTextContent() || instance.value,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.persistentSelectedOptions = selectedLeafOptions;\n\n\t\tif (emitEvent) {\n\t\t\tthis.ifxSelect.emit(this.persistentSelectedOptions);\n\t\t}\n\t}\n\n\tprivate updateInitialParentStates() {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tconst optionsByDepth = Array.from(allOptionElements)\n\t\t\t.map((el) => ({\n\t\t\t\telement: el,\n\t\t\t\tinstance: (el as any)[\"__stencil_instance\"],\n\t\t\t\tdepth: parseInt(el.getAttribute(\"data-level\") || \"0\"),\n\t\t\t}))\n\t\t\t.filter((item) => item.instance)\n\t\t\t.sort((a, b) => b.depth - a.depth);\n\n\t\toptionsByDepth.forEach(({ instance }) => {\n\t\t\tif (instance.hasChildren) {\n\t\t\t\tthis.updateParentState(instance);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate updateParentState(parentInstance: any) {\n\t\tconst directChildren = Array.from(\n\t\t\tparentInstance.el.children as HTMLCollection,\n\t\t)\n\t\t\t.filter((child: Element) => child.tagName === \"IFX-MULTISELECT-OPTION\")\n\t\t\t.map((child) => (child as any)[\"__stencil_instance\"])\n\t\t\t.filter((instance) => instance !== null);\n\n\t\tconst selectedCount = directChildren.filter(\n\t\t\t(child) => child.selected,\n\t\t).length;\n\t\tconst indeterminateCount = directChildren.filter(\n\t\t\t(child) => child.indeterminate,\n\t\t).length;\n\t\tconst totalCount = directChildren.length;\n\n\t\tif (selectedCount === totalCount && indeterminateCount === 0) {\n\t\t\tparentInstance.selected = true;\n\t\t\tparentInstance.indeterminate = false;\n\t\t} else if (selectedCount === 0 && indeterminateCount === 0) {\n\t\t\tparentInstance.selected = false;\n\t\t\tparentInstance.indeterminate = false;\n\t\t} else {\n\t\t\tparentInstance.selected = false;\n\t\t\tparentInstance.indeterminate = true;\n\t\t}\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-multiselect\", await framework);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.positionDropdown();\n\t\t}, 500);\n\n\t\tthis.el.addEventListener(\"ifx-option-changed\", (event: CustomEvent) => {\n\t\t\tconst optionInstance = (event.target as any)?.__stencil_instance;\n\t\t\tif (optionInstance && !optionInstance.hasChildren) {\n\t\t\t\tthis.updateSlotBasedSelections(true);\n\t\t\t}\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tthis.updateSlotBasedSelections(false);\n\t\t\tthis.updateInitialParentStates();\n\t\t}, 100);\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.loadInitialOptions();\n\t}\n\n\t@Watch(\"error\")\n\tupdateInternalError() {\n\t\tthis.internalError = this.error;\n\t}\n\n\t@Watch(\"persistentSelectedOptions\")\n\tonSelectionChange(newValue: Option[], _: Option[]) {\n\t\tconst formData = new FormData();\n\t\tnewValue.forEach((option) => formData.append(this.name, option.value));\n\t\t//this.internals.setFormValue(formData);\n\t}\n\tcollapseAll() {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tallOptionElements.forEach((optionEl: any) => {\n\t\t\tconst instance = optionEl[\"__stencil_instance\"];\n\t\t\tif (instance && instance.hasChildren) {\n\t\t\t\tinstance.isExpanded = false;\n\t\t\t}\n\t\t});\n\t}\n\n\texpandAll() {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tallOptionElements.forEach((optionEl: any) => {\n\t\t\tconst instance = optionEl[\"__stencil_instance\"];\n\t\t\tif (instance && instance.hasChildren) {\n\t\t\t\tinstance.isExpanded = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tselectAll() {\n\t\tthis.resetSearch();\n\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\n\t\tallOptionElements.forEach((optionEl: any) => {\n\t\t\tconst instance = optionEl[\"__stencil_instance\"];\n\t\t\tif (instance) {\n\t\t\t\tif (instance.hasChildren) {\n\t\t\t\t\tinstance.isExpanded = true;\n\t\t\t\t} else {\n\t\t\t\t\tinstance.selected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tthis.updateInitialParentStates();\n\t\t\tthis.updateSlotBasedSelections(false);\n\t\t\tthis.ifxSelect.emit(this.persistentSelectedOptions);\n\t\t}, 0);\n\t}\n\n\t@Method()\n\tasync clearSelection() {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tallOptionElements.forEach((optionEl: any) => {\n\t\t\tconst instance = optionEl[\"__stencil_instance\"];\n\t\t\tif (instance) {\n\t\t\t\tinstance.selected = false;\n\t\t\t\tinstance.indeterminate = false;\n\t\t\t\tif (instance.hasChildren) {\n\t\t\t\t\tinstance.isExpanded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.persistentSelectedOptions = [];\n\n\t\tsetTimeout(() => {\n\t\t\tthis.updateSlotBasedSelections(false);\n\t\t\tthis.ifxSelect.emit(this.persistentSelectedOptions);\n\t\t}, 0);\n\t}\n\n\thandleDocumentClick = (event: Event) => {\n\t\tconst path = event.composedPath();\n\t\tif (!path.includes(this.dropdownElement)) {\n\t\t\tthis.dropdownOpen = false;\n\t\t\tdocument.removeEventListener(\"click\", this.handleDocumentClick);\n\t\t\tthis.resetSearch();\n\t\t\tthis.ifxOpen.emit(this.dropdownOpen);\n\t\t}\n\t};\n\n\ttoggleDropdown() {\n\t\tthis.dropdownOpen = !this.dropdownOpen;\n\t\tsetTimeout(() => {\n\t\t\tif (this.dropdownOpen) {\n\t\t\t\tdocument.addEventListener(\"click\", this.handleDocumentClick);\n\t\t\t} else {\n\t\t\t\tthis.resetSearch();\n\t\t\t}\n\t\t\tthis.ifxOpen.emit(this.dropdownOpen);\n\t\t}, 0);\n\t}\n\n\tprivate resetSearch() {\n\t\tthis.searchTerm = \"\";\n\n\t\tconst searchField = this.el.shadowRoot.querySelector(\n\t\t\t\"ifx-search-field\",\n\t\t) as any;\n\t\tif (searchField) {\n\t\t\tsearchField.value = \"\";\n\t\t}\n\n\t\tconst optionsContainer = this.el.shadowRoot.querySelector(\n\t\t\t\".ifx-multiselect-options\",\n\t\t);\n\t\tif (optionsContainer) {\n\t\t\toptionsContainer.classList.remove(\"has-search-filter\");\n\t\t}\n\n\t\tconst allOptions = this.el.querySelectorAll(\"ifx-multiselect-option\");\n\t\tallOptions.forEach((option) => {\n\t\t\tconst searchEvent = new CustomEvent(\"ifx-search-filter\", {\n\t\t\t\tdetail: { searchTerm: \"\", isActive: false },\n\t\t\t});\n\t\t\toption.dispatchEvent(searchEvent);\n\t\t});\n\t}\n\n\thandleWrapperClick(event: MouseEvent) {\n\t\tthis.positionDropdown();\n\n\t\tif (event.currentTarget === event.target) {\n\t\t\tthis.toggleDropdown();\n\t\t}\n\t}\n\n\thandleKeyDown(event: KeyboardEvent) {\n\t\tif (this.disabled) return;\n\n\t\t// If dropdown is closed, only allow opening\n\t\tif (!this.dropdownOpen) {\n\t\t\tswitch (event.code) {\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \"Space\":\n\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.toggleDropdown();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Dropdown is open - handle navigation and controls\n\t\tswitch (event.code) {\n\t\t\tcase \"Escape\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.toggleDropdown();\n\t\t\t\tbreak;\n\t\t\tcase \"Enter\":\n\t\t\tcase \"Space\": {\n\t\t\t\t// Don't close dropdown when pressing space/enter in controls area\n\t\t\t\tconst target = event.target as HTMLElement;\n\t\t\t\tif (!target.closest(\".ifx-multiselect-dropdown-functions\")) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.toggleDropdown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"ArrowDown\":\n\t\t\tcase \"ArrowUp\":\n\t\t\t\t// Focus first/last option for navigation\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.focusFirstOption();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate focusFirstOption() {\n\t\tconst firstOption = this.el.querySelector(\n\t\t\t\"ifx-multiselect-option:not(.search-hidden)\",\n\t\t);\n\t\tif (firstOption) {\n\t\t\tconst labelElement = firstOption.shadowRoot?.querySelector(\n\t\t\t\t\".option-label\",\n\t\t\t) as HTMLElement;\n\t\t\tlabelElement?.focus();\n\t\t}\n\t}\n\n\tprivate renderSelectAll() {\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tconst leafOptions = Array.from(allOptionElements).filter(\n\t\t\t(el: any) => !el.hasChildren,\n\t\t);\n\t\tconst selectedLeafOptions = Array.from(allOptionElements).filter(\n\t\t\t(el: any) => !el.hasChildren && el.selected,\n\t\t);\n\n\t\tconst allSelected =\n\t\t\tleafOptions.length > 0 &&\n\t\t\tselectedLeafOptions.length === leafOptions.length;\n\n\t\tconst toggleSelectAll = (event?: Event) => {\n\t\t\tif (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\tif (allSelected) {\n\t\t\t\tthis.clearSelection();\n\t\t\t} else {\n\t\t\t\tthis.selectAll();\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<div class=\"select-all-wrapper\">\n\t\t\t\t<ifx-checkbox\n\t\t\t\t\tid=\"selectAll\"\n\t\t\t\t\tchecked={allSelected}\n\t\t\t\t\tsize=\"s\"\n\t\t\t\t\taria-label={this.ariaSelectAllLabel}\n\t\t\t\t\tonClick={toggleSelectAll}\n\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \" \") {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\ttoggleSelectAll(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.selectAllLabel}\n\t\t\t\t</ifx-checkbox>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderNoResultsMessage() {\n\t\treturn (\n\t\t\t<div class=\"ifx-multiselect-no-results\">\n\t\t\t\t<div class=\"no-results-content\">\n\t\t\t\t\t<span class=\"no-results-text\">{this.noResultsMessage}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst selectedOptionsLabels = this.persistentSelectedOptions\n\t\t\t.map((option) => (option as any).label || option.value)\n\t\t\t.join(\", \");\n\n\t\tconst hasSelections = this.persistentSelectedOptions.length > 0;\n\n\t\tlet isFlatMultiselect = false;\n\t\tconst allOptionElements = this.el.querySelectorAll(\n\t\t\t\"ifx-multiselect-option\",\n\t\t);\n\t\tif (allOptionElements.length > 0) {\n\t\t\tisFlatMultiselect = Array.from(allOptionElements).every(\n\t\t\t\t(option) => option.children.length === 0,\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclass={`ifx-multiselect-container ${this.disabled && !this.error ? \"disabled\" : \"\"}`}\n\t\t\t\tref={(el) => (this.dropdownElement = el as HTMLElement)}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\t<div class=\"ifx-label-wrapper\">\n\t\t\t\t\t\t{this.label && (\n\t\t\t\t\t\t\t<span class=\"wrapper-label\">\n\t\t\t\t\t\t\t\t<span>{this.label}</span>\n\t\t\t\t\t\t\t\t{this.required && (\n\t\t\t\t\t\t\t\t\t<span class={`required ${this.error ? \"error\" : \"\"}`}>*</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div\n\t\t\t\t\tclass={`ifx-multiselect-wrapper\n        ${this.dropdownOpen ? \"active\" : \"\"}\n        ${this.dropdownFlipped ? \"is-flipped\" : \"\"}\n        ${this.internalError ? \"error\" : \"\"}\n        ${this.disabled && !this.error ? \"disabled\" : \"\"}`}\n\t\t\t\t\trole=\"combobox\"\n\t\t\t\t\taria-label={this.ariaMultiSelectLabel}\n\t\t\t\t\taria-labelledby={this.ariaMultiSelectLabelledBy || undefined}\n\t\t\t\t\taria-describedby={this.ariaMultiSelectDescribedBy || undefined}\n\t\t\t\t\taria-expanded={this.dropdownOpen}\n\t\t\t\t\taria-haspopup=\"listbox\"\n\t\t\t\t\taria-disabled={this.disabled && !this.error}\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\tonClick={\n\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t: (event) => this.handleWrapperClick(event)\n\t\t\t\t\t}\n\t\t\t\t\tonKeyDown={\n\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t: (event) => this.handleKeyDown(event)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`ifx-multiselect-input\n          ${hasSelections ? \"\" : \"placeholder\"}\n          `}\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: () => this.toggleDropdown()\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{hasSelections ? selectedOptionsLabels : this.placeholder}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.dropdownOpen && (\n\t\t\t\t\t\t<div class=\"ifx-multiselect-dropdown-menu\">\n\t\t\t\t\t\t\t{(this.showSearch ||\n\t\t\t\t\t\t\t\tthis.showSelectAll ||\n\t\t\t\t\t\t\t\t(this.showExpandCollapse && !isFlatMultiselect)) && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"ifx-multiselect-dropdown-functions\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{this.showSearch && (\n\t\t\t\t\t\t\t\t\t\t<div class=\"ifx-multiselect-dropdown-search\">\n\t\t\t\t\t\t\t\t\t\t\t<ifx-search-field\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"search-input\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={this.searchPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"s\"\n\t\t\t\t\t\t\t\t\t\t\t\tshow-delete-icon=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={this.ariaSearchLabel}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonIfxInput={(event) => this.handleSearch(event.target)}\n\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() => this.handleSearchFocus(true)}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={() => this.handleSearchFocus(false)}\n\t\t\t\t\t\t\t\t\t\t\t></ifx-search-field>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t<div class=\"ifx-multiselect-dropdown-controls\">\n\t\t\t\t\t\t\t\t\t\t{this.showSelectAll && this.renderSelectAll()}\n\t\t\t\t\t\t\t\t\t\t{this.showExpandCollapse && !isFlatMultiselect && (\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"expand-collapse-controls\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"control-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={this.ariaExpandAllLabel}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.expandAll();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \" \") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.expandAll();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.expandLabel}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"control-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={this.ariaCollapseAllLabel}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.collapseAll();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \" \") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.collapseAll();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.collapseLabel}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ifx-multiselect-options\"\n\t\t\t\t\t\t\t\trole=\"listbox\"\n\t\t\t\t\t\t\t\taria-multiselectable=\"true\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot />\n\t\t\t\t\t\t\t\t{this.searchTerm &&\n\t\t\t\t\t\t\t\t\tthis.showNoResultsMessage &&\n\t\t\t\t\t\t\t\t\tthis.renderNoResultsMessage()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div class=\"ifx-multiselect-icon-container\">\n\t\t\t\t\t\t{/* Clear Button - will show only if there's a selection */}\n\t\t\t\t\t\t{this.persistentSelectedOptions.length > 0 && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass={`ifx-clear-button ${!this.showClearButton ? \"hide\" : \"\"}`}\n\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t: () => this.clearSelection()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ifx-icon icon=\"cRemove16\"></ifx-icon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"icon-wrapper-up\"\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: () => this.toggleDropdown()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ifx-icon key=\"icon-up\" icon=\"chevron-up-16\"></ifx-icon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"icon-wrapper-down\"\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\tthis.disabled && !this.error\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: () => this.toggleDropdown()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ifx-icon key=\"icon-down\" icon=\"chevron-down-16\"></ifx-icon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{this.caption && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`multi__select-caption ${this.error ? \"error\" : \"\"} ${this.disabled && !this.error ? \"disabled\" : \"\"}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.caption}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}