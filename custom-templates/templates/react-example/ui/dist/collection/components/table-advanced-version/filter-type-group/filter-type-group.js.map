{"version":3,"file":"filter-type-group.js","sourceRoot":"","sources":["../../../../src/components/table-advanced-version/filter-type-group/filter-type-group.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tState,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-filter-type-group\",\n\tstyleUrl: \"filter-type-group.scss\",\n\tshadow: true,\n})\nexport class IfxFilterTypeGroup {\n\t@Element() el: HTMLElement;\n\t@State() selectedOptions: Array<{\n\t\tfilterGroupName: string;\n\t\tselectedItems?: Array<{ filterName: string; value: boolean | string }>;\n\t\tvalue?: string;\n\t}> = [];\n\t@Event() ifxSidebarFilterChange: EventEmitter;\n\n\t/* If the component is ever removed and then reattached to the DOM, \n  connectedCallback ensures that the event listeners are properly set up again */\n\tconnectedCallback() {\n\t\tthis.el.addEventListener(\n\t\t\t\"ifxFilterAccordionChange\",\n\t\t\tthis.handleAccordionChange,\n\t\t);\n\t\tthis.el.addEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n\t\twindow.addEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t\twindow.addEventListener(\n\t\t\t\"ifxUpdateSidebarFilter\",\n\t\t\tthis.handleUpdateSidebarFilter,\n\t\t);\n\t}\n\n\tcomponentWillUnload() {\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterAccordionChange\",\n\t\t\tthis.handleAccordionChange,\n\t\t);\n\t\tthis.el.removeEventListener(\n\t\t\t\"ifxFilterSearchChange\",\n\t\t\tthis.handleSearchChange,\n\t\t);\n\t\twindow.removeEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n\t}\n\n\thandleResetEvent = () => {\n\t\tconst accordionSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-accordion\"]',\n\t\t);\n\t\tconst filterAccordionSlottedElements = (\n\t\t\taccordionSlot as HTMLSlotElement\n\t\t).assignedElements({ flatten: true });\n\n\t\tfilterAccordionSlottedElements.forEach((accordionElement) => {\n\t\t\tconst ifxLists = accordionElement.querySelectorAll(\"ifx-list\");\n\n\t\t\tifxLists.forEach((ifxListElement: HTMLIfxListElement) => {\n\t\t\t\tifxListElement.resetTrigger = !ifxListElement.resetTrigger;\n\t\t\t});\n\t\t});\n\n\t\tconst filterSearchSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tconst filterSearchSlottedElements = (\n\t\t\tfilterSearchSlot as HTMLSlotElement\n\t\t).assignedElements({ flatten: true });\n\n\t\tfilterSearchSlottedElements.forEach((filterSearchWrapper: HTMLElement) => {\n\t\t\tconst filterSearch =\n\t\t\t\tfilterSearchWrapper.querySelector(\"ifx-filter-search\");\n\n\t\t\tconst searchField =\n\t\t\t\tfilterSearch.shadowRoot.querySelectorAll(\"ifx-search-field\");\n\n\t\t\tif (searchField.length > 0) {\n\t\t\t\tsearchField.forEach((searchFieldElement: any) => {\n\t\t\t\t\tsearchFieldElement.value = \"\";\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.selectedOptions = [];\n\n\t\t// Emit the change to inform any parent components that the filters have been reset\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleUpdateSidebarFilter = (event: CustomEvent) => {\n\t\tconst { filterName } = event.detail;\n\n\t\tconst accordionSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-accordion\"]',\n\t\t);\n\t\tconst filterAccordionSlottedElements = accordionSlot\n\t\t\t? (accordionSlot as HTMLSlotElement).assignedElements({ flatten: true })\n\t\t\t: [];\n\n\t\tfilterAccordionSlottedElements.forEach((accordionElement) => {\n\t\t\tconst ifxLists = accordionElement.querySelectorAll(\"ifx-list\");\n\n\t\t\tifxLists.forEach((ifxListElement: HTMLIfxListElement) => {\n\t\t\t\tif (ifxListElement.getAttribute(\"name\") === filterName) {\n\t\t\t\t\tifxListElement.resetTrigger = !ifxListElement.resetTrigger;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Clear the search bar within the filter-search slot\n\t\tconst searchSlot = this.el.shadowRoot.querySelector(\n\t\t\t'slot[name=\"filter-search\"]',\n\t\t);\n\t\tconst filterSearchSlottedElements = searchSlot\n\t\t\t? (searchSlot as HTMLSlotElement).assignedNodes({ flatten: true })\n\t\t\t: [];\n\n\t\tfilterSearchSlottedElements.forEach((searchElement) => {\n\t\t\tif (searchElement.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t// Identify the ifx-filter-search component within the slot\n\t\t\t\tconst filterSearchComponent = searchElement as HTMLElement;\n\t\t\t\tconst searchField: any = filterSearchComponent.firstElementChild;\n\t\t\t\tif (searchField) {\n\t\t\t\t\tsearchField.setAttribute(\"value\", \"\");\n\t\t\t\t\tsearchField.dispatchEvent(\n\t\t\t\t\t\tnew CustomEvent(\"ifxInput\", {\n\t\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\t\tcomposed: true,\n\t\t\t\t\t\t\tdetail: \"\",\n\t\t\t\t\t\t}),\n\t\t\t\t\t); // Trigger ifxInput event to reset\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst newSelectedOptions = this.selectedOptions.map((option) => {\n\t\t\tif (option.filterGroupName === filterName) {\n\t\t\t\treturn { ...option, selectedItems: [], value: \"\" };\n\t\t\t}\n\t\t\treturn option;\n\t\t});\n\n\t\tthis.selectedOptions = newSelectedOptions;\n\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\thandleAccordionChange = (event: CustomEvent) => {\n\t\tthis.handleFilterChange(event);\n\t};\n\n\thandleSearchChange = (event: CustomEvent) => {\n\t\t// Call handleFilterChange with the created CustomEvent object\n\t\tthis.handleFilterChange(event);\n\t};\n\n\thandleFilterChange = (event: CustomEvent) => {\n\t\t// Create a new array to hold the new state\n\t\tconst newSelectedOptions = [...this.selectedOptions];\n\n\t\t// Check the type of the event\n\t\tif (event.type === \"ifxFilterSearchChange\") {\n\t\t\t// Handle the ifxFilterSearchChange event\n\t\t\tconst { filterName, filterValue } = event.detail;\n\n\t\t\t// Find the existing filter with the same filterName\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) =>\n\t\t\t\t\ttypeof option !== \"string\" && option.filterGroupName === filterName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter is found, update its value\n\t\t\t\tnewSelectedOptions[existingOptionIndex].value = filterValue;\n\t\t\t} else {\n\t\t\t\t// If no existing filter is found, append the new filter\n\t\t\t\tnewSelectedOptions.push({\n\t\t\t\t\tfilterGroupName: filterName,\n\t\t\t\t\tvalue: filterValue,\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (event.type === \"ifxFilterAccordionChange\") {\n\t\t\tconst { filterGroupName, selectedItems } = event.detail;\n\n\t\t\t// Find the existing filter group with the same filterGroupName\n\t\t\tconst existingOptionIndex = newSelectedOptions.findIndex(\n\t\t\t\t(option) => option.filterGroupName === filterGroupName,\n\t\t\t);\n\n\t\t\tif (existingOptionIndex !== -1) {\n\t\t\t\t// If an existing filter group is found, update its selectedItems\n\t\t\t\tnewSelectedOptions[existingOptionIndex] = {\n\t\t\t\t\tfilterGroupName,\n\t\t\t\t\tselectedItems,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// If no existing filter group is found, append the new filter group\n\t\t\t\tnewSelectedOptions.push({ filterGroupName, selectedItems });\n\t\t\t}\n\t\t}\n\n\t\t// Update the state with the new selected options\n\t\tthis.selectedOptions = newSelectedOptions;\n\n\t\t// Emit the entire selectedOptions array\n\t\tthis.ifxSidebarFilterChange.emit(this.selectedOptions);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"filter-type-group\">\n\t\t\t\t\t<slot name=\"filter-search\" />\n\t\t\t\t\t<slot name=\"filter-accordion\" />\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"]}