{"version":3,"file":"segmented-control.js","sourceRoot":"","sources":["../../../src/components/segmented-control/segmented-control.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tListen,\n\tProp,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\n\n@Component({\n\ttag: \"ifx-segmented-control\",\n\tstyleUrl: \"segmented-control.scss\",\n\tshadow: true,\n})\nexport class SegmentedControl {\n\t@Element() el: HTMLElement;\n\n\t@Event() ifxChange: EventEmitter<{\n\t\tpreviousValue: string;\n\t\tselectedValue: string;\n\t}>;\n\n\t@Prop() caption: string = \"\";\n\t@Prop() label: string = \"\";\n\t@Prop() size: \"regular\" | \"small\" = \"regular\";\n\t@Prop() required: boolean = false;\n\t@Prop() error: boolean = false;\n\n\t@Listen(\"segmentSelect\")\n\tonSegmentSelect(event: CustomEvent) {\n\t\tconst { previousValue, selectedValue } = this.unselectPreviousSegment(\n\t\t\tevent.detail,\n\t\t);\n\t\tthis.selectedValue = selectedValue;\n\t\tthis.ifxChange.emit({ previousValue, selectedValue });\n\t}\n\n\tprivate selectedValue: string = \"\";\n\n\tunselectPreviousSegment(newSelectedIndex: number): {\n\t\tpreviousValue: string;\n\t\tselectedValue: string;\n\t} {\n\t\tlet previousValue: string;\n\t\tlet selectedValue: string;\n\n\t\tconst segments: NodeList = this.getSegments();\n\t\tsegments.forEach((control: HTMLIfxSegmentElement) => {\n\t\t\tif (control.selected) {\n\t\t\t\tif (control.segmentIndex !== newSelectedIndex) {\n\t\t\t\t\tcontrol.selected = false;\n\t\t\t\t\tpreviousValue = control.value;\n\t\t\t\t} else {\n\t\t\t\t\tselectedValue = control.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn { previousValue, selectedValue };\n\t}\n\n\tgetSegments(): NodeList {\n\t\treturn this.el.querySelectorAll(\"ifx-segment\");\n\t}\n\n\tsetActiveSegment(): void {\n\t\tconst segments: NodeList = this.getSegments();\n\t\tlet activeSegmentedControlFound = false;\n\t\tsegments.forEach((control: HTMLIfxSegmentElement, idx: number) => {\n\t\t\tcontrol.segmentIndex = idx;\n\t\t\tif (activeSegmentedControlFound) {\n\t\t\t\tif (control.selected) control.selected = false;\n\t\t\t} else {\n\t\t\t\tif (control.selected) {\n\t\t\t\t\tactiveSegmentedControlFound = true;\n\t\t\t\t\tthis.selectedValue = control.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tsetSegmentSize(): void {\n\t\tconst segments: NodeList = this.getSegments();\n\t\tsegments.forEach((control: HTMLIfxSegmentElement) => {\n\t\t\tcontrol.shadowRoot\n\t\t\t\t.querySelector(\".segment\")\n\t\t\t\t.classList.add(`segment--${this.size}`);\n\t\t});\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-segmented-control\", await framework);\n\t\t}\n\t\tthis.setActiveSegment();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\taria-value={this.selectedValue}\n\t\t\t\taria-label=\"segmented control\"\n\t\t\t\tclass=\"group\"\n\t\t\t>\n\t\t\t\t<div class=\"group__label\">\n\t\t\t\t\t{this.label.trim()}\n\t\t\t\t\t{this.required && this.label.trim().toLowerCase() !== \"\" && (\n\t\t\t\t\t\t<span class={`required ${this.error ? \"error\" : \"\"}`}>*</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"group__controls\">\n\t\t\t\t\t<slot />\n\t\t\t\t</div>\n\n\t\t\t\t{this.caption.trim() && (\n\t\t\t\t\t<div class={`group__caption ${this.error ? \"error\" : \"\"}`}>\n\t\t\t\t\t\t<ifx-icon icon=\"c-info-16\"></ifx-icon> {this.caption.trim()}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidRender() {\n\t\tthis.setSegmentSize();\n\t}\n}\n"]}