{"version":3,"file":"content-switcher.js","sourceRoot":"","sources":["../../../src/components/content-switcher/content-switcher.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\tHost,\n\th,\n\tState,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\n\nexport type ChangeEvent = { oldValue: string; newValue: string };\n\ntype ContentSwitcherItem = Element & {\n\tselected: boolean;\n};\n\n@Component({\n\ttag: \"ifx-content-switcher\",\n\tstyleUrl: \"./content-switcher.scss\",\n\tshadow: true,\n})\nexport class ContentSwitcher {\n\t@Element() el: HTMLElement;\n\n\t@State() items: Element[];\n\t@State() activeIndex = -1;\n\t@State() hoverIndex: number = -1;\n\t@State() focusIndex: number = -1;\n\n\t@State() dividers: Element[] = [];\n\n\t@Event() ifxChange: EventEmitter<ChangeEvent>;\n\n\tprivate eventHandlers: Map<Element, { [key: string]: EventListener }> =\n\t\tnew Map();\n\n\tcomponentWillLoad() {\n\t\tthis.items = Array.from(this.el.children);\n\t\tthis.initializeDividers();\n\t\tthis.addEventListeners();\n\t\tthis.ensureSingleSelectedItem();\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-content-switcher\", await framework);\n\t\t}\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.removeEventListeners();\n\t}\n\n\t/**\n\t * Initialize the dividers between items.\n\t */\n\tinitializeDividers() {\n\t\tthis.items.forEach((item, index) => {\n\t\t\tif (index < this.items.length - 1) {\n\t\t\t\tconst divider = document.createElement(\"div\");\n\t\t\t\tdivider.classList.add(\"ifx-content-switcher-divider\");\n\t\t\t\titem.after(divider);\n\t\t\t\tthis.dividers.push(divider);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Add event listeners for each item.\n\t */\n\taddEventListeners() {\n\t\tthis.items.forEach((item, index) => {\n\t\t\tconst handlers = {\n\t\t\t\tclick: () => this.selectItem(index),\n\t\t\t\tmouseenter: () => this.handleHover(index, true),\n\t\t\t\tmouseleave: () => this.handleHover(index, false),\n\t\t\t\tfocus: () => this.handleFocus(index, true),\n\t\t\t\tblur: () => this.handleFocus(index, false),\n\t\t\t};\n\n\t\t\tObject.keys(handlers).forEach((event) => {\n\t\t\t\titem.addEventListener(event, handlers[event]);\n\t\t\t});\n\n\t\t\tthis.eventHandlers.set(item, handlers);\n\t\t});\n\t}\n\n\t/**\n\t * Remove all event listeners.\n\t */\n\tremoveEventListeners() {\n\t\tthis.eventHandlers.forEach((handlers, item) => {\n\t\t\tObject.keys(handlers).forEach((event) => {\n\t\t\t\titem.removeEventListener(event, handlers[event]);\n\t\t\t});\n\t\t});\n\t\tthis.eventHandlers.clear();\n\t}\n\n\tensureSingleSelectedItem() {\n\t\tthis.items.forEach((item, index) => {\n\t\t\tconst isSelected =\n\t\t\t\titem.getAttribute(\"selected\") === \"true\" ||\n\t\t\t\t(item as ContentSwitcherItem).selected;\n\t\t\tif (isSelected) {\n\t\t\t\tif (this.activeIndex < 0) {\n\t\t\t\t\tthis.selectItem(index);\n\t\t\t\t} else {\n\t\t\t\t\titem.removeAttribute(\"selected\");\n\t\t\t\t\t(item as ContentSwitcherItem).selected = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Handle hover events on an item.\n\t * @param index - Index of the item.\n\t * @param isActive - Whether the item is hovered.\n\t */\n\thandleHover(index: number, isActive: boolean) {\n\t\tthis.hoverIndex = isActive ? index : -1;\n\t\tthis.updateDividersOfItem(index);\n\t}\n\n\t/**\n\t * Handle hover events on an item.\n\t * @param index - Index of the item.\n\t * @param isActive - Whether the item is focused.\n\t */\n\thandleFocus(index: number, isActive: boolean) {\n\t\tthis.focusIndex = isActive ? index : -1;\n\t\tthis.updateDividersOfItem(index);\n\t}\n\n\t/**\n\t * Update visibility of dividers adjacent to a specific item.\n\t * @param itemIndex - Index of the item.\n\t */\n\tupdateDividersOfItem(itemIndex: number) {\n\t\tif (itemIndex < this.items.length - 1) {\n\t\t\tthis.updateDividerVisibility(itemIndex);\n\t\t}\n\t\tif (itemIndex > 0) {\n\t\t\tthis.updateDividerVisibility(itemIndex - 1);\n\t\t}\n\t}\n\n\t/**\n\t * Update visibility of a specific divider.\n\t * @param dividerIndex - Index of the divider.\n\t */\n\tupdateDividerVisibility(dividerIndex: number) {\n\t\tconst hiddenDividers = new Set([\n\t\t\tthis.activeIndex,\n\t\t\tthis.activeIndex - 1,\n\t\t\tthis.hoverIndex,\n\t\t\tthis.hoverIndex - 1,\n\t\t\tthis.focusIndex,\n\t\t\tthis.focusIndex - 1,\n\t\t]);\n\t\tthis.setDividerVisibility(dividerIndex, hiddenDividers.has(dividerIndex));\n\t}\n\n\t/**\n\t * Set the visibility of a specific divider.\n\t * @param dividerIndex - Index of the divider.\n\t * @param hidden - Whether the divider should be hidden.\n\t */\n\tsetDividerVisibility(dividerIndex: number, hidden: boolean) {\n\t\tif (this.dividers[dividerIndex]) {\n\t\t\tthis.dividers[dividerIndex].classList.toggle(\"hidden\", hidden);\n\t\t}\n\t}\n\n\t/**\n\t * Select a specific item.\n\t * @param itemIndex - Index of the item to be selected.\n\t */\n\tselectItem(itemIndex: number) {\n\t\tif (itemIndex === this.activeIndex) return;\n\t\tconst oldIndex = this.activeIndex;\n\t\tif (oldIndex >= 0) {\n\t\t\tthis.items[oldIndex].removeAttribute(\"selected\");\n\t\t}\n\n\t\tthis.activeIndex = itemIndex;\n\t\tthis.items[itemIndex].setAttribute(\"selected\", \"true\");\n\n\t\tthis.ifxChange.emit({\n\t\t\toldValue: this.getValueOfItem(oldIndex),\n\t\t\tnewValue: this.getValueOfItem(itemIndex),\n\t\t});\n\t\tthis.updateDividersOfItem(oldIndex);\n\t\tthis.updateDividersOfItem(itemIndex);\n\t}\n\n\t/**\n\t * Get the value property of the item at a specific index.\n\t * Falls back to the index if no value is set.\n\t *\n\t * @param index - Index of the item.\n\t * @returns The value of the item.\n\t */\n\tgetValueOfItem(index: number): string {\n\t\tif (this.items[index] == null) return index.toLocaleString();\n\t\treturn this.items[index].getAttribute(\"value\") || index.toLocaleString();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"ifx-content-switcher\" role=\"group\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"]}