{"version":3,"file":"accordionItem.js","sourceRoot":"","sources":["../../../src/components/accordion/accordionItem.tsx"],"names":[],"mappings":"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","sourcesContent":["//ifxAccordionItem\nimport {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tListen,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\n\n@Component({\n\ttag: \"ifx-accordion-item\",\n\tstyleUrl: \"accordionItem.scss\",\n\tshadow: true,\n})\nexport class AccordionItem {\n\t@Element() el;\n\t@Prop() caption: string;\n\t@Prop({\n\t\tmutable: true,\n\t})\n\topen: boolean = false;\n\t@Prop() AriaLevel = 3;\n\t@State() internalOpen: boolean = false;\n\t@Event() ifxOpen: EventEmitter;\n\t@Event() ifxClose: EventEmitter;\n\tprivate contentEl!: HTMLElement;\n\tprivate titleEl!: HTMLElement;\n\tprivate resizeObserver!: ResizeObserver;\n\n\tcomponentWillLoad() {\n\t\tthis.internalOpen = this.open;\n\t}\n\n\tcomponentDidLoad() {\n\t\tthis.checkSlotContent();\n\t\tthis.openAccordionItem();\n\t\tthis.contentEl = this.el.shadowRoot.querySelector(\"#accordion-content\");\n\t\tif (this.contentEl) {\n\t\t\tthis.attachResizeObserver();\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.checkSlotContent();\n\t\tthis.openAccordionItem();\n\t}\n\n\t@Watch(\"open\")\n\topenChanged(newValue: boolean) {\n\t\tthis.internalOpen = newValue;\n\t}\n\n\ttoggleOpen() {\n\t\tthis.internalOpen = !this.internalOpen;\n\t\tthis.open = this.internalOpen;\n\n\t\tif (this.internalOpen) {\n\t\t\tthis.ifxOpen.emit({ isOpen: this.internalOpen });\n\t\t} else {\n\t\t\tthis.ifxClose.emit({ isClosed: !this.internalOpen });\n\t\t}\n\t}\n\n\topenAccordionItem() {\n\t\tif (this.internalOpen) {\n\t\t\tthis.contentEl.style.height = `${this.contentEl.scrollHeight}px`;\n\t\t\tthis.contentEl.style.overflow = \"hidden\";\n\t\t} else {\n\t\t\tthis.contentEl.style.height = \"0\";\n\t\t\tthis.contentEl.style.overflow = \"hidden\";\n\t\t}\n\t}\n\n\tgetInnerContentWrapper() {\n\t\tconst innerContentEl = this.el.shadowRoot.querySelector(\".inner-content\");\n\t\treturn innerContentEl;\n\t}\n\n\tattachResizeObserver() {\n\t\tconst innerContentEl = this.getInnerContentWrapper();\n\n\t\tif (innerContentEl) {\n\t\t\tthis.resizeObserver = new ResizeObserver(() => {\n\t\t\t\tif (this.internalOpen) {\n\t\t\t\t\tthis.openAccordionItem();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.resizeObserver.observe(innerContentEl);\n\t\t}\n\t}\n\n\t@Listen(\"keydown\")\n\thandleKeydown(ev: KeyboardEvent) {\n\t\tconst path = ev.composedPath();\n\n\t\tif (!path.includes(this.titleEl)) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (ev.key) {\n\t\t\tcase \"Enter\": // fallthrough\n\t\t\tcase \" \": // space\n\t\t\t\tev.preventDefault();\n\t\t\t\tthis.toggleOpen();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcheckSlotContent() {\n\t\tconst slot = this.el.shadowRoot.querySelector(\"slot\") as HTMLSlotElement;\n\t\tconst hasContent = slot.assignedNodes().length > 0;\n\t\tconst innerContent = this.getInnerContentWrapper();\n\t\tif (!hasContent) {\n\t\t\tinnerContent.classList.add(\"no-content\");\n\t\t} else if (innerContent.classList.contains(\"no-content\")) {\n\t\t\tinnerContent.classList.remove(\"no-content\");\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div class={`accordion-item ${this.internalOpen ? \"open\" : \"\"}`}>\n\t\t\t\t<div\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\taria-expanded={this.internalOpen}\n\t\t\t\t\taria-controls=\"accordion-content\"\n\t\t\t\t\tclass=\"accordion-title\"\n\t\t\t\t\tonClick={() => this.toggleOpen()}\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\tref={(el) => (this.titleEl = el as HTMLElement)}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\trole=\"heading\"\n\t\t\t\t\t\taria-level={String(this.AriaLevel) as string}\n\t\t\t\t\t\tclass=\"accordion-icon\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ifx-icon icon=\"chevron-down-16\" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span id=\"accordion-caption\" class=\"accordion-caption\">\n\t\t\t\t\t\t{this.caption}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tid=\"accordion-content\"\n\t\t\t\t\tclass=\"accordion-content\"\n\t\t\t\t\tref={(el) => (this.contentEl = el as HTMLElement)}\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\taria-labelledby=\"accordion-caption\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"inner-content\">\n\t\t\t\t\t\t<slot />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}