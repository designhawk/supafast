{"version":3,"file":"stepper.js","sourceRoot":"","sources":["../../../src/components/stepper/stepper.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tListen,\n\tProp,\n\tState,\n\tWatch,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\nimport type { StepperState } from \"./interfaces\";\n\n@Component({\n\ttag: \"ifx-stepper\",\n\tstyleUrl: \"stepper.scss\",\n\tshadow: true,\n})\nexport class Stepper {\n\t@Element() el: HTMLElement;\n\n\t@Event() ifxChange: EventEmitter;\n\n\t@Prop({ mutable: true }) activeStep: number = 1;\n\t@Prop() indicatorPosition?: \"left\" | \"right\" = \"left\";\n\t@Prop() showStepNumber?: boolean = false;\n\t@Prop() variant?: \"default\" | \"compact\" | \"vertical\" = \"default\";\n\t@Prop() ariaLabel: string | null;\n\t@Prop() ariaCurrent: string | null;\n\n\t@State() stepsCount: number;\n\t@State() shouldEmitEvent: boolean = true;\n\t@State() emittedByClick: boolean = false;\n\n\t@Listen(\"ifxChange\")\n\tonStepChange(event: CustomEvent) {\n\t\tconst steps = this.getSteps();\n\t\tconst previousActiveStep = steps[event.detail.previousActiveStep - 1];\n\t\tif (previousActiveStep && !previousActiveStep.complete) {\n\t\t\tpreviousActiveStep.setAttribute(\"error\", \"true\");\n\t\t}\n\t}\n\n\t@Watch(\"activeStep\")\n\thandleActiveStep(newStep: number, oldStep: number) {\n\t\tconst steps = this.getSteps();\n\t\tif (!this.shouldEmitEvent) {\n\t\t\tthis.shouldEmitEvent = true;\n\t\t\treturn;\n\t\t}\n\t\t// Skipping until the enabled step is found\n\t\tif (steps[newStep - 1]) {\n\t\t\tif (!steps[newStep - 1].disabled) {\n\t\t\t\tthis.emitIfxChange(newStep, oldStep);\n\t\t\t} else {\n\t\t\t\t// If coming from higher step number to the lower step number\n\t\t\t\tif (newStep < oldStep) {\n\t\t\t\t\tlet i = newStep;\n\t\t\t\t\tthis.shouldEmitEvent = false;\n\t\t\t\t\twhile (i >= 1 && steps[i - 1].disabled) i--;\n\t\t\t\t\t// if all the steps are disabled no change.\n\t\t\t\t\tif (i < 1) {\n\t\t\t\t\t\tthis.activeStep = oldStep;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.emitIfxChange(i, oldStep);\n\t\t\t\t\t\tthis.activeStep = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If coming from lower step number to the higher step number\n\t\t\t\telse {\n\t\t\t\t\tlet i = newStep;\n\t\t\t\t\tthis.shouldEmitEvent = false;\n\t\t\t\t\twhile (i <= this.stepsCount && steps[i - 1].disabled) i++;\n\t\t\t\t\tif (i > this.stepsCount) {\n\t\t\t\t\t\tthis.activeStep = oldStep;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.emitIfxChange(i, oldStep);\n\t\t\t\t\t\tthis.activeStep = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\temitIfxChange(activeStep: number, previousActiveStep: number) {\n\t\tthis.ifxChange.emit({\n\t\t\tactiveStep: activeStep,\n\t\t\tpreviousActiveStep: previousActiveStep,\n\t\t\ttotalSteps: this.stepsCount,\n\t\t\temittedByClick: this.emittedByClick,\n\t\t});\n\t\tthis.emittedByClick = false;\n\t}\n\n\tgetSteps() {\n\t\tconst steps: NodeListOf<HTMLIfxStepElement> =\n\t\t\tthis.el.querySelectorAll(\"ifx-step\");\n\t\treturn steps;\n\t}\n\n\taddStepIdsToStepsAndCountSteps() {\n\t\tconst steps = this.getSteps();\n\t\tsteps[steps.length - 1].lastStep = true;\n\t\tfor (let i = 0; i < steps.length; i++) {\n\t\t\tsteps[i].stepId = i + 1;\n\t\t}\n\t\tthis.stepsCount = steps.length;\n\t}\n\n\tsetActiveStep(stepId: number, setByClick: boolean = false) {\n\t\tthis.emittedByClick = setByClick;\n\t\tthis.activeStep = stepId;\n\t}\n\n\tsetStepsBeforeActiveToComplete() {\n\t\tconst steps = this.getSteps();\n\t\tsteps.forEach((step, stepId) => {\n\t\t\tif (stepId + 1 < this.activeStep) step.complete = true;\n\t\t});\n\t}\n\n\tsyncIfxSteps() {\n\t\tconst steps = this.getSteps();\n\t\tfor (let i = 0; i < steps.length; i++) {\n\t\t\tconst stepperState: StepperState = {\n\t\t\t\tactiveStep: this.activeStep,\n\t\t\t\tindicatorPosition:\n\t\t\t\t\tthis.indicatorPosition !== \"right\" ? \"left\" : \"right\",\n\t\t\t\tshowStepNumber: this.showStepNumber,\n\t\t\t\tvariant:\n\t\t\t\t\tthis.variant !== \"compact\" && this.variant !== \"vertical\"\n\t\t\t\t\t\t? \"default\"\n\t\t\t\t\t\t: this.variant,\n\t\t\t\tsetActiveStep: this.setActiveStep.bind(this),\n\t\t\t};\n\t\t\tsteps[i].stepperState = stepperState;\n\t\t}\n\t}\n\n\tsetInitialActiveStep() {\n\t\tthis.activeStep = Math.max(\n\t\t\t1,\n\t\t\tMath.min(\n\t\t\t\tthis.stepsCount + (this.variant !== \"compact\" ? 1 : 0),\n\t\t\t\tthis.activeStep,\n\t\t\t),\n\t\t);\n\t}\n\n\tcomponentWillLoad() {\n\t\tthis.addStepIdsToStepsAndCountSteps();\n\t\tthis.setInitialActiveStep();\n\t\tthis.setStepsBeforeActiveToComplete();\n\t}\n\n\tasync componentDidLoad() {\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-stepper\", await framework);\n\t\t}\n\t\tthis.syncIfxSteps();\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.syncIfxSteps();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\taria-label={this.ariaLabel}\n\t\t\t\taria-current={this.ariaCurrent}\n\t\t\t\trole=\"navigation\"\n\t\t\t\tclass={`stepper ${this.variant !== \"compact\" && this.variant !== \"vertical\" ? \"default\" : this.variant} ${this.variant === \"compact\" ? \"compact-\" + this.indicatorPosition : \"\"}`}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\t/* Progress bar for compact variant. */\n\t\t\t\t\tthis.variant === \"compact\" && (\n\t\t\t\t\t\t<div class=\"stepper-progress\">\n\t\t\t\t\t\t\t<div class=\"progress-detail\">\n\t\t\t\t\t\t\t\t{`${Math.min(this.activeStep, this.stepsCount)} of ${this.stepsCount}`}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{/* Slot for ifx-steps. */}\n\t\t\t\t<div class={`stepper-wrapper`}>\n\t\t\t\t\t<slot />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidRender() {\n\t\t/* Updating progress bar in compact version. */\n\t\tif (this.variant == \"compact\") {\n\t\t\tconst progressBar: HTMLElement =\n\t\t\t\tthis.el.shadowRoot.querySelector(\".stepper-progress\");\n\t\t\tprogressBar.style.setProperty(\n\t\t\t\t\"--pb\",\n\t\t\t\t`${(this.activeStep / this.stepsCount) * 100}%`,\n\t\t\t);\n\t\t}\n\t}\n}\n"]}