{"version":3,"file":"switch.js","sourceRoot":"","sources":["../../../src/components/switch/switch.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tAttachInternals,\n\tComponent,\n\tElement,\n\tEvent,\n\ttype EventEmitter,\n\th,\n\tMethod,\n\tProp,\n\tWatch,\n} from \"@stencil/core\";\nimport { isNestedInIfxComponent } from \"../..//shared/utils/dom-utils\";\nimport { detectFramework } from \"../..//shared/utils/framework-detection\";\nimport { trackComponent } from \"../../shared/utils/tracking\";\n\n/**\n * A toggle switch component for binary on/off states.\n *\n * This component is form-associated, meaning it can participate in HTML forms\n * just like native form controls. It supports form validation, form reset,\n * and browser autofill/restore functionality.\n *\n *\n * Code organization follows the Stencil Style Guide:\n * https://stenciljs.com/docs/style-guide\n *\n * 1. Own Properties (internal, not exposed)\n * 2. @Element (reference to host)\n * 3. @State (internal reactive state)\n * 4. @Prop (public API properties)\n * 5. @Event (emitted events)\n * 6. Lifecycle methods\n * 7. @Listen decorators\n * 8. @Method (public methods)\n * 9. Private methods\n * 10. render()\n *\n * Framework Integration:\n * - Vue: Supports v-model binding on the 'checked' property\n * - Angular: Supports [(ngModel)] and reactive forms (formControl)\n * - React: Standard prop binding and event handling\n *\n * Configuration in stencil.config.ts enables framework-specific bindings.\n */\n@Component({\n\ttag: \"ifx-switch\",\n\tstyleUrl: \"switch.scss\",\n\tshadow: true,\n\tformAssociated: true,\n})\nexport class Switch {\n\t// 1. Own Properties - internal only, not exposed on host element\n\tprivate initialChecked: boolean;\n\n\t// 2. Reference to Host Element - used for shadow DOM queries and nesting checks\n\t@Element() el: HTMLIfxSwitchElement;\n\n\t// 3. State Variables - internal reactive state\n\t// (none - this component uses @Prop instead)\n\n\t// 4. Public Properties - exposed as both properties and attributes\n\n\t/**\n\t * Sets the checked state of the switch.\n\t * @default false\n\t */\n\t@Prop({ mutable: true }) checked: boolean = false;\n\n\t// @Watch goes right after the @Prop it monitors - keeps related code together\n\t@Watch(\"checked\")\n\tonCheckedChange(newValue: boolean, oldValue: boolean) {\n\t\tif (newValue !== oldValue) {\n\t\t\tthis.checked = newValue;\n\t\t\tthis.updateFormValue();\n\t\t}\n\t}\n\n\t/**\n\t * Disables user interaction when true.\n\t * @default false\n\t */\n\t@Prop() readonly disabled: boolean = false;\n\n\t/**\n\t * Form field name.\n\t * @default \"\"\n\t */\n\t@Prop() readonly name: string = \"\";\n\n\t/**\n\t * Form field value when checked.\n\t * If not set, defaults to \"on\" (standard checkbox behavior).\n\t * @default \"on\"\n\t */\n\t@Prop() readonly value: string = \"on\";\n\n\t// ElementInternals for form association - enables participation in HTML forms\n\t@AttachInternals() internals: ElementInternals;\n\n\t// 5. Events - custom events emitted by the component\n\n\t/**\n\t * Emitted when checked state changes.\n\t */\n\t@Event({ eventName: \"ifxChange\" }) ifxChange: EventEmitter<boolean>;\n\n\t// 6. Lifecycle Methods - ordered by execution flow\n\n\tcomponentWillLoad() {\n\t\t// Remember initial state for form reset\n\t\tthis.initialChecked = this.checked;\n\t\t// Set initial form value when component loads\n\t\tthis.updateFormValue();\n\t}\n\n\tasync componentDidLoad() {\n\t\t// Only track top-level components to avoid duplicate analytics\n\t\tif (!isNestedInIfxComponent(this.el)) {\n\t\t\tconst framework = detectFramework();\n\t\t\ttrackComponent(\"ifx-switch\", await framework);\n\t\t}\n\n\t\tthis.toggleLabelGap();\n\t}\n\n\t/**\n\t * Form-Associated Lifecycle Callbacks\n\t * ------------------------------------\n\t * These are called by the browser to integrate with native form behavior.\n\t * See: https://stenciljs.com/docs/form-associated\n\t *\n\t * Note: formAssociatedCallback and formDisabledCallback are not implemented\n\t * as they're not needed for this component. They would only be useful if we\n\t * needed to react to form association changes or support fieldset-level disabling.\n\t */\n\n\t/**\n\t * Called when the form is reset.\n\t * Resets the switch to its initial state and clears form value.\n\t */\n\tformResetCallback() {\n\t\tthis.checked = this.initialChecked;\n\t\tthis.updateFormValue();\n\t}\n\n\t/**\n\t * Called when the browser restores form state (e.g., browser autofill or back button).\n\t * @param state - The saved state to restore\n\t * @param mode - \"restore\" (browser restart/navigation) or \"autocomplete\" (autofill)\n\t */\n\tformStateRestoreCallback(\n\t\tstate: string | null,\n\t\t_mode: \"restore\" | \"autocomplete\",\n\t) {\n\t\tif (state) {\n\t\t\tthis.checked = true;\n\t\t\tthis.updateFormValue();\n\t\t} else {\n\t\t\tthis.checked = false;\n\t\t\tthis.internals.setFormValue(null);\n\t\t}\n\t}\n\n\t// 7. Listeners\n\t// (none - this component handles events inline in render)\n\n\t// 8. Public Methods - MUST be async, exposed on host element\n\n\t/**\n\t * Returns the current checked state.\n\t */\n\t@Method()\n\tasync isChecked(): Promise<boolean> {\n\t\treturn this.checked;\n\t}\n\n\t/**\n\t * Sets the checked state.\n\t * @param checked - New checked state.\n\t */\n\t@Method()\n\tasync setChecked(checked: boolean): Promise<void> {\n\t\tthis.checked = checked;\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Toggles the checked state.\n\t * @returns Resolves when the toggle is complete.\n\t */\n\t@Method()\n\tasync toggle(): Promise<boolean> {\n\t\treturn Promise.resolve(this.toggleSwitch());\n\t}\n\n\t// 9. Private Methods - internal helpers, not callable externally\n\n\tprivate handleKeyDown(event: KeyboardEvent): void {\n\t\tif (this.disabled) return;\n\n\t\tif (event.key === \"Enter\" || event.key === \" \") {\n\t\t\tthis.toggleSwitch();\n\t\t}\n\t}\n\n\tprivate toggleSwitch(): boolean {\n\t\tif (this.disabled) return;\n\n\t\tthis.checked = !this.checked;\n\t\tthis.updateFormValue();\n\t\tthis.ifxChange.emit(this.checked);\n\n\t\treturn this.checked;\n\t}\n\n\t/**\n\t * Updates the form value based on the current checked state.\n\t * Called whenever checked state changes to keep form data in sync.\n\t */\n\tprivate updateFormValue(): void {\n\t\tif (this.checked) {\n\t\t\tthis.internals.setFormValue(this.value);\n\t\t} else {\n\t\t\tthis.internals.setFormValue(null);\n\t\t}\n\t}\n\n\tprivate toggleLabelGap(): void {\n\t\tconst slot = this.el.shadowRoot.querySelector(\"slot\");\n\t\tconst container = this.el.shadowRoot.querySelector(\".container\");\n\n\t\tif (slot.assignedNodes().length) {\n\t\t\tcontainer.classList.add(\"gap\");\n\t\t} else {\n\t\t\tcontainer.classList.remove(\"gap\");\n\t\t}\n\t}\n\n\t// 10. render() - always last, called when state/props change\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclass=\"container\"\n\t\t\t\trole=\"switch\"\n\t\t\t\taria-checked={this.checked ? \"true\" : \"false\"}\n\t\t\t\taria-disabled={this.disabled ? \"true\" : \"false\"}\n\t\t\t\taria-labelledby=\"switch-label\"\n\t\t\t\ttabIndex={this.disabled ? -1 : 0}\n\t\t\t\tonClick={() => this.toggleSwitch()}\n\t\t\t\tonKeyDown={(event) => this.handleKeyDown(event)}\n\t\t\t>\n\t\t\t\t{/* Checkbox */}\n\t\t\t\t<div\n\t\t\t\t\tclass={`switch__checkbox-container ${this.checked ? \"checked\" : \"\"} ${this.disabled ? \"disabled\" : \"\"}`}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"switch__checkbox-wrapper\">\n\t\t\t\t\t\t{/*\n\t\t\t\t\t\t * The behavior of a switch is similar to a checkbox.\n\t\t\t\t\t\t * Therefore, we use a hidden checkbox input to leverage native behavior.\n\t\t\t\t\t\t */}\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\tname={this.name}\n\t\t\t\t\t\t\tdisabled={this.disabled}\n\t\t\t\t\t\t\tchecked={this.checked}\n\t\t\t\t\t\t\tvalue={this.value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={`switch ${this.checked ? \"checked\" : \"\"} ${this.disabled ? \"disabled\" : \"\"}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Label */}\n\t\t\t\t<div class={`switch__label-wrapper ${this.disabled ? \"disabled\" : \"\"}`}>\n\t\t\t\t\t<label htmlFor=\"switch\">\n\t\t\t\t\t\t<slot onSlotchange={() => this.toggleLabelGap()} />\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}